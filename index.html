
<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta content="IE=edge,chrome=1" http-equiv="X-UA-Compatible">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <title>API Dátil</title>

    <style>
      .highlight table td { padding: 5px; }
.highlight table pre { margin: 0; }
.highlight .gh {
  color: #999999;
}
.highlight .sr {
  color: #f6aa11;
}
.highlight .go {
  color: #888888;
}
.highlight .gp {
  color: #555555;
}
.highlight .gs {
}
.highlight .gu {
  color: #aaaaaa;
}
.highlight .nb {
  color: #f6aa11;
}
.highlight .cm {
  color: #75715e;
}
.highlight .cp {
  color: #75715e;
}
.highlight .c1 {
  color: #75715e;
}
.highlight .cs {
  color: #75715e;
}
.highlight .c, .highlight .cd {
  color: #75715e;
}
.highlight .err {
  color: #960050;
}
.highlight .gr {
  color: #960050;
}
.highlight .gt {
  color: #960050;
}
.highlight .gd {
  color: #49483e;
}
.highlight .gi {
  color: #49483e;
}
.highlight .ge {
  color: #49483e;
}
.highlight .kc {
  color: #66d9ef;
}
.highlight .kd {
  color: #66d9ef;
}
.highlight .kr {
  color: #66d9ef;
}
.highlight .no {
  color: #66d9ef;
}
.highlight .kt {
  color: #66d9ef;
}
.highlight .mf {
  color: #ae81ff;
}
.highlight .mh {
  color: #ae81ff;
}
.highlight .il {
  color: #ae81ff;
}
.highlight .mi {
  color: #ae81ff;
}
.highlight .mo {
  color: #ae81ff;
}
.highlight .m, .highlight .mb, .highlight .mx {
  color: #ae81ff;
}
.highlight .sc {
  color: #ae81ff;
}
.highlight .se {
  color: #ae81ff;
}
.highlight .ss {
  color: #ae81ff;
}
.highlight .sd {
  color: #e6db74;
}
.highlight .s2 {
  color: #e6db74;
}
.highlight .sb {
  color: #e6db74;
}
.highlight .sh {
  color: #e6db74;
}
.highlight .si {
  color: #e6db74;
}
.highlight .sx {
  color: #e6db74;
}
.highlight .s1 {
  color: #e6db74;
}
.highlight .s {
  color: #e6db74;
}
.highlight .na {
  color: #a6e22e;
}
.highlight .nc {
  color: #a6e22e;
}
.highlight .nd {
  color: #a6e22e;
}
.highlight .ne {
  color: #a6e22e;
}
.highlight .nf {
  color: #a6e22e;
}
.highlight .vc {
  color: #ffffff;
}
.highlight .nn {
  color: #ffffff;
}
.highlight .nl {
  color: #ffffff;
}
.highlight .ni {
  color: #ffffff;
}
.highlight .bp {
  color: #ffffff;
}
.highlight .vg {
  color: #ffffff;
}
.highlight .vi {
  color: #ffffff;
}
.highlight .nv {
  color: #ffffff;
}
.highlight .w {
  color: #ffffff;
}
.highlight {
  color: #ffffff;
}
.highlight .n, .highlight .py, .highlight .nx {
  color: #ffffff;
}
.highlight .ow {
  color: #f92672;
}
.highlight .nt {
  color: #f92672;
}
.highlight .k, .highlight .kv {
  color: #f92672;
}
.highlight .kn {
  color: #f92672;
}
.highlight .kp {
  color: #f92672;
}
.highlight .o {
  color: #f92672;
}
    </style>
    <link href="stylesheets/screen-611b0914.css" rel="stylesheet" media="screen" />
    <link href="stylesheets/print-bccf8c07.css" rel="stylesheet" media="print" />
      <script src="javascripts/all-c5541673.js"></script>
  </head>

  <body class="index" data-languages="[&quot;shell&quot;,&quot;python&quot;,&quot;csharp&quot;]">
    <a href="#" id="nav-button">
      <span>
        NAV
        <img src="images/navbar-cad8cdcb.png" alt="Navbar" />
      </span>
    </a>
    <div class="toc-wrapper">
      <img src="images/logo-4c73dfe1.png" class="logo" alt="Logo" />
        <div class="lang-selector">
              <a href="#" data-language-name="shell">cURL</a>
              <a href="#" data-language-name="python">Python</a>
              <a href="#" data-language-name="csharp">C#</a>
        </div>
        <div class="search">
          <input type="text" class="search" id="input-search" placeholder="">
        </div>
        <ul class="search-results"></ul>
      <ul id="toc" class="toc-list-h1">
          <li>
            <a href="#introduccion" class="toc-h1 toc-link" data-title="Introducción">Introducción</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#operaciones" class="toc-h2 toc-link" data-title="Operaciones">Operaciones</a>
                  </li>
                  <li>
                    <a href="#proceso-de-emision" class="toc-h2 toc-link" data-title="Proceso de emisión">Proceso de emisión</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#autenticacion" class="toc-h1 toc-link" data-title="Autenticación">Autenticación</a>
          </li>
          <li>
            <a href="#facturas" class="toc-h1 toc-link" data-title="Facturas">Facturas</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#emision-de-una-factura" class="toc-h2 toc-link" data-title="Emisión de una factura">Emisión de una factura</a>
                  </li>
                  <li>
                    <a href="#emision-de-una-factura-a-partir-de-xml" class="toc-h2 toc-link" data-title="Emisión de una factura a partir de XML">Emisión de una factura a partir de XML</a>
                  </li>
                  <li>
                    <a href="#emision-de-una-factura-de-reembolso" class="toc-h2 toc-link" data-title="Emisión de una factura de reembolso">Emisión de una factura de reembolso</a>
                  </li>
                  <li>
                    <a href="#consulta-de-una-factura" class="toc-h2 toc-link" data-title="Consulta de una factura">Consulta de una factura</a>
                  </li>
                  <li>
                    <a href="#consulta-de-una-factura-de-reembolso" class="toc-h2 toc-link" data-title="Consulta de una factura de reembolso">Consulta de una factura de reembolso</a>
                  </li>
                  <li>
                    <a href="#re-emision-de-una-factura" class="toc-h2 toc-link" data-title="Re-emisión de una factura">Re-emisión de una factura</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#notas-de-credito" class="toc-h1 toc-link" data-title="Notas de Crédito">Notas de Crédito</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#emision-de-una-nota-de-credito" class="toc-h2 toc-link" data-title="Emisión de una nota de crédito">Emisión de una nota de crédito</a>
                  </li>
                  <li>
                    <a href="#emision-de-una-nota-de-credito-a-partir-de-xml" class="toc-h2 toc-link" data-title="Emisión de una nota de crédito a partir de XML">Emisión de una nota de crédito a partir de XML</a>
                  </li>
                  <li>
                    <a href="#consulta-de-una-nota-de-credito" class="toc-h2 toc-link" data-title="Consulta de una nota de crédito">Consulta de una nota de crédito</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#comprobantes-de-retencion" class="toc-h1 toc-link" data-title="Comprobantes de Retención">Comprobantes de Retención</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#emision-de-una-retencion" class="toc-h2 toc-link" data-title="Emisión de una retención">Emisión de una retención</a>
                  </li>
                  <li>
                    <a href="#emision-de-retenciones-a-partir-de-xml" class="toc-h2 toc-link" data-title="Emisión de retenciones a partir de XML">Emisión de retenciones a partir de XML</a>
                  </li>
                  <li>
                    <a href="#consulta-de-un-comprobante-de-retencion" class="toc-h2 toc-link" data-title="Consulta de un Comprobante de Retención">Consulta de un Comprobante de Retención</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#guias-de-remision" class="toc-h1 toc-link" data-title="Guías de Remisión">Guías de Remisión</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#emision-de-una-guia-de-remision" class="toc-h2 toc-link" data-title="Emisión de una guía de remisión">Emisión de una guía de remisión</a>
                  </li>
                  <li>
                    <a href="#emision-de-una-guia-de-remision-a-partir-de-xml" class="toc-h2 toc-link" data-title="Emisión de una guia de remisión a partir de XML">Emisión de una guia de remisión a partir de XML</a>
                  </li>
                  <li>
                    <a href="#consulta-de-una-guia-de-remision" class="toc-h2 toc-link" data-title="Consulta de una guía de remisión">Consulta de una guía de remisión</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#notas-de-debito" class="toc-h1 toc-link" data-title="Notas de Débito">Notas de Débito</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#emision-de-una-nota-de-debito" class="toc-h2 toc-link" data-title="Emisión de una nota de débito">Emisión de una nota de débito</a>
                  </li>
                  <li>
                    <a href="#emision-de-una-nota-de-debito-a-partir-de-xml" class="toc-h2 toc-link" data-title="Emisión de una nota de débito a partir de XML">Emisión de una nota de débito a partir de XML</a>
                  </li>
                  <li>
                    <a href="#consulta-de-una-nota-de-debito" class="toc-h2 toc-link" data-title="Consulta de una nota de débito">Consulta de una nota de débito</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#liquidaciones-de-compras" class="toc-h1 toc-link" data-title="Liquidaciones de compras">Liquidaciones de compras</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#emision-de-una-liquidacion-de-compras" class="toc-h2 toc-link" data-title="Emisión de una liquidación de compras">Emisión de una liquidación de compras</a>
                  </li>
                  <li>
                    <a href="#emision-de-una-liquidacion-de-compra-a-partir-de-xml" class="toc-h2 toc-link" data-title="Emisión de una liquidación de compra a partir de XML">Emisión de una liquidación de compra a partir de XML</a>
                  </li>
                  <li>
                    <a href="#emision-de-una-liquidacion-de-compras-de-reembolso" class="toc-h2 toc-link" data-title="Emisión de una liquidación de compras de reembolso">Emisión de una liquidación de compras de reembolso</a>
                  </li>
                  <li>
                    <a href="#consulta-de-una-liquidacion-de-compra" class="toc-h2 toc-link" data-title="Consulta de una liquidación de compra">Consulta de una liquidación de compra</a>
                  </li>
                  <li>
                    <a href="#consulta-de-una-liquidacion-de-compra-de-reembolso" class="toc-h2 toc-link" data-title="Consulta de una liquidación de compra de reembolso">Consulta de una liquidación de compra de reembolso</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#consulta-de-autorizacion" class="toc-h1 toc-link" data-title="Consulta de autorización">Consulta de autorización</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#consulta-comprobante-op" class="toc-h2 toc-link" data-title="Operación">Operación</a>
                  </li>
                  <li>
                    <a href="#consulta-comprobante-requerimiento" class="toc-h2 toc-link" data-title="Requerimiento">Requerimiento</a>
                  </li>
                  <li>
                    <a href="#consulta-comprobante-respuesta" class="toc-h2 toc-link" data-title="Respuesta">Respuesta</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#descarga-de-comprobantes" class="toc-h1 toc-link" data-title="Descarga de comprobantes">Descarga de comprobantes</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#consulta-de-ride" class="toc-h2 toc-link" data-title="Consulta de RIDE">Consulta de RIDE</a>
                  </li>
                  <li>
                    <a href="#consulta-de-xml" class="toc-h2 toc-link" data-title="Consulta de XML">Consulta de XML</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#objetos-comunes" class="toc-h1 toc-link" data-title="Objetos comunes">Objetos comunes</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#clave-de-acceso" class="toc-h2 toc-link" data-title="Clave de acceso">Clave de acceso</a>
                  </li>
                  <li>
                    <a href="#emisor" class="toc-h2 toc-link" data-title="Emisor">Emisor</a>
                  </li>
                  <li>
                    <a href="#establecimiento" class="toc-h2 toc-link" data-title="Establecimiento">Establecimiento</a>
                  </li>
                  <li>
                    <a href="#maquina-fiscal" class="toc-h2 toc-link" data-title="Máquina fiscal">Máquina fiscal</a>
                  </li>
                  <li>
                    <a href="#reembolso" class="toc-h2 toc-link" data-title="Reembolso">Reembolso</a>
                  </li>
                  <li>
                    <a href="#documento" class="toc-h2 toc-link" data-title="Documento">Documento</a>
                  </li>
                  <li>
                    <a href="#info-adicional" class="toc-h2 toc-link" data-title="Info adicional">Info adicional</a>
                  </li>
                  <li>
                    <a href="#persona" class="toc-h2 toc-link" data-title="Persona">Persona</a>
                  </li>
                  <li>
                    <a href="#total-impuesto" class="toc-h2 toc-link" data-title="Total Impuesto">Total Impuesto</a>
                  </li>
                  <li>
                    <a href="#impuesto-item" class="toc-h2 toc-link" data-title="Impuesto Item">Impuesto Item</a>
                  </li>
                  <li>
                    <a href="#envio-sri" class="toc-h2 toc-link" data-title="Envío SRI">Envío SRI</a>
                  </li>
                  <li>
                    <a href="#autorizacion-sri" class="toc-h2 toc-link" data-title="Autorización SRI">Autorización SRI</a>
                  </li>
                  <li>
                    <a href="#mensajes-de-respuesta-sri" class="toc-h2 toc-link" data-title="Mensajes de respuesta SRI">Mensajes de respuesta SRI</a>
                  </li>
                  <li>
                    <a href="#item-de-factura" class="toc-h2 toc-link" data-title="Item de factura, nota de crédito y liquidación de compras">Item de factura, nota de crédito y liquidación de compras</a>
                  </li>
                  <li>
                    <a href="#retencion-de-factura" class="toc-h2 toc-link" data-title="Retención en factura ">Retención en factura </a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#catalogo" class="toc-h1 toc-link" data-title="Catálogo">Catálogo</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#tipo-de-identificacion" class="toc-h2 toc-link" data-title="Tipo de identificación">Tipo de identificación</a>
                  </li>
                  <li>
                    <a href="#tipos-de-impuesto" class="toc-h2 toc-link" data-title="Tipos de impuesto">Tipos de impuesto</a>
                  </li>
                  <li>
                    <a href="#codigo-de-porcentaje-de-iva" class="toc-h2 toc-link" data-title="Código de Porcentaje de IVA">Código de Porcentaje de IVA</a>
                  </li>
                  <li>
                    <a href="#tipos-de-impuesto-para-la-retencion" class="toc-h2 toc-link" data-title="Tipos de impuesto para la retención">Tipos de impuesto para la retención</a>
                  </li>
                  <li>
                    <a href="#tipos-de-impuesto-para-la-retencion-en-la-factura" class="toc-h2 toc-link" data-title="Tipos de impuesto para la retención en la factura">Tipos de impuesto para la retención en la factura</a>
                  </li>
                  <li>
                    <a href="#retencion-de-iva" class="toc-h2 toc-link" data-title="Retención de IVA">Retención de IVA</a>
                  </li>
                  <li>
                    <a href="#retencion-isd" class="toc-h2 toc-link" data-title="Retención ISD">Retención ISD</a>
                  </li>
                  <li>
                    <a href="#retencion-a-la-fuente-renta" class="toc-h2 toc-link" data-title="Retención a la Fuente (Renta)">Retención a la Fuente (Renta)</a>
                  </li>
                  <li>
                    <a href="#retencion-de-iva-presuntivo-y-renta" class="toc-h2 toc-link" data-title="Retención de IVA Presuntivo y Renta">Retención de IVA Presuntivo y Renta</a>
                  </li>
                  <li>
                    <a href="#tipos-de-documentos" class="toc-h2 toc-link" data-title="Tipos de documentos">Tipos de documentos</a>
                  </li>
                  <li>
                    <a href="#tipos-de-forma-de-pago" class="toc-h2 toc-link" data-title="Tipos de forma de pago">Tipos de forma de pago</a>
                  </li>
                  <li>
                    <a href="#tipos-de-forma-de-pago-del-sri" class="toc-h2 toc-link" data-title="Tipos de forma de pago del SRI">Tipos de forma de pago del SRI</a>
                  </li>
                  <li>
                    <a href="#equivalencia-entre-formas-de-pago-datil-y-formas-de-pago-del-sri" class="toc-h2 toc-link" data-title="Equivalencia entre formas de pago Dátil y formas de pago del SRI">Equivalencia entre formas de pago Dátil y formas de pago del SRI</a>
                  </li>
                  <li>
                    <a href="#tipo-de-proveedor" class="toc-h2 toc-link" data-title="Tipo de proveedor">Tipo de proveedor</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#errores" class="toc-h1 toc-link" data-title="Errores">Errores</a>
          </li>
          <li>
            <a href="#notificaciones" class="toc-h1 toc-link" data-title="Notificaciones">Notificaciones</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#suscripcion" class="toc-h2 toc-link" data-title="Suscripción">Suscripción</a>
                  </li>
                  <li>
                    <a href="#eventos" class="toc-h2 toc-link" data-title="Eventos">Eventos</a>
                  </li>
              </ul>
          </li>
      </ul>
        <ul class="toc-footer">
            <li><a href='#'>Para obtener mi clave del API</a></li>
            <li><a href='http://github.com/tripit/slate'>Documentación gracias a Slate</a></li>
        </ul>
    </div>
    <div class="page-wrapper">
      <div class="dark-box"></div>
      <div class="content">
        <h1 id='introduccion'>Introducción</h1>
<p>Integra tu aplicación con Facturación Electrónica. Este API de Dátil te permite
emitir todos los tipos de comprobantes electrónicos: facturas, retenciones, notas de crédito, notas de débito y guías de remisión.</p>

<p>El API de Dátil está diseñado como un servicio web <a href="http://en.wikipedia.org/wiki/Representational_State_Transfer">REST</a>.
De esta manera resulta sencillo conversar con nuestra interfaz utilizando cualquier
librería en cualquier lenguaje que provea un cliente HTTP, ya que utilizamos
componentes del estándar como los verbos y los códigos de respuesta.</p>

<p>Todos las operaciones responden en formato <a href="http://www.json.org/">JSON</a>,
incluso los errores.</p>

<p>Dátil se encarga de todo el proceso de emisión del comprobante. El proceso de
emisión bajo condiciones normales, toma entre 3 a 5 segundos. Luego de ese período
bastará con consultar el comprobante para conocer su estado.</p>
<h2 id='operaciones'>Operaciones</h2>
<p>Una operación REST está formada por la combinación de un verbo HTTP, la URL base
del servicio y la ruta de la operación. Las cuales se encuentran descritas en cada
sección donde se describe una función del API. Esta operación, por ejemplo, emite
una factura:</p>

<p><code>POST https://link.datil.co/invoices/issue</code></p>

<p>La URI anterior en conjunto con la información en formato JSON como cuerpo del
requerimiento y las cabeceras HTTP necesarias, conforman el requerimiento.</p>
<h2 id='proceso-de-emision'>Proceso de emisión</h2>
<p>Comprende las siguientes fases:</p>

<ol>
<li><strong>Creación</strong>: Se registra el comprobante para posterior referencia.</li>
<li><strong>Firmado</strong>: Utilizando el certificado de firma electrónica y un algoritmo de firma digital,
el comprobante es firmado para que el SRI pueda verificar su legitimidad.</li>
<li><strong>Envío SRI</strong>: El comprobante es enviado al SRI para ser procesado.</li>
<li><strong>Consulta de autorización SRI</strong>: Luego de un período de espera, Dátil consulta la
autorización del comprobante.</li>
<li><strong>Envío por email</strong>: Se envía el comprobante al correo del receptor del comprobante, si una dirección de correo electrónico válida fue provista al momento de emitir el comprobante.</li>
</ol>

<aside class="notice">
<strong>Recuerda:</strong> Este proceso es administrado completamente por nosotros y para
emitir un comprobante bastará enviarlo siguiendo la sección pertinente de esta
documentación.
</aside>
<h1 id='autenticacion'>Autenticación</h1>
<p>Para obtener la clave del API, inicia sesión con tu cuenta en
<a href="https://app.datil.co">app.datil.co</a>, ve a la opción <em>Configuración</em> la
sección &quot;API Key&quot;.</p>

<p><img src="https://s3-us-west-2.amazonaws.com/static-files/datil-py-blurred-api-key.png"></p>

<p>Dátil utiliza claves para autorizar el acceso al API. La clave debe estar
incluída en todos los requerimientos en una cabecera:</p>

<p><code>X-Key: &lt;clave-del-api&gt;</code></p>

<p>Para emitir o re-emitir un comprobante se requiere también la clave del certificado
de firma electrónica. Esta clave deberá ser provista en una cabecera:</p>

<p><code>X-Password: &lt;clave-certificado-firma&gt;</code></p>
<h1 id='facturas'>Facturas</h1><h2 id='emision-de-una-factura'>Emisión de una factura</h2><h3 id='operacion'>Operación</h3>
<p><code>POST /invoices/issue</code></p>
<h3 id='requerimiento'>Requerimiento</h3>
<blockquote>
<h4 id='requerimiento-de-ejemplo'>Requerimiento de ejemplo</h4></blockquote>
<pre class="highlight shell tab-shell"><code>curl -v https://link.datil.co/invoices/issue <span class="se">\</span>
-H <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
-H <span class="s2">"X-Key: &lt;API-key&gt;"</span> <span class="se">\</span>
-H <span class="s2">"X-Password: &lt;clave-certificado-firma&gt;"</span> <span class="se">\</span>
-d <span class="s1">'{
  "ambiente":1,
  "tipo_emision":1,
  "secuencial":148,
  "fecha_emision":"2019-10-28T11:28:56.782Z",
  "emisor":{
    "ruc":"0910000000001",
    "obligado_contabilidad": true,
    "contribuyente_especial":"12345",
    "nombre_comercial":"XYZ Corp",
    "razon_social":"XYZ Corporación S.A.",
    "direccion":"Av. Primera 234 y calle 5ta",
    "establecimiento":{
      "punto_emision":"002",
      "codigo":"001",
      "direccion":"Av. Primera 234 y calle 5ta"
    }
  },
  "moneda":"USD",
  "info_adicional":[
    {
      "nombre": "Tiempo de entrega",
      "valor": "5 días"
    }
  ],
  "totales":{
    "total_sin_impuestos":4359.54,
    "impuestos":[
      {
        "base_imponible":4359.54,
        "valor":523.14,
        "codigo":"2",
        "codigo_porcentaje":"2"
      }
    ],
    "importe_total":4882.68,
    "propina":0.0,
    "descuento":0.0
  },
  "comprador":{
    "email":"juan.perez@xyz.com",
    "identificacion":"0987654321",
    "tipo_identificacion":"05",
    "razon_social":"Juan Pérez",
    "direccion":"Calle única Numero 987",
    "telefono":"046029400"
  },
  "items":[
    {
      "cantidad":622.0,
      "codigo_principal": "ZNC",
      "codigo_auxiliar": "050",
      "precio_unitario": 7.008907,
      "descuento": 0,
      "descripcion": "Zanahoria granel  50 Kg.",
      "precio_total_sin_impuestos": 4359.54,
      "impuestos": [
        {
          "base_imponible":4359.54,
          "valor":523.14,
          "tarifa":12.0,
          "codigo":"2",
          "codigo_porcentaje":"2"
        }
      ],
      "detalles_adicionales": {
        "Peso":"5000.0000"
      },
      "descuento": 0.0,
      "unidad_medida": "Kilos"
    }
  ],
  "valor_retenido_iva": 70.40,
  "valor_retenido_renta": 29.60,
  "credito": {
    "fecha_vencimiento": "2019-12-31",
    "monto": 1900.00
  },
  "pagos": [
    {
      "medio": "cheque",
      "total": 2882.68,
      "propiedades": {
        "numero": "1234567890",
        "banco": "Banco Pacífico"
      },
      "notas": "Depositado en cuenta corriente"
    }
  ],
  "exportacion": {
    "incoterm": {
      "termino": "CIF",
      "lugar": "Guayaquil",
      "total_sin_impuestos": "CIF"
    },
    "origen": {
      "codigo_pais":"EC",
      "puerto": "Guayaquil"
    },
    "destino": {
      "codigo_pais":"CN",
      "puerto": "China"
    },
    "codigo_pais_adquisicion": "EC",
    "totales": {
      "flete_internacional": 1000.00,
      "seguro_internacional": 200.00,
      "gastos_aduaneros": 800,
      "otros_gastos_transporte": 350.00
    }
  }
}'</span>
</code></pre><pre class="highlight python tab-python"><code><span class="kn">import</span> <span class="nn">requests</span><span class="p">,</span> <span class="n">json</span>

<span class="n">factura</span> <span class="o">=</span> <span class="p">{</span>
  <span class="s">"ambiente"</span><span class="p">:</span><span class="mi">1</span><span class="p">,</span>
  <span class="s">"tipo_emision"</span><span class="p">:</span><span class="mi">1</span><span class="p">,</span>
  <span class="s">"secuencial"</span><span class="p">:</span><span class="mi">148</span><span class="p">,</span>
  <span class="s">"fecha_emision"</span><span class="p">:</span><span class="s">"2019-10-28T11:28:56.782Z"</span><span class="p">,</span>
  <span class="s">"emisor"</span><span class="p">:{</span>
    <span class="s">"ruc"</span><span class="p">:</span><span class="s">"0910000000001"</span><span class="p">,</span>
    <span class="s">"obligado_contabilidad"</span><span class="p">:</span><span class="bp">True</span><span class="p">,</span>
    <span class="s">"contribuyente_especial"</span><span class="p">:</span><span class="s">"12345"</span><span class="p">,</span>
    <span class="s">"nombre_comercial"</span><span class="p">:</span><span class="s">"XYZ Corp"</span><span class="p">,</span>
    <span class="s">"razon_social"</span><span class="p">:</span><span class="s">"XYZ Corporación S.A."</span><span class="p">,</span>
    <span class="s">"direccion"</span><span class="p">:</span><span class="s">"Av. Primera 234 y calle 5ta"</span><span class="p">,</span>
    <span class="s">"establecimiento"</span><span class="p">:{</span>
      <span class="s">"punto_emision"</span><span class="p">:</span><span class="s">"002"</span><span class="p">,</span>
      <span class="s">"codigo"</span><span class="p">:</span><span class="s">"001"</span><span class="p">,</span>
      <span class="s">"direccion"</span><span class="p">:</span><span class="s">"Av. Primera 234 y calle 5ta"</span>
    <span class="p">}</span>
  <span class="p">},</span>
  <span class="s">"moneda"</span><span class="p">:</span><span class="s">"USD"</span><span class="p">,</span>
  <span class="s">"info_adicional"</span><span class="p">:[</span>
    <span class="p">{</span>
      <span class="s">"nombre"</span><span class="p">:</span><span class="s">"Tiempo de entrega"</span><span class="p">,</span>
      <span class="s">"valor"</span><span class="p">:</span><span class="s">"5 días"</span>
    <span class="p">}</span>
  <span class="p">],</span>
  <span class="s">"totales"</span><span class="p">:{</span>
    <span class="s">"total_sin_impuestos"</span><span class="p">:</span><span class="mf">4359.54</span><span class="p">,</span>
    <span class="s">"impuestos"</span><span class="p">:[</span>
      <span class="p">{</span>
        <span class="s">"base_imponible"</span><span class="p">:</span><span class="mf">4359.54</span><span class="p">,</span>
        <span class="s">"valor"</span><span class="p">:</span><span class="mf">523.14</span><span class="p">,</span>
        <span class="s">"codigo"</span><span class="p">:</span><span class="s">"2"</span><span class="p">,</span>
        <span class="s">"codigo_porcentaje"</span><span class="p">:</span><span class="s">"2"</span>
      <span class="p">}</span>
    <span class="p">],</span>
    <span class="s">"importe_total"</span><span class="p">:</span><span class="mf">4882.68</span><span class="p">,</span>
    <span class="s">"propina"</span><span class="p">:</span><span class="mf">0.0</span><span class="p">,</span>
    <span class="s">"descuento"</span><span class="p">:</span><span class="mf">0.0</span>
  <span class="p">},</span>
  <span class="s">"comprador"</span><span class="p">:{</span>
    <span class="s">"email"</span><span class="p">:</span><span class="s">"juan.perez@xyz.com"</span><span class="p">,</span>
    <span class="s">"identificacion"</span><span class="p">:</span><span class="s">"0987654321"</span><span class="p">,</span>
    <span class="s">"tipo_identificacion"</span><span class="p">:</span><span class="s">"05"</span><span class="p">,</span>
    <span class="s">"razon_social"</span><span class="p">:</span><span class="s">"Juan Pérez"</span><span class="p">,</span>
    <span class="s">"direccion"</span><span class="p">:</span><span class="s">"Calle única Numero 987"</span><span class="p">,</span>
    <span class="s">"telefono"</span><span class="p">:</span><span class="s">"046029400"</span>
  <span class="p">},</span>
  <span class="s">"items"</span><span class="p">:[</span>
    <span class="p">{</span>
      <span class="s">"cantidad"</span><span class="p">:</span><span class="mf">622.0</span><span class="p">,</span>
      <span class="s">"codigo_principal"</span><span class="p">:</span><span class="s">"ZNC"</span><span class="p">,</span>
      <span class="s">"codigo_auxiliar"</span><span class="p">:</span> <span class="s">"050"</span><span class="p">,</span>
      <span class="s">"precio_unitario"</span><span class="p">:</span> <span class="mf">7.008907</span><span class="p">,</span>
      <span class="s">"descuento"</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span>
      <span class="s">"descripcion"</span><span class="p">:</span> <span class="s">"Zanahoria granel  50 Kg."</span><span class="p">,</span>
      <span class="s">"precio_total_sin_impuestos"</span><span class="p">:</span> <span class="mf">4359.54</span><span class="p">,</span>
      <span class="s">"impuestos"</span><span class="p">:</span> <span class="p">[</span>
        <span class="p">{</span>
          <span class="s">"base_imponible"</span><span class="p">:</span><span class="mf">4359.54</span><span class="p">,</span>
          <span class="s">"valor"</span><span class="p">:</span><span class="mf">523.14</span><span class="p">,</span>
          <span class="s">"tarifa"</span><span class="p">:</span><span class="mf">12.0</span><span class="p">,</span>
          <span class="s">"codigo"</span><span class="p">:</span><span class="s">"2"</span><span class="p">,</span>
          <span class="s">"codigo_porcentaje"</span><span class="p">:</span><span class="s">"2"</span>
        <span class="p">}</span>
      <span class="p">],</span>
      <span class="s">"detalles_adicionales"</span><span class="p">:</span> <span class="p">{</span>
        <span class="s">"Peso"</span><span class="p">:</span><span class="s">"5000.0000"</span>
      <span class="p">},</span>
      <span class="s">"descuento"</span><span class="p">:</span> <span class="mf">0.0</span><span class="p">,</span>
      <span class="s">"unidad_medida"</span><span class="p">:</span> <span class="s">"Kilos"</span>
    <span class="p">}</span>
  <span class="p">],</span>
  <span class="s">"valor_retenido_iva"</span><span class="p">:</span> <span class="mf">70.40</span><span class="p">,</span>
  <span class="s">"valor_retenido_renta"</span><span class="p">:</span> <span class="mf">29.60</span><span class="p">,</span>
  <span class="s">"credito"</span><span class="p">:</span> <span class="p">{</span>
    <span class="s">"fecha_vencimiento"</span><span class="p">:</span> <span class="s">"2019-12-28"</span><span class="p">,</span>
    <span class="s">"monto"</span><span class="p">:</span> <span class="mf">1900.00</span>
  <span class="p">},</span>
  <span class="s">"pagos"</span><span class="p">:</span> <span class="p">[</span>
    <span class="p">{</span>
      <span class="s">"medio"</span><span class="p">:</span> <span class="s">"cheque"</span><span class="p">,</span>
      <span class="s">"total"</span><span class="p">:</span> <span class="mf">2882.68</span><span class="p">,</span>
      <span class="s">"notas"</span><span class="p">:</span> <span class="s">"Depositado en cuenta corriente"</span><span class="p">,</span>
      <span class="s">"propiedades"</span><span class="p">:</span> <span class="p">{</span>
        <span class="s">"numero"</span><span class="p">:</span> <span class="s">"1234567890"</span><span class="p">,</span>
        <span class="s">"banco"</span><span class="p">:</span> <span class="s">"Banco Pacífico"</span>
      <span class="p">}</span>
    <span class="p">}</span>
  <span class="p">],</span>
  <span class="s">"exportacion"</span><span class="p">:</span> <span class="p">{</span>
    <span class="s">"incoterm"</span><span class="p">:</span> <span class="p">{</span>
      <span class="s">"termino"</span><span class="p">:</span> <span class="s">"CIF"</span><span class="p">,</span>
      <span class="s">"lugar"</span><span class="p">:</span> <span class="s">"Guayaquil"</span><span class="p">,</span>
      <span class="s">"total_sin_impuestos"</span><span class="p">:</span> <span class="s">"CIF"</span>
    <span class="p">},</span>
    <span class="s">"origen"</span><span class="p">:</span> <span class="p">{</span>
      <span class="s">"codigo_pais"</span><span class="p">:</span><span class="s">"EC"</span><span class="p">,</span>
      <span class="s">"puerto"</span><span class="p">:</span> <span class="s">"Guayaquil"</span>
    <span class="p">},</span>
    <span class="s">"destino"</span><span class="p">:</span> <span class="p">{</span>
      <span class="s">"codigo_pais"</span><span class="p">:</span><span class="s">"CN"</span><span class="p">,</span>
      <span class="s">"puerto"</span><span class="p">:</span> <span class="s">"China"</span>
    <span class="p">},</span>
    <span class="s">"codigo_pais_adquisicion"</span><span class="p">:</span> <span class="s">"EC"</span><span class="p">,</span>
    <span class="s">"totales"</span><span class="p">:</span> <span class="p">{</span>
      <span class="s">"flete_internacional"</span><span class="p">:</span> <span class="mf">1000.00</span><span class="p">,</span>
      <span class="s">"seguro_internacional"</span><span class="p">:</span> <span class="mf">200.00</span><span class="p">,</span>
      <span class="s">"gastos_aduaneros"</span><span class="p">:</span> <span class="mi">800</span><span class="p">,</span>
      <span class="s">"otros_gastos_transporte"</span><span class="p">:</span> <span class="mf">350.00</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">}</span>
<span class="n">cabeceras</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s">'x-key'</span><span class="p">:</span> <span class="s">'&lt;clave-del-api&gt;'</span><span class="p">,</span>
    <span class="s">'x-password'</span><span class="p">:</span> <span class="s">'&lt;clave-certificado-firma&gt;'</span><span class="p">,</span>
    <span class="s">'content-type'</span><span class="p">:</span> <span class="s">'application/json'</span><span class="p">}</span>
<span class="n">respuesta</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">post</span><span class="p">(</span>
    <span class="s">"https://link.datil.co/invoices/issue"</span><span class="p">,</span>
    <span class="n">headers</span> <span class="o">=</span> <span class="n">cabeceras</span><span class="p">,</span>
    <span class="n">data</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">factura</span><span class="p">))</span>
</code></pre><pre class="highlight csharp tab-csharp"><code><span class="k">using</span> <span class="nn">RestSharp</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">System</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">System.Collections.Generic</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">System.Linq</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">System.Text</span><span class="p">;</span>

<span class="k">namespace</span> <span class="nn">DatilClient</span> <span class="p">{</span>
  <span class="k">class</span> <span class="nc">InvoicingServiceClient</span> <span class="p">{</span>
    <span class="k">static</span> <span class="k">void</span> <span class="nf">Main</span><span class="p">(</span><span class="kt">string</span><span class="p">[]</span> <span class="n">args</span><span class="p">)</span> <span class="p">{</span>

      <span class="c1">// Este ejemplo utiliza RestSharp</span>
      <span class="c1">// Para instalar anda al menú: tools &gt; Library Package Manager &gt; Package Manager Console</span>
      <span class="c1">// copia y pega y presiona enter: Install-Package RestSharp</span>

      <span class="kt">var</span> <span class="n">client</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">RestClient</span><span class="p">(</span><span class="s">"https://link.datil.co/"</span><span class="p">);</span>
      <span class="kt">var</span> <span class="n">request</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">RestRequest</span><span class="p">(</span><span class="s">"invoices/issue"</span><span class="p">,</span> <span class="n">Method</span><span class="p">.</span><span class="n">POST</span><span class="p">);</span>
      <span class="n">request</span><span class="p">.</span><span class="nf">AddHeader</span><span class="p">(</span><span class="s">"X-Key"</span><span class="p">,</span> <span class="s">"&lt;clave-del-api&gt;"</span><span class="p">);</span>
      <span class="n">request</span><span class="p">.</span><span class="nf">AddHeader</span><span class="p">(</span><span class="s">"X-Password"</span><span class="p">,</span> <span class="s">"&lt;clave-certificado-firma&gt;"</span><span class="p">);</span>
      <span class="n">request</span><span class="p">.</span><span class="nf">AddHeader</span><span class="p">(</span><span class="s">"Content-Type"</span><span class="p">,</span> <span class="s">"application/json"</span><span class="p">);</span>
      <span class="n">request</span><span class="p">.</span><span class="n">RequestFormat</span> <span class="p">=</span> <span class="n">DataFormat</span><span class="p">.</span><span class="n">Json</span><span class="p">;</span>

      <span class="kt">var</span> <span class="n">body</span> <span class="p">=</span> <span class="p">(</span><span class="err">@</span><span class="s">"{
</span>        <span class="s">""</span><span class="n">ambiente</span><span class="s">""</span><span class="p">:</span><span class="m">1</span><span class="p">,</span>
        <span class="s">""</span><span class="n">tipo_emision</span><span class="s">""</span><span class="p">:</span><span class="m">1</span><span class="p">,</span>
        <span class="s">""</span><span class="n">secuencial</span><span class="s">""</span><span class="p">:</span><span class="m">148</span><span class="p">,</span>
        <span class="s">""</span><span class="n">fecha_emision</span><span class="s">""</span><span class="p">:</span><span class="s">""</span><span class="m">2019</span><span class="p">-</span><span class="m">09</span><span class="p">-</span><span class="m">28</span><span class="n">T11</span><span class="p">:</span><span class="m">28</span><span class="p">:</span><span class="m">56.782</span><span class="n">Z</span><span class="s">""</span><span class="p">,</span>
        <span class="s">""</span><span class="n">emisor</span><span class="s">""</span><span class="p">:{</span>
          <span class="s">""</span><span class="n">ruc</span><span class="s">""</span><span class="p">:</span><span class="s">""</span><span class="m">0910000000001</span><span class="s">""</span><span class="p">,</span>
          <span class="s">""</span><span class="n">obligado_contabilidad</span><span class="s">""</span><span class="p">:</span><span class="k">true</span><span class="p">,</span>
          <span class="s">""</span><span class="n">contribuyente_especial</span><span class="s">""</span><span class="p">:</span><span class="s">""</span><span class="m">12345</span><span class="s">""</span><span class="p">,</span>
          <span class="s">""</span><span class="n">nombre_comercial</span><span class="s">""</span><span class="p">:</span><span class="s">""</span><span class="n">XYZ</span> <span class="n">Corp</span><span class="s">""</span><span class="p">,</span>
          <span class="s">""</span><span class="n">razon_social</span><span class="s">""</span><span class="p">:</span><span class="s">""</span><span class="n">XYZ</span> <span class="n">Corporaci</span><span class="err">ó</span><span class="n">n</span> <span class="n">S</span><span class="p">.</span><span class="n">A</span><span class="p">.</span><span class="s">""</span><span class="p">,</span>
          <span class="s">""</span><span class="n">direccion</span><span class="s">""</span><span class="p">:</span><span class="s">""</span><span class="n">Av</span><span class="p">.</span> <span class="n">Primera</span> <span class="m">234</span> <span class="n">y</span> <span class="n">calle</span> <span class="m">5</span><span class="n">ta</span><span class="s">""</span><span class="p">,</span>
          <span class="s">""</span><span class="n">establecimiento</span><span class="s">""</span><span class="p">:{</span>
            <span class="s">""</span><span class="n">punto_emision</span><span class="s">""</span><span class="p">:</span><span class="s">""</span><span class="m">002</span><span class="s">""</span><span class="p">,</span>
            <span class="s">""</span><span class="n">codigo</span><span class="s">""</span><span class="p">:</span><span class="s">""</span><span class="m">001</span><span class="s">""</span><span class="p">,</span>
            <span class="s">""</span><span class="n">direccion</span><span class="s">""</span><span class="p">:</span><span class="s">""</span><span class="n">Av</span><span class="p">.</span> <span class="n">Primera</span> <span class="m">234</span> <span class="n">y</span> <span class="n">calle</span> <span class="m">5</span><span class="n">ta</span><span class="s">""</span>
          <span class="p">}</span>
        <span class="p">},</span>
        <span class="s">""</span><span class="n">moneda</span><span class="s">""</span><span class="p">:</span><span class="s">""</span><span class="n">USD</span><span class="s">""</span><span class="p">,</span>
        <span class="s">""</span><span class="n">informacion_adicional</span><span class="s">""</span><span class="p">:{</span>
          <span class="s">""</span><span class="n">Tiempo</span> <span class="n">de</span> <span class="n">entrega</span><span class="s">""</span><span class="p">:</span><span class="s">""</span><span class="m">5</span> <span class="n">d</span><span class="err">í</span><span class="k">as</span><span class="s">""</span>
        <span class="p">},</span>
        <span class="s">""</span><span class="n">totales</span><span class="s">""</span><span class="p">:{</span>
          <span class="s">""</span><span class="n">total_sin_impuestos</span><span class="s">""</span><span class="p">:</span><span class="m">4359.54</span><span class="p">,</span>
          <span class="s">""</span><span class="n">impuestos</span><span class="s">""</span><span class="p">:[</span>
            <span class="p">{</span>
              <span class="s">""</span><span class="n">base_imponible</span><span class="s">""</span><span class="p">:</span><span class="m">0.0</span><span class="p">,</span>
              <span class="s">""</span><span class="n">valor</span><span class="s">""</span><span class="p">:</span><span class="m">0.0</span><span class="p">,</span>
              <span class="s">""</span><span class="n">codigo</span><span class="s">""</span><span class="p">:</span><span class="s">""</span><span class="m">2</span><span class="s">""</span><span class="p">,</span>
              <span class="s">""</span><span class="n">codigo_porcentaje</span><span class="s">""</span><span class="p">:</span><span class="s">""</span><span class="m">0</span><span class="s">""</span>
            <span class="p">},</span>
            <span class="p">{</span>
              <span class="s">""</span><span class="n">base_imponible</span><span class="s">""</span><span class="p">:</span><span class="m">4359.54</span><span class="p">,</span>
              <span class="s">""</span><span class="n">valor</span><span class="s">""</span><span class="p">:</span><span class="m">523.14</span><span class="p">,</span>
              <span class="s">""</span><span class="n">codigo</span><span class="s">""</span><span class="p">:</span><span class="s">""</span><span class="m">2</span><span class="s">""</span><span class="p">,</span>
              <span class="s">""</span><span class="n">codigo_porcentaje</span><span class="s">""</span><span class="p">:</span><span class="s">""</span><span class="m">2</span><span class="s">""</span>
            <span class="p">}</span>
          <span class="p">],</span>
          <span class="s">""</span><span class="n">importe_total</span><span class="s">""</span><span class="p">:</span><span class="m">4882.68</span><span class="p">,</span>
          <span class="s">""</span><span class="n">propina</span><span class="s">""</span><span class="p">:</span><span class="m">0.0</span><span class="p">,</span>
          <span class="s">""</span><span class="n">descuento</span><span class="s">""</span><span class="p">:</span><span class="m">0.0</span>
        <span class="p">},</span>
        <span class="s">""</span><span class="n">comprador</span><span class="s">""</span><span class="p">:{</span>
          <span class="s">""</span><span class="n">email</span><span class="s">""</span><span class="p">:</span><span class="s">""</span><span class="n">juan</span><span class="p">.</span><span class="n">perez@xyz</span><span class="p">.</span><span class="n">com</span><span class="s">""</span><span class="p">,</span>
          <span class="s">""</span><span class="n">identificacion</span><span class="s">""</span><span class="p">:</span><span class="s">""</span><span class="m">0987654321</span><span class="s">""</span><span class="p">,</span>
          <span class="s">""</span><span class="n">tipo_identificacion</span><span class="s">""</span><span class="p">:</span><span class="s">""</span><span class="m">05</span><span class="s">""</span><span class="p">,</span>
          <span class="s">""</span><span class="n">razon_social</span><span class="s">""</span><span class="p">:</span><span class="s">""</span><span class="n">Juan</span> <span class="n">P</span><span class="err">é</span><span class="n">rez</span><span class="s">""</span><span class="p">,</span>
          <span class="s">""</span><span class="n">direccion</span><span class="s">""</span><span class="p">:</span><span class="s">""</span><span class="n">Calle</span> <span class="err">ú</span><span class="n">nica</span> <span class="n">Numero</span> <span class="m">987</span><span class="s">""</span><span class="p">,</span>
          <span class="s">""</span><span class="n">telefono</span><span class="s">""</span><span class="p">:</span><span class="s">""</span><span class="m">046029400</span><span class="s">""</span>
        <span class="p">},</span>
        <span class="s">""</span><span class="n">items</span><span class="s">""</span><span class="p">:[</span>
          <span class="p">{</span>
            <span class="s">""</span><span class="n">cantidad</span><span class="s">""</span><span class="p">:</span><span class="m">622.0</span><span class="p">,</span>
            <span class="s">""</span><span class="n">codigo_principal</span><span class="s">""</span><span class="p">:</span><span class="s">""</span><span class="n">ZNC</span><span class="s">""</span><span class="p">,</span>
            <span class="s">""</span><span class="n">codigo_auxiliar</span><span class="s">""</span><span class="p">:</span> <span class="s">""</span><span class="m">050</span><span class="s">""</span><span class="p">,</span>
            <span class="s">""</span><span class="n">precio_unitario</span><span class="s">""</span><span class="p">:</span> <span class="m">7.01</span><span class="p">,</span>
            <span class="s">""</span><span class="n">descuento</span><span class="s">""</span><span class="p">:</span> <span class="m">0</span><span class="p">,</span>
            <span class="s">""</span><span class="n">descripcion</span><span class="s">""</span><span class="p">:</span> <span class="s">""</span><span class="n">Zanahoria</span> <span class="n">granel</span>  <span class="m">50</span> <span class="n">Kg</span><span class="p">.</span><span class="s">""</span><span class="p">,</span>
            <span class="s">""</span><span class="n">precio_total_sin_impuestos</span><span class="s">""</span><span class="p">:</span> <span class="m">4359.54</span><span class="p">,</span>
            <span class="s">""</span><span class="n">impuestos</span><span class="s">""</span><span class="p">:</span> <span class="p">[</span>
              <span class="p">{</span>
                <span class="s">""</span><span class="n">base_imponible</span><span class="s">""</span><span class="p">:</span><span class="m">4359.54</span><span class="p">,</span>
                <span class="s">""</span><span class="n">valor</span><span class="s">""</span><span class="p">:</span><span class="m">523.14</span><span class="p">,</span>
                <span class="s">""</span><span class="n">tarifa</span><span class="s">""</span><span class="p">:</span><span class="m">12.0</span><span class="p">,</span>
                <span class="s">""</span><span class="n">codigo</span><span class="s">""</span><span class="p">:</span><span class="s">""</span><span class="m">2</span><span class="s">""</span><span class="p">,</span>
                <span class="s">""</span><span class="n">codigo_porcentaje</span><span class="s">""</span><span class="p">:</span><span class="s">""</span><span class="m">2</span><span class="s">""</span>
              <span class="p">}</span>
            <span class="p">],</span>
            <span class="s">""</span><span class="n">detalles_adicionales</span><span class="s">""</span><span class="p">:</span> <span class="p">{</span>
              <span class="s">""</span><span class="n">Peso</span><span class="s">""</span><span class="p">:</span><span class="s">""</span><span class="m">5000.0000</span><span class="s">""</span>
            <span class="p">},</span>
            <span class="s">""</span><span class="n">descuento</span><span class="s">""</span><span class="p">:</span> <span class="m">0.0</span><span class="p">,</span>
            <span class="s">""</span><span class="n">unidad_medida</span><span class="s">""</span><span class="p">:</span> <span class="s">""</span><span class="n">Kilos</span><span class="s">""</span>
          <span class="p">}</span>
      <span class="p">],</span>
        <span class="s">""</span><span class="n">valor_retenido_iva</span><span class="s">""</span><span class="p">:</span> <span class="m">70.40</span><span class="p">,</span>
        <span class="s">""</span><span class="n">valor_retenido_renta</span><span class="s">""</span><span class="p">:</span> <span class="m">29.60</span><span class="p">,</span>
        <span class="s">""</span><span class="n">credito</span><span class="s">""</span><span class="p">:</span> <span class="p">{</span>
            <span class="s">""</span><span class="n">fecha_vencimiento</span><span class="s">""</span><span class="p">:</span> <span class="s">""</span><span class="m">2015</span><span class="p">-</span><span class="m">03</span><span class="p">-</span><span class="m">28</span><span class="s">""</span><span class="p">,</span>
            <span class="s">""</span><span class="n">monto</span><span class="s">""</span><span class="p">:</span> <span class="m">1900.00</span>
        <span class="p">},</span>
      <span class="s">""</span><span class="n">pagos</span><span class="s">""</span><span class="p">:</span> <span class="p">[</span>
        <span class="p">{</span>
          <span class="s">""</span><span class="n">medio</span><span class="s">""</span><span class="p">:</span> <span class="s">""</span><span class="n">cheque</span><span class="s">""</span><span class="p">,</span>
          <span class="s">""</span><span class="n">total</span><span class="s">""</span><span class="p">:</span> <span class="m">2882.68</span><span class="p">,</span>
          <span class="s">""</span><span class="n">notas</span><span class="s">""</span><span class="p">:</span> <span class="s">""</span><span class="n">Depositado</span> <span class="n">en</span> <span class="n">cuenta</span> <span class="n">corriente</span><span class="s">""</span><span class="p">,</span>
          <span class="s">""</span><span class="n">propiedades</span><span class="s">""</span><span class="p">:</span> <span class="p">{</span>
            <span class="s">""</span><span class="n">numero</span><span class="s">""</span><span class="p">:</span> <span class="s">""</span><span class="m">1234567890</span><span class="s">""</span><span class="p">,</span>
            <span class="s">""</span><span class="n">banco</span><span class="s">""</span><span class="p">:</span> <span class="s">""</span><span class="n">Banco</span> <span class="n">Pac</span><span class="err">í</span><span class="n">fico</span><span class="s">""</span>
          <span class="p">}</span>
        <span class="p">}</span>
      <span class="p">],</span>
      <span class="s">""</span><span class="n">exportacion</span><span class="s">""</span><span class="p">:</span> <span class="p">{</span>
        <span class="s">""</span><span class="n">incoterm</span><span class="s">""</span><span class="p">:</span> <span class="p">{</span>
          <span class="s">""</span><span class="n">termino</span><span class="s">""</span><span class="p">:</span> <span class="s">""</span><span class="n">CIF</span><span class="s">""</span><span class="p">,</span>
          <span class="s">""</span><span class="n">lugar</span><span class="s">""</span><span class="p">:</span> <span class="s">""</span><span class="n">Guayaquil</span><span class="s">""</span><span class="p">,</span>
          <span class="s">""</span><span class="n">total_sin_impuestos</span><span class="s">""</span><span class="p">:</span> <span class="m">10.25</span>
        <span class="p">},</span>
        <span class="s">""</span><span class="n">origen</span><span class="s">""</span><span class="p">:</span> <span class="p">{</span>
          <span class="s">""</span><span class="n">codigo_pais</span><span class="s">""</span><span class="p">:</span><span class="s">""</span><span class="n">EC</span><span class="s">""</span><span class="p">,</span>
          <span class="s">""</span><span class="n">puerto</span><span class="s">""</span><span class="p">:</span> <span class="s">""</span><span class="n">Guayaquil</span><span class="s">""</span>
        <span class="p">},</span>
        <span class="s">""</span><span class="n">destino</span><span class="s">""</span><span class="p">:</span> <span class="p">{</span>
          <span class="s">""</span><span class="n">codigo_pais</span><span class="s">""</span><span class="p">:</span><span class="s">""</span><span class="n">CN</span><span class="s">""</span><span class="p">,</span>
          <span class="s">""</span><span class="n">puerto</span><span class="s">""</span><span class="p">:</span> <span class="s">""</span><span class="n">China</span><span class="s">""</span>
        <span class="p">},</span>
        <span class="s">""</span><span class="n">codigo_pais_adquisicion</span><span class="s">""</span><span class="p">:</span> <span class="s">""</span><span class="n">EC</span><span class="s">""</span><span class="p">,</span>
        <span class="s">""</span><span class="n">totales</span><span class="s">""</span><span class="p">:</span> <span class="p">{</span>
          <span class="s">""</span><span class="n">flete_internacional</span><span class="s">""</span><span class="p">:</span> <span class="m">1000.00</span><span class="p">,</span>
          <span class="s">""</span><span class="n">seguro_internacional</span><span class="s">""</span><span class="p">:</span> <span class="m">200.00</span><span class="p">,</span>
          <span class="s">""</span><span class="n">gastos_aduaneros</span><span class="s">""</span><span class="p">:</span> <span class="m">800</span><span class="p">,</span>
          <span class="s">""</span><span class="n">otros_gastos_transporte</span><span class="s">""</span><span class="p">:</span> <span class="m">350.00</span>
        <span class="p">}</span>
      <span class="p">}</span><span class="s">");
</span>      <span class="n">request</span><span class="p">.</span><span class="nf">AddParameter</span><span class="p">(</span><span class="s">"application/json"</span><span class="p">,</span> <span class="n">body</span><span class="p">,</span> <span class="n">ParameterType</span><span class="p">.</span><span class="n">RequestBody</span><span class="p">);</span>
      <span class="n">IRestResponse</span> <span class="n">response</span> <span class="p">=</span> <span class="n">client</span><span class="p">.</span><span class="nf">Execute</span><span class="p">(</span><span class="n">request</span><span class="p">);</span>

      <span class="n">Console</span><span class="p">.</span><span class="nf">WriteLine</span><span class="p">(</span><span class="n">response</span><span class="p">.</span><span class="n">Content</span><span class="p">);</span>
      <span class="n">Console</span><span class="p">.</span><span class="nf">ReadLine</span><span class="p">();</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">}</span>
</code></pre>
<p>Para la emisión de una factura se debe enviar la información completa del
comprobante en el cuerpo del requerimiento en formato JSON.</p>

<table><thead>
<tr>
<th>Parámetro</th>
<th>Tipo</th>
<th>Descripción</th>
</tr>
</thead><tbody>
<tr>
<td>secuencial</td>
<td>integer (min. 1 - max. 999999999 )</td>
<td>Número de secuencia de la factura. <strong>Requerido</strong></td>
</tr>
<tr>
<td>emisor</td>
<td><a href="#emisor">emisor</a></td>
<td>Información completa del emisor. <strong>Requerido</strong></td>
</tr>
<tr>
<td>moneda</td>
<td>string</td>
<td>Código <a href="https://en.wikipedia.org/wiki/ISO_4217">ISO</a> de la moneda. <strong>Requerido</strong></td>
</tr>
<tr>
<td>fecha_emision</td>
<td>string</td>
<td>Fecha de emisión en formato AAAA-MM-DDHoraZonaHoraria, definido en el estándar <a href="http://tools.ietf.org/html/rfc3339#section-5.6">ISO8601</a>.</td>
</tr>
<tr>
<td>guia_remision</td>
<td>string (17 caracteres)</td>
<td>Número de guía de remisión asociada a esta factura en formato 001-002-000000003 ([0-9]{3}-[0-9]{3}-[0-9]{9})</td>
</tr>
<tr>
<td>ambiente</td>
<td>integer</td>
<td>Pruebas: <code>1</code>.<br>Producción <code>2</code>.<br><strong>Requerido</strong></td>
</tr>
<tr>
<td>totales</td>
<td>objeto tipo <a href="#totales">totales</a></td>
<td>Listado de totales. <strong>Requerido</strong></td>
</tr>
<tr>
<td>comprador</td>
<td>objeto tipo <a href="#persona">persona</a></td>
<td>Información del comprador. <strong>Requerido</strong></td>
</tr>
<tr>
<td>tipo_emision</td>
<td>integer</td>
<td>Emisión normal: <code>1</code>.<br>Emisión por indisponibilidad: <code>2</code><br><strong>Requerido</strong></td>
</tr>
<tr>
<td>items</td>
<td>listado de objetos tipo <a href="#item-de-factura">item</a></td>
<td>Items incluídos en la factura. <strong>Requerido</strong></td>
</tr>
<tr>
<td>version</td>
<td>string</td>
<td>Versión del formato de comprobantes electrónicos de SRI. Si no se especifica, se utilizará la última revisión del formato implementada,</td>
</tr>
<tr>
<td>clave_acceso</td>
<td>string (49 caracteres)</td>
<td>La clave de acceso representa un identificador único del comprobante. Si esta información no es provista, Dátil la generará.<br>¿Cómo <a href="#clave-de-acceso">generar</a> la clave de acceso?</td>
</tr>
<tr>
<td>info_adicional</td>
<td>Listado de objectos de tipo <a href="#info-adicional">información adicional</a></td>
<td>Información adicional adjunta al comprobante en forma de diccionario. Ejemplo:<br><code>[{&quot;nombre&quot;:&quot;plan&quot;, &quot;valor&quot;:&quot;Inicial&quot;, &quot;nombre&quot;:&quot;vigencia&quot;, &quot;valor&quot;:&quot;1 mes&quot;}]</code></td>
</tr>
<tr>
<td>informacion_adicional</td>
<td>objeto</td>
<td>Información adicional adjunta al comprobante en forma de diccionario. Ejemplo:<br><code>{&quot;plan&quot;: &quot;Inicial&quot;, &quot;vigencia&quot;: &quot;1 mes&quot;}</code> <span style="color: red"><strong>Obsoleto</strong></span> <em>utiliza el parámetro info_adicional</em></td>
</tr>
<tr>
<td>valor_retenido_iva</td>
<td>float</td>
<td>Valor retenido por IVA</td>
</tr>
<tr>
<td>valor_retenido_renta</td>
<td>float</td>
<td>Valor retenido por renta</td>
</tr>
<tr>
<td>retenciones</td>
<td>Listado de objetos de tipo <a href="#retencion-de-factura">retencion</a></td>
<td>Retenciones incluídas en la factura. Caso específico de Retenciones en la Comercializadores / Distribuidores de derivados del Petróleo y Retención presuntiva de IVA a los Editores, Distribuidores y Voceadores que participan en la comercialización de periódicos y/o revistas.</td>
</tr>
<tr>
<td>pagos</td>
<td>Listado de objetos tipo <a href="#pagos">pagos</a></td>
<td>Listado de formas de pago aplicables a la factura. <strong>Requerido</strong></td>
</tr>
<tr>
<td>credito</td>
<td>Objeto de tipo <a href="#credito">credito</a></td>
<td>Información del crédito directo otorgado al cliente.</td>
</tr>
<tr>
<td>compensaciones</td>
<td>Objeto de tipo <a href="#compensacion-solidaria">compensación solidaria</a></td>
<td><strong>Solo</strong> para las provincias de Manabí y Esmeraldas según la Ley Orgánica de Solidaridad y de Corresponsabilidad Ciudadana</td>
</tr>
<tr>
<td>exportacion</td>
<td>Objeto de tipo <a href="#exportacion">exportacion</a></td>
<td><strong>Solo</strong> para facturas de exportación</td>
</tr>
</tbody></table>
<h4 id='totales'>Totales</h4>
<table><thead>
<tr>
<th>Parámetro</th>
<th>Tipo</th>
<th>Descripción</th>
</tr>
</thead><tbody>
<tr>
<td>total_sin_impuestos</td>
<td>float (hasta 2 cifras decimales)</td>
<td>Total antes de los impuestos. <strong>Requerido</strong></td>
</tr>
<tr>
<td>descuento_adicional</td>
<td>float (hasta 2 cifras decimales)</td>
<td>Descuento aplicado al subtotal de la factura expresado en valor monetario.</td>
</tr>
<tr>
<td>descuento</td>
<td>float (hasta 2 cifras decimales)</td>
<td>Suma de los descuentos de cada ítem y del descuento adicional. <strong>Requerido</strong></td>
</tr>
<tr>
<td>propina</td>
<td>float (hasta 2 cifras decimales)</td>
<td>Propina total, llamado también servicio. <strong>Requerido</strong></td>
</tr>
<tr>
<td>importe_total</td>
<td>float (hasta 2 cifras decimales)</td>
<td>Total incluyendo impuestos. <strong>Requerido</strong></td>
</tr>
<tr>
<td>impuestos</td>
<td>listado de objetos <a href="#total-impuesto">total impuesto</a></td>
<td>Listado de impuesto totalizados. <strong>Requerido</strong></td>
</tr>
</tbody></table>
<h4 id='pagos'>Pagos</h4>
<table><thead>
<tr>
<th>Parámetro</th>
<th>Tipo</th>
<th>Descripción</th>
</tr>
</thead><tbody>
<tr>
<td>fecha</td>
<td>string</td>
<td>Fecha de recepción del pago en formato AAAA-MM-DDHoraZonaHoraria, definido en el estándar <a href="http://tools.ietf.org/html/rfc3339#section-5.6">ISO8601</a>. Si no es especificado se utiliza la fecha y hora actual.</td>
</tr>
<tr>
<td>medio</td>
<td>string</td>
<td>Código del <a href="#tipos-de-forma-de-pago">tipo de forma de pago</a>. <strong>Requerido</strong></td>
</tr>
<tr>
<td>total</td>
<td>float</td>
<td>Total aplicable a la forma de pago especificada. <strong>Requerido</strong></td>
</tr>
<tr>
<td>notas</td>
<td>string (máximo 300 caracteres)</td>
<td>Texto abierto que te permite registrar cualquier nota relacionada al pago.</td>
</tr>
<tr>
<td>propiedades</td>
<td>objeto</td>
<td>Información adicional adjunta al pago en forma de diccionario. Ejemplo:<br><code>{&quot;plazo&quot;: &quot;30&quot;, &quot;unidad_tiempo&quot;: &quot;dias&quot;}</code></td>
</tr>
</tbody></table>
<h4 id='credito'>Crédito</h4>
<table><thead>
<tr>
<th>Parámetro</th>
<th>Tipo</th>
<th>Descripción</th>
</tr>
</thead><tbody>
<tr>
<td>fecha_vencimiento</td>
<td>string</td>
<td>Fecha de vencimiento en formato AAAA-MM-DD, definido en el estándar <a href="http://tools.ietf.org/html/rfc3339#section-5.6">ISO8601</a>. <strong>Requerido</strong></td>
</tr>
<tr>
<td>monto</td>
<td>float</td>
<td>Monto otorgado de crédito. <strong>Requerido</strong></td>
</tr>
</tbody></table>
<h4 id='compensacion-solidaria'>Compensación solidaria</h4>
<table><thead>
<tr>
<th>Parámetro</th>
<th>Tipo</th>
<th>Descripción</th>
</tr>
</thead><tbody>
<tr>
<td>codigo</td>
<td>int</td>
<td>Código del porcentaje de IVA . <strong>Requerido</strong></td>
</tr>
<tr>
<td>tarifa</td>
<td>int</td>
<td>Porcentaje de compensación. <strong>Requerido</strong></td>
</tr>
<tr>
<td>valor</td>
<td>float</td>
<td>Valor de la compensación. <strong>Requerido</strong></td>
</tr>
</tbody></table>
<h4 id='exportacion'>Exportación</h4>
<table><thead>
<tr>
<th>Parámetro</th>
<th>Tipo</th>
<th>Descripción</th>
</tr>
</thead><tbody>
<tr>
<td>incoterm</td>
<td>Objeto de tipo <a href="#incoterm">incoterm</a></td>
<td>Información del Incoterm . <strong>Requerido</strong></td>
</tr>
<tr>
<td>origen</td>
<td>Objeto de tipo <a href="#origen-de-exportaci-n">origen de exportación</a></td>
<td>Origen de la exportación . <strong>Requerido</strong></td>
</tr>
<tr>
<td>destino</td>
<td>Objeto de tipo <a href="#destino-de-exportaci-n">destino de exportación</a></td>
<td>Destino de la exportación. <strong>Requerido</strong></td>
</tr>
<tr>
<td>codigo_pais_adquisicion</td>
<td>string</td>
<td>Código de dos caracteres del país de adquisición según <a href="https://en.wikipedia.org/wiki/ISO_3166-1_alpha-2#Officially_assigned_code_elements">ISO_3166</a></td>
</tr>
<tr>
<td>totales</td>
<td>Objecto de tipo <a href="#totales-de-exportaci-n">totales de exportación</a></td>
<td>Totales de la exportación</td>
</tr>
</tbody></table>
<h4 id='incoterm'>Incoterm</h4>
<table><thead>
<tr>
<th>Parámetro</th>
<th>Tipo</th>
<th>Descripción</th>
</tr>
</thead><tbody>
<tr>
<td>termino</td>
<td>string</td>
<td>Código de 3 letras correspondiente al <a href="http://www.proecuador.gob.ec/exportadores/requisitos-para-exportar/incoterms/">Incoterm</a>. <strong>Requerido</strong></td>
</tr>
<tr>
<td>lugar</td>
<td>string</td>
<td>Lugar Incoterm. <strong>Requerido</strong></td>
</tr>
<tr>
<td>total_sin_impuestos</td>
<td>string</td>
<td>Total sin impuestos del incoterm. <strong>Requerido</strong></td>
</tr>
</tbody></table>
<h4 id='origen-de-exportacion'>Origen de exportación</h4>
<table><thead>
<tr>
<th>Parámetro</th>
<th>Tipo</th>
<th>Descripción</th>
</tr>
</thead><tbody>
<tr>
<td>codigo_pais</td>
<td>string</td>
<td>Código  de dos caracteres del país origen según <a href="https://en.wikipedia.org/wiki/ISO_3166-1_alpha-2#Officially_assigned_code_elements">ISO_3166</a>. <strong>Requerido</strong></td>
</tr>
<tr>
<td>puerto</td>
<td>string</td>
<td>Puerto de origen . <strong>Requerido</strong></td>
</tr>
</tbody></table>
<h4 id='destino-de-exportacion'>Destino de exportación</h4>
<table><thead>
<tr>
<th>Parámetro</th>
<th>Tipo</th>
<th>Descripción</th>
</tr>
</thead><tbody>
<tr>
<td>codigo_pais</td>
<td>string</td>
<td>Código de dos caracteres del país destino según <a href="https://en.wikipedia.org/wiki/ISO_3166-1_alpha-2#Officially_assigned_code_elements">ISO_3166</a></td>
</tr>
<tr>
<td>puerto</td>
<td>string</td>
<td>Puerto de destino. . <strong>Requerido</strong></td>
</tr>
</tbody></table>
<h4 id='totales-de-exportacion'>Totales de exportación</h4>
<table><thead>
<tr>
<th>Parámetro</th>
<th>Tipo</th>
<th>Descripción</th>
</tr>
</thead><tbody>
<tr>
<td>flete_internacional</td>
<td>float</td>
<td>Total del flete internacional.</td>
</tr>
<tr>
<td>seguro_internacional</td>
<td>float</td>
<td>Total del seguro internacional.</td>
</tr>
<tr>
<td>gastos_aduaneros</td>
<td>float</td>
<td>Total de los gastos aduaneros.</td>
</tr>
<tr>
<td>otros_gastos_transporte</td>
<td>float</td>
<td>Total de otros gastos de transporte.</td>
</tr>
</tbody></table>

<aside class="notice">
La información de crédito será enviada como forma de pago al Servicio de
Rentas Internas (SRI) con el código 01, Sin utilización del sistema financiero.
</aside>
<h3 id='respuesta'>Respuesta</h3>
<blockquote>
<h4 id='respuesta-de-ejemplo'>Respuesta de ejemplo</h4></blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"abcdef09876123cea56784f01"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"ambiente"</span><span class="p">:</span><span class="mi">1</span><span class="p">,</span><span class="w">
  </span><span class="s2">"tipo_emision"</span><span class="p">:</span><span class="mi">1</span><span class="p">,</span><span class="w">
  </span><span class="s2">"secuencial"</span><span class="p">:</span><span class="mi">148</span><span class="p">,</span><span class="w">
  </span><span class="s2">"fecha_emision"</span><span class="p">:</span><span class="s2">"2019-09-28T11:28:56.782Z"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"clave_acceso"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2802201501091000000000120010010000100451993736618"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"emisor"</span><span class="p">:{</span><span class="w">
    </span><span class="s2">"ruc"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0910000000001"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"obligado_contabilidad"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
    </span><span class="s2">"contribuyente_especial"</span><span class="p">:</span><span class="w"> </span><span class="s2">"12345"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"nombre_comercial"</span><span class="p">:</span><span class="w"> </span><span class="s2">"XYZ Corp"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"razon_social"</span><span class="p">:</span><span class="w"> </span><span class="s2">"XYZ Corporación S.A."</span><span class="p">,</span><span class="w">
    </span><span class="s2">"direccion"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Av. Primera 234 y calle 5ta"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"establecimiento"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="s2">"punto_emision"</span><span class="p">:</span><span class="w"> </span><span class="s2">"002"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"codigo"</span><span class="p">:</span><span class="w"> </span><span class="s2">"001"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"direccion"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Av. Primera 234 y calle 5ta"</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="s2">"moneda"</span><span class="p">:</span><span class="w"> </span><span class="s2">"USD"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"informacion_adicional"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"Tiempo de entrega"</span><span class="p">:</span><span class="w"> </span><span class="s2">"5 días"</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="s2">"totales"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"total_sin_impuestos"</span><span class="p">:</span><span class="w"> </span><span class="mf">4359.54</span><span class="p">,</span><span class="w">
    </span><span class="s2">"impuestos"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
      </span><span class="p">{</span><span class="w">
        </span><span class="s2">"base_imponible"</span><span class="p">:</span><span class="w"> </span><span class="mf">4359.54</span><span class="p">,</span><span class="w">
        </span><span class="s2">"valor"</span><span class="p">:</span><span class="w"> </span><span class="mf">523.14</span><span class="p">,</span><span class="w">
        </span><span class="s2">"codigo"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"codigo_porcentaje"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2"</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">],</span><span class="w">
    </span><span class="s2">"importe_total"</span><span class="p">:</span><span class="w"> </span><span class="mf">4882.68</span><span class="p">,</span><span class="w">
    </span><span class="s2">"propina"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.0</span><span class="p">,</span><span class="w">
    </span><span class="s2">"descuento"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.0</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="s2">"comprador"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"email"</span><span class="p">:</span><span class="w"> </span><span class="s2">"juan.perez@xyz.com"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"identificacion"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0987654321"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"tipo_identificacion"</span><span class="p">:</span><span class="w"> </span><span class="s2">"05"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"razon_social"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Juan Pérez"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"direccion"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Calle única Numero 987"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"telefono"</span><span class="p">:</span><span class="w"> </span><span class="s2">"046029400"</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="s2">"items"</span><span class="p">:[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="s2">"cantidad"</span><span class="p">:</span><span class="w"> </span><span class="mf">622.0</span><span class="p">,</span><span class="w">
      </span><span class="s2">"codigo_principal"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ZNC"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"codigo_auxiliar"</span><span class="p">:</span><span class="w"> </span><span class="s2">"050"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"precio_unitario"</span><span class="p">:</span><span class="w"> </span><span class="mf">7.01</span><span class="p">,</span><span class="w">
      </span><span class="s2">"descripcion"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Zanahoria granel  50 Kg."</span><span class="p">,</span><span class="w">
      </span><span class="s2">"precio_total_sin_impuestos"</span><span class="p">:</span><span class="w"> </span><span class="mf">4360.22</span><span class="p">,</span><span class="w">
      </span><span class="s2">"impuestos"</span><span class="p">:[</span><span class="w">
        </span><span class="p">{</span><span class="w">
          </span><span class="s2">"base_imponible"</span><span class="p">:</span><span class="w"> </span><span class="mf">4360.22</span><span class="p">,</span><span class="w">
          </span><span class="s2">"valor"</span><span class="p">:</span><span class="w"> </span><span class="mf">523.14</span><span class="p">,</span><span class="w">
          </span><span class="s2">"tarifa"</span><span class="p">:</span><span class="w"> </span><span class="mf">12.0</span><span class="p">,</span><span class="w">
          </span><span class="s2">"codigo"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"codigo_porcentaje"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2"</span><span class="w">
        </span><span class="p">}</span><span class="w">
      </span><span class="p">],</span><span class="w">
      </span><span class="s2">"detalles_adicionales"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"Peso"</span><span class="p">:</span><span class="w"> </span><span class="s2">"5000.0000"</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="s2">"descuento"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.0</span><span class="p">,</span><span class="w">
      </span><span class="s2">"unidad_medida"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Kilos"</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">],</span><span class="w">
  </span><span class="s2">"valor_retenido_iva"</span><span class="p">:</span><span class="w"> </span><span class="mf">70.40</span><span class="p">,</span><span class="w">
  </span><span class="s2">"valor_retenido_renta"</span><span class="p">:</span><span class="w"> </span><span class="mf">29.60</span><span class="p">,</span><span class="w">
  </span><span class="s2">"credito"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"fecha_vencimiento"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2019-12-28"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"monto"</span><span class="p">:</span><span class="w"> </span><span class="mf">1900.00</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="s2">"pagos"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="s2">"medio"</span><span class="p">:</span><span class="w"> </span><span class="s2">"cheque"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"total"</span><span class="p">:</span><span class="w"> </span><span class="mf">2882.68</span><span class="p">,</span><span class="w">
      </span><span class="s2">"propiedades"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"numero"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1234567890"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"banco"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Banco Pacífico"</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="s2">"notas"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Depositado en cuenta corriente"</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">],</span><span class="w">
  </span><span class="s2">"exportacion"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"incoterm"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="s2">"termino"</span><span class="p">:</span><span class="w"> </span><span class="s2">"CIF"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"lugar"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Guayaquil"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"total_sin_impuestos"</span><span class="p">:</span><span class="w"> </span><span class="s2">"CIF"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="s2">"origen"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="s2">"codigo_pais"</span><span class="p">:</span><span class="s2">"EC"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"puerto"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Guayaquil"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="s2">"destino"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="s2">"codigo_pais"</span><span class="p">:</span><span class="s2">"CN"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"puerto"</span><span class="p">:</span><span class="w"> </span><span class="s2">"China"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="s2">"codigo_pais_adquisicion"</span><span class="p">:</span><span class="w"> </span><span class="s2">"EC"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"totales"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="s2">"flete_internacional"</span><span class="p">:</span><span class="w"> </span><span class="mf">1000.00</span><span class="p">,</span><span class="w">
      </span><span class="s2">"seguro_internacional"</span><span class="p">:</span><span class="w"> </span><span class="mf">200.00</span><span class="p">,</span><span class="w">
      </span><span class="s2">"gastos_aduaneros"</span><span class="p">:</span><span class="w"> </span><span class="mi">800</span><span class="p">,</span><span class="w">
      </span><span class="s2">"otros_gastos_transporte"</span><span class="p">:</span><span class="w"> </span><span class="mf">350.00</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>Retorna un objeto tipo <strong><a href="#requerimiento">factura</a></strong> que incluye un nuevo parámetro <code>id</code>,
el cual identifica de manera única a la factura. El campo <code>clave_acceso</code> generado
también se incluirá como parte de la respuesta.</p>
<h2 id='emision-de-una-factura-a-partir-de-xml'>Emisión de una factura a partir de XML</h2>
<p><code>POST /invoices/issue/xml</code></p>
<h3 id='requerimiento-a-partir-de-xml'>Requerimiento a partir de XML</h3>
<blockquote>
<h4 id='requerimiento-de-ejemplo-2'>Requerimiento de ejemplo</h4></blockquote>
<pre class="highlight shell tab-shell"><code>curl -v https://link.datil.co/invoices/issue/xml <span class="se">\</span>
-H <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
-H <span class="s2">"X-Key: &lt;API-key&gt;"</span> <span class="se">\</span>
-H <span class="s2">"X-Password: &lt;clave-certificado-firma&gt;"</span> <span class="se">\</span>
-d <span class="s1">'{"xml" : "&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;
&lt;factura id= \"comprobante\" version= \"1.1.0\"&gt;
    &lt;infoTributaria&gt;
        &lt;ambiente&gt;1&lt;/ambiente&gt;
        &lt;tipoEmision&gt;1&lt;/tipoEmision&gt;
        &lt;razonSocial&gt;Angel Arreaga&lt;/razonSocial&gt;
        &lt;nombreComercial&gt;XYZ&lt;/nombreComercial&gt;
        &lt;ruc&gt;0953239092002&lt;/ruc&gt;
        &lt;claveAcceso&gt;None&lt;/claveAcceso&gt;
        &lt;codDoc&gt;01&lt;/codDoc&gt;
        &lt;estab&gt;002&lt;/estab&gt;
        &lt;ptoEmi&gt;003&lt;/ptoEmi&gt;
        &lt;secuencial&gt;000098431&lt;/secuencial&gt;
        &lt;dirMatriz&gt;Mucho Lote 1&lt;/dirMatriz&gt;
    &lt;/infoTributaria&gt;
    &lt;infoFactura&gt;
        &lt;fechaEmision&gt;17/10/2019&lt;/fechaEmision&gt;
        &lt;dirEstablecimiento&gt;Mucho Lote 1&lt;/dirEstablecimiento&gt;
        &lt;obligadoContabilidad&gt;NO&lt;/obligadoContabilidad&gt;
        &lt;tipoIdentificacionComprador&gt;04&lt;/tipoIdentificacionComprador&gt;
        &lt;razonSocialComprador&gt;DATILMEDIA S.A.&lt;/razonSocialComprador&gt;
        &lt;identificacionComprador&gt;0992712554001&lt;/identificacionComprador&gt;
        &lt;direccionComprador&gt;Entre Guayacanes e Higueras, Guayaquil, Ecuador&lt;/direccionComprador&gt;
        &lt;totalSinImpuestos&gt;12.00&lt;/totalSinImpuestos&gt;
        &lt;totalDescuento&gt;0.00&lt;/totalDescuento&gt;
        &lt;totalConImpuestos&gt;
            &lt;totalImpuesto&gt;
                &lt;codigo&gt;2&lt;/codigo&gt;
                &lt;codigoPorcentaje&gt;2&lt;/codigoPorcentaje&gt;
                &lt;baseImponible&gt;12.00&lt;/baseImponible&gt;
                &lt;valor&gt;1.44&lt;/valor&gt;
            &lt;/totalImpuesto&gt;
        &lt;/totalConImpuestos&gt;
        &lt;propina&gt;0.00&lt;/propina&gt;
        &lt;importeTotal&gt;13.44&lt;/importeTotal&gt;
        &lt;moneda&gt;DOLAR&lt;/moneda&gt;
    &lt;/infoFactura&gt;
    &lt;detalles&gt;
        &lt;detalle&gt;
            &lt;codigoPrincipal&gt;105AP1&lt;/codigoPrincipal&gt;
            &lt;descripcion&gt;Aceite Protector Madera&lt;/descripcion&gt;
            &lt;cantidad&gt;1.000000&lt;/cantidad&gt;
            &lt;precioUnitario&gt;12.000000&lt;/precioUnitario&gt;
            &lt;descuento&gt;0.00&lt;/descuento&gt;
            &lt;precioTotalSinImpuesto&gt;12.00&lt;/precioTotalSinImpuesto&gt;
            &lt;impuestos&gt;
                &lt;impuesto&gt;
                    &lt;codigo&gt;2&lt;/codigo&gt;
                    &lt;codigoPorcentaje&gt;2&lt;/codigoPorcentaje&gt;
                    &lt;tarifa&gt;12.00&lt;/tarifa&gt;
                    &lt;baseImponible&gt;12.00&lt;/baseImponible&gt;
                    &lt;valor&gt;1.44&lt;/valor&gt;
                &lt;/impuesto&gt;
            &lt;/impuestos&gt;
        &lt;/detalle&gt;
    &lt;/detalles&gt;
&lt;/factura&gt;"}'</span>
</code></pre><pre class="highlight python tab-python"><code><span class="kn">import</span> <span class="nn">requests</span><span class="p">,</span> <span class="n">json</span>

<span class="n">factura</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s">"xml"</span> <span class="p">:</span> <span class="s">'''&lt;?xml version="1.0" encoding="UTF-8"?&gt;
    &lt;factura id="comprobante" version="1.1.0"&gt;
      &lt;infoTributaria&gt;
          &lt;ambiente&gt;1&lt;/ambiente&gt;
          &lt;tipoEmision&gt;1&lt;/tipoEmision&gt;
          &lt;razonSocial&gt;XYZ Corporación S.A.&lt;/razonSocial&gt;
          &lt;nombreComercial&gt;XYZ Corp&lt;/nombreComercial&gt;
          &lt;ruc&gt;0910000000001&lt;/ruc&gt;
          &lt;claveAcceso&gt;&lt;/claveAcceso&gt;
          &lt;codDoc&gt;01&lt;/codDoc&gt;
          &lt;estab&gt;002&lt;/estab&gt;
          &lt;ptoEmi&gt;003&lt;/ptoEmi&gt;
          &lt;secuencial&gt;000098431&lt;/secuencial&gt;
          &lt;dirMatriz&gt;Av. Primera 234 y calle 5ta&lt;/dirMatriz&gt;
      &lt;/infoTributaria&gt;
      &lt;infoFactura&gt;
          &lt;fechaEmision&gt;17/10/2019&lt;/fechaEmision&gt;
          &lt;dirEstablecimiento&gt;Av. Primera 234 y calle 5ta&lt;/dirEstablecimiento&gt;
          &lt;obligadoContabilidad&gt;SI&lt;/obligadoContabilidad&gt;
          &lt;tipoIdentificacionComprador&gt;04&lt;/tipoIdentificacionComprador&gt;
          &lt;razonSocialComprador&gt;Juan Pérez&lt;/razonSocialComprador&gt;
          &lt;identificacionComprador&gt;0987654321&lt;/identificacionComprador&gt;
          &lt;direccionComprador&gt;Calle única Numero 987&lt;/direccionComprador&gt;
          &lt;totalSinImpuestos&gt;12.00&lt;/totalSinImpuestos&gt;
          &lt;totalDescuento&gt;0.00&lt;/totalDescuento&gt;
          &lt;totalConImpuestos&gt;
              &lt;totalImpuesto&gt;
                  &lt;codigo&gt;2&lt;/codigo&gt;
                  &lt;codigoPorcentaje&gt;2&lt;/codigoPorcentaje&gt;
                  &lt;baseImponible&gt;12.00&lt;/baseImponible&gt;
                  &lt;valor&gt;1.44&lt;/valor&gt;
              &lt;/totalImpuesto&gt;
          &lt;/totalConImpuestos&gt;
          &lt;propina&gt;0.00&lt;/propina&gt;
          &lt;importeTotal&gt;13.44&lt;/importeTotal&gt;
          &lt;moneda&gt;DOLAR&lt;/moneda&gt;
      &lt;/infoFactura&gt;
      &lt;detalles&gt;
          &lt;detalle&gt;
              &lt;codigoPrincipal&gt;105AP1&lt;/codigoPrincipal&gt;
              &lt;descripcion&gt;Aceite Protector Madera&lt;/descripcion&gt;
              &lt;cantidad&gt;1.000000&lt;/cantidad&gt;
              &lt;precioUnitario&gt;12.000000&lt;/precioUnitario&gt;
              &lt;descuento&gt;0.00&lt;/descuento&gt;
              &lt;precioTotalSinImpuesto&gt;12.00&lt;/precioTotalSinImpuesto&gt;
              &lt;impuestos&gt;
                  &lt;impuesto&gt;
                      &lt;codigo&gt;2&lt;/codigo&gt;
                      &lt;codigoPorcentaje&gt;2&lt;/codigoPorcentaje&gt;
                      &lt;tarifa&gt;12.00&lt;/tarifa&gt;
                      &lt;baseImponible&gt;12.00&lt;/baseImponible&gt;
                      &lt;valor&gt;1.44&lt;/valor&gt;
                  &lt;/impuesto&gt;
              &lt;/impuestos&gt;
          &lt;/detalle&gt;
      &lt;/detalles&gt;
    &lt;/factura&gt;'''</span>
<span class="p">}</span>

<span class="n">cabeceras</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s">'x-key'</span><span class="p">:</span> <span class="s">'&lt;clave-del-api&gt;'</span><span class="p">,</span>
    <span class="s">'x-password'</span><span class="p">:</span> <span class="s">'&lt;clave-certificado-firma&gt;'</span><span class="p">,</span>
    <span class="s">'content-type'</span><span class="p">:</span> <span class="s">'application/json'</span><span class="p">}</span>
<span class="n">respuesta</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">post</span><span class="p">(</span>
    <span class="s">"https://link.datil.co/invoices/issue/xml"</span><span class="p">,</span>
    <span class="n">headers</span> <span class="o">=</span> <span class="n">cabeceras</span><span class="p">,</span>
    <span class="n">data</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">factura</span><span class="p">))</span>
</code></pre><pre class="highlight csharp tab-csharp"><code></code></pre>
<p>Para la emisión de una factura a partir de un XML se debe enviar el XML como parámetro en el cuerpo del requerimiento en formato JSON.
Este XML debe cumplir con la especificación del SRI</p>

<table><thead>
<tr>
<th>Parámetro</th>
<th>Tipo</th>
<th>Descripción</th>
</tr>
</thead><tbody>
<tr>
<td>xml</td>
<td>string</td>
<td>Contenido del archivo xml. <strong>Requerido</strong></td>
</tr>
</tbody></table>
<h3 id='respuesta-2'>Respuesta</h3>
<blockquote>
<h4 id='respuesta-de-ejemplo-2'>Respuesta de ejemplo</h4></blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"abcdef09876123cea56784f01"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"ambiente"</span><span class="p">:</span><span class="mi">1</span><span class="p">,</span><span class="w">
  </span><span class="s2">"tipo_emision"</span><span class="p">:</span><span class="mi">1</span><span class="p">,</span><span class="w">
  </span><span class="s2">"secuencial"</span><span class="p">:</span><span class="mi">148</span><span class="p">,</span><span class="w">
  </span><span class="s2">"fecha_emision"</span><span class="p">:</span><span class="s2">"2019-09-28T11:28:56.782Z"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"clave_acceso"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2802201501091000000000120010010000100451993736618"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"emisor"</span><span class="p">:{</span><span class="w">
    </span><span class="s2">"ruc"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0910000000001"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"obligado_contabilidad"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
    </span><span class="s2">"contribuyente_especial"</span><span class="p">:</span><span class="w"> </span><span class="s2">"12345"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"nombre_comercial"</span><span class="p">:</span><span class="w"> </span><span class="s2">"XYZ Corp"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"razon_social"</span><span class="p">:</span><span class="w"> </span><span class="s2">"XYZ Corporación S.A."</span><span class="p">,</span><span class="w">
    </span><span class="s2">"direccion"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Av. Primera 234 y calle 5ta"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"establecimiento"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="s2">"punto_emision"</span><span class="p">:</span><span class="w"> </span><span class="s2">"002"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"codigo"</span><span class="p">:</span><span class="w"> </span><span class="s2">"001"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"direccion"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Av. Primera 234 y calle 5ta"</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="s2">"moneda"</span><span class="p">:</span><span class="w"> </span><span class="s2">"USD"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"informacion_adicional"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"Tiempo de entrega"</span><span class="p">:</span><span class="w"> </span><span class="s2">"5 días"</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="s2">"totales"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"total_sin_impuestos"</span><span class="p">:</span><span class="w"> </span><span class="mf">4359.54</span><span class="p">,</span><span class="w">
    </span><span class="s2">"impuestos"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
      </span><span class="p">{</span><span class="w">
        </span><span class="s2">"base_imponible"</span><span class="p">:</span><span class="w"> </span><span class="mf">4359.54</span><span class="p">,</span><span class="w">
        </span><span class="s2">"valor"</span><span class="p">:</span><span class="w"> </span><span class="mf">523.14</span><span class="p">,</span><span class="w">
        </span><span class="s2">"codigo"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"codigo_porcentaje"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2"</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">],</span><span class="w">
    </span><span class="s2">"importe_total"</span><span class="p">:</span><span class="w"> </span><span class="mf">4882.68</span><span class="p">,</span><span class="w">
    </span><span class="s2">"propina"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.0</span><span class="p">,</span><span class="w">
    </span><span class="s2">"descuento"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.0</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="s2">"comprador"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"email"</span><span class="p">:</span><span class="w"> </span><span class="s2">"juan.perez@xyz.com"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"identificacion"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0987654321"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"tipo_identificacion"</span><span class="p">:</span><span class="w"> </span><span class="s2">"05"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"razon_social"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Juan Pérez"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"direccion"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Calle única Numero 987"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"telefono"</span><span class="p">:</span><span class="w"> </span><span class="s2">"046029400"</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="s2">"items"</span><span class="p">:[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="s2">"cantidad"</span><span class="p">:</span><span class="w"> </span><span class="mf">622.0</span><span class="p">,</span><span class="w">
      </span><span class="s2">"codigo_principal"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ZNC"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"codigo_auxiliar"</span><span class="p">:</span><span class="w"> </span><span class="s2">"050"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"precio_unitario"</span><span class="p">:</span><span class="w"> </span><span class="mf">7.01</span><span class="p">,</span><span class="w">
      </span><span class="s2">"descripcion"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Zanahoria granel  50 Kg."</span><span class="p">,</span><span class="w">
      </span><span class="s2">"precio_total_sin_impuestos"</span><span class="p">:</span><span class="w"> </span><span class="mf">4360.22</span><span class="p">,</span><span class="w">
      </span><span class="s2">"impuestos"</span><span class="p">:[</span><span class="w">
        </span><span class="p">{</span><span class="w">
          </span><span class="s2">"base_imponible"</span><span class="p">:</span><span class="w"> </span><span class="mf">4360.22</span><span class="p">,</span><span class="w">
          </span><span class="s2">"valor"</span><span class="p">:</span><span class="w"> </span><span class="mf">523.14</span><span class="p">,</span><span class="w">
          </span><span class="s2">"tarifa"</span><span class="p">:</span><span class="w"> </span><span class="mf">12.0</span><span class="p">,</span><span class="w">
          </span><span class="s2">"codigo"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"codigo_porcentaje"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2"</span><span class="w">
        </span><span class="p">}</span><span class="w">
      </span><span class="p">],</span><span class="w">
      </span><span class="s2">"detalles_adicionales"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"Peso"</span><span class="p">:</span><span class="w"> </span><span class="s2">"5000.0000"</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="s2">"descuento"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.0</span><span class="p">,</span><span class="w">
      </span><span class="s2">"unidad_medida"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Kilos"</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">],</span><span class="w">
  </span><span class="s2">"valor_retenido_iva"</span><span class="p">:</span><span class="w"> </span><span class="mf">70.40</span><span class="p">,</span><span class="w">
  </span><span class="s2">"valor_retenido_renta"</span><span class="p">:</span><span class="w"> </span><span class="mf">29.60</span><span class="p">,</span><span class="w">
  </span><span class="s2">"credito"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"fecha_vencimiento"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2019-12-28"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"monto"</span><span class="p">:</span><span class="w"> </span><span class="mf">1900.00</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="s2">"pagos"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="s2">"medio"</span><span class="p">:</span><span class="w"> </span><span class="s2">"cheque"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"total"</span><span class="p">:</span><span class="w"> </span><span class="mf">2882.68</span><span class="p">,</span><span class="w">
      </span><span class="s2">"propiedades"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"numero"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1234567890"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"banco"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Banco Pacífico"</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="s2">"notas"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Depositado en cuenta corriente"</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">],</span><span class="w">
  </span><span class="s2">"exportacion"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"incoterm"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="s2">"termino"</span><span class="p">:</span><span class="w"> </span><span class="s2">"CIF"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"lugar"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Guayaquil"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"total_sin_impuestos"</span><span class="p">:</span><span class="w"> </span><span class="s2">"CIF"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="s2">"origen"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="s2">"codigo_pais"</span><span class="p">:</span><span class="s2">"EC"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"puerto"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Guayaquil"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="s2">"destino"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="s2">"codigo_pais"</span><span class="p">:</span><span class="s2">"CN"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"puerto"</span><span class="p">:</span><span class="w"> </span><span class="s2">"China"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="s2">"codigo_pais_adquisicion"</span><span class="p">:</span><span class="w"> </span><span class="s2">"EC"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"totales"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="s2">"flete_internacional"</span><span class="p">:</span><span class="w"> </span><span class="mf">1000.00</span><span class="p">,</span><span class="w">
      </span><span class="s2">"seguro_internacional"</span><span class="p">:</span><span class="w"> </span><span class="mf">200.00</span><span class="p">,</span><span class="w">
      </span><span class="s2">"gastos_aduaneros"</span><span class="p">:</span><span class="w"> </span><span class="mi">800</span><span class="p">,</span><span class="w">
      </span><span class="s2">"otros_gastos_transporte"</span><span class="p">:</span><span class="w"> </span><span class="mf">350.00</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>Retorna un objeto tipo <strong><a href="#requerimiento">factura</a></strong> que incluye un nuevo parámetro <code>id</code>,
el cual identifica de manera única a la factura. El campo <code>clave_acceso</code> generado
también se incluirá como parte de la respuesta.</p>
<h2 id='emision-de-una-factura-de-reembolso'>Emisión de una factura de reembolso</h2><h3 id='operacion-2'>Operación</h3>
<p><code>POST /invoices/issue</code></p>
<h3 id='requerimiento-2'>Requerimiento</h3>
<blockquote>
<h4 id='requerimiento-de-ejemplo-3'>Requerimiento de ejemplo</h4></blockquote>
<pre class="highlight shell tab-shell"><code>curl -v https://link.datil.co/invoices/issue <span class="se">\</span>
-H <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
-H <span class="s2">"X-Key: &lt;API-key&gt;"</span> <span class="se">\</span>
-H <span class="s2">"X-Password: &lt;clave-certificado-firma&gt;"</span> <span class="se">\</span>
-d <span class="s1">'{
  "ambiente": 1,
  "tipo_emision": 1,
  "secuencial": 148,
  "fecha_emision": "2019-10-28T11:28:56.782Z",
  "emisor": {
    "ruc": "0910000000001",
    "obligado_contabilidad": true,
    "contribuyente_especial": "12345",
    "nombre_comercial": "XYZ Corp",
    "razon_social": "XYZ Corporación S.A.",
    "direccion": "Av. Primera 234 y calle 5ta",
    "establecimiento": {
      "punto_emision": "002",
      "codigo": "001",
      "direccion": "Av. Primera 234 y calle 5ta"
    }
  },
  "moneda": "USD",
  "info_adicional": [{
    "nombre": "Tiempo de entrega",
    "valor": "5 días"
  }],
  "totales": {
    "total_sin_impuestos": 300,
    "impuestos": [{
      "base_imponible": 300,
      "valor": 0.00,
      "codigo": "2",
      "codigo_porcentaje": "6"
    }],
    "importe_total": 300.00,
    "propina": 0.0,
    "descuento": 0.0
  },
  "comprador": {
    "email": "juan.perez@xyz.com",
    "identificacion": "0987654321",
    "tipo_identificacion": "05",
    "razon_social": "Juan Pérez",
    "direccion": "Calle única Numero 987",
    "telefono": "046029400"
  },
  "items": [{
    "cantidad": 1.0,
    "codigo_principal": "REEM",
    "codigo_auxiliar": "",
    "precio_unitario": 300.00,
    "descuento": 0,
    "descripcion": "Reembolso de gastos",
    "precio_total_sin_impuestos": 300.00,
    "impuestos": [{
      "base_imponible": 300.00,
      "valor": 0.00,
      "tarifa": 0.00,
      "codigo": "2",
      "codigo_porcentaje": "0"
    }],
    "descuento": 0.00
  }],
  "pagos": [{
    "medio": "cheque",
    "total": 300.00,
    "propiedades": {
      "numero": "1234567890",
      "banco": "Banco Pacífico"
    },
    "notas": "Depositado en cuenta corriente"
  }],
  "reembolso": {
    "codigo": "41",
    "documentos": [{
      "codigo_establecimiento": "002",
      "codigo_punto_emision": "003",
      "fecha_emision": "2019-10-28T11:28:56.782Z",
      "identificacion_proveedor": "1790017478001",
      "impuestos": [{
        "base_imponible": 300.00,
        "codigo": "2",
        "codigo_porcentaje": "0",
        "tarifa": 0.00,
        "valor": 0.00
      }],
      "numero_autorizacion": "1234567890",
      "pais_origen_proveedor": "EC",
      "secuencia": 2132,
      "tipo": "01",
      "tipo_identificacion_proveedor": "04",
      "tipo_proveedor": "02"
    }],
    "subtotal": 300.00,
    "total": 300.00,
    "total_impuestos": 0.00
  }
}'</span>
</code></pre><pre class="highlight python tab-python"><code><span class="kn">import</span> <span class="nn">requests</span><span class="p">,</span> <span class="n">json</span>

<span class="n">factura</span> <span class="o">=</span> <span class="p">{</span>
  <span class="s">"ambiente"</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
  <span class="s">"tipo_emision"</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
  <span class="s">"secuencial"</span><span class="p">:</span> <span class="mi">148</span><span class="p">,</span>
  <span class="s">"fecha_emision"</span><span class="p">:</span> <span class="s">"2019-10-28T11:28:56.782Z"</span><span class="p">,</span>
  <span class="s">"emisor"</span><span class="p">:</span> <span class="p">{</span>
    <span class="s">"ruc"</span><span class="p">:</span> <span class="s">"0910000000001"</span><span class="p">,</span>
    <span class="s">"obligado_contabilidad"</span><span class="p">:</span> <span class="n">true</span><span class="p">,</span>
    <span class="s">"contribuyente_especial"</span><span class="p">:</span> <span class="s">"12345"</span><span class="p">,</span>
    <span class="s">"nombre_comercial"</span><span class="p">:</span> <span class="s">"XYZ Corp"</span><span class="p">,</span>
    <span class="s">"razon_social"</span><span class="p">:</span> <span class="s">"XYZ Corporación S.A."</span><span class="p">,</span>
    <span class="s">"direccion"</span><span class="p">:</span> <span class="s">"Av. Primera 234 y calle 5ta"</span><span class="p">,</span>
    <span class="s">"establecimiento"</span><span class="p">:</span> <span class="p">{</span>
      <span class="s">"punto_emision"</span><span class="p">:</span> <span class="s">"002"</span><span class="p">,</span>
      <span class="s">"codigo"</span><span class="p">:</span> <span class="s">"001"</span><span class="p">,</span>
      <span class="s">"direccion"</span><span class="p">:</span> <span class="s">"Av. Primera 234 y calle 5ta"</span>
    <span class="p">}</span>
  <span class="p">},</span>
  <span class="s">"moneda"</span><span class="p">:</span> <span class="s">"USD"</span><span class="p">,</span>
  <span class="s">"info_adicional"</span><span class="p">:</span> <span class="p">[{</span>
    <span class="s">"nombre"</span><span class="p">:</span> <span class="s">"Tiempo de entrega"</span><span class="p">,</span>
    <span class="s">"valor"</span><span class="p">:</span> <span class="s">"5 días"</span>
  <span class="p">}],</span>
  <span class="s">"totales"</span><span class="p">:</span> <span class="p">{</span>
    <span class="s">"total_sin_impuestos"</span><span class="p">:</span> <span class="mi">300</span><span class="p">,</span>
    <span class="s">"impuestos"</span><span class="p">:</span> <span class="p">[{</span>
      <span class="s">"base_imponible"</span><span class="p">:</span> <span class="mi">300</span><span class="p">,</span>
      <span class="s">"valor"</span><span class="p">:</span> <span class="mf">0.00</span><span class="p">,</span>
      <span class="s">"codigo"</span><span class="p">:</span> <span class="s">"2"</span><span class="p">,</span>
      <span class="s">"codigo_porcentaje"</span><span class="p">:</span> <span class="s">"6"</span>
    <span class="p">}],</span>
    <span class="s">"importe_total"</span><span class="p">:</span> <span class="mf">300.00</span><span class="p">,</span>
    <span class="s">"propina"</span><span class="p">:</span> <span class="mf">0.0</span><span class="p">,</span>
    <span class="s">"descuento"</span><span class="p">:</span> <span class="mf">0.0</span>
  <span class="p">},</span>
  <span class="s">"comprador"</span><span class="p">:</span> <span class="p">{</span>
    <span class="s">"email"</span><span class="p">:</span> <span class="s">"juan.perez@xyz.com"</span><span class="p">,</span>
    <span class="s">"identificacion"</span><span class="p">:</span> <span class="s">"0987654321"</span><span class="p">,</span>
    <span class="s">"tipo_identificacion"</span><span class="p">:</span> <span class="s">"05"</span><span class="p">,</span>
    <span class="s">"razon_social"</span><span class="p">:</span> <span class="s">"Juan Pérez"</span><span class="p">,</span>
    <span class="s">"direccion"</span><span class="p">:</span> <span class="s">"Calle única Numero 987"</span><span class="p">,</span>
    <span class="s">"telefono"</span><span class="p">:</span> <span class="s">"046029400"</span>
  <span class="p">},</span>
  <span class="s">"items"</span><span class="p">:</span> <span class="p">[{</span>
    <span class="s">"cantidad"</span><span class="p">:</span> <span class="mf">1.0</span><span class="p">,</span>
    <span class="s">"codigo_principal"</span><span class="p">:</span> <span class="s">"REEM"</span><span class="p">,</span>
    <span class="s">"codigo_auxiliar"</span><span class="p">:</span> <span class="s">""</span><span class="p">,</span>
    <span class="s">"precio_unitario"</span><span class="p">:</span> <span class="mf">300.00</span><span class="p">,</span>
    <span class="s">"descuento"</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
    <span class="s">"descripcion"</span><span class="p">:</span> <span class="s">"Reembolso de gastos"</span><span class="p">,</span>
    <span class="s">"precio_total_sin_impuestos"</span><span class="p">:</span> <span class="mf">300.00</span><span class="p">,</span>
    <span class="s">"impuestos"</span><span class="p">:</span> <span class="p">[{</span>
      <span class="s">"base_imponible"</span><span class="p">:</span> <span class="mf">300.00</span><span class="p">,</span>
      <span class="s">"valor"</span><span class="p">:</span> <span class="mf">0.00</span><span class="p">,</span>
      <span class="s">"tarifa"</span><span class="p">:</span> <span class="mf">0.00</span><span class="p">,</span>
      <span class="s">"codigo"</span><span class="p">:</span> <span class="s">"2"</span><span class="p">,</span>
      <span class="s">"codigo_porcentaje"</span><span class="p">:</span> <span class="s">"0"</span>
    <span class="p">}],</span>
    <span class="s">"descuento"</span><span class="p">:</span> <span class="mf">0.00</span>
  <span class="p">}],</span>
  <span class="s">"pagos"</span><span class="p">:</span> <span class="p">[{</span>
    <span class="s">"medio"</span><span class="p">:</span> <span class="s">"cheque"</span><span class="p">,</span>
    <span class="s">"total"</span><span class="p">:</span> <span class="mf">300.00</span><span class="p">,</span>
    <span class="s">"propiedades"</span><span class="p">:</span> <span class="p">{</span>
      <span class="s">"numero"</span><span class="p">:</span> <span class="s">"1234567890"</span><span class="p">,</span>
      <span class="s">"banco"</span><span class="p">:</span> <span class="s">"Banco Pacífico"</span>
    <span class="p">},</span>
    <span class="s">"notas"</span><span class="p">:</span> <span class="s">"Depositado en cuenta corriente"</span>
  <span class="p">}],</span>
  <span class="s">"reembolso"</span><span class="p">:</span> <span class="p">{</span>
    <span class="s">"codigo"</span><span class="p">:</span> <span class="s">"41"</span><span class="p">,</span>
    <span class="s">"documentos"</span><span class="p">:</span> <span class="p">[{</span>
      <span class="s">"codigo_establecimiento"</span><span class="p">:</span> <span class="s">"002"</span><span class="p">,</span>
      <span class="s">"codigo_punto_emision"</span><span class="p">:</span> <span class="s">"003"</span><span class="p">,</span>
      <span class="s">"fecha_emision"</span><span class="p">:</span> <span class="s">"2019-10-28T11:28:56.782Z"</span><span class="p">,</span>
      <span class="s">"identificacion_proveedor"</span><span class="p">:</span> <span class="s">"1790017478001"</span><span class="p">,</span>
      <span class="s">"impuestos"</span><span class="p">:</span> <span class="p">[{</span>
        <span class="s">"base_imponible"</span><span class="p">:</span> <span class="mf">300.00</span><span class="p">,</span>
        <span class="s">"codigo"</span><span class="p">:</span> <span class="s">"2"</span><span class="p">,</span>
        <span class="s">"codigo_porcentaje"</span><span class="p">:</span> <span class="s">"0"</span><span class="p">,</span>
        <span class="s">"tarifa"</span><span class="p">:</span> <span class="mf">0.00</span><span class="p">,</span>
        <span class="s">"valor"</span><span class="p">:</span> <span class="mf">0.00</span>
      <span class="p">}],</span>
      <span class="s">"numero_autorizacion"</span><span class="p">:</span> <span class="s">"1234567890"</span><span class="p">,</span>
      <span class="s">"pais_origen_proveedor"</span><span class="p">:</span> <span class="s">"EC"</span><span class="p">,</span>
      <span class="s">"secuencia"</span><span class="p">:</span> <span class="mi">2132</span><span class="p">,</span>
      <span class="s">"tipo"</span><span class="p">:</span> <span class="s">"01"</span><span class="p">,</span>
      <span class="s">"tipo_identificacion_proveedor"</span><span class="p">:</span> <span class="s">"04"</span><span class="p">,</span>
      <span class="s">"tipo_proveedor"</span><span class="p">:</span> <span class="s">"02"</span>
    <span class="p">}],</span>
    <span class="s">"subtotal"</span><span class="p">:</span> <span class="mf">300.00</span><span class="p">,</span>
    <span class="s">"total"</span><span class="p">:</span> <span class="mf">300.00</span><span class="p">,</span>
    <span class="s">"total_impuestos"</span><span class="p">:</span> <span class="mf">0.00</span>
  <span class="p">}</span>
<span class="p">}</span>
<span class="n">cabeceras</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s">'x-key'</span><span class="p">:</span> <span class="s">'&lt;clave-del-api&gt;'</span><span class="p">,</span>
    <span class="s">'x-password'</span><span class="p">:</span> <span class="s">'&lt;clave-certificado-firma&gt;'</span><span class="p">,</span>
    <span class="s">'content-type'</span><span class="p">:</span> <span class="s">'application/json'</span><span class="p">}</span>
<span class="n">respuesta</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">post</span><span class="p">(</span>
    <span class="s">"https://link.datil.co/invoices/issue"</span><span class="p">,</span>
    <span class="n">headers</span> <span class="o">=</span> <span class="n">cabeceras</span><span class="p">,</span>
    <span class="n">data</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">factura</span><span class="p">))</span>
</code></pre><pre class="highlight csharp tab-csharp"><code><span class="k">using</span> <span class="nn">RestSharp</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">System</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">System.Collections.Generic</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">System.Linq</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">System.Text</span><span class="p">;</span>

<span class="k">namespace</span> <span class="nn">DatilClient</span> <span class="p">{</span>
  <span class="k">class</span> <span class="nc">InvoicingServiceClient</span> <span class="p">{</span>
    <span class="k">static</span> <span class="k">void</span> <span class="nf">Main</span><span class="p">(</span><span class="kt">string</span><span class="p">[]</span> <span class="n">args</span><span class="p">)</span> <span class="p">{</span>

      <span class="c1">// Este ejemplo utiliza RestSharp</span>
      <span class="c1">// Para instalar anda al menú: tools &gt; Library Package Manager &gt; Package Manager Console</span>
      <span class="c1">// copia y pega y presiona enter: Install-Package RestSharp</span>

      <span class="kt">var</span> <span class="n">client</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">RestClient</span><span class="p">(</span><span class="s">"https://link.datil.co/"</span><span class="p">);</span>
      <span class="kt">var</span> <span class="n">request</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">RestRequest</span><span class="p">(</span><span class="s">"invoices/issue"</span><span class="p">,</span> <span class="n">Method</span><span class="p">.</span><span class="n">POST</span><span class="p">);</span>
      <span class="n">request</span><span class="p">.</span><span class="nf">AddHeader</span><span class="p">(</span><span class="s">"X-Key"</span><span class="p">,</span> <span class="s">"&lt;clave-del-api&gt;"</span><span class="p">);</span>
      <span class="n">request</span><span class="p">.</span><span class="nf">AddHeader</span><span class="p">(</span><span class="s">"X-Password"</span><span class="p">,</span> <span class="s">"&lt;clave-certificado-firma&gt;"</span><span class="p">);</span>
      <span class="n">request</span><span class="p">.</span><span class="nf">AddHeader</span><span class="p">(</span><span class="s">"Content-Type"</span><span class="p">,</span> <span class="s">"application/json"</span><span class="p">);</span>
      <span class="n">request</span><span class="p">.</span><span class="n">RequestFormat</span> <span class="p">=</span> <span class="n">DataFormat</span><span class="p">.</span><span class="n">Json</span><span class="p">;</span>

      <span class="kt">var</span> <span class="n">body</span> <span class="p">=</span> <span class="p">(</span><span class="err">@</span><span class="s">"{
</span>        <span class="s">""</span><span class="n">ambiente</span><span class="s">""</span><span class="p">:</span> <span class="m">1</span><span class="p">,</span>
        <span class="s">""</span><span class="n">tipo_emision</span><span class="s">""</span><span class="p">:</span> <span class="m">1</span><span class="p">,</span>
        <span class="s">""</span><span class="n">secuencial</span><span class="s">""</span><span class="p">:</span> <span class="m">148</span><span class="p">,</span>
        <span class="s">""</span><span class="n">fecha_emision</span><span class="s">""</span><span class="p">:</span> <span class="s">""</span><span class="m">2019</span><span class="p">-</span><span class="m">10</span><span class="p">-</span><span class="m">28</span><span class="n">T11</span><span class="p">:</span><span class="m">28</span><span class="p">:</span><span class="m">56.782</span><span class="n">Z</span><span class="s">""</span><span class="p">,</span>
        <span class="s">""</span><span class="n">emisor</span><span class="s">""</span><span class="p">:</span> <span class="p">{</span>
          <span class="s">""</span><span class="n">ruc</span><span class="s">""</span><span class="p">:</span> <span class="s">""</span><span class="m">0910000000001</span><span class="s">""</span><span class="p">,</span>
          <span class="s">""</span><span class="n">obligado_contabilidad</span><span class="s">""</span><span class="p">:</span> <span class="k">true</span><span class="p">,</span>
          <span class="s">""</span><span class="n">contribuyente_especial</span><span class="s">""</span><span class="p">:</span> <span class="s">""</span><span class="m">12345</span><span class="s">""</span><span class="p">,</span>
          <span class="s">""</span><span class="n">nombre_comercial</span><span class="s">""</span><span class="p">:</span> <span class="s">""</span><span class="n">XYZ</span> <span class="n">Corp</span><span class="s">""</span><span class="p">,</span>
          <span class="s">""</span><span class="n">razon_social</span><span class="s">""</span><span class="p">:</span> <span class="s">""</span><span class="n">XYZ</span> <span class="n">Corporaci</span><span class="err">ó</span><span class="n">n</span> <span class="n">S</span><span class="p">.</span><span class="n">A</span><span class="p">.</span><span class="s">""</span><span class="p">,</span>
          <span class="s">""</span><span class="n">direccion</span><span class="s">""</span><span class="p">:</span> <span class="s">""</span><span class="n">Av</span><span class="p">.</span> <span class="n">Primera</span> <span class="m">234</span> <span class="n">y</span> <span class="n">calle</span> <span class="m">5</span><span class="n">ta</span><span class="s">""</span><span class="p">,</span>
          <span class="s">""</span><span class="n">establecimiento</span><span class="s">""</span><span class="p">:</span> <span class="p">{</span>
            <span class="s">""</span><span class="n">punto_emision</span><span class="s">""</span><span class="p">:</span> <span class="s">""</span><span class="m">002</span><span class="s">""</span><span class="p">,</span>
            <span class="s">""</span><span class="n">codigo</span><span class="s">""</span><span class="p">:</span> <span class="s">""</span><span class="m">001</span><span class="s">""</span><span class="p">,</span>
            <span class="s">""</span><span class="n">direccion</span><span class="s">""</span><span class="p">:</span> <span class="s">""</span><span class="n">Av</span><span class="p">.</span> <span class="n">Primera</span> <span class="m">234</span> <span class="n">y</span> <span class="n">calle</span> <span class="m">5</span><span class="n">ta</span><span class="s">""</span>
          <span class="p">}</span>
        <span class="p">},</span>
        <span class="s">""</span><span class="n">moneda</span><span class="s">""</span><span class="p">:</span> <span class="s">""</span><span class="n">USD</span><span class="s">""</span><span class="p">,</span>
        <span class="s">""</span><span class="n">info_adicional</span><span class="s">""</span><span class="p">:</span> <span class="p">[{</span>
          <span class="s">""</span><span class="n">nombre</span><span class="s">""</span><span class="p">:</span> <span class="s">""</span><span class="n">Tiempo</span> <span class="n">de</span> <span class="n">entrega</span><span class="s">""</span><span class="p">,</span>
          <span class="s">""</span><span class="n">valor</span><span class="s">""</span><span class="p">:</span> <span class="s">""</span><span class="m">5</span> <span class="n">d</span><span class="err">í</span><span class="k">as</span><span class="s">""</span>
        <span class="p">}],</span>
        <span class="s">""</span><span class="n">totales</span><span class="s">""</span><span class="p">:</span> <span class="p">{</span>
          <span class="s">""</span><span class="n">total_sin_impuestos</span><span class="s">""</span><span class="p">:</span> <span class="m">300</span><span class="p">,</span>
          <span class="s">""</span><span class="n">impuestos</span><span class="s">""</span><span class="p">:</span> <span class="p">[{</span>
            <span class="s">""</span><span class="n">base_imponible</span><span class="s">""</span><span class="p">:</span> <span class="m">300</span><span class="p">,</span>
            <span class="s">""</span><span class="n">valor</span><span class="s">""</span><span class="p">:</span> <span class="m">0.00</span><span class="p">,</span>
            <span class="s">""</span><span class="n">codigo</span><span class="s">""</span><span class="p">:</span> <span class="s">""</span><span class="m">2</span><span class="s">""</span><span class="p">,</span>
            <span class="s">""</span><span class="n">codigo_porcentaje</span><span class="s">""</span><span class="p">:</span> <span class="s">""</span><span class="m">6</span><span class="s">""</span>
          <span class="p">}],</span>
          <span class="s">""</span><span class="n">importe_total</span><span class="s">""</span><span class="p">:</span> <span class="m">300.00</span><span class="p">,</span>
          <span class="s">""</span><span class="n">propina</span><span class="s">""</span><span class="p">:</span> <span class="m">0.0</span><span class="p">,</span>
          <span class="s">""</span><span class="n">descuento</span><span class="s">""</span><span class="p">:</span> <span class="m">0.0</span>
        <span class="p">},</span>
        <span class="s">""</span><span class="n">comprador</span><span class="s">""</span><span class="p">:</span> <span class="p">{</span>
          <span class="s">""</span><span class="n">email</span><span class="s">""</span><span class="p">:</span> <span class="s">""</span><span class="n">juan</span><span class="p">.</span><span class="n">perez@xyz</span><span class="p">.</span><span class="n">com</span><span class="s">""</span><span class="p">,</span>
          <span class="s">""</span><span class="n">identificacion</span><span class="s">""</span><span class="p">:</span> <span class="s">""</span><span class="m">0987654321</span><span class="s">""</span><span class="p">,</span>
          <span class="s">""</span><span class="n">tipo_identificacion</span><span class="s">""</span><span class="p">:</span> <span class="s">""</span><span class="m">05</span><span class="s">""</span><span class="p">,</span>
          <span class="s">""</span><span class="n">razon_social</span><span class="s">""</span><span class="p">:</span> <span class="s">""</span><span class="n">Juan</span> <span class="n">P</span><span class="err">é</span><span class="n">rez</span><span class="s">""</span><span class="p">,</span>
          <span class="s">""</span><span class="n">direccion</span><span class="s">""</span><span class="p">:</span> <span class="s">""</span><span class="n">Calle</span> <span class="err">ú</span><span class="n">nica</span> <span class="n">Numero</span> <span class="m">987</span><span class="s">""</span><span class="p">,</span>
          <span class="s">""</span><span class="n">telefono</span><span class="s">""</span><span class="p">:</span> <span class="s">""</span><span class="m">046029400</span><span class="s">""</span>
        <span class="p">},</span>
        <span class="s">""</span><span class="n">items</span><span class="s">""</span><span class="p">:</span> <span class="p">[{</span>
          <span class="s">""</span><span class="n">cantidad</span><span class="s">""</span><span class="p">:</span> <span class="m">1.0</span><span class="p">,</span>
          <span class="s">""</span><span class="n">codigo_principal</span><span class="s">""</span><span class="p">:</span> <span class="s">""</span><span class="n">REEM</span><span class="s">""</span><span class="p">,</span>
          <span class="s">""</span><span class="n">codigo_auxiliar</span><span class="s">""</span><span class="p">:</span> <span class="s">""</span><span class="p">,</span>
          <span class="s">""</span><span class="n">precio_unitario</span><span class="s">""</span><span class="p">:</span> <span class="m">300.00</span><span class="p">,</span>
          <span class="s">""</span><span class="n">descuento</span><span class="s">""</span><span class="p">:</span> <span class="m">0</span><span class="p">,</span>
          <span class="s">""</span><span class="n">descripcion</span><span class="s">""</span><span class="p">:</span> <span class="s">""</span><span class="n">Reembolso</span> <span class="n">de</span> <span class="n">gastos</span><span class="s">""</span><span class="p">,</span>
          <span class="s">""</span><span class="n">precio_total_sin_impuestos</span><span class="s">""</span><span class="p">:</span> <span class="m">300.00</span><span class="p">,</span>
          <span class="s">""</span><span class="n">impuestos</span><span class="s">""</span><span class="p">:</span> <span class="p">[{</span>
            <span class="s">""</span><span class="n">base_imponible</span><span class="s">""</span><span class="p">:</span> <span class="m">300.00</span><span class="p">,</span>
            <span class="s">""</span><span class="n">valor</span><span class="s">""</span><span class="p">:</span> <span class="m">0.00</span><span class="p">,</span>
            <span class="s">""</span><span class="n">tarifa</span><span class="s">""</span><span class="p">:</span> <span class="m">0.00</span><span class="p">,</span>
            <span class="s">""</span><span class="n">codigo</span><span class="s">""</span><span class="p">:</span> <span class="s">""</span><span class="m">2</span><span class="s">""</span><span class="p">,</span>
            <span class="s">""</span><span class="n">codigo_porcentaje</span><span class="s">""</span><span class="p">:</span> <span class="s">""</span><span class="m">0</span><span class="s">""</span>
          <span class="p">}],</span>
          <span class="s">""</span><span class="n">descuento</span><span class="s">""</span><span class="p">:</span> <span class="m">0.00</span>
        <span class="p">}],</span>
        <span class="s">""</span><span class="n">pagos</span><span class="s">""</span><span class="p">:</span> <span class="p">[{</span>
          <span class="s">""</span><span class="n">medio</span><span class="s">""</span><span class="p">:</span> <span class="s">""</span><span class="n">cheque</span><span class="s">""</span><span class="p">,</span>
          <span class="s">""</span><span class="n">total</span><span class="s">""</span><span class="p">:</span> <span class="m">300.00</span><span class="p">,</span>
          <span class="s">""</span><span class="n">propiedades</span><span class="s">""</span><span class="p">:</span> <span class="p">{</span>
            <span class="s">""</span><span class="n">numero</span><span class="s">""</span><span class="p">:</span> <span class="s">""</span><span class="m">1234567890</span><span class="s">""</span><span class="p">,</span>
            <span class="s">""</span><span class="n">banco</span><span class="s">""</span><span class="p">:</span> <span class="s">""</span><span class="n">Banco</span> <span class="n">Pac</span><span class="err">í</span><span class="n">fico</span><span class="s">""</span>
          <span class="p">},</span>
          <span class="s">""</span><span class="n">notas</span><span class="s">""</span><span class="p">:</span> <span class="s">""</span><span class="n">Depositado</span> <span class="n">en</span> <span class="n">cuenta</span> <span class="n">corriente</span><span class="s">""</span>
        <span class="p">}],</span>
        <span class="s">""</span><span class="n">reembolso</span><span class="s">""</span><span class="p">:</span> <span class="p">{</span>
          <span class="s">""</span><span class="n">codigo</span><span class="s">""</span><span class="p">:</span> <span class="s">""</span><span class="m">41</span><span class="s">""</span><span class="p">,</span>
          <span class="s">""</span><span class="n">documentos</span><span class="s">""</span><span class="p">:</span> <span class="p">[{</span>
            <span class="s">""</span><span class="n">codigo_establecimiento</span><span class="s">""</span><span class="p">:</span> <span class="s">""</span><span class="m">002</span><span class="s">""</span><span class="p">,</span>
            <span class="s">""</span><span class="n">codigo_punto_emision</span><span class="s">""</span><span class="p">:</span> <span class="s">""</span><span class="m">003</span><span class="s">""</span><span class="p">,</span>
            <span class="s">""</span><span class="n">fecha_emision</span><span class="s">""</span><span class="p">:</span> <span class="s">""</span><span class="m">2019</span><span class="p">-</span><span class="m">10</span><span class="p">-</span><span class="m">28</span><span class="n">T11</span><span class="p">:</span><span class="m">28</span><span class="p">:</span><span class="m">56.782</span><span class="n">Z</span><span class="s">""</span><span class="p">,</span>
            <span class="s">""</span><span class="n">identificacion_proveedor</span><span class="s">""</span><span class="p">:</span> <span class="s">""</span><span class="m">1790017478001</span><span class="s">""</span><span class="p">,</span>
            <span class="s">""</span><span class="n">impuestos</span><span class="s">""</span><span class="p">:</span> <span class="p">[{</span>
              <span class="s">""</span><span class="n">base_imponible</span><span class="s">""</span><span class="p">:</span> <span class="m">300.00</span><span class="p">,</span>
              <span class="s">""</span><span class="n">codigo</span><span class="s">""</span><span class="p">:</span> <span class="s">""</span><span class="m">2</span><span class="s">""</span><span class="p">,</span>
              <span class="s">""</span><span class="n">codigo_porcentaje</span><span class="s">""</span><span class="p">:</span> <span class="s">""</span><span class="m">0</span><span class="s">""</span><span class="p">,</span>
              <span class="s">""</span><span class="n">tarifa</span><span class="s">""</span><span class="p">:</span> <span class="m">0.00</span><span class="p">,</span>
              <span class="s">""</span><span class="n">valor</span><span class="s">""</span><span class="p">:</span> <span class="m">0.00</span>
            <span class="p">}],</span>
            <span class="s">""</span><span class="n">numero_autorizacion</span><span class="s">""</span><span class="p">:</span> <span class="s">""</span><span class="m">1234567890</span><span class="s">""</span><span class="p">,</span>
            <span class="s">""</span><span class="n">pais_origen_proveedor</span><span class="s">""</span><span class="p">:</span> <span class="s">""</span><span class="n">EC</span><span class="s">""</span><span class="p">,</span>
            <span class="s">""</span><span class="n">secuencia</span><span class="s">""</span><span class="p">:</span> <span class="m">2132</span><span class="p">,</span>
            <span class="s">""</span><span class="n">tipo</span><span class="s">""</span><span class="p">:</span> <span class="s">""</span><span class="m">01</span><span class="s">""</span><span class="p">,</span>
            <span class="s">""</span><span class="n">tipo_identificacion_proveedor</span><span class="s">""</span><span class="p">:</span> <span class="s">""</span><span class="m">04</span><span class="s">""</span><span class="p">,</span>
            <span class="s">""</span><span class="n">tipo_proveedor</span><span class="s">""</span><span class="p">:</span> <span class="s">""</span><span class="m">02</span><span class="s">""</span>
          <span class="p">}],</span>
          <span class="s">""</span><span class="n">subtotal</span><span class="s">""</span><span class="p">:</span> <span class="m">300.00</span><span class="p">,</span>
          <span class="s">""</span><span class="n">total</span><span class="s">""</span><span class="p">:</span> <span class="m">300.00</span><span class="p">,</span>
          <span class="s">""</span><span class="n">total_impuestos</span><span class="s">""</span><span class="p">:</span> <span class="m">0.00</span>
        <span class="p">}</span>
      <span class="p">}</span><span class="s">");
</span>      <span class="n">request</span><span class="p">.</span><span class="nf">AddParameter</span><span class="p">(</span><span class="s">"application/json"</span><span class="p">,</span> <span class="n">body</span><span class="p">,</span> <span class="n">ParameterType</span><span class="p">.</span><span class="n">RequestBody</span><span class="p">);</span>
      <span class="n">IRestResponse</span> <span class="n">response</span> <span class="p">=</span> <span class="n">client</span><span class="p">.</span><span class="nf">Execute</span><span class="p">(</span><span class="n">request</span><span class="p">);</span>

      <span class="n">Console</span><span class="p">.</span><span class="nf">WriteLine</span><span class="p">(</span><span class="n">response</span><span class="p">.</span><span class="n">Content</span><span class="p">);</span>
      <span class="n">Console</span><span class="p">.</span><span class="nf">ReadLine</span><span class="p">();</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">}</span>
</code></pre>
<p>Para la emisión de una factura de reembolso se debe enviar la información completa del
comprobante en el cuerpo del requerimiento en formato JSON. El total de ítems de la factura de reembolso debe ser igual al total de los documentos.</p>

<table><thead>
<tr>
<th>Parámetro</th>
<th>Tipo</th>
<th>Descripción</th>
</tr>
</thead><tbody>
<tr>
<td>secuencial</td>
<td>integer (min. 1 - max. 999999999 )</td>
<td>Número de secuencia de la factura. <strong>Requerido</strong></td>
</tr>
<tr>
<td>emisor</td>
<td><a href="#emisor">emisor</a></td>
<td>Información completa del emisor. <strong>Requerido</strong></td>
</tr>
<tr>
<td>moneda</td>
<td>string</td>
<td>Código <a href="https://en.wikipedia.org/wiki/ISO_4217">ISO</a> de la moneda. <strong>Requerido</strong></td>
</tr>
<tr>
<td>fecha_emision</td>
<td>string</td>
<td>Fecha de emisión en formato AAAA-MM-DDHoraZonaHoraria, definido en el estándar <a href="http://tools.ietf.org/html/rfc3339#section-5.6">ISO8601</a>.</td>
</tr>
<tr>
<td>ambiente</td>
<td>integer</td>
<td>Pruebas: <code>1</code>.<br>Producción <code>2</code>.<br><strong>Requerido</strong></td>
</tr>
<tr>
<td>totales</td>
<td>objeto tipo <a href="#totales-reembolso">totales</a></td>
<td>Listado de totales. <strong>Requerido</strong></td>
</tr>
<tr>
<td>comprador</td>
<td>objeto tipo <a href="#persona">persona</a></td>
<td>Información del comprador. <strong>Requerido</strong></td>
</tr>
<tr>
<td>tipo_emision</td>
<td>integer</td>
<td>Emisión normal: <code>1</code>.<br>Emisión por indisponibilidad: <code>2</code><br><strong>Requerido</strong></td>
</tr>
<tr>
<td>items</td>
<td>listado de objetos tipo <a href="#item-de-factura">item</a></td>
<td>Items incluídos en la factura. Para facturas de reembolso el impuesto del ítem es No Objeto de Impuesto <strong>Requerido</strong></td>
</tr>
<tr>
<td>version</td>
<td>string</td>
<td>Versión del formato de comprobantes electrónicos de SRI. Si no se especifica, se utilizará la última revisión del formato implementada,</td>
</tr>
<tr>
<td>clave_acceso</td>
<td>string (49 caracteres)</td>
<td>La clave de acceso representa un identificador único del comprobante. Si esta información no es provista, Dátil la generará.<br>¿Cómo <a href="#clave-de-acceso">generar</a> la clave de acceso?</td>
</tr>
<tr>
<td>info_adicional</td>
<td>Listado de objectos de tipo <a href="#info-adicional">información adicional</a></td>
<td>Información adicional adjunta al comprobante en forma de diccionario. Ejemplo:<br><code>[{&quot;nombre&quot;:&quot;plan&quot;, &quot;valor&quot;:&quot;Inicial&quot;, &quot;nombre&quot;:&quot;vigencia&quot;, &quot;valor&quot;:&quot;1 mes&quot;}]</code></td>
</tr>
<tr>
<td>informacion_adicional</td>
<td>objeto</td>
<td>Información adicional adjunta al comprobante en forma de diccionario. Ejemplo:<br><code>{&quot;plan&quot;: &quot;Inicial&quot;, &quot;vigencia&quot;: &quot;1 mes&quot;}</code> <span style="color: red"><strong>Obsoleto</strong></span> <em>utiliza el parámetro info_adicional</em></td>
</tr>
<tr>
<td>pagos</td>
<td>Listado de objetos tipo <a href="#pagos">pagos</a></td>
<td>Listado de formas de pago aplicables a la factura. <strong>Requerido</strong></td>
</tr>
<tr>
<td>reembolso</td>
<td>objeto tipo <a href="#reembolso">reembolso</a></td>
<td>Información de reembolso. <strong>Requerido</strong></td>
</tr>
</tbody></table>

<h3 id="totales-reembolso"> Totales </h3>

<table><thead>
<tr>
<th>Parámetro</th>
<th>Tipo</th>
<th>Descripción</th>
</tr>
</thead><tbody>
<tr>
<td>total_sin_impuestos</td>
<td>float</td>
<td>Total antes de los impuestos. <strong>Requerido</strong></td>
</tr>
<tr>
<td>descuento</td>
<td>float</td>
<td>Suma de los descuentos de cada ítem y del descuento adicional. <strong>Requerido</strong></td>
</tr>
<tr>
<td>importe_total</td>
<td>float</td>
<td>Total incluyendo impuestos. <strong>Requerido</strong></td>
</tr>
<tr>
<td>impuestos</td>
<td>listado de objetos <a href="#total-impuesto">total impuesto</a></td>
<td>Listado de impuesto totalizados. <strong>Requerido</strong></td>
</tr>
</tbody></table>
<h4 id='pagos-2'>Pagos</h4>
<table><thead>
<tr>
<th>Parámetro</th>
<th>Tipo</th>
<th>Descripción</th>
</tr>
</thead><tbody>
<tr>
<td>fecha</td>
<td>string</td>
<td>Fecha de recepción del pago en formato AAAA-MM-DDHoraZonaHoraria, definido en el estándar <a href="http://tools.ietf.org/html/rfc3339#section-5.6">ISO8601</a>. Si no es especificado se utiliza la fecha y hora actual.</td>
</tr>
<tr>
<td>medio</td>
<td>string</td>
<td>Código del <a href="#tipos-de-forma-de-pago">tipo de forma de pago</a>. <strong>Requerido</strong></td>
</tr>
<tr>
<td>total</td>
<td>float</td>
<td>Total aplicable a la forma de pago especificada. <strong>Requerido</strong></td>
</tr>
<tr>
<td>notas</td>
<td>string (máximo 300 caracteres)</td>
<td>Texto abierto que te permite registrar cualquier nota relacionada al pago.</td>
</tr>
<tr>
<td>propiedades</td>
<td>objeto</td>
<td>Información adicional adjunta al pago en forma de diccionario. Ejemplo:<br><code>{&quot;plazo&quot;: &quot;30&quot;, &quot;unidad_tiempo&quot;: &quot;dias&quot;}</code></td>
</tr>
</tbody></table>
<h2 id='consulta-de-una-factura'>Consulta de una factura</h2>
<p>Consulta una factura para obtener toda la información del comprobante, incluyendo
el estado del mismo.
El parámetro <code>estado</code> de la respuesta obtenida al invocar esta operación, indica
el estado actual del comprobante.</p>

<p>Si es necesario conocer en detalle, en que estado del <a href="#proceso-de-emision">proceso de emisión</a>,
se debe examinar los parámetros <code>envio_sri</code> y <code>autorizacion_sri</code> de la respuesta.</p>
<h3 id='operacion-3'>Operación</h3>
<p><code>GET /invoices/&lt;invoice-id&gt;</code></p>
<h3 id='requerimiento-3'>Requerimiento</h3>
<blockquote>
<h4 id='requerimiento-de-ejemplo-4'>Requerimiento de ejemplo</h4></blockquote>
<pre class="highlight shell tab-shell"><code>curl -v https://link.datil.co/invoices/&lt;id-factura&gt; <span class="se">\</span>
-H <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
-H <span class="s2">"X-Key: &lt;clave-del-api&gt;"</span>
</code></pre><pre class="highlight python tab-python"><code><span class="kn">import</span> <span class="nn">requests</span>
<span class="n">cabeceras</span> <span class="o">=</span> <span class="p">{</span><span class="s">'x-key'</span><span class="p">:</span> <span class="s">'&lt;clave-del-api&gt;'</span><span class="p">}</span>
<span class="n">respuesta</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span>
    <span class="s">'https://link.datil.co/invoices/&lt;id-factura&gt;'</span><span class="p">,</span>
    <span class="n">headers</span> <span class="o">=</span> <span class="n">cabeceras</span><span class="p">)</span>
</code></pre><pre class="highlight csharp tab-csharp"><code><span class="k">using</span> <span class="nn">RestSharp</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">System</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">System.Collections.Generic</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">System.Linq</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">System.Text</span><span class="p">;</span>

<span class="k">namespace</span> <span class="nn">DatilClient</span> <span class="p">{</span>
  <span class="k">class</span> <span class="nc">InvoicingServiceClient</span> <span class="p">{</span>
    <span class="k">static</span> <span class="k">void</span> <span class="nf">Main</span><span class="p">(</span><span class="kt">string</span><span class="p">[]</span> <span class="n">args</span><span class="p">)</span> <span class="p">{</span>

      <span class="kt">var</span> <span class="n">client</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">RestClient</span><span class="p">(</span><span class="s">"https://link.datil.co/"</span><span class="p">);</span>
      <span class="kt">var</span> <span class="n">idFactura</span> <span class="p">=</span> <span class="s">"&lt;id-factura&gt;"</span><span class="p">;</span>
      <span class="kt">var</span> <span class="n">request</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">RestRequest</span><span class="p">(</span><span class="s">"invoices/"</span> <span class="p">+</span> <span class="n">idFactura</span><span class="p">,</span> <span class="n">Method</span><span class="p">.</span><span class="n">GET</span><span class="p">);</span>
      <span class="n">request</span><span class="p">.</span><span class="nf">AddHeader</span><span class="p">(</span><span class="s">"X-Key"</span><span class="p">,</span> <span class="s">"&lt;clave-del-api&gt;"</span><span class="p">);</span>

      <span class="n">IRestResponse</span> <span class="n">response</span> <span class="p">=</span> <span class="n">client</span><span class="p">.</span><span class="nf">Execute</span><span class="p">(</span><span class="n">request</span><span class="p">);</span>

      <span class="n">Console</span><span class="p">.</span><span class="nf">WriteLine</span><span class="p">(</span><span class="n">response</span><span class="p">.</span><span class="n">Content</span><span class="p">);</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">}</span>
</code></pre>
<p>Reemplaza en la ruta <code>&lt;invoice-ID&gt;</code> por el <code>id</code> de la factura que necesitas consultar.</p>
<h3 id='respuesta-3'>Respuesta</h3>
<blockquote>
<h4 id='respuesta-de-ejemplo-3'>Respuesta de ejemplo</h4></blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"abcf12343faad06785"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"secuencial"</span><span class="p">:</span><span class="w"> </span><span class="s2">"16"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"fecha_emision"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2016-05-15"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"version"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1.0.0"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"clave_acceso"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1505201501099271255400110011000000000162092727615"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"emisor"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"ruc"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0992712554001"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"razon_social"</span><span class="p">:</span><span class="w"> </span><span class="s2">"DATILMEDIA S.A."</span><span class="p">,</span><span class="w">
        </span><span class="s2">"nombre_comercial"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Dátil"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"direccion"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
        </span><span class="s2">"obligado_contabilidad"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
        </span><span class="s2">"contribuyente_especial"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w">
        </span><span class="s2">"establecimiento"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="s2">"codigo"</span><span class="p">:</span><span class="w"> </span><span class="s2">"001"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"direccion"</span><span class="p">:</span><span class="w"> </span><span class="s2">"V.E. 112 Y CIRCUNVALACION NORTE"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"punto_emision"</span><span class="p">:</span><span class="w"> </span><span class="s2">"100"</span><span class="w">
        </span><span class="p">}</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="s2">"estado"</span><span class="p">:</span><span class="w"> </span><span class="s2">"AUTORIZADO"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"correos_enviados"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="p">{</span><span class="w">
            </span><span class="s2">"fecha_envio"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2015-05-15T16:36:48.274604"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"destinatarios"</span><span class="p">:</span><span class="w"> </span><span class="s2">"juanantonioplaza@datilmedia.com"</span><span class="w">
        </span><span class="p">}</span><span class="w">
    </span><span class="p">],</span><span class="w">
    </span><span class="s2">"guia_remision"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w">
    </span><span class="s2">"moneda"</span><span class="p">:</span><span class="w"> </span><span class="s2">"USD"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"informacion_adicional"</span><span class="p">:</span><span class="w"> </span><span class="p">[],</span><span class="w">
    </span><span class="s2">"ambiente"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"totales"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"total_sin_impuestos"</span><span class="p">:</span><span class="w"> </span><span class="s2">"150.00"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"descuento"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0.00"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"propina"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0.00"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"impuestos"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
            </span><span class="p">{</span><span class="w">
                </span><span class="s2">"codigo"</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w">
                </span><span class="s2">"codigo_porcentaje"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2"</span><span class="p">,</span><span class="w">
                </span><span class="s2">"base_imponible"</span><span class="p">:</span><span class="w"> </span><span class="s2">"150.00"</span><span class="p">,</span><span class="w">
                </span><span class="s2">"valor"</span><span class="p">:</span><span class="w"> </span><span class="s2">"18.00"</span><span class="w">
            </span><span class="p">}</span><span class="w">
        </span><span class="p">],</span><span class="w">
        </span><span class="s2">"importe_total"</span><span class="p">:</span><span class="w"> </span><span class="s2">"168.00"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="s2">"comprador"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"razon_social"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Carlos L. Plaza"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"identificacion"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0900102222"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"tipo_identificacion"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
        </span><span class="s2">"email"</span><span class="p">:</span><span class="w"> </span><span class="s2">"cplaza@gye593.com"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"direccion"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Calle Uno y Calle Dos"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"telefono"</span><span class="p">:</span><span class="w"> </span><span class="s2">"043334445"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="s2">"envio_sri"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"mensajes"</span><span class="p">:</span><span class="w"> </span><span class="p">[],</span><span class="w">
        </span><span class="s2">"estado"</span><span class="p">:</span><span class="w"> </span><span class="s2">"RECIBIDA"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"fecha"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="s2">"tipo_emision"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"items"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="p">{</span><span class="w">
            </span><span class="s2">"detalles_adicionales"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                </span><span class="s2">"Estadía"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2 noches"</span><span class="p">,</span><span class="w">
                </span><span class="s2">"Habitación"</span><span class="p">:</span><span class="w"> </span><span class="s2">"203"</span><span class="w">
            </span><span class="p">},</span><span class="w">
            </span><span class="s2">"cantidad"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1.000000"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"codigo_principal"</span><span class="p">:</span><span class="w"> </span><span class="s2">"HAB"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"codigo_auxiliar"</span><span class="p">:</span><span class="w"> </span><span class="s2">"DOB"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"descripcion"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Habitación doble"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"precio_unitario"</span><span class="p">:</span><span class="w"> </span><span class="s2">"150.000000"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"descuento"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0.00"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"precio_total_sin_impuestos"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w">
            </span><span class="s2">"impuestos"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
                </span><span class="p">{</span><span class="w">
                    </span><span class="s2">"tarifa"</span><span class="p">:</span><span class="w"> </span><span class="s2">"12.00"</span><span class="p">,</span><span class="w">
                    </span><span class="s2">"codigo"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2"</span><span class="p">,</span><span class="w">
                    </span><span class="s2">"codigo_porcentaje"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2"</span><span class="p">,</span><span class="w">
                    </span><span class="s2">"base_imponible"</span><span class="p">:</span><span class="w"> </span><span class="s2">"150.00"</span><span class="p">,</span><span class="w">
                    </span><span class="s2">"valor"</span><span class="p">:</span><span class="w"> </span><span class="s2">"18.00"</span><span class="w">
                </span><span class="p">}</span><span class="w">
            </span><span class="p">],</span><span class="w">
            </span><span class="s2">"unidad_medida"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Kilos"</span><span class="w">
        </span><span class="p">}</span><span class="w">
    </span><span class="p">],</span><span class="w">
    </span><span class="s2">"valor_retenido_iva"</span><span class="p">:</span><span class="w"> </span><span class="mf">70.40</span><span class="p">,</span><span class="w">
    </span><span class="s2">"valor_retenido_renta"</span><span class="p">:</span><span class="w"> </span><span class="mf">29.60</span><span class="p">,</span><span class="w">
    </span><span class="s2">"credito"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"fecha_vencimiento"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2016-06-28"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"monto"</span><span class="p">:</span><span class="w"> </span><span class="mf">34.21</span><span class="w">
    </span><span class="p">},</span><span class="w">    
    </span><span class="s2">"pagos"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
      </span><span class="p">{</span><span class="w">
        </span><span class="s2">"medio"</span><span class="p">:</span><span class="w"> </span><span class="s2">"cheque"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"total"</span><span class="p">:</span><span class="w"> </span><span class="mf">4882.68</span><span class="p">,</span><span class="w">
        </span><span class="s2">"propiedades"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
          </span><span class="s2">"numero"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1234567890"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"banco"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Banco Pacífico"</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="s2">"notas"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Depositado en cuenta corriente"</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">],</span><span class="w">
    </span><span class="s2">"compensaciones"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
      </span><span class="p">{</span><span class="w">
        </span><span class="s2">"codigo"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
        </span><span class="s2">"tarifa"</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w">
        </span><span class="s2">"valor"</span><span class="p">:</span><span class="w"> </span><span class="mf">2.00</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">],</span><span class="w">
    </span><span class="s2">"exportacion"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="s2">"incoterm"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"termino"</span><span class="p">:</span><span class="w"> </span><span class="s2">"CIF"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"lugar"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Guayaquil"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"total_sin_impuestos"</span><span class="p">:</span><span class="w"> </span><span class="s2">"CIF"</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="s2">"origen"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"codigo_pais"</span><span class="p">:</span><span class="s2">"EC"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"puerto"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Guayaquil"</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="s2">"destino"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"codigo_pais"</span><span class="p">:</span><span class="s2">"CN"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"puerto"</span><span class="p">:</span><span class="w"> </span><span class="s2">"China"</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="s2">"codigo_pais_adquisicion"</span><span class="p">:</span><span class="w"> </span><span class="s2">"EC"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"totales"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"flete_internacional"</span><span class="p">:</span><span class="w"> </span><span class="mf">1000.00</span><span class="p">,</span><span class="w">
        </span><span class="s2">"seguro_internacional"</span><span class="p">:</span><span class="w"> </span><span class="mf">200.00</span><span class="p">,</span><span class="w">
        </span><span class="s2">"gastos_aduaneros"</span><span class="p">:</span><span class="w"> </span><span class="mi">800</span><span class="p">,</span><span class="w">
        </span><span class="s2">"otros_gastos_transporte"</span><span class="p">:</span><span class="w"> </span><span class="mf">350.00</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="s2">"autorizacion"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"estado"</span><span class="p">:</span><span class="w"> </span><span class="s2">"AUTORIZADO"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"mensajes"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
            </span><span class="p">{</span><span class="w">
                </span><span class="s2">"identificador"</span><span class="p">:</span><span class="w"> </span><span class="s2">"60"</span><span class="p">,</span><span class="w">
                </span><span class="s2">"mensaje"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ESTE PROCESO FUE REALIZADO EN EL AMBIENTE DE PRUEBAS"</span><span class="p">,</span><span class="w">
                </span><span class="s2">"tipo"</span><span class="p">:</span><span class="w"> </span><span class="s2">"INFORMATIVO"</span><span class="p">,</span><span class="w">
                </span><span class="s2">"informacion_adicional"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="w">
            </span><span class="p">}</span><span class="w">
        </span><span class="p">],</span><span class="w">
        </span><span class="s2">"numero"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1505201516323509927125540010266935227"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"fecha"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2015-05-15T16:32:35.000380"</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<table><thead>
<tr>
<th>Parámetro</th>
<th>Tipo</th>
<th>Descripción</th>
</tr>
</thead><tbody>
<tr>
<td>secuencial</td>
<td>string</td>
<td>Número de secuencia de la factura.</td>
</tr>
<tr>
<td>estado</td>
<td>string</td>
<td>Posibles valores: <code>AUTORIZADO</code>, <code>NO AUTORIZADO</code>, <code>ENVIADO</code>, <code>DEVUELTO</code>, <code>RECIBIDO</code>, <code>ERROR</code></td>
</tr>
<tr>
<td>fecha_emision</td>
<td>string</td>
<td>Fecha de emisión en formato AAAA-MM-DDHoraZonaHoraria, definido en el estándar <a href="http://tools.ietf">ISO8601</a>.</td>
</tr>
<tr>
<td>clave_acceso</td>
<td>string</td>
<td>La clave de acceso representa un identificador único del comprobante. Si esta información no es provista, Dátil la generará.<br>¿Cómo <a href="#clave-de-acceso">generar</a> la clave de acceso?</td>
</tr>
<tr>
<td>envio_sri</td>
<td>objeto tipo <a href="#envio-sri">envio sri</a></td>
<td>Información luego de enviar el comprobante.</td>
</tr>
<tr>
<td>autorizacion</td>
<td>objeto tipo <a href="#autorizacion-sri">autorizacion sri</a></td>
<td>Información de la autorización.org/html/rfc3339#section-5.6).</td>
</tr>
<tr>
<td>emisor</td>
<td>objeto tipo <a href="#emisor">emisor</a></td>
<td>Información completa del emisor.</td>
</tr>
<tr>
<td>moneda</td>
<td>string</td>
<td>Código <a href="https://en.wikipedia.org/wiki/ISO_4217">ISO</a> de la moneda.</td>
</tr>
<tr>
<td>ambiente</td>
<td>integer</td>
<td>Pruebas: <code>1</code>.<br>Producción <code>2</code>.<br></td>
</tr>
<tr>
<td>totales</td>
<td>objeto tipo <a href="#totales">totales</a></td>
<td>Listado de totales.</td>
</tr>
<tr>
<td>comprador</td>
<td>objeto <a href="#persona">persona</a></td>
<td>Información del comprador.</td>
</tr>
<tr>
<td>tipo_emision</td>
<td>integer</td>
<td>Emisión normal: <code>1</code>.<br>Emisión por indisponibilidad: <code>2</code><br></td>
</tr>
<tr>
<td>items</td>
<td>listado de objetos tipo <a href="#item-de-factura">item</a></td>
<td>Items incluídos en la factura.</td>
</tr>
<tr>
<td>pagos</td>
<td>listado de objetos tipo <a href="#pagos">pagos</a></td>
<td>Listado de formas de pago aplicables a la factura.</td>
</tr>
<tr>
<td>credito</td>
<td>Objeto de tipo <a href="#credito">credito</a></td>
<td>Información del crédito directo otorgado al cliente.</td>
</tr>
<tr>
<td>version</td>
<td>string</td>
<td>Versión de la especificación, opciones válidas: <code>1.0.0</code>, <code>1.1.0</code></td>
</tr>
</tbody></table>
<h2 id='consulta-de-una-factura-de-reembolso'>Consulta de una factura de reembolso</h2>
<p>Consulta una factura de reembolso para obtener toda la información del comprobante, incluyendo
el estado del mismo.
El parámetro <code>estado</code> de la respuesta obtenida al invocar esta operación, indica
el estado actual del comprobante.</p>

<p>Si es necesario conocer en detalle, en que estado del <a href="#proceso-de-emision">proceso de emisión</a>,
se debe examinar los parámetros <code>envio_sri</code> y <code>autorizacion_sri</code> de la respuesta.</p>
<h3 id='operacion-4'>Operación</h3>
<p><code>GET /invoices/&lt;invoice-id&gt;</code></p>
<h3 id='requerimiento-4'>Requerimiento</h3>
<blockquote>
<h4 id='requerimiento-de-ejemplo-5'>Requerimiento de ejemplo</h4></blockquote>
<pre class="highlight shell tab-shell"><code>curl -v https://link.datil.co/invoices/&lt;id-factura&gt; <span class="se">\</span>
-H <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
-H <span class="s2">"X-Key: &lt;clave-del-api&gt;"</span> <span class="se">\</span>
-H <span class="s2">"X-Password: &lt;clave-certificado-firma&gt;"</span> <span class="se">\</span>
</code></pre><pre class="highlight python tab-python"><code><span class="kn">import</span> <span class="nn">requests</span>
<span class="n">cabeceras</span> <span class="o">=</span> <span class="p">{</span><span class="s">'x-key'</span><span class="p">:</span> <span class="s">'&lt;clave-del-api&gt;'</span><span class="p">}</span>
<span class="n">respuesta</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span>
    <span class="s">'https://link.datil.co/invoices/&lt;id-factura&gt;'</span><span class="p">,</span>
    <span class="n">headers</span> <span class="o">=</span> <span class="n">cabeceras</span><span class="p">)</span>
</code></pre><pre class="highlight csharp tab-csharp"><code><span class="k">using</span> <span class="nn">RestSharp</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">System</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">System.Collections.Generic</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">System.Linq</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">System.Text</span><span class="p">;</span>

<span class="k">namespace</span> <span class="nn">DatilClient</span> <span class="p">{</span>
  <span class="k">class</span> <span class="nc">InvoicingServiceClient</span> <span class="p">{</span>
    <span class="k">static</span> <span class="k">void</span> <span class="nf">Main</span><span class="p">(</span><span class="kt">string</span><span class="p">[]</span> <span class="n">args</span><span class="p">)</span> <span class="p">{</span>

      <span class="kt">var</span> <span class="n">client</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">RestClient</span><span class="p">(</span><span class="s">"https://link.datil.co/"</span><span class="p">);</span>
      <span class="kt">var</span> <span class="n">idFactura</span> <span class="p">=</span> <span class="s">"&lt;id-factura&gt;"</span><span class="p">;</span>
      <span class="kt">var</span> <span class="n">request</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">RestRequest</span><span class="p">(</span><span class="s">"invoices/"</span> <span class="p">+</span> <span class="n">idFactura</span><span class="p">,</span> <span class="n">Method</span><span class="p">.</span><span class="n">GET</span><span class="p">);</span>
      <span class="n">request</span><span class="p">.</span><span class="nf">AddHeader</span><span class="p">(</span><span class="s">"X-Key"</span><span class="p">,</span> <span class="s">"&lt;clave-del-api&gt;"</span><span class="p">);</span>

      <span class="n">IRestResponse</span> <span class="n">response</span> <span class="p">=</span> <span class="n">client</span><span class="p">.</span><span class="nf">Execute</span><span class="p">(</span><span class="n">request</span><span class="p">);</span>

      <span class="n">Console</span><span class="p">.</span><span class="nf">WriteLine</span><span class="p">(</span><span class="n">response</span><span class="p">.</span><span class="n">Content</span><span class="p">);</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">}</span>
</code></pre>
<p>Reemplaza en la ruta <code>&lt;invoice-ID&gt;</code> por el <code>id</code> de la factura que necesitas consultar.</p>
<h3 id='respuesta-4'>Respuesta</h3>
<blockquote>
<h4 id='respuesta-de-ejemplo-4'>Respuesta de ejemplo</h4></blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"abcf12343faad06785"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"secuencial"</span><span class="p">:</span><span class="w"> </span><span class="mi">148</span><span class="p">,</span><span class="w">
  </span><span class="s2">"fecha_emision"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2019-10-28T11:28:56.782Z"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"version"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1.0.0"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"clave_acceso"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1505201501099271255400110011000000000162092727615"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"ambiente"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
  </span><span class="s2">"tipo_emision"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
  </span><span class="s2">"emisor"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"ruc"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0910000000001"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"obligado_contabilidad"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
    </span><span class="s2">"contribuyente_especial"</span><span class="p">:</span><span class="w"> </span><span class="s2">"12345"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"nombre_comercial"</span><span class="p">:</span><span class="w"> </span><span class="s2">"XYZ Corp"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"razon_social"</span><span class="p">:</span><span class="w"> </span><span class="s2">"XYZ Corporación S.A."</span><span class="p">,</span><span class="w">
    </span><span class="s2">"direccion"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Av. Primera 234 y calle 5ta"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"establecimiento"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="s2">"punto_emision"</span><span class="p">:</span><span class="w"> </span><span class="s2">"002"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"codigo"</span><span class="p">:</span><span class="w"> </span><span class="s2">"001"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"direccion"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Av. Primera 234 y calle 5ta"</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="s2">"estado"</span><span class="p">:</span><span class="w"> </span><span class="s2">"AUTORIZADO"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"correos_enviados"</span><span class="p">:</span><span class="w"> </span><span class="p">[{</span><span class="w">
    </span><span class="s2">"fecha_envio"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2019-10-28T16:36:48.274604"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"destinatarios"</span><span class="p">:</span><span class="w"> </span><span class="s2">"juanantonioplaza@datilmedia.com"</span><span class="w">
  </span><span class="p">}],</span><span class="w">
  </span><span class="s2">"moneda"</span><span class="p">:</span><span class="w"> </span><span class="s2">"USD"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"info_adicional"</span><span class="p">:</span><span class="w"> </span><span class="p">[{</span><span class="w">
    </span><span class="s2">"nombre"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Tiempo de entrega"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"valor"</span><span class="p">:</span><span class="w"> </span><span class="s2">"5 días"</span><span class="w">
  </span><span class="p">}],</span><span class="w">
  </span><span class="s2">"totales"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"total_sin_impuestos"</span><span class="p">:</span><span class="w"> </span><span class="mi">300</span><span class="p">,</span><span class="w">
    </span><span class="s2">"impuestos"</span><span class="p">:</span><span class="w"> </span><span class="p">[{</span><span class="w">
      </span><span class="s2">"base_imponible"</span><span class="p">:</span><span class="w"> </span><span class="mi">300</span><span class="p">,</span><span class="w">
      </span><span class="s2">"valor"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.00</span><span class="p">,</span><span class="w">
      </span><span class="s2">"codigo"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"codigo_porcentaje"</span><span class="p">:</span><span class="w"> </span><span class="s2">"6"</span><span class="w">
    </span><span class="p">}],</span><span class="w">
    </span><span class="s2">"importe_total"</span><span class="p">:</span><span class="w"> </span><span class="mf">300.00</span><span class="p">,</span><span class="w">
    </span><span class="s2">"propina"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.0</span><span class="p">,</span><span class="w">
    </span><span class="s2">"descuento"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.0</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="s2">"envio_sri"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="s2">"mensajes"</span><span class="p">:</span><span class="w"> </span><span class="p">[],</span><span class="w">
      </span><span class="s2">"estado"</span><span class="p">:</span><span class="w"> </span><span class="s2">"RECIBIDA"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"fecha"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="s2">"comprador"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"email"</span><span class="p">:</span><span class="w"> </span><span class="s2">"juan.perez@xyz.com"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"identificacion"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0987654321"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"tipo_identificacion"</span><span class="p">:</span><span class="w"> </span><span class="s2">"05"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"razon_social"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Juan Pérez"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"direccion"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Calle única Numero 987"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"telefono"</span><span class="p">:</span><span class="w"> </span><span class="s2">"046029400"</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="s2">"items"</span><span class="p">:</span><span class="w"> </span><span class="p">[{</span><span class="w">
    </span><span class="s2">"cantidad"</span><span class="p">:</span><span class="w"> </span><span class="mf">1.0</span><span class="p">,</span><span class="w">
    </span><span class="s2">"codigo_principal"</span><span class="p">:</span><span class="w"> </span><span class="s2">"REEM"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"codigo_auxiliar"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w">
    </span><span class="s2">"precio_unitario"</span><span class="p">:</span><span class="w"> </span><span class="mf">300.00</span><span class="p">,</span><span class="w">
    </span><span class="s2">"descuento"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
    </span><span class="s2">"descripcion"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Reembolso de gastos"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"precio_total_sin_impuestos"</span><span class="p">:</span><span class="w"> </span><span class="mf">300.00</span><span class="p">,</span><span class="w">
    </span><span class="s2">"impuestos"</span><span class="p">:</span><span class="w"> </span><span class="p">[{</span><span class="w">
      </span><span class="s2">"base_imponible"</span><span class="p">:</span><span class="w"> </span><span class="mf">300.00</span><span class="p">,</span><span class="w">
      </span><span class="s2">"valor"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.00</span><span class="p">,</span><span class="w">
      </span><span class="s2">"tarifa"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.00</span><span class="p">,</span><span class="w">
      </span><span class="s2">"codigo"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"codigo_porcentaje"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0"</span><span class="w">
    </span><span class="p">}],</span><span class="w">
    </span><span class="s2">"descuento"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.00</span><span class="w">
  </span><span class="p">}],</span><span class="w">
  </span><span class="s2">"pagos"</span><span class="p">:</span><span class="w"> </span><span class="p">[{</span><span class="w">
    </span><span class="s2">"medio"</span><span class="p">:</span><span class="w"> </span><span class="s2">"cheque"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"total"</span><span class="p">:</span><span class="w"> </span><span class="mf">300.00</span><span class="p">,</span><span class="w">
    </span><span class="s2">"propiedades"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="s2">"numero"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1234567890"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"banco"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Banco Pacífico"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="s2">"notas"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Depositado en cuenta corriente"</span><span class="w">
  </span><span class="p">}],</span><span class="w">
  </span><span class="s2">"reembolso"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"codigo"</span><span class="p">:</span><span class="w"> </span><span class="s2">"41"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"documentos"</span><span class="p">:</span><span class="w"> </span><span class="p">[{</span><span class="w">
      </span><span class="s2">"codigo_establecimiento"</span><span class="p">:</span><span class="w"> </span><span class="s2">"002"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"codigo_punto_emision"</span><span class="p">:</span><span class="w"> </span><span class="s2">"003"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"fecha_emision"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2019-10-28T11:28:56.782Z"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"identificacion_proveedor"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1790017478001"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"impuestos"</span><span class="p">:</span><span class="w"> </span><span class="p">[{</span><span class="w">
        </span><span class="s2">"base_imponible"</span><span class="p">:</span><span class="w"> </span><span class="mf">300.00</span><span class="p">,</span><span class="w">
        </span><span class="s2">"codigo"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"codigo_porcentaje"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"tarifa"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.00</span><span class="p">,</span><span class="w">
        </span><span class="s2">"valor"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.00</span><span class="w">
      </span><span class="p">}],</span><span class="w">
      </span><span class="s2">"numero_autorizacion"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1234567890"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"pais_origen_proveedor"</span><span class="p">:</span><span class="w"> </span><span class="s2">"EC"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"secuencia"</span><span class="p">:</span><span class="w"> </span><span class="mi">2132</span><span class="p">,</span><span class="w">
      </span><span class="s2">"tipo"</span><span class="p">:</span><span class="w"> </span><span class="s2">"01"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"tipo_identificacion_proveedor"</span><span class="p">:</span><span class="w"> </span><span class="s2">"04"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"tipo_proveedor"</span><span class="p">:</span><span class="w"> </span><span class="s2">"02"</span><span class="w">
    </span><span class="p">}],</span><span class="w">
    </span><span class="s2">"subtotal"</span><span class="p">:</span><span class="w"> </span><span class="mf">300.00</span><span class="p">,</span><span class="w">
    </span><span class="s2">"total"</span><span class="p">:</span><span class="w"> </span><span class="mf">300.00</span><span class="p">,</span><span class="w">
    </span><span class="s2">"total_impuestos"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.00</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="s2">"autorizacion"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"estado"</span><span class="p">:</span><span class="w"> </span><span class="s2">"AUTORIZADO"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"mensajes"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
      </span><span class="p">{</span><span class="w">
        </span><span class="s2">"identificador"</span><span class="p">:</span><span class="w"> </span><span class="s2">"60"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"mensaje"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ESTE PROCESO FUE REALIZADO EN EL AMBIENTE DE PRUEBAS"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"tipo"</span><span class="p">:</span><span class="w"> </span><span class="s2">"INFORMATIVO"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"informacion_adicional"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">],</span><span class="w">
    </span><span class="s2">"numero"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1505201516323509927125540010266935227"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"fecha"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2019-10-28T16:32:35.000380"</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<table><thead>
<tr>
<th>Parámetro</th>
<th>Tipo</th>
<th>Descripción</th>
</tr>
</thead><tbody>
<tr>
<td>secuencial</td>
<td>string</td>
<td>Número de secuencia de la factura.</td>
</tr>
<tr>
<td>estado</td>
<td>string</td>
<td>Posibles valores: <code>AUTORIZADO</code>, <code>NO AUTORIZADO</code>, <code>ENVIADO</code>, <code>DEVUELTO</code>, <code>RECIBIDO</code>, <code>ERROR</code></td>
</tr>
<tr>
<td>fecha_emision</td>
<td>string</td>
<td>Fecha de emisión en formato AAAA-MM-DDHoraZonaHoraria, definido en el estándar <a href="http://tools.ietf">ISO8601</a>.</td>
</tr>
<tr>
<td>clave_acceso</td>
<td>string</td>
<td>La clave de acceso representa un identificador único del comprobante. Si esta información no es provista, Dátil la generará.<br>¿Cómo <a href="#clave-de-acceso">generar</a> la clave de acceso?</td>
</tr>
<tr>
<td>envio_sri</td>
<td>objeto tipo <a href="#envio-sri">envio sri</a></td>
<td>Información luego de enviar el comprobante.</td>
</tr>
<tr>
<td>autorizacion</td>
<td>objeto tipo <a href="#autorizacion-sri">autorizacion sri</a></td>
<td>Información de la autorización.org/html/rfc3339#section-5.6).</td>
</tr>
<tr>
<td>emisor</td>
<td>objeto tipo <a href="#emisor">emisor</a></td>
<td>Información completa del emisor.</td>
</tr>
<tr>
<td>moneda</td>
<td>string</td>
<td>Código <a href="https://en.wikipedia.org/wiki/ISO_4217">ISO</a> de la moneda.</td>
</tr>
<tr>
<td>ambiente</td>
<td>integer</td>
<td>Pruebas: <code>1</code>.<br>Producción <code>2</code>.<br></td>
</tr>
<tr>
<td>totales</td>
<td>objeto tipo <a href="#totales-reembolso">totales</a></td>
<td>Listado de totales.</td>
</tr>
<tr>
<td>comprador</td>
<td>objeto <a href="#persona">persona</a></td>
<td>Información del comprador.</td>
</tr>
<tr>
<td>tipo_emision</td>
<td>integer</td>
<td>Emisión normal: <code>1</code>.<br>Emisión por indisponibilidad: <code>2</code><br></td>
</tr>
<tr>
<td>items</td>
<td>listado de objetos tipo <a href="#item-de-factura">item</a></td>
<td>Items incluídos en la factura.</td>
</tr>
<tr>
<td>pagos</td>
<td>listado de objetos tipo <a href="#pagos">pagos</a></td>
<td>Listado de formas de pago aplicables a la factura.</td>
</tr>
<tr>
<td>version</td>
<td>string</td>
<td>Versión de la especificación, opciones válidas: <code>1.0.0</code>, <code>1.1.0</code></td>
</tr>
<tr>
<td>reembolso</td>
<td>objeto tipo <a href="#reembolso">reembolso</a></td>
<td>Información de reembolso.</td>
</tr>
</tbody></table>
<h2 id='re-emision-de-una-factura'>Re-emisión de una factura</h2><h3 id='operacion-5'>Operación</h3>
<p><code>POST /invoices/:id/reissue</code></p>
<h3 id='requerimiento-5'>Requerimiento</h3>
<p>Esta operación debe ser utilizada para corregir comprobantes NO AUTORIZADOS o
DEVUELTOS por el Servicio de Rentas Internas.</p>

<p>En la URL de esta opción se debe incluir el <code>id</code> de la factura recibida al
momento de emitirla.</p>

<p>El cuerpo del requerimiento es un objeto <a href="#requerimiento">factura</a> con los
datos corregidos para que pueda ser procesado y autorizado.</p>
<h3 id='respuesta-5'>Respuesta</h3>
<p>Retornará un error si el comprobante se encuentra autorizado.</p>
<h1 id='notas-de-credito'>Notas de Crédito</h1><h2 id='emision-de-una-nota-de-credito'>Emisión de una nota de crédito</h2><h3 id='operacion'>Operación</h3>
<p><code>POST /credit-notes/issue</code></p>

<h3 id="requerimiento-nota-credito">Requerimiento</h3>

<blockquote>
<h4 id='requerimiento-de-ejemplo'>Requerimiento de ejemplo</h4></blockquote>
<pre class="highlight shell tab-shell"><code>curl -v https://link.datil.co/credit-notes/issue <span class="se">\</span>
-H <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
-H <span class="s2">"X-Key: &lt;API-key&gt;"</span> <span class="se">\</span>
-H <span class="s2">"X-Password: &lt;clave-certificado-firma&gt;"</span> <span class="se">\</span>
-d <span class="s1">'{
  "ambiente":1,
  "tipo_emision":1,
  "secuencial":148,
  "fecha_emision":"2015-02-28T11:28:56.782Z",
  "emisor":{
    "ruc":"0910000000001",
    "obligado_contabilidad":true,
    "contribuyente_especial":"12345",
    "nombre_comercial":"XYZ Corp",
    "razon_social":"XYZ Corporación S.A.",
    "direccion":"Av. Primera 234 y calle 5ta",
    "establecimiento":{
      "punto_emision":"002",
      "codigo":"001",
      "direccion":"Av. Primera 234 y calle 5ta"
    }
  },
  "moneda":"USD",
  "informacion_adicional":{
    "Tiempo de entrega":"5 días"
  },
  "totales":{
    "total_sin_impuestos":4359.54,
    "impuestos":[
      {
        "base_imponible":0.0,
        "valor":0.0,
        "codigo":"2",
        "codigo_porcentaje":"0"
      },
      {
        "base_imponible":4359.54,
        "valor":523.14,
        "codigo":"2",
        "codigo_porcentaje":"2"
      }
    ],
    "importe_total":4882.68
  },
  "fecha_emision_documento_modificado": "2015-02-27T11:28:56.782Z",
  "numero_documento_modificado": "001-002-000058473",
  "tipo_documento_modificado": "01",
  "motivo": "Devolución de produtos",
  "comprador":{
    "email":"juan.perez@xyz.com",
    "identificacion":"0987654321",
    "tipo_identificacion":"05",
    "razon_social":"Juan Pérez",
    "direccion":"Calle única Numero 987",
    "telefono":"046029400"
  },
  "items":[
    {
      "cantidad":622.0,
      "codigo_principal": "ZNC",
      "codigo_auxiliar": "050",
      "precio_unitario": 7.008907,
      "descripcion": "Zanahoria granel  50 Kg.",
      "precio_total_sin_impuestos": 4359.54,
      "impuestos": [
        {
          "base_imponible":4359.54,
          "valor":523.14,
          "tarifa":12.0,
          "codigo":"2",
          "codigo_porcentaje":"2"
        }
      ],
      "detalles_adicionales": {
        "Peso":"5000.0000"
      },
      "descuento": 0.0
    }
  ]
}'</span>
</code></pre><pre class="highlight python tab-python"><code><span class="kn">import</span> <span class="nn">requests</span><span class="p">,</span> <span class="n">json</span>

<span class="n">nota_credito</span> <span class="o">=</span> <span class="p">{</span>
  <span class="s">"ambiente"</span><span class="p">:</span><span class="mi">1</span><span class="p">,</span>
  <span class="s">"tipo_emision"</span><span class="p">:</span><span class="mi">1</span><span class="p">,</span>
  <span class="s">"secuencial"</span><span class="p">:</span><span class="mi">148</span><span class="p">,</span>
  <span class="s">"fecha_emision"</span><span class="p">:</span><span class="s">"2015-02-28T11:28:56.782Z"</span><span class="p">,</span>
  <span class="s">"emisor"</span><span class="p">:{</span>
    <span class="s">"ruc"</span><span class="p">:</span><span class="s">"0910000000001"</span><span class="p">,</span>
    <span class="s">"obligado_contabilidad"</span><span class="p">:</span><span class="n">true</span><span class="p">,</span>
    <span class="s">"contribuyente_especial"</span><span class="p">:</span><span class="s">"12345"</span><span class="p">,</span>
    <span class="s">"nombre_comercial"</span><span class="p">:</span><span class="s">"XYZ Corp"</span><span class="p">,</span>
    <span class="s">"razon_social"</span><span class="p">:</span><span class="s">"XYZ Corporación S.A."</span><span class="p">,</span>
    <span class="s">"direccion"</span><span class="p">:</span><span class="s">"Av. Primera 234 y calle 5ta"</span><span class="p">,</span>
    <span class="s">"establecimiento"</span><span class="p">:{</span>
      <span class="s">"punto_emision"</span><span class="p">:</span><span class="s">"002"</span><span class="p">,</span>
      <span class="s">"codigo"</span><span class="p">:</span><span class="s">"001"</span><span class="p">,</span>
      <span class="s">"direccion"</span><span class="p">:</span><span class="s">"Av. Primera 234 y calle 5ta"</span>
    <span class="p">}</span>
  <span class="p">},</span>
  <span class="s">"moneda"</span><span class="p">:</span><span class="s">"USD"</span><span class="p">,</span>
  <span class="s">"informacion_adicional"</span><span class="p">:{</span>
    <span class="s">"Tiempo de entrega"</span><span class="p">:</span><span class="s">"5 días"</span>
  <span class="p">},</span>
  <span class="s">"totales"</span><span class="p">:{</span>
    <span class="s">"total_sin_impuestos"</span><span class="p">:</span><span class="mf">4359.54</span><span class="p">,</span>
    <span class="s">"impuestos"</span><span class="p">:[</span>
      <span class="p">{</span>
        <span class="s">"base_imponible"</span><span class="p">:</span><span class="mf">0.0</span><span class="p">,</span>
        <span class="s">"valor"</span><span class="p">:</span><span class="mf">0.0</span><span class="p">,</span>
        <span class="s">"codigo"</span><span class="p">:</span><span class="s">"2"</span><span class="p">,</span>
        <span class="s">"codigo_porcentaje"</span><span class="p">:</span><span class="s">"0"</span>
      <span class="p">},</span>
      <span class="p">{</span>
        <span class="s">"base_imponible"</span><span class="p">:</span><span class="mf">4359.54</span><span class="p">,</span>
        <span class="s">"valor"</span><span class="p">:</span><span class="mf">523.14</span><span class="p">,</span>
        <span class="s">"codigo"</span><span class="p">:</span><span class="s">"2"</span><span class="p">,</span>
        <span class="s">"codigo_porcentaje"</span><span class="p">:</span><span class="s">"2"</span>
      <span class="p">}</span>
    <span class="p">],</span>
    <span class="s">"importe_total"</span><span class="p">:</span><span class="mf">4882.68</span>
  <span class="p">},</span>
  <span class="s">"fecha_emision_documento_modificado"</span><span class="p">:</span> <span class="s">"2015-02-27T11:28:56.782Z"</span><span class="p">,</span>
  <span class="s">"numero_documento_modificado"</span><span class="p">:</span> <span class="s">"001-002-000058473"</span><span class="p">,</span>
  <span class="s">"tipo_documento_modificado"</span><span class="p">:</span> <span class="s">"01"</span><span class="p">,</span>
  <span class="s">"motivo"</span><span class="p">:</span> <span class="s">"Devolución de produtos"</span><span class="p">,</span>
  <span class="s">"comprador"</span><span class="p">:{</span>
    <span class="s">"email"</span><span class="p">:</span><span class="s">"juan.perez@xyz.com"</span><span class="p">,</span>
    <span class="s">"identificacion"</span><span class="p">:</span><span class="s">"0987654321"</span><span class="p">,</span>
    <span class="s">"tipo_identificacion"</span><span class="p">:</span><span class="s">"05"</span><span class="p">,</span>
    <span class="s">"razon_social"</span><span class="p">:</span><span class="s">"Juan Pérez"</span><span class="p">,</span>
    <span class="s">"direccion"</span><span class="p">:</span><span class="s">"Calle única Numero 987"</span><span class="p">,</span>
    <span class="s">"telefono"</span><span class="p">:</span><span class="s">"046029400"</span>
  <span class="p">},</span>
  <span class="s">"items"</span><span class="p">:[</span>
    <span class="p">{</span>
      <span class="s">"cantidad"</span><span class="p">:</span><span class="mf">622.0</span><span class="p">,</span>
      <span class="s">"codigo_principal"</span><span class="p">:</span><span class="s">"ZNC"</span><span class="p">,</span>
      <span class="s">"codigo_auxiliar"</span><span class="p">:</span> <span class="s">"050"</span><span class="p">,</span>
      <span class="s">"precio_unitario"</span><span class="p">:</span> <span class="mf">7.008907</span><span class="p">,</span>
      <span class="s">"descripcion"</span><span class="p">:</span> <span class="s">"Zanahoria granel  50 Kg."</span><span class="p">,</span>
      <span class="s">"precio_total_sin_impuestos"</span><span class="p">:</span> <span class="mf">4359.54</span><span class="p">,</span>
      <span class="s">"impuestos"</span><span class="p">:</span> <span class="p">[</span>
        <span class="p">{</span>
          <span class="s">"base_imponible"</span><span class="p">:</span><span class="mf">4359.54</span><span class="p">,</span>
          <span class="s">"valor"</span><span class="p">:</span><span class="mf">523.14</span><span class="p">,</span>
          <span class="s">"tarifa"</span><span class="p">:</span><span class="mf">12.0</span><span class="p">,</span>
          <span class="s">"codigo"</span><span class="p">:</span><span class="s">"2"</span><span class="p">,</span>
          <span class="s">"codigo_porcentaje"</span><span class="p">:</span><span class="s">"2"</span>
        <span class="p">}</span>
      <span class="p">],</span>
      <span class="s">"detalles_adicionales"</span><span class="p">:</span> <span class="p">{</span>
        <span class="s">"Peso"</span><span class="p">:</span><span class="s">"5000.0000"</span>
      <span class="p">},</span>
      <span class="s">"descuento"</span><span class="p">:</span> <span class="mf">0.0</span>
    <span class="p">}</span>
  <span class="p">]</span>
<span class="p">}</span>
<span class="n">cabeceras</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s">'x-key'</span><span class="p">:</span> <span class="s">'&lt;clave-del-api&gt;'</span><span class="p">,</span>
    <span class="s">'x-password'</span><span class="p">:</span> <span class="s">'&lt;clave-certificado-firma&gt;'</span><span class="p">,</span>
    <span class="s">'content-type'</span><span class="p">:</span> <span class="s">'application/json'</span><span class="p">}</span>
<span class="n">respuesta</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">post</span><span class="p">(</span>
    <span class="s">"https://link.datil.co/credit-notes/issue"</span><span class="p">,</span>
    <span class="n">headers</span> <span class="o">=</span> <span class="n">cabeceras</span><span class="p">,</span>
    <span class="n">data</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">nota_credito</span><span class="p">))</span>
</code></pre><pre class="highlight csharp tab-csharp"><code><span class="k">using</span> <span class="nn">RestSharp</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">System</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">System.Collections.Generic</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">System.Linq</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">System.Text</span><span class="p">;</span>

<span class="k">namespace</span> <span class="nn">DatilClient</span> <span class="p">{</span>
  <span class="k">class</span> <span class="nc">InvoicingServiceClient</span> <span class="p">{</span>
    <span class="k">static</span> <span class="k">void</span> <span class="nf">Main</span><span class="p">(</span><span class="kt">string</span><span class="p">[]</span> <span class="n">args</span><span class="p">)</span> <span class="p">{</span>

      <span class="c1">// Este ejemplo utiliza RestSharp</span>
      <span class="c1">// Para instalar anda al menú: tools &gt; Library Package Manager &gt; Package Manager Console</span>
      <span class="c1">// copia y pega y presiona enter: Install-Package RestSharp</span>

      <span class="kt">var</span> <span class="n">client</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">RestClient</span><span class="p">(</span><span class="s">"https://link.datil.co/"</span><span class="p">);</span>
      <span class="kt">var</span> <span class="n">request</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">RestRequest</span><span class="p">(</span><span class="s">"credit-notes/issue"</span><span class="p">,</span> <span class="n">Method</span><span class="p">.</span><span class="n">POST</span><span class="p">);</span>
      <span class="n">request</span><span class="p">.</span><span class="nf">AddHeader</span><span class="p">(</span><span class="s">"X-Key"</span><span class="p">,</span> <span class="s">"&lt;clave-del-api&gt;"</span><span class="p">);</span>
      <span class="n">request</span><span class="p">.</span><span class="nf">AddHeader</span><span class="p">(</span><span class="s">"X-Password"</span><span class="p">,</span> <span class="s">"&lt;clave-certificado-firma&gt;"</span><span class="p">);</span>

      <span class="n">request</span><span class="p">.</span><span class="nf">AddBody</span><span class="p">(</span><span class="err">@</span><span class="s">"{
</span>        <span class="s">""</span><span class="n">ambiente</span><span class="s">""</span><span class="p">:</span><span class="m">1</span><span class="p">,</span>
        <span class="s">""</span><span class="n">tipo_emision</span><span class="s">""</span><span class="p">:</span><span class="m">1</span><span class="p">,</span>
        <span class="s">""</span><span class="n">secuencial</span><span class="s">""</span><span class="p">:</span><span class="m">148</span><span class="p">,</span>
        <span class="s">""</span><span class="n">fecha_emision</span><span class="s">""</span><span class="p">:</span><span class="s">""</span><span class="m">2015</span><span class="p">-</span><span class="m">02</span><span class="p">-</span><span class="m">28</span><span class="n">T11</span><span class="p">:</span><span class="m">28</span><span class="p">:</span><span class="m">56.782</span><span class="n">Z</span><span class="s">""</span><span class="p">,</span>
        <span class="s">""</span><span class="n">emisor</span><span class="s">""</span><span class="p">:{</span>
          <span class="s">""</span><span class="n">ruc</span><span class="s">""</span><span class="p">:</span><span class="s">""</span><span class="m">0910000000001</span><span class="s">""</span><span class="p">,</span>
          <span class="s">""</span><span class="n">obligado_contabilidad</span><span class="s">""</span><span class="p">:</span><span class="k">true</span><span class="p">,</span>
          <span class="s">""</span><span class="n">contribuyente_especial</span><span class="s">""</span><span class="p">:</span><span class="s">""</span><span class="m">12345</span><span class="s">""</span><span class="p">,</span>
          <span class="s">""</span><span class="n">nombre_comercial</span><span class="s">""</span><span class="p">:</span><span class="s">""</span><span class="n">XYZ</span> <span class="n">Corp</span><span class="s">""</span><span class="p">,</span>
          <span class="s">""</span><span class="n">razon_social</span><span class="s">""</span><span class="p">:</span><span class="s">""</span><span class="n">XYZ</span> <span class="n">Corporaci</span><span class="err">ó</span><span class="n">n</span> <span class="n">S</span><span class="p">.</span><span class="n">A</span><span class="p">.</span><span class="s">""</span><span class="p">,</span>
          <span class="s">""</span><span class="n">direccion</span><span class="s">""</span><span class="p">:</span><span class="s">""</span><span class="n">Av</span><span class="p">.</span> <span class="n">Primera</span> <span class="m">234</span> <span class="n">y</span> <span class="n">calle</span> <span class="m">5</span><span class="n">ta</span><span class="s">""</span><span class="p">,</span>
          <span class="s">""</span><span class="n">establecimiento</span><span class="s">""</span><span class="p">:{</span>
            <span class="s">""</span><span class="n">punto_emision</span><span class="s">""</span><span class="p">:</span><span class="s">""</span><span class="m">002</span><span class="s">""</span><span class="p">,</span>
            <span class="s">""</span><span class="n">codigo</span><span class="s">""</span><span class="p">:</span><span class="s">""</span><span class="m">001</span><span class="s">""</span><span class="p">,</span>
            <span class="s">""</span><span class="n">direccion</span><span class="s">""</span><span class="p">:</span><span class="s">""</span><span class="n">Av</span><span class="p">.</span> <span class="n">Primera</span> <span class="m">234</span> <span class="n">y</span> <span class="n">calle</span> <span class="m">5</span><span class="n">ta</span><span class="s">""</span>
          <span class="p">}</span>
        <span class="p">},</span>
        <span class="s">""</span><span class="n">moneda</span><span class="s">""</span><span class="p">:</span><span class="s">""</span><span class="n">USD</span><span class="s">""</span><span class="p">,</span>
        <span class="s">""</span><span class="n">informacion_adicional</span><span class="s">""</span><span class="p">:{</span>
          <span class="s">""</span><span class="n">Tiempo</span> <span class="n">de</span> <span class="n">entrega</span><span class="s">""</span><span class="p">:</span><span class="s">""</span><span class="m">5</span> <span class="n">d</span><span class="err">í</span><span class="k">as</span><span class="s">""</span>
        <span class="p">},</span>
        <span class="s">""</span><span class="n">totales</span><span class="s">""</span><span class="p">:{</span>
          <span class="s">""</span><span class="n">total_sin_impuestos</span><span class="s">""</span><span class="p">:</span><span class="m">4359.54</span><span class="p">,</span>
          <span class="s">""</span><span class="n">impuestos</span><span class="s">""</span><span class="p">:[</span>
            <span class="p">{</span>
              <span class="s">""</span><span class="n">base_imponible</span><span class="s">""</span><span class="p">:</span><span class="m">0.0</span><span class="p">,</span>
              <span class="s">""</span><span class="n">valor</span><span class="s">""</span><span class="p">:</span><span class="m">0.0</span><span class="p">,</span>
              <span class="s">""</span><span class="n">codigo</span><span class="s">""</span><span class="p">:</span><span class="s">""</span><span class="m">2</span><span class="s">""</span><span class="p">,</span>
              <span class="s">""</span><span class="n">codigo_porcentaje</span><span class="s">""</span><span class="p">:</span><span class="s">""</span><span class="m">0</span><span class="s">""</span>
            <span class="p">},</span>
            <span class="p">{</span>
              <span class="s">""</span><span class="n">base_imponible</span><span class="s">""</span><span class="p">:</span><span class="m">4359.54</span><span class="p">,</span>
              <span class="s">""</span><span class="n">valor</span><span class="s">""</span><span class="p">:</span><span class="m">523.14</span><span class="p">,</span>
              <span class="s">""</span><span class="n">codigo</span><span class="s">""</span><span class="p">:</span><span class="s">""</span><span class="m">2</span><span class="s">""</span><span class="p">,</span>
              <span class="s">""</span><span class="n">codigo_porcentaje</span><span class="s">""</span><span class="p">:</span><span class="s">""</span><span class="m">2</span><span class="s">""</span>
            <span class="p">}</span>
          <span class="p">],</span>
          <span class="s">""</span><span class="n">importe_total</span><span class="s">""</span><span class="p">:</span><span class="m">4882.68</span>
        <span class="p">},</span>
        <span class="s">""</span><span class="n">comprador</span><span class="s">""</span><span class="p">:{</span>
          <span class="s">""</span><span class="n">email</span><span class="s">""</span><span class="p">:</span><span class="s">""</span><span class="n">juan</span><span class="p">.</span><span class="n">perez@xyz</span><span class="p">.</span><span class="n">com</span><span class="s">""</span><span class="p">,</span>
          <span class="s">""</span><span class="n">identificacion</span><span class="s">""</span><span class="p">:</span><span class="s">""</span><span class="m">0987654321</span><span class="s">""</span><span class="p">,</span>
          <span class="s">""</span><span class="n">tipo_identificacion</span><span class="s">""</span><span class="p">:</span><span class="s">""</span><span class="m">05</span><span class="s">""</span><span class="p">,</span>
          <span class="s">""</span><span class="n">razon_social</span><span class="s">""</span><span class="p">:</span><span class="s">""</span><span class="n">Juan</span> <span class="n">P</span><span class="err">é</span><span class="n">rez</span><span class="s">""</span><span class="p">,</span>
          <span class="s">""</span><span class="n">direccion</span><span class="s">""</span><span class="p">:</span><span class="s">""</span><span class="n">Calle</span> <span class="err">ú</span><span class="n">nica</span> <span class="n">Numero</span> <span class="m">987</span><span class="s">""</span><span class="p">,</span>
          <span class="s">""</span><span class="n">telefono</span><span class="s">""</span><span class="p">:</span><span class="s">""</span><span class="m">046029400</span><span class="s">""</span>
        <span class="p">},</span>
        <span class="s">""</span><span class="n">items</span><span class="s">""</span><span class="p">:[</span>
          <span class="p">{</span>
            <span class="s">""</span><span class="n">cantidad</span><span class="s">""</span><span class="p">:</span><span class="m">622.0</span><span class="p">,</span>
            <span class="s">""</span><span class="n">codigo_principal</span><span class="s">""</span><span class="p">:</span><span class="s">""</span><span class="n">ZNC</span><span class="s">""</span>
            <span class="s">""</span><span class="n">codigo_auxiliar</span><span class="s">""</span><span class="p">:</span> <span class="s">""</span><span class="m">050</span><span class="s">""</span><span class="p">,</span>
            <span class="s">""</span><span class="n">precio_unitario</span><span class="s">""</span><span class="p">:</span> <span class="m">7.008907</span><span class="p">,</span>
            <span class="s">""</span><span class="n">descripcion</span><span class="s">""</span><span class="p">:</span> <span class="s">""</span><span class="n">Zanahoria</span> <span class="n">granel</span>  <span class="m">50</span> <span class="n">Kg</span><span class="p">.</span><span class="s">""</span><span class="p">,</span>
            <span class="s">""</span><span class="n">precio_total_sin_impuestos</span><span class="s">""</span><span class="p">:</span> <span class="m">4359.54</span><span class="p">,</span>
            <span class="s">""</span><span class="n">impuestos</span><span class="s">""</span><span class="p">:</span> <span class="p">[</span>
              <span class="p">{</span>
                <span class="s">""</span><span class="n">base_imponible</span><span class="s">""</span><span class="p">:</span><span class="m">4359.54</span><span class="p">,</span>
                <span class="s">""</span><span class="n">valor</span><span class="s">""</span><span class="p">:</span><span class="m">523.14</span><span class="p">,</span>
                <span class="s">""</span><span class="n">tarifa</span><span class="s">""</span><span class="p">:</span><span class="m">12.0</span><span class="p">,</span>
                <span class="s">""</span><span class="n">codigo</span><span class="s">""</span><span class="p">:</span><span class="s">""</span><span class="m">2</span><span class="s">""</span><span class="p">,</span>
                <span class="s">""</span><span class="n">codigo_porcentaje</span><span class="s">""</span><span class="p">:</span><span class="s">""</span><span class="m">2</span><span class="s">""</span>
              <span class="p">}</span>
            <span class="p">],</span>
            <span class="s">""</span><span class="n">detalles_adicionales</span><span class="s">""</span><span class="p">:</span> <span class="p">{</span>
              <span class="s">""</span><span class="n">Peso</span><span class="s">""</span><span class="p">:</span><span class="s">""</span><span class="m">5000.0000</span><span class="s">""</span>
            <span class="p">},</span>
            <span class="s">""</span><span class="n">descuento</span><span class="s">""</span><span class="p">:</span> <span class="m">0.0</span>
          <span class="p">}</span>
        <span class="p">]</span>
      <span class="p">}</span><span class="s">");
</span>
      <span class="n">IRestResponse</span> <span class="n">response</span> <span class="p">=</span> <span class="n">client</span><span class="p">.</span><span class="nf">Execute</span><span class="p">(</span><span class="n">request</span><span class="p">);</span>

      <span class="n">Console</span><span class="p">.</span><span class="nf">WriteLine</span><span class="p">(</span><span class="n">response</span><span class="p">.</span><span class="n">Content</span><span class="p">);</span>
      <span class="n">Console</span><span class="p">.</span><span class="nf">ReadLine</span><span class="p">();</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">}</span>
</code></pre>
<p>Para la emisión de una nota de crédito se debe enviar la información completa del
comprobante en el cuerpo del requerimiento en formato JSON.</p>

<table><thead>
<tr>
<th>Parámetro</th>
<th>Tipo</th>
<th>Descripción</th>
</tr>
</thead><tbody>
<tr>
<td>secuencial</td>
<td>integer (min. 1 - max. 999999999 )</td>
<td>Número de secuencia de la nota de crédito. <strong>Requerido</strong></td>
</tr>
<tr>
<td>emisor</td>
<td><a href="#emisor">emisor</a></td>
<td>Información completa del emisor. <strong>Requerido</strong></td>
</tr>
<tr>
<td>moneda</td>
<td>string</td>
<td>Código <a href="https://en.wikipedia.org/wiki/ISO_4217">ISO</a> de la moneda. <strong>Requerido</strong></td>
</tr>
<tr>
<td>fecha_emision</td>
<td>string</td>
<td>Fecha de emisión en formato AAAA-MM-DDHoraZonaHoraria, definido en el estándar <a href="http://tools.ietf.org/html/rfc3339#section-5.6">ISO8601</a>.</td>
</tr>
<tr>
<td>ambiente</td>
<td>integer</td>
<td>Pruebas: <code>1</code>.<br>Producción <code>2</code>.<br><strong>Requerido</strong></td>
</tr>
<tr>
<td>comprador</td>
<td>objeto tipo <a href="#persona">persona</a></td>
<td>Información del comprador. <strong>Requerido</strong></td>
</tr>
<tr>
<td>totales</td>
<td>objeto tipo <a href="#totales-nota-credito">totales</a></td>
<td>Listado de totales. <strong>Requerido</strong></td>
</tr>
<tr>
<td>fecha_emision_documento_modificado</td>
<td>string</td>
<td>Fecha de emisión en formato AAAA-MM-DDHoraZonaHoraria, definido en el estándar <a href="http://tools.ietf.org/html/rfc3339#section-5.6">ISO8601</a>. <strong>Requerido</strong></td>
</tr>
<tr>
<td>numero_documento_modificado</td>
<td>string</td>
<td>Número completo del documento que se está afectando. Normalmente facturas. Ejm: 001-002-010023098 <strong>Requerido</strong></td>
</tr>
<tr>
<td>tipo_documento_modificado</td>
<td>string</td>
<td>Códigos de <a href="#tipos-de-documentos">tipos de documentos</a>. <strong>Requerido</strong></td>
</tr>
<tr>
<td>motivo</td>
<td>string</td>
<td>Motivo de la operación. Ejm: Devolución de producto. <strong>Requerido</strong></td>
</tr>
<tr>
<td>tipo_emision</td>
<td>integer</td>
<td>Emisión normal: <code>1</code>.<br>Emisión por indisponibilidad: <code>2</code><br><strong>Requerido</strong></td>
</tr>
<tr>
<td>items</td>
<td>listado de objetos tipo <a href="#item-de-factura">item</a></td>
<td>Items incluídos en la nota de crédito. <strong>Requerido</strong></td>
</tr>
<tr>
<td>version</td>
<td>string</td>
<td>Versión del formato de comprobantes electrónicos de SRI. Si no se especifica, se utilizará la última revisión del formato implementada,</td>
</tr>
<tr>
<td>clave_acceso</td>
<td>string</td>
<td>La clave de acceso representa un identificador único del comprobante. Si esta información no es provista, Dátil la generará.<br>¿Cómo <a href="#clave-de-acceso">generar</a> la clave de acceso?</td>
</tr>
<tr>
<td>informacion_adicional</td>
<td>objeto</td>
<td>Información adicional adjunta al comprobante en forma de diccionario. Ejemplo:<br><code>{&quot;plan&quot;: &quot;Inicial&quot;, &quot;vigencia&quot;: &quot;1 mes&quot;}</code></td>
</tr>
</tbody></table>

<h4 id="totales-nota-credito">Totales</h4>

<table><thead>
<tr>
<th>Parámetro</th>
<th>Tipo</th>
<th>Descripción</th>
</tr>
</thead><tbody>
<tr>
<td>total_sin_impuestos</td>
<td>float</td>
<td>Total antes de los impuestos. <strong>Requerido</strong></td>
</tr>
<tr>
<td>importe_total</td>
<td>float</td>
<td>Total incluyendo impuestos. <strong>Requerido</strong></td>
</tr>
<tr>
<td>impuestos</td>
<td>listado de objetos <a href="#total-impuesto">total impuesto</a></td>
<td>Listado de impuesto totalizados. <strong>Requerido</strong></td>
</tr>
</tbody></table>

<!--aside class="success">
Remember — a happy kitten is an authenticated kitten!
</aside-->
<h3 id='respuesta'>Respuesta</h3>
<blockquote>
<h4 id='respuesta-de-ejemplo'>Respuesta de ejemplo</h4></blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"abcdef09876123cea56784f01"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"ambiente"</span><span class="p">:</span><span class="mi">1</span><span class="p">,</span><span class="w">
  </span><span class="s2">"tipo_emision"</span><span class="p">:</span><span class="mi">1</span><span class="p">,</span><span class="w">
  </span><span class="s2">"secuencial"</span><span class="p">:</span><span class="mi">148</span><span class="p">,</span><span class="w">
  </span><span class="s2">"fecha_emision"</span><span class="p">:</span><span class="s2">"2015-02-28T11:28:56.782Z"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"clave_acceso"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2802201501091000000000120010010000100451993736618"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"emisor"</span><span class="p">:{</span><span class="w">
    </span><span class="s2">"ruc"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0910000000001"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"obligado_contabilidad"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
    </span><span class="s2">"contribuyente_especial"</span><span class="p">:</span><span class="w"> </span><span class="s2">"12345"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"nombre_comercial"</span><span class="p">:</span><span class="w"> </span><span class="s2">"XYZ Corp"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"razon_social"</span><span class="p">:</span><span class="w"> </span><span class="s2">"XYZ Corporación S.A."</span><span class="p">,</span><span class="w">
    </span><span class="s2">"direccion"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Av. Primera 234 y calle 5ta"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"establecimiento"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="s2">"punto_emision"</span><span class="p">:</span><span class="w"> </span><span class="s2">"002"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"codigo"</span><span class="p">:</span><span class="w"> </span><span class="s2">"001"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"direccion"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Av. Primera 234 y calle 5ta"</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="s2">"moneda"</span><span class="p">:</span><span class="w"> </span><span class="s2">"USD"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"informacion_adicional"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"Tiempo de entrega"</span><span class="p">:</span><span class="w"> </span><span class="s2">"5 días"</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="s2">"totales"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"total_sin_impuestos"</span><span class="p">:</span><span class="w"> </span><span class="mf">4359.54</span><span class="p">,</span><span class="w">
    </span><span class="s2">"impuestos"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
      </span><span class="p">{</span><span class="w">
        </span><span class="s2">"base_imponible"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.0</span><span class="p">,</span><span class="w">
        </span><span class="s2">"valor"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.0</span><span class="p">,</span><span class="w">
        </span><span class="s2">"codigo"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"codigo_porcentaje"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0"</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="p">{</span><span class="w">
        </span><span class="s2">"base_imponible"</span><span class="p">:</span><span class="w"> </span><span class="mf">4359.54</span><span class="p">,</span><span class="w">
        </span><span class="s2">"valor"</span><span class="p">:</span><span class="w"> </span><span class="mf">523.14</span><span class="p">,</span><span class="w">
        </span><span class="s2">"codigo"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"codigo_porcentaje"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2"</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">],</span><span class="w">
    </span><span class="s2">"importe_total"</span><span class="p">:</span><span class="w"> </span><span class="mf">4882.68</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="s2">"comprador"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"email"</span><span class="p">:</span><span class="w"> </span><span class="s2">"juan.perez@xyz.com"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"identificacion"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0987654321"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"tipo_identificacion"</span><span class="p">:</span><span class="w"> </span><span class="s2">"05"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"razon_social"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Juan Pérez"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"direccion"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Calle única Numero 987"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"telefono"</span><span class="p">:</span><span class="w"> </span><span class="s2">"046029400"</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="s2">"items"</span><span class="p">:[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="s2">"cantidad"</span><span class="p">:</span><span class="w"> </span><span class="mf">622.0</span><span class="p">,</span><span class="w">
      </span><span class="s2">"codigo_principal"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ZNC"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"codigo_auxiliar"</span><span class="p">:</span><span class="w"> </span><span class="s2">"050"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"precio_unitario"</span><span class="p">:</span><span class="w"> </span><span class="mf">7.008907</span><span class="p">,</span><span class="w">
      </span><span class="s2">"descripcion"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Zanahoria granel  50 Kg."</span><span class="p">,</span><span class="w">
      </span><span class="s2">"precio_total_sin_impuestos"</span><span class="p">:</span><span class="w"> </span><span class="mf">4359.54</span><span class="p">,</span><span class="w">
      </span><span class="s2">"impuestos"</span><span class="p">:[</span><span class="w">
        </span><span class="p">{</span><span class="w">
          </span><span class="s2">"base_imponible"</span><span class="p">:</span><span class="w"> </span><span class="mf">4359.54</span><span class="p">,</span><span class="w">
          </span><span class="s2">"valor"</span><span class="p">:</span><span class="w"> </span><span class="mf">523.14</span><span class="p">,</span><span class="w">
          </span><span class="s2">"tarifa"</span><span class="p">:</span><span class="w"> </span><span class="mf">12.0</span><span class="p">,</span><span class="w">
          </span><span class="s2">"codigo"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"codigo_porcentaje"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2"</span><span class="w">
        </span><span class="p">}</span><span class="w">
      </span><span class="p">],</span><span class="w">
      </span><span class="s2">"detalles_adicionales"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"Peso"</span><span class="p">:</span><span class="w"> </span><span class="s2">"5000.0000"</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="s2">"descuento"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.0</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>Retorna un objeto tipo <strong><a href="#requerimiento-nota-credito">nota de crédito</a></strong> que incluye un nuevo parámetro <code>id</code>,
el cual identifica de manera única a la nota de crédito. El campo <code>clave_acceso</code>
generado también se incluirá como parte de la respuesta.</p>
<h2 id='emision-de-una-nota-de-credito-a-partir-de-xml'>Emisión de una nota de crédito a partir de XML</h2>
<p><code>POST /credit-notes/issue/xml</code></p>
<h3 id='requerimiento-a-partir-de-xml'>Requerimiento a partir de XML</h3>
<p>Para la emisión de una nota de crédito a partir de un XML se debe enviar contenido del archivo XML como parámetro en el cuerpo del requerimiento en formato JSON. Este XML debe cumplir con la especificación del SRI.</p>

<table><thead>
<tr>
<th>Parámetro</th>
<th>Tipo</th>
<th>Descripción</th>
</tr>
</thead><tbody>
<tr>
<td>xml</td>
<td>string</td>
<td>Contenido del archivo xml. <strong>Requerido</strong></td>
</tr>
</tbody></table>

<blockquote>
<h4 id='requerimiento-de-ejemplo-2'>Requerimiento de ejemplo</h4></blockquote>
<pre class="highlight shell tab-shell"><code>curl -v https://link.datil.co/credit-notes/issue/xml <span class="se">\</span>
-H <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
-H <span class="s2">"X-Key: &lt;API-key&gt;"</span> <span class="se">\</span>
-H <span class="s2">"X-Password: &lt;clave-certificado-firma&gt;"</span> <span class="se">\</span>
-d <span class="s1">'{"xml": "&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;
&lt;notaCredito id=\"comprobante\" version=\"1.1.0\"&gt;
  &lt;infoTributaria&gt;
    &lt;ambiente&gt;1&lt;/ambiente&gt;
    &lt;tipoEmision&gt;1&lt;/tipoEmision&gt;
    &lt;razonSocial&gt;DATILMEDIA S.A.&lt;/razonSocial&gt;
    &lt;nombreComercial&gt;Datil&lt;/nombreComercial&gt;
    &lt;ruc&gt;1234567890001&lt;/ruc&gt;
    &lt;claveAcceso&gt;0405202004123456789000110010010000000062235571918&lt;/claveAcceso&gt;
    &lt;codDoc&gt;04&lt;/codDoc&gt;
    &lt;estab&gt;001&lt;/estab&gt;
    &lt;ptoEmi&gt;001&lt;/ptoEmi&gt;
    &lt;secuencial&gt;000000006&lt;/secuencial&gt;
    &lt;dirMatriz&gt;Innvernadero Coworking, Bálsamos 813 entre Guayacanes e Higueras&lt;/dirMatriz&gt;
  &lt;/infoTributaria&gt;
  &lt;infoNotaCredito&gt;
    &lt;fechaEmision&gt;04/05/2020&lt;/fechaEmision&gt;
    &lt;dirEstablecimiento&gt;Innvernadero Coworking, Bálsamos 813 entre Guayacanes e Higueras&lt;/dirEstablecimiento&gt;
    &lt;tipoIdentificacionComprador&gt;04&lt;/tipoIdentificacionComprador&gt;
    &lt;razonSocialComprador&gt;Juan Pérez&lt;/razonSocialComprador&gt;
    &lt;identificacionComprador&gt;0953239092001&lt;/identificacionComprador&gt;
    &lt;obligadoContabilidad&gt;NO&lt;/obligadoContabilidad&gt;
    &lt;codDocModificado&gt;01&lt;/codDocModificado&gt;
    &lt;numDocModificado&gt;001-002-000000001&lt;/numDocModificado&gt;
    &lt;fechaEmisionDocSustento&gt;04/05/2020&lt;/fechaEmisionDocSustento&gt;
    &lt;totalSinImpuestos&gt;0.45&lt;/totalSinImpuestos&gt;
    &lt;valorModificacion&gt;0.68&lt;/valorModificacion&gt;
    &lt;moneda&gt;DOLAR&lt;/moneda&gt;
    &lt;totalConImpuestos&gt;
      &lt;totalImpuesto&gt;
        &lt;codigo&gt;3&lt;/codigo&gt;
        &lt;codigoPorcentaje&gt;3080&lt;/codigoPorcentaje&gt;
        &lt;baseImponible&gt;0.45&lt;/baseImponible&gt;
        &lt;valor&gt;0.16&lt;/valor&gt;
      &lt;/totalImpuesto&gt;
      &lt;totalImpuesto&gt;
        &lt;codigo&gt;2&lt;/codigo&gt;
        &lt;codigoPorcentaje&gt;2&lt;/codigoPorcentaje&gt;
        &lt;baseImponible&gt;0.61&lt;/baseImponible&gt;
        &lt;valor&gt;0.07&lt;/valor&gt;
      &lt;/totalImpuesto&gt;
    &lt;/totalConImpuestos&gt;
    &lt;motivo&gt;Motivo de la nota de credito&lt;/motivo&gt;
  &lt;/infoNotaCredito&gt;
  &lt;detalles&gt;
    &lt;detalle&gt;
      &lt;codigoInterno&gt;AGDAS-001&lt;/codigoInterno&gt;
      &lt;descripcion&gt;Agua purificada&lt;/descripcion&gt;
      &lt;cantidad&gt;1.000000&lt;/cantidad&gt;
      &lt;precioUnitario&gt;0.450000&lt;/precioUnitario&gt;
      &lt;descuento&gt;0.00&lt;/descuento&gt;
      &lt;precioTotalSinImpuesto&gt;0.45&lt;/precioTotalSinImpuesto&gt;
      &lt;impuestos&gt;
        &lt;impuesto&gt;
          &lt;codigo&gt;2&lt;/codigo&gt;
          &lt;codigoPorcentaje&gt;2&lt;/codigoPorcentaje&gt;
          &lt;tarifa&gt;12.00&lt;/tarifa&gt;
          &lt;baseImponible&gt;0.61&lt;/baseImponible&gt;
          &lt;valor&gt;0.07&lt;/valor&gt;
        &lt;/impuesto&gt;
        &lt;impuesto&gt;
          &lt;codigo&gt;3&lt;/codigo&gt;
          &lt;codigoPorcentaje&gt;3080&lt;/codigoPorcentaje&gt;
          &lt;tarifa&gt;35.00&lt;/tarifa&gt;
          &lt;baseImponible&gt;0.45&lt;/baseImponible&gt;
          &lt;valor&gt;0.16&lt;/valor&gt;
        &lt;/impuesto&gt;
      &lt;/impuestos&gt;
    &lt;/detalle&gt;
  &lt;/detalles&gt;
  &lt;infoAdicional&gt;
    &lt;campoAdicional nombre=\"Campo Adicional\"&gt;Informacion Adicional&lt;/campoAdicional&gt;
  &lt;/infoAdicional&gt;
&lt;/notaCredito&gt;"}'</span>
</code></pre><pre class="highlight python tab-python"><code><span class="kn">import</span> <span class="nn">requests</span><span class="p">,</span> <span class="n">json</span>

<span class="n">nota_credito</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s">"xml"</span><span class="p">:</span> <span class="s">'''&lt;?xml version=</span><span class="se">\"</span><span class="s">1.0</span><span class="se">\"</span><span class="s"> encoding=</span><span class="se">\"</span><span class="s">UTF-8</span><span class="se">\"</span><span class="s">?&gt;
    &lt;notaCredito id=</span><span class="se">\"</span><span class="s">comprobante</span><span class="se">\"</span><span class="s"> version=</span><span class="se">\"</span><span class="s">1.1.0</span><span class="se">\"</span><span class="s">&gt;
      &lt;infoTributaria&gt;
        &lt;ambiente&gt;1&lt;/ambiente&gt;
        &lt;tipoEmision&gt;1&lt;/tipoEmision&gt;
        &lt;razonSocial&gt;DATILMEDIA S.A.&lt;/razonSocial&gt;
        &lt;nombreComercial&gt;Datil&lt;/nombreComercial&gt;
        &lt;ruc&gt;1234567890001&lt;/ruc&gt;
        &lt;claveAcceso&gt;0405202004123456789000110010010000000062235571918&lt;/claveAcceso&gt;
        &lt;codDoc&gt;04&lt;/codDoc&gt;
        &lt;estab&gt;001&lt;/estab&gt;
        &lt;ptoEmi&gt;001&lt;/ptoEmi&gt;
        &lt;secuencial&gt;000000006&lt;/secuencial&gt;
        &lt;dirMatriz&gt;Innvernadero Coworking, Bálsamos 813 entre Guayacanes e Higueras&lt;/dirMatriz&gt;
      &lt;/infoTributaria&gt;
      &lt;infoNotaCredito&gt;
        &lt;fechaEmision&gt;04/05/2020&lt;/fechaEmision&gt;
        &lt;dirEstablecimiento&gt;Innvernadero Coworking, Bálsamos 813 entre Guayacanes e Higueras&lt;/dirEstablecimiento&gt;
        &lt;tipoIdentificacionComprador&gt;04&lt;/tipoIdentificacionComprador&gt;
        &lt;razonSocialComprador&gt;Juan Pérez&lt;/razonSocialComprador&gt;
        &lt;identificacionComprador&gt;0953239092001&lt;/identificacionComprador&gt;
        &lt;obligadoContabilidad&gt;NO&lt;/obligadoContabilidad&gt;
        &lt;codDocModificado&gt;01&lt;/codDocModificado&gt;
        &lt;numDocModificado&gt;001-002-000000001&lt;/numDocModificado&gt;
        &lt;fechaEmisionDocSustento&gt;04/05/2020&lt;/fechaEmisionDocSustento&gt;
        &lt;totalSinImpuestos&gt;0.45&lt;/totalSinImpuestos&gt;
        &lt;valorModificacion&gt;0.68&lt;/valorModificacion&gt;
        &lt;moneda&gt;DOLAR&lt;/moneda&gt;
        &lt;totalConImpuestos&gt;
          &lt;totalImpuesto&gt;
            &lt;codigo&gt;3&lt;/codigo&gt;
            &lt;codigoPorcentaje&gt;3080&lt;/codigoPorcentaje&gt;
            &lt;baseImponible&gt;0.45&lt;/baseImponible&gt;
            &lt;valor&gt;0.16&lt;/valor&gt;
          &lt;/totalImpuesto&gt;
          &lt;totalImpuesto&gt;
            &lt;codigo&gt;2&lt;/codigo&gt;
            &lt;codigoPorcentaje&gt;2&lt;/codigoPorcentaje&gt;
            &lt;baseImponible&gt;0.61&lt;/baseImponible&gt;
            &lt;valor&gt;0.07&lt;/valor&gt;
          &lt;/totalImpuesto&gt;
        &lt;/totalConImpuestos&gt;
        &lt;motivo&gt;Motivo de la nota de credito&lt;/motivo&gt;
      &lt;/infoNotaCredito&gt;
      &lt;detalles&gt;
        &lt;detalle&gt;
          &lt;codigoInterno&gt;AGDAS-001&lt;/codigoInterno&gt;
          &lt;descripcion&gt;Agua purificada&lt;/descripcion&gt;
          &lt;cantidad&gt;1.000000&lt;/cantidad&gt;
          &lt;precioUnitario&gt;0.450000&lt;/precioUnitario&gt;
          &lt;descuento&gt;0.00&lt;/descuento&gt;
          &lt;precioTotalSinImpuesto&gt;0.45&lt;/precioTotalSinImpuesto&gt;
          &lt;impuestos&gt;
            &lt;impuesto&gt;
              &lt;codigo&gt;2&lt;/codigo&gt;
              &lt;codigoPorcentaje&gt;2&lt;/codigoPorcentaje&gt;
              &lt;tarifa&gt;12.00&lt;/tarifa&gt;
              &lt;baseImponible&gt;0.61&lt;/baseImponible&gt;
              &lt;valor&gt;0.07&lt;/valor&gt;
            &lt;/impuesto&gt;
            &lt;impuesto&gt;
              &lt;codigo&gt;3&lt;/codigo&gt;
              &lt;codigoPorcentaje&gt;3080&lt;/codigoPorcentaje&gt;
              &lt;tarifa&gt;35.00&lt;/tarifa&gt;
              &lt;baseImponible&gt;0.45&lt;/baseImponible&gt;
              &lt;valor&gt;0.16&lt;/valor&gt;
            &lt;/impuesto&gt;
          &lt;/impuestos&gt;
        &lt;/detalle&gt;
      &lt;/detalles&gt;
      &lt;infoAdicional&gt;
        &lt;campoAdicional nombre="Campo Adicional"&gt;Informacion Adicional&lt;/campoAdicional&gt;
      &lt;/infoAdicional&gt;
    &lt;/notaCredito&gt;'''</span>
<span class="p">}</span>

<span class="n">cabeceras</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s">'x-key'</span><span class="p">:</span> <span class="s">'&lt;clave-del-api&gt;'</span><span class="p">,</span>
    <span class="s">'x-password'</span><span class="p">:</span> <span class="s">'&lt;clave-certificado-firma&gt;'</span><span class="p">,</span>
    <span class="s">'content-type'</span><span class="p">:</span> <span class="s">'application/json'</span><span class="p">}</span>
<span class="n">respuesta</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">post</span><span class="p">(</span>
    <span class="s">"https://link.datil.co/credit-notes/issue/xml"</span><span class="p">,</span>
    <span class="n">headers</span> <span class="o">=</span> <span class="n">cabeceras</span><span class="p">,</span>
    <span class="n">data</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">nota_credito</span><span class="p">))</span>
</code></pre>
<blockquote>
<h4 id='respuesta-de-ejemplo-2'>Respuesta de ejemplo</h4></blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="s2">"secuencial"</span><span class="p">:</span><span class="w"> </span><span class="s2">"000000006"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"fecha_emision"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2020-05-04T00:00:00-05:19"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"emisor"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"ruc"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1234567890001"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"razon_social"</span><span class="p">:</span><span class="w"> </span><span class="s2">"DATILMEDIA S.A."</span><span class="p">,</span><span class="w">
        </span><span class="s2">"nombre_comercial"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Datil"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"contribuyente_especial"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w">
        </span><span class="s2">"direccion"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Innvernadero Coworking, Bálsamos 813 entre Guayacanes e Higueras"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"obligado_contabilidad"</span><span class="p">:</span><span class="w"> </span><span class="s2">"NO"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"establecimiento"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="s2">"punto_emision"</span><span class="p">:</span><span class="w"> </span><span class="s2">"001"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"codigo"</span><span class="p">:</span><span class="w"> </span><span class="s2">"001"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"direccion"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Innvernadero Coworking, Bálsamos 813 entre Guayacanes e Higueras"</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="s2">"email"</span><span class="p">:</span><span class="w"> </span><span class="s2">"devops@datilmedia.com"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="s2">"fecha_emision_documento_modificado"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2020-05-04T00:00:00-05:00"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"es_valida"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
    </span><span class="s2">"moneda"</span><span class="p">:</span><span class="w"> </span><span class="s2">"USD"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"21da58fa6ecf4827ae002b8c641e1b00"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"informacion_adicional"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"Campo Adicional"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Informacion Adicional"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="s2">"ambiente"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"totales"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"total_sin_impuestos"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.45</span><span class="p">,</span><span class="w">
        </span><span class="s2">"importe_total"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.68</span><span class="p">,</span><span class="w">
        </span><span class="s2">"impuestos"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
            </span><span class="p">{</span><span class="w">
                </span><span class="s2">"codigo"</span><span class="p">:</span><span class="w"> </span><span class="s2">"3"</span><span class="p">,</span><span class="w">
                </span><span class="s2">"codigo_porcentaje"</span><span class="p">:</span><span class="w"> </span><span class="s2">"3080"</span><span class="p">,</span><span class="w">
                </span><span class="s2">"base_imponible"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.45</span><span class="p">,</span><span class="w">
                </span><span class="s2">"valor"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.16</span><span class="w">
            </span><span class="p">},</span><span class="w">
            </span><span class="p">{</span><span class="w">
                </span><span class="s2">"codigo"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2"</span><span class="p">,</span><span class="w">
                </span><span class="s2">"codigo_porcentaje"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2"</span><span class="p">,</span><span class="w">
                </span><span class="s2">"base_imponible"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.61</span><span class="p">,</span><span class="w">
                </span><span class="s2">"valor"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.07</span><span class="w">
            </span><span class="p">}</span><span class="w">
        </span><span class="p">]</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="s2">"comprador"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"identificacion"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0953239092001"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"razon_social"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Juan Pérez"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"direccion"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w">
        </span><span class="s2">"tipo_identificacion"</span><span class="p">:</span><span class="w"> </span><span class="s2">"04"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="s2">"tipo_emision"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
    </span><span class="s2">"items"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="p">{</span><span class="w">
            </span><span class="s2">"precio_unitario"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.45</span><span class="p">,</span><span class="w">
            </span><span class="s2">"descripcion"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Agua purificada"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"precio_total_sin_impuestos"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.45</span><span class="p">,</span><span class="w">
            </span><span class="s2">"impuestos"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
                </span><span class="p">{</span><span class="w">
                    </span><span class="s2">"codigo"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2"</span><span class="p">,</span><span class="w">
                    </span><span class="s2">"tarifa"</span><span class="p">:</span><span class="w"> </span><span class="mf">12.0</span><span class="p">,</span><span class="w">
                    </span><span class="s2">"codigo_porcentaje"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2"</span><span class="p">,</span><span class="w">
                    </span><span class="s2">"base_imponible"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.61</span><span class="p">,</span><span class="w">
                    </span><span class="s2">"valor"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.07</span><span class="w">
                </span><span class="p">},</span><span class="w">
                </span><span class="p">{</span><span class="w">
                    </span><span class="s2">"codigo"</span><span class="p">:</span><span class="w"> </span><span class="s2">"3"</span><span class="p">,</span><span class="w">
                    </span><span class="s2">"tarifa"</span><span class="p">:</span><span class="w"> </span><span class="mf">35.0</span><span class="p">,</span><span class="w">
                    </span><span class="s2">"codigo_porcentaje"</span><span class="p">:</span><span class="w"> </span><span class="s2">"3080"</span><span class="p">,</span><span class="w">
                    </span><span class="s2">"base_imponible"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.45</span><span class="p">,</span><span class="w">
                    </span><span class="s2">"valor"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.16</span><span class="w">
                </span><span class="p">}</span><span class="w">
            </span><span class="p">],</span><span class="w">
            </span><span class="s2">"detalles_adicionales"</span><span class="p">:</span><span class="w"> </span><span class="p">{},</span><span class="w">
            </span><span class="s2">"cantidad"</span><span class="p">:</span><span class="w"> </span><span class="mf">1.0</span><span class="p">,</span><span class="w">
            </span><span class="s2">"codigo_auxiliar"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w">
            </span><span class="s2">"descuento"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.0</span><span class="p">,</span><span class="w">
            </span><span class="s2">"codigo_principal"</span><span class="p">:</span><span class="w"> </span><span class="s2">"AGDAS-001"</span><span class="w">
        </span><span class="p">}</span><span class="w">
    </span><span class="p">],</span><span class="w">
    </span><span class="s2">"tipo_documento_modificado"</span><span class="p">:</span><span class="w"> </span><span class="s2">"01"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"numero_documento_modificado"</span><span class="p">:</span><span class="w"> </span><span class="s2">"001-002-000000001"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"clave_acceso"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0405202004123456789000110010010000000062235571918"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"motivo"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Motivo de la nota de credito"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre><h2 id='consulta-de-una-nota-de-credito'>Consulta de una nota de crédito</h2>
<p>Consulta una nota de crédito para obtener toda la información del comprobante, incluyendo
el estado del mismo.
El parámetro <code>estado</code> de la respuesta obtenida al invocar esta operación, indica
el estado actual del comprobante.</p>

<p>Si es necesario conocer en detalle, en que estado del <a href="#proceso-de-emisión">proceso de emisión</a>,
se debe examinar los parámetros <code>envio_sri</code> y <code>autorizacion_sri</code> de la respuesta.</p>
<h3 id='operacion-2'>Operación</h3>
<p><code>GET /credit-notes/&lt;invoice-id&gt;</code></p>
<h3 id='requerimiento'>Requerimiento</h3>
<blockquote>
<h4 id='requerimiento-de-ejemplo-3'>Requerimiento de ejemplo</h4></blockquote>
<pre class="highlight shell tab-shell"><code>curl -v https://link.datil.co/credit-notes/&lt;id-notacredito&gt; <span class="se">\</span>
-H <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
-H <span class="s2">"X-Key: &lt;clave-del-api&gt;"</span> <span class="se">\</span>
-H <span class="s2">"X-Password: &lt;clave-certificado-firma&gt;"</span> <span class="se">\</span>
</code></pre><pre class="highlight python tab-python"><code><span class="kn">import</span> <span class="nn">requests</span>
<span class="n">cabeceras</span> <span class="o">=</span> <span class="p">{</span><span class="s">'x-key'</span><span class="p">:</span> <span class="s">'&lt;clave-del-api&gt;'</span><span class="p">}</span>
<span class="n">respuesta</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span>
    <span class="s">'https://link.datil.co/credit-notes/&lt;id-notacredito&gt;'</span><span class="p">,</span>
    <span class="n">headers</span> <span class="o">=</span> <span class="n">cabeceras</span><span class="p">)</span>
</code></pre><pre class="highlight csharp tab-csharp"><code><span class="k">using</span> <span class="nn">RestSharp</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">System</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">System.Collections.Generic</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">System.Linq</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">System.Text</span><span class="p">;</span>

<span class="k">namespace</span> <span class="nn">DatilClient</span> <span class="p">{</span>
  <span class="k">class</span> <span class="nc">InvoicingServiceClient</span> <span class="p">{</span>
    <span class="k">static</span> <span class="k">void</span> <span class="nf">Main</span><span class="p">(</span><span class="kt">string</span><span class="p">[]</span> <span class="n">args</span><span class="p">)</span> <span class="p">{</span>

      <span class="kt">var</span> <span class="n">client</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">RestClient</span><span class="p">(</span><span class="s">"https://link.datil.co/"</span><span class="p">);</span>
      <span class="kt">var</span> <span class="n">idNotaCredito</span> <span class="p">=</span> <span class="s">"&lt;id-notacredito&gt;"</span><span class="p">;</span>
      <span class="kt">var</span> <span class="n">request</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">RestRequest</span><span class="p">(</span><span class="s">"invoices/"</span> <span class="p">+</span> <span class="n">idNotaCredito</span><span class="p">,</span> <span class="n">Method</span><span class="p">.</span><span class="n">GET</span><span class="p">);</span>
      <span class="n">request</span><span class="p">.</span><span class="nf">AddHeader</span><span class="p">(</span><span class="s">"X-Key"</span><span class="p">,</span> <span class="s">"&lt;clave-del-api&gt;"</span><span class="p">);</span>

      <span class="n">IRestResponse</span> <span class="n">response</span> <span class="p">=</span> <span class="n">client</span><span class="p">.</span><span class="nf">Execute</span><span class="p">(</span><span class="n">request</span><span class="p">);</span>

      <span class="n">Console</span><span class="p">.</span><span class="nf">WriteLine</span><span class="p">(</span><span class="n">response</span><span class="p">.</span><span class="n">Content</span><span class="p">);</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">}</span>
</code></pre>
<p>Reemplaza en la ruta <code>&lt;invoice-ID&gt;</code> por el <code>id</code> de la nota de crédito que necesitas consultar.</p>
<h3 id='respuesta-2'>Respuesta</h3>
<blockquote>
<h4 id='respuesta-de-ejemplo-3'>Respuesta de ejemplo</h4></blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"abcf12343faad06785"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"secuencial"</span><span class="p">:</span><span class="w"> </span><span class="s2">"16"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"fecha_emision"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2015-05-15"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"version"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1.0.0"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"clave_acceso"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1505201501099271255400110011000000000162092727615"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"emisor"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"ruc"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0992712554001"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"razon_social"</span><span class="p">:</span><span class="w"> </span><span class="s2">"DATILMEDIA S.A."</span><span class="p">,</span><span class="w">
        </span><span class="s2">"nombre_comercial"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Dátil"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"direccion"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
        </span><span class="s2">"obligado_contabilidad"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
        </span><span class="s2">"contribuyente_especial"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w">
        </span><span class="s2">"establecimiento"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="s2">"codigo"</span><span class="p">:</span><span class="w"> </span><span class="s2">"001"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"direccion"</span><span class="p">:</span><span class="w"> </span><span class="s2">"V.E. 112 Y CIRCUNVALACION NORTE"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"punto_emision"</span><span class="p">:</span><span class="w"> </span><span class="s2">"100"</span><span class="w">
        </span><span class="p">}</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="s2">"estado"</span><span class="p">:</span><span class="w"> </span><span class="s2">"AUTORIZADO"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"correos_enviados"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="p">{</span><span class="w">
            </span><span class="s2">"fecha_envio"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2015-05-15T16:36:48.274604"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"destinatarios"</span><span class="p">:</span><span class="w"> </span><span class="s2">"juanantonioplaza@datilmedia.com"</span><span class="w">
        </span><span class="p">}</span><span class="w">
    </span><span class="p">],</span><span class="w">
    </span><span class="s2">"guia_remision"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w">
    </span><span class="s2">"moneda"</span><span class="p">:</span><span class="w"> </span><span class="s2">"USD"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"informacion_adicional"</span><span class="p">:</span><span class="w"> </span><span class="p">[],</span><span class="w">
    </span><span class="s2">"ambiente"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"totales"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"total_sin_impuestos"</span><span class="p">:</span><span class="w"> </span><span class="s2">"150.00"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"impuestos"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
            </span><span class="p">{</span><span class="w">
                </span><span class="s2">"codigo"</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w">
                </span><span class="s2">"codigo_porcentaje"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2"</span><span class="p">,</span><span class="w">
                </span><span class="s2">"base_imponible"</span><span class="p">:</span><span class="w"> </span><span class="s2">"150.00"</span><span class="p">,</span><span class="w">
                </span><span class="s2">"valor"</span><span class="p">:</span><span class="w"> </span><span class="s2">"18.00"</span><span class="w">
            </span><span class="p">}</span><span class="w">
        </span><span class="p">],</span><span class="w">
        </span><span class="s2">"importe_total"</span><span class="p">:</span><span class="w"> </span><span class="s2">"168.00"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="s2">"comprador"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"razon_social"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Carlos L. Plaza"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"identificacion"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0900102222"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"tipo_identificacion"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
        </span><span class="s2">"email"</span><span class="p">:</span><span class="w"> </span><span class="s2">"cplaza@gye593.com"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"direccion"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Calle Uno y Calle Dos"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"telefono"</span><span class="p">:</span><span class="w"> </span><span class="s2">"043334445"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="s2">"envio_sri"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"mensajes"</span><span class="p">:</span><span class="w"> </span><span class="p">[],</span><span class="w">
        </span><span class="s2">"estado"</span><span class="p">:</span><span class="w"> </span><span class="s2">"RECIBIDA"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"fecha"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="s2">"tipo_emision"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"items"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="p">{</span><span class="w">
            </span><span class="s2">"detalles_adicionales"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                </span><span class="s2">"Estadía"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2 noches"</span><span class="p">,</span><span class="w">
                </span><span class="s2">"Habitación"</span><span class="p">:</span><span class="w"> </span><span class="s2">"203"</span><span class="w">
            </span><span class="p">},</span><span class="w">
            </span><span class="s2">"cantidad"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1.000000"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"codigo_principal"</span><span class="p">:</span><span class="w"> </span><span class="s2">"HAB"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"codigo_auxiliar"</span><span class="p">:</span><span class="w"> </span><span class="s2">"DOB"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"descripcion"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Habitación doble"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"precio_unitario"</span><span class="p">:</span><span class="w"> </span><span class="s2">"150.000000"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"descuento"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0.00"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"precio_total_sin_impuestos"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w">
            </span><span class="s2">"impuestos"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
                </span><span class="p">{</span><span class="w">
                    </span><span class="s2">"tarifa"</span><span class="p">:</span><span class="w"> </span><span class="s2">"12.00"</span><span class="p">,</span><span class="w">
                    </span><span class="s2">"codigo"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2"</span><span class="p">,</span><span class="w">
                    </span><span class="s2">"codigo_porcentaje"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2"</span><span class="p">,</span><span class="w">
                    </span><span class="s2">"base_imponible"</span><span class="p">:</span><span class="w"> </span><span class="s2">"150.00"</span><span class="p">,</span><span class="w">
                    </span><span class="s2">"valor"</span><span class="p">:</span><span class="w"> </span><span class="s2">"18.00"</span><span class="w">
                </span><span class="p">}</span><span class="w">
            </span><span class="p">]</span><span class="w">
        </span><span class="p">}</span><span class="w">
    </span><span class="p">],</span><span class="w">
    </span><span class="s2">"autorizacion"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"estado"</span><span class="p">:</span><span class="w"> </span><span class="s2">"AUTORIZADO"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"mensajes"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
            </span><span class="p">{</span><span class="w">
                </span><span class="s2">"identificador"</span><span class="p">:</span><span class="w"> </span><span class="s2">"60"</span><span class="p">,</span><span class="w">
                </span><span class="s2">"mensaje"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ESTE PROCESO FUE REALIZADO EN EL AMBIENTE DE PRUEBAS"</span><span class="p">,</span><span class="w">
                </span><span class="s2">"tipo"</span><span class="p">:</span><span class="w"> </span><span class="s2">"INFORMATIVO"</span><span class="p">,</span><span class="w">
                </span><span class="s2">"informacion_adicional"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="w">
            </span><span class="p">}</span><span class="w">
        </span><span class="p">],</span><span class="w">
        </span><span class="s2">"numero"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1505201516323509927125540010266935227"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"fecha"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2015-05-15T16:32:35.000380"</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<table><thead>
<tr>
<th>Parámetro</th>
<th>Tipo</th>
<th>Descripción</th>
</tr>
</thead><tbody>
<tr>
<td>secuencial</td>
<td>string</td>
<td>Número de secuencia de la nota de crédito.</td>
</tr>
<tr>
<td>estado</td>
<td>string</td>
<td>Posibles valores: <code>AUTORIZADO</code>, <code>NO AUTORIZADO</code>, <code>ENVIADO</code>, <code>DEVUELTO</code>, <code>RECIBIDO</code>, <code>ERROR</code></td>
</tr>
<tr>
<td>fecha_emision</td>
<td>string</td>
<td>Fecha de emisión en formato AAAA-MM-DDHoraZonaHoraria, definido en el estándar [ISO8601](http://tools.ietf.</td>
</tr>
<tr>
<td>clave_acceso</td>
<td>string</td>
<td>La clave de acceso representa un identificador único del comprobante. Si esta información no es provista, Dátil la generará.<br>¿Cómo <a href="#clave-de-acceso">generar</a> la clave de acceso?</td>
</tr>
<tr>
<td>envio_sri</td>
<td>objeto tipo <a href="#envío-sri">envio sri</a></td>
<td>Información luego de enviar el comprobante.</td>
</tr>
<tr>
<td>autorizacion</td>
<td>objeto tipo <a href="#autorización-sri">autorizacion sri</a></td>
<td>Información de la autorización.org/html/rfc3339#section-5.6).</td>
</tr>
<tr>
<td>emisor</td>
<td>objeto tipo <a href="#emisor">emisor</a></td>
<td>Información completa del emisor.</td>
</tr>
<tr>
<td>moneda</td>
<td>string</td>
<td>Código <a href="https://en.wikipedia.org/wiki/ISO_4217">ISO</a> de la moneda.</td>
</tr>
<tr>
<td>ambiente</td>
<td>integer</td>
<td>Pruebas: <code>1</code>.<br>Producción <code>2</code>.<br></td>
</tr>
<tr>
<td>totales</td>
<td>objeto tipo <a href="#totales-nota-de-crédito">totales</a></td>
<td>Listado de totales.</td>
</tr>
<tr>
<td>comprador</td>
<td>objeto tipo <a href="#persona">persona</a></td>
<td>Información del comprador.</td>
</tr>
<tr>
<td>tipo_emision</td>
<td>integer</td>
<td>Emisión normal: <code>1</code>.<br>Emisión por indisponibilidad: <code>2</code><br></td>
</tr>
<tr>
<td>items</td>
<td>listado de objetos tipo <a href="#item-de-factura">item</a></td>
<td>Items incluídos en la nota de crédito.</td>
</tr>
<tr>
<td>version</td>
<td>string</td>
<td>Versión de la especificación, opciones válidas: <code>1.0.0</code>, <code>1.1.0</code></td>
</tr>
</tbody></table>
<h1 id='comprobantes-de-retencion'>Comprobantes de Retención</h1><h2 id='emision-de-una-retencion'>Emisión de una retención</h2><h3 id='operacion'>Operación</h3>
<p><code>POST /retentions/issue</code></p>

<h3 id="requerimiento-retencion">Requerimiento</h3>

<blockquote>
<h4 id='requerimiento-de-ejemplo'>Requerimiento de ejemplo</h4></blockquote>
<pre class="highlight shell tab-shell"><code>curl -v https://link.datil.co/retentions/issue <span class="se">\</span>
-H <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
-H <span class="s2">"X-Key: &lt;API-key&gt;"</span> <span class="se">\</span>
-H <span class="s2">"X-Password: &lt;clave-certificado-firma&gt;"</span> <span class="se">\</span>
-d <span class="s1">'{
  "ambiente":1,
  "tipo_emision":1,
  "secuencial":14,
  "fecha_emision":"2015-12-25T11:28:56.782Z",
  "periodo_fiscal":"12/2015",
  "emisor":{
    "ruc":"0910000000001",
    "obligado_contabilidad":true,
    "contribuyente_especial":"12345",
    "nombre_comercial":"XYZ Corp",
    "razon_social":"XYZ Corporación S.A.",
    "direccion":"Av. Primera 234 y calle 5ta",
    "establecimiento":{
      "punto_emision":"002",
      "codigo":"001",
      "direccion":"Av. Primera 234 y calle 5ta"
    }
  },
  "informacion_adicional":{
    "Envíada al correo electónico":"contabilidad@xyz.com"
  },
  "items":[
    {
      "base_imponible": 4226.4,
      "codigo": 1,
      "codigo_porcentaje": "312",
      "fecha_emision_documento_sustento": "2015-12-04T00:00:00-05:19",
      "numero_documento_sustento": "011-007-000000251",
      "porcentaje": 1.0,
      "tipo_documento_sustento": "01",
      "valor_retenido": 42.26
    }
  ]
  "sujeto":{
    "email":"contabilidad@email.com",
    "identificacion":"0987654321",
    "tipo_identificacion":"05",
    "razon_social":"Juan Pérez",
    "direccion":"Calle única Numero 987",
    "telefono":"046029400"
  }
}'</span>
</code></pre><pre class="highlight python tab-python"><code><span class="kn">import</span> <span class="nn">requests</span><span class="p">,</span> <span class="n">json</span>

<span class="n">retencion</span> <span class="o">=</span> <span class="p">{</span>
  <span class="s">"ambiente"</span><span class="p">:</span><span class="mi">1</span><span class="p">,</span>
  <span class="s">"tipo_emision"</span><span class="p">:</span><span class="mi">1</span><span class="p">,</span>
  <span class="s">"secuencial"</span><span class="p">:</span><span class="mi">14</span><span class="p">,</span>
  <span class="s">"fecha_emision"</span><span class="p">:</span><span class="s">"2015-12-25T11:28:56.782Z"</span><span class="p">,</span>
  <span class="s">"periodo_fiscal"</span><span class="p">:</span><span class="s">"12/2015"</span><span class="p">,</span>
  <span class="s">"emisor"</span><span class="p">:{</span>
    <span class="s">"ruc"</span><span class="p">:</span><span class="s">"0910000000001"</span><span class="p">,</span>
    <span class="s">"obligado_contabilidad"</span><span class="p">:</span><span class="n">true</span><span class="p">,</span>
    <span class="s">"contribuyente_especial"</span><span class="p">:</span><span class="s">"12345"</span><span class="p">,</span>
    <span class="s">"nombre_comercial"</span><span class="p">:</span><span class="s">"XYZ Corp"</span><span class="p">,</span>
    <span class="s">"razon_social"</span><span class="p">:</span><span class="s">"XYZ Corporación S.A."</span><span class="p">,</span>
    <span class="s">"direccion"</span><span class="p">:</span><span class="s">"Av. Primera 234 y calle 5ta"</span><span class="p">,</span>
    <span class="s">"establecimiento"</span><span class="p">:{</span>
      <span class="s">"punto_emision"</span><span class="p">:</span><span class="s">"002"</span><span class="p">,</span>
      <span class="s">"codigo"</span><span class="p">:</span><span class="s">"001"</span><span class="p">,</span>
      <span class="s">"direccion"</span><span class="p">:</span><span class="s">"Av. Primera 234 y calle 5ta"</span>
    <span class="p">}</span>
  <span class="p">},</span>
  <span class="s">"informacion_adicional"</span><span class="p">:{</span>
    <span class="s">"Envíada al correo electónico"</span><span class="p">:</span><span class="s">"contabilidad@xyz.com"</span>
  <span class="p">},</span>
  <span class="s">"items"</span><span class="p">:[</span>
    <span class="p">{</span>
      <span class="s">"base_imponible"</span><span class="p">:</span> <span class="mf">4226.4</span><span class="p">,</span>
      <span class="s">"codigo"</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
      <span class="s">"codigo_porcentaje"</span><span class="p">:</span> <span class="s">"312"</span><span class="p">,</span>
      <span class="s">"fecha_emision_documento_sustento"</span><span class="p">:</span> <span class="s">"2015-12-04T00:00:00-05:19"</span><span class="p">,</span>
      <span class="s">"numero_documento_sustento"</span><span class="p">:</span> <span class="s">"011-007-000000251"</span><span class="p">,</span>
      <span class="s">"porcentaje"</span><span class="p">:</span> <span class="mf">1.0</span><span class="p">,</span>
      <span class="s">"tipo_documento_sustento"</span><span class="p">:</span> <span class="s">"01"</span><span class="p">,</span>
      <span class="s">"valor_retenido"</span><span class="p">:</span> <span class="mf">42.26</span>
    <span class="p">}</span>
  <span class="p">],</span>
  <span class="s">"sujeto"</span><span class="p">:{</span>
    <span class="s">"email"</span><span class="p">:</span><span class="s">"contabilidad@email.com"</span><span class="p">,</span>
    <span class="s">"identificacion"</span><span class="p">:</span><span class="s">"0987654321"</span><span class="p">,</span>
    <span class="s">"tipo_identificacion"</span><span class="p">:</span><span class="s">"05"</span><span class="p">,</span>
    <span class="s">"razon_social"</span><span class="p">:</span><span class="s">"Juan Pérez"</span><span class="p">,</span>
    <span class="s">"direccion"</span><span class="p">:</span><span class="s">"Calle única Numero 987"</span><span class="p">,</span>
    <span class="s">"telefono"</span><span class="p">:</span><span class="s">"046029400"</span>
  <span class="p">}</span>
<span class="p">}</span>
<span class="n">cabeceras</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s">'x-key'</span><span class="p">:</span> <span class="s">'&lt;clave-del-api&gt;'</span><span class="p">,</span>
    <span class="s">'x-password'</span><span class="p">:</span> <span class="s">'&lt;clave-certificado-firma&gt;'</span><span class="p">,</span>
    <span class="s">'content-type'</span><span class="p">:</span> <span class="s">'application/json'</span><span class="p">}</span>
<span class="n">respuesta</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">post</span><span class="p">(</span>
    <span class="s">"https://link.datil.co/retentions/issue"</span><span class="p">,</span>
    <span class="n">headers</span> <span class="o">=</span> <span class="n">cabeceras</span><span class="p">,</span>
    <span class="n">data</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">retencion</span><span class="p">))</span>
</code></pre><pre class="highlight csharp tab-csharp"><code><span class="k">using</span> <span class="nn">RestSharp</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">System</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">System.Collections.Generic</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">System.Linq</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">System.Text</span><span class="p">;</span>

<span class="k">namespace</span> <span class="nn">DatilClient</span> <span class="p">{</span>
  <span class="k">class</span> <span class="nc">InvoicingServiceClient</span> <span class="p">{</span>
    <span class="k">static</span> <span class="k">void</span> <span class="nf">Main</span><span class="p">(</span><span class="kt">string</span><span class="p">[]</span> <span class="n">args</span><span class="p">)</span> <span class="p">{</span>

      <span class="c1">// Este ejemplo utiliza RestSharp</span>
      <span class="c1">// Para instalar anda al menú: tools &gt; Library Package Manager &gt; Package Manager Console</span>
      <span class="c1">// copia y pega y presiona enter: Install-Package RestSharp</span>

      <span class="kt">var</span> <span class="n">client</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">RestClient</span><span class="p">(</span><span class="s">"https://link.datil.co/"</span><span class="p">);</span>
      <span class="kt">var</span> <span class="n">request</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">RestRequest</span><span class="p">(</span><span class="s">"invoices/issue"</span><span class="p">,</span> <span class="n">Method</span><span class="p">.</span><span class="n">POST</span><span class="p">);</span>
      <span class="n">request</span><span class="p">.</span><span class="nf">AddHeader</span><span class="p">(</span><span class="s">"X-Key"</span><span class="p">,</span> <span class="s">"&lt;clave-del-api&gt;"</span><span class="p">);</span>
      <span class="n">request</span><span class="p">.</span><span class="nf">AddHeader</span><span class="p">(</span><span class="s">"X-Password"</span><span class="p">,</span> <span class="s">"&lt;clave-certificado-firma&gt;"</span><span class="p">);</span>

      <span class="n">request</span><span class="p">.</span><span class="nf">AddBody</span><span class="p">(</span><span class="err">@</span><span class="s">"{
</span>        <span class="s">""</span><span class="n">ambiente</span><span class="s">""</span><span class="p">:</span><span class="m">1</span><span class="p">,</span>
        <span class="s">""</span><span class="n">tipo_emision</span><span class="s">""</span><span class="p">:</span><span class="m">1</span><span class="p">,</span>
        <span class="s">""</span><span class="n">secuencial</span><span class="s">""</span><span class="p">:</span><span class="m">14</span><span class="p">,</span>
        <span class="s">""</span><span class="n">fecha_emision</span><span class="s">""</span><span class="p">:</span><span class="s">""</span><span class="m">2015</span><span class="p">-</span><span class="m">12</span><span class="p">-</span><span class="m">25</span><span class="n">T11</span><span class="p">:</span><span class="m">28</span><span class="p">:</span><span class="m">56.782</span><span class="n">Z</span><span class="s">""</span><span class="p">,</span>
        <span class="s">""</span><span class="n">periodo_fiscal</span><span class="s">""</span><span class="p">:</span><span class="s">""</span><span class="m">12</span><span class="p">/</span><span class="m">2015</span><span class="s">""</span><span class="p">,</span>
        <span class="s">""</span><span class="n">emisor</span><span class="s">""</span><span class="p">:{</span>
          <span class="s">""</span><span class="n">ruc</span><span class="s">""</span><span class="p">:</span><span class="s">""</span><span class="m">0910000000001</span><span class="s">""</span><span class="p">,</span>
          <span class="s">""</span><span class="n">obligado_contabilidad</span><span class="s">""</span><span class="p">:</span><span class="k">true</span><span class="p">,</span>
          <span class="s">""</span><span class="n">contribuyente_especial</span><span class="s">""</span><span class="p">:</span><span class="s">""</span><span class="m">12345</span><span class="s">""</span><span class="p">,</span>
          <span class="s">""</span><span class="n">nombre_comercial</span><span class="s">""</span><span class="p">:</span><span class="s">""</span><span class="n">XYZ</span> <span class="n">Corp</span><span class="s">""</span><span class="p">,</span>
          <span class="s">""</span><span class="n">razon_social</span><span class="s">""</span><span class="p">:</span><span class="s">""</span><span class="n">XYZ</span> <span class="n">Corporaci</span><span class="err">ó</span><span class="n">n</span> <span class="n">S</span><span class="p">.</span><span class="n">A</span><span class="p">.</span><span class="s">""</span><span class="p">,</span>
          <span class="s">""</span><span class="n">direccion</span><span class="s">""</span><span class="p">:</span><span class="s">""</span><span class="n">Av</span><span class="p">.</span> <span class="n">Primera</span> <span class="m">234</span> <span class="n">y</span> <span class="n">calle</span> <span class="m">5</span><span class="n">ta</span><span class="s">""</span><span class="p">,</span>
          <span class="s">""</span><span class="n">establecimiento</span><span class="s">""</span><span class="p">:{</span>
            <span class="s">""</span><span class="n">punto_emision</span><span class="s">""</span><span class="p">:</span><span class="s">""</span><span class="m">002</span><span class="s">""</span><span class="p">,</span>
            <span class="s">""</span><span class="n">codigo</span><span class="s">""</span><span class="p">:</span><span class="s">""</span><span class="m">001</span><span class="s">""</span><span class="p">,</span>
            <span class="s">""</span><span class="n">direccion</span><span class="s">""</span><span class="p">:</span><span class="s">""</span><span class="n">Av</span><span class="p">.</span> <span class="n">Primera</span> <span class="m">234</span> <span class="n">y</span> <span class="n">calle</span> <span class="m">5</span><span class="n">ta</span><span class="s">""</span>
          <span class="p">}</span>
        <span class="p">},</span>
        <span class="s">""</span><span class="n">informacion_adicional</span><span class="s">""</span><span class="p">:{</span>
          <span class="s">""</span><span class="n">Env</span><span class="err">í</span><span class="n">ada</span> <span class="n">al</span> <span class="n">correo</span> <span class="n">elect</span><span class="err">ó</span><span class="n">nico</span><span class="s">""</span><span class="p">:</span><span class="s">""</span><span class="n">contabilidad@xyz</span><span class="p">.</span><span class="n">com</span><span class="s">""</span>
        <span class="p">},</span>
        <span class="s">""</span><span class="n">items</span><span class="s">""</span><span class="p">:[</span>
          <span class="p">{</span>
            <span class="s">""</span><span class="n">base_imponible</span><span class="s">""</span><span class="p">:</span> <span class="m">4226.4</span><span class="p">,</span>
            <span class="s">""</span><span class="n">codigo</span><span class="s">""</span><span class="p">:</span> <span class="m">1</span><span class="p">,</span>
            <span class="s">""</span><span class="n">codigo_porcentaje</span><span class="s">""</span><span class="p">:</span> <span class="s">""</span><span class="m">312</span><span class="s">""</span><span class="p">,</span>
            <span class="s">""</span><span class="n">fecha_emision_documento_sustento</span><span class="s">""</span><span class="p">:</span> <span class="s">""</span><span class="m">2015</span><span class="p">-</span><span class="m">12</span><span class="p">-</span><span class="m">04</span><span class="n">T00</span><span class="p">:</span><span class="m">00</span><span class="p">:</span><span class="m">00</span><span class="p">-</span><span class="m">05</span><span class="p">:</span><span class="m">19</span><span class="s">""</span><span class="p">,</span>
            <span class="s">""</span><span class="n">numero_documento_sustento</span><span class="s">""</span><span class="p">:</span> <span class="s">""</span><span class="m">011007000000251</span><span class="s">""</span><span class="p">,</span>
            <span class="s">""</span><span class="n">porcentaje</span><span class="s">""</span><span class="p">:</span> <span class="m">1.0</span><span class="p">,</span>
            <span class="s">""</span><span class="n">tipo_documento_sustento</span><span class="s">""</span><span class="p">:</span> <span class="s">""</span><span class="m">01</span><span class="s">""</span><span class="p">,</span>
            <span class="s">""</span><span class="n">valor_retenido</span><span class="s">""</span><span class="p">:</span> <span class="m">42.26</span>
          <span class="p">}</span>
        <span class="p">],</span>
        <span class="s">""</span><span class="n">sujeto</span><span class="s">""</span><span class="p">:{</span>
          <span class="s">""</span><span class="n">email</span><span class="s">""</span><span class="p">:</span><span class="s">""</span><span class="n">contabilidad@email</span><span class="p">.</span><span class="n">com</span><span class="s">""</span><span class="p">,</span>
          <span class="s">""</span><span class="n">identificacion</span><span class="s">""</span><span class="p">:</span><span class="s">""</span><span class="m">0987654321</span><span class="s">""</span><span class="p">,</span>
          <span class="s">""</span><span class="n">tipo_identificacion</span><span class="s">""</span><span class="p">:</span><span class="s">""</span><span class="m">05</span><span class="s">""</span><span class="p">,</span>
          <span class="s">""</span><span class="n">razon_social</span><span class="s">""</span><span class="p">:</span><span class="s">""</span><span class="n">Juan</span> <span class="n">P</span><span class="err">é</span><span class="n">rez</span><span class="s">""</span><span class="p">,</span>
          <span class="s">""</span><span class="n">direccion</span><span class="s">""</span><span class="p">:</span><span class="s">""</span><span class="n">Calle</span> <span class="err">ú</span><span class="n">nica</span> <span class="n">Numero</span> <span class="m">987</span><span class="s">""</span><span class="p">,</span>
          <span class="s">""</span><span class="n">telefono</span><span class="s">""</span><span class="p">:</span><span class="s">""</span><span class="m">046029400</span><span class="s">""</span>
        <span class="p">}</span>
      <span class="p">}</span><span class="s">");
</span>
      <span class="n">IRestResponse</span> <span class="n">response</span> <span class="p">=</span> <span class="n">client</span><span class="p">.</span><span class="nf">Execute</span><span class="p">(</span><span class="n">request</span><span class="p">);</span>

      <span class="n">Console</span><span class="p">.</span><span class="nf">WriteLine</span><span class="p">(</span><span class="n">response</span><span class="p">.</span><span class="n">Content</span><span class="p">);</span>
      <span class="n">Console</span><span class="p">.</span><span class="nf">ReadLine</span><span class="p">();</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">}</span>
</code></pre>
<p>Para la emisión de una retención se debe enviar la información completa del
comprobante en el cuerpo del requerimiento en formato JSON.</p>

<table><thead>
<tr>
<th>Parámetro</th>
<th>Tipo</th>
<th>Descripción</th>
</tr>
</thead><tbody>
<tr>
<td>secuencial</td>
<td>integer (min. 1 - max. 999999999 )</td>
<td>Número de secuencia de la retención. <strong>Requerido</strong></td>
</tr>
<tr>
<td>emisor</td>
<td><a href="#emisor">emisor</a></td>
<td>Información completa del emisor. <strong>Requerido</strong></td>
</tr>
<tr>
<td>fecha_emision</td>
<td>string</td>
<td>Fecha de emisión en formato AAAA-MM-DDHoraZonaHoraria, definido en el estándar <a href="http://tools.ietf.org/html/rfc3339#section-5.6">ISO8601</a>.</td>
</tr>
<tr>
<td>sujeto</td>
<td>objeto tipo <a href="#persona">persona</a></td>
<td>Información de la persona a quién va dirigida la retención. <strong>Requerido</strong></td>
</tr>
<tr>
<td>periodo_fiscal</td>
<td>string</td>
<td>Mes y año en el siguiente formato MM/AAAA. Ejm: 12/2015 <strong>Requerido</strong></td>
</tr>
<tr>
<td>ambiente</td>
<td>integer</td>
<td>Pruebas: <code>1</code>.<br>Producción <code>2</code>.<br><strong>Requerido</strong></td>
</tr>
<tr>
<td>items</td>
<td>vector de objetos tipo <a href="#impuesto-retenido">impuesto</a></td>
<td>Listado de impuestos retenidos. <strong>Requerido</strong></td>
</tr>
<tr>
<td>tipo_emision</td>
<td>integer</td>
<td>Emisión normal: <code>1</code>.<br>Emisión por indisponibilidad: <code>2</code><br><strong>Requerido</strong></td>
</tr>
<tr>
<td>version</td>
<td>string</td>
<td>Versión del formato de comprobantes electrónicos de SRI. Si no se especifica, se utilizará la última revisión del formato implementada,</td>
</tr>
<tr>
<td>clave_acceso</td>
<td>string</td>
<td>La clave de acceso representa un identificador único del comprobante. Si esta información no es provista, Dátil la generará.<br>¿Cómo <a href="#clave-de-acceso">generar</a> la clave de acceso?</td>
</tr>
<tr>
<td>informacion_adicional</td>
<td>objeto</td>
<td>Información adicional adjunta al comprobante en forma de diccionario. Ejemplo:<br><code>{&quot;Email&quot;: &quot;contabilidad@empresa.com&quot;}</code></td>
</tr>
</tbody></table>
<h4 id='impuesto-retenido'>Impuesto Retenido</h4>
<table><thead>
<tr>
<th>Parámetro</th>
<th>Tipo</th>
<th>Descripción</th>
</tr>
</thead><tbody>
<tr>
<td>base_imponible</td>
<td>float</td>
<td>Base imponible, máximo 2 cifras decimales. <strong>Requerido</strong></td>
</tr>
<tr>
<td>codigo</td>
<td>string</td>
<td>Código de <a href="#tipos-de-impuesto-para-la-retencion">tipo de impuesto</a>. <strong>Requerido</strong></td>
</tr>
<tr>
<td>codigo_porcentaje</td>
<td>string</td>
<td><a href="#retencion-de-iva">Código del porcentaje</a> a aplicar dentro del tipo de impuesto <strong>Requerido</strong></td>
</tr>
<tr>
<td>porcentaje</td>
<td>float</td>
<td>Porcentaje establecido para el impuesto</td>
</tr>
<tr>
<td>valor_retenido</td>
<td>float</td>
<td>Valor retenido, multiplicación de la base imponible por el porcentaje de retención, máximo 2 cifras decimales. <strong>Requerido</strong></td>
</tr>
<tr>
<td>fecha_emision_documento_sustento</td>
<td>string</td>
<td>Fecha de emisión en formato AAAA-MM-DDHoraZonaHoraria, definido en el estándar <a href="http://tools.ietf.org/html/rfc3339#section-5.6">ISO8601</a>. <strong>Requerido</strong></td>
</tr>
<tr>
<td>numero_documento_sustento</td>
<td>string</td>
<td>Número completo del documento sobre el que se aplica la retención. Ejm: 001-002-592738007</td>
</tr>
<tr>
<td>tipo_documento_sustento</td>
<td>string</td>
<td>Códigos de <a href="#tipos-de-documentos">tipos de documentos</a>. <strong>Requerido</strong></td>
</tr>
</tbody></table>

<!--aside class="success">
Remember — a happy kitten is an authenticated kitten!
</aside-->
<h3 id='respuesta'>Respuesta</h3>
<blockquote>
<h4 id='respuesta-de-ejemplo'>Respuesta de ejemplo</h4></blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"abcdef09876123cea56784f01"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"clave_acceso"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2802201501091000000000120010010000100451993736618"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"ambiente"</span><span class="p">:</span><span class="mi">1</span><span class="p">,</span><span class="w">
  </span><span class="s2">"tipo_emision"</span><span class="p">:</span><span class="mi">1</span><span class="p">,</span><span class="w">
  </span><span class="s2">"secuencial"</span><span class="p">:</span><span class="mi">14</span><span class="p">,</span><span class="w">
  </span><span class="s2">"fecha_emision"</span><span class="p">:</span><span class="s2">"2015-12-25T11:28:56.782Z"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"periodo_fiscal"</span><span class="p">:</span><span class="s2">"12/2015"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"emisor"</span><span class="p">:{</span><span class="w">
    </span><span class="s2">"ruc"</span><span class="p">:</span><span class="s2">"0910000000001"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"obligado_contabilidad"</span><span class="p">:</span><span class="kc">true</span><span class="p">,</span><span class="w">
    </span><span class="s2">"contribuyente_especial"</span><span class="p">:</span><span class="s2">"12345"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"nombre_comercial"</span><span class="p">:</span><span class="s2">"XYZ Corp"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"razon_social"</span><span class="p">:</span><span class="s2">"XYZ Corporación S.A."</span><span class="p">,</span><span class="w">
    </span><span class="s2">"direccion"</span><span class="p">:</span><span class="s2">"Av. Primera 234 y calle 5ta"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"establecimiento"</span><span class="p">:{</span><span class="w">
      </span><span class="s2">"punto_emision"</span><span class="p">:</span><span class="s2">"002"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"codigo"</span><span class="p">:</span><span class="s2">"001"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"direccion"</span><span class="p">:</span><span class="s2">"Av. Primera 234 y calle 5ta"</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="s2">"informacion_adicional"</span><span class="p">:{</span><span class="w">
    </span><span class="s2">"Envíada al correo electónico"</span><span class="p">:</span><span class="s2">"contabilidad@xyz.com"</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="s2">"items"</span><span class="p">:[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="s2">"base_imponible"</span><span class="p">:</span><span class="w"> </span><span class="mf">4226.4</span><span class="p">,</span><span class="w">
      </span><span class="s2">"codigo"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
      </span><span class="s2">"codigo_porcentaje"</span><span class="p">:</span><span class="w"> </span><span class="s2">"312"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"fecha_emision_documento_sustento"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2015-12-04T00:00:00-05:19"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"numero_documento_sustento"</span><span class="p">:</span><span class="w"> </span><span class="s2">"011-007-000000251"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"porcentaje"</span><span class="p">:</span><span class="w"> </span><span class="mf">1.0</span><span class="p">,</span><span class="w">
      </span><span class="s2">"tipo_documento_sustento"</span><span class="p">:</span><span class="w"> </span><span class="s2">"01"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"valor_retenido"</span><span class="p">:</span><span class="w"> </span><span class="mf">42.26</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">],</span><span class="w">
  </span><span class="s2">"sujeto"</span><span class="p">:{</span><span class="w">
    </span><span class="s2">"email"</span><span class="p">:</span><span class="s2">"contabilidad@email.com"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"identificacion"</span><span class="p">:</span><span class="s2">"0987654321"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"tipo_identificacion"</span><span class="p">:</span><span class="s2">"05"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"razon_social"</span><span class="p">:</span><span class="s2">"Juan Pérez"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"direccion"</span><span class="p">:</span><span class="s2">"Calle única Numero 987"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"telefono"</span><span class="p">:</span><span class="s2">"046029400"</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>Retorna un objeto tipo <strong><a href="#requerimiento-retencion">retención</a></strong> que incluye un nuevo parámetro <code>id</code>,
el cual identifica de manera única a la retención. El campo <code>clave_acceso</code>
generado también se incluirá como parte de la respuesta.</p>
<h2 id='emision-de-retenciones-a-partir-de-xml'>Emisión de retenciones a partir de XML</h2>
<p><code>POST /retentions/issue/xml</code></p>
<h3 id='requerimiento-a-partir-de-xml'>Requerimiento a partir de XML</h3>
<p>Para la emisión de un comprobante de retención a partir de un XML se debe enviar contenido del archivo XML como parámetro en el cuerpo del requerimiento en formato JSON. Este XML debe cumplir con la especificación del SRI.</p>

<table><thead>
<tr>
<th>Parámetro</th>
<th>Tipo</th>
<th>Descripción</th>
</tr>
</thead><tbody>
<tr>
<td>xml</td>
<td>string</td>
<td>Contenido del archivo xml. <strong>Requerido</strong></td>
</tr>
</tbody></table>

<blockquote>
<h4 id='requerimiento-de-ejemplo-2'>Requerimiento de ejemplo</h4></blockquote>
<pre class="highlight shell tab-shell"><code>curl -v https://link.datil.co/retentions/issue/xml <span class="se">\</span>
-H <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
-H <span class="s2">"X-Key: &lt;API-key&gt;"</span> <span class="se">\</span>
-H <span class="s2">"X-Password: &lt;clave-certificado-firma&gt;"</span> <span class="se">\</span>
-d <span class="s1">'{"xml": "&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;
&lt;comprobanteRetencion id=\"comprobante\" version=\"1.0.0\"&gt;
  &lt;infoTributaria&gt;
    &lt;ambiente&gt;1&lt;/ambiente&gt;
    &lt;tipoEmision&gt;1&lt;/tipoEmision&gt;
    &lt;razonSocial&gt;DATILMEDIA S.A.&lt;/razonSocial&gt;
    &lt;nombreComercial&gt;Datil&lt;/nombreComercial&gt;
    &lt;ruc&gt;1234567890001&lt;/ruc&gt;
    &lt;claveAcceso&gt;0405202007123456789000110010010000000012235571911&lt;/claveAcceso&gt;
    &lt;codDoc&gt;07&lt;/codDoc&gt;
    &lt;estab&gt;001&lt;/estab&gt;
    &lt;ptoEmi&gt;001&lt;/ptoEmi&gt;
    &lt;secuencial&gt;000000001&lt;/secuencial&gt;
    &lt;dirMatriz&gt;Innvernadero Coworking, Bálsamos 813 entre Guayacanes e Higueras&lt;/dirMatriz&gt;
  &lt;/infoTributaria&gt;
  &lt;infoCompRetencion&gt;
    &lt;fechaEmision&gt;04/05/2020&lt;/fechaEmision&gt;
    &lt;dirEstablecimiento&gt;Innvernadero Coworking, Bálsamos 813 entre Guayacanes e Higueras&lt;/dirEstablecimiento&gt;
    &lt;obligadoContabilidad&gt;NO&lt;/obligadoContabilidad&gt;
    &lt;tipoIdentificacionSujetoRetenido&gt;04&lt;/tipoIdentificacionSujetoRetenido&gt;
    &lt;razonSocialSujetoRetenido&gt;Juan Perez&lt;/razonSocialSujetoRetenido&gt;
    &lt;identificacionSujetoRetenido&gt;0953239092001&lt;/identificacionSujetoRetenido&gt;
    &lt;periodoFiscal&gt;05/2020&lt;/periodoFiscal&gt;
  &lt;/infoCompRetencion&gt;
  &lt;impuestos&gt;
    &lt;impuesto&gt;
      &lt;codigo&gt;1&lt;/codigo&gt;
      &lt;codigoRetencion&gt;401CD&lt;/codigoRetencion&gt;
      &lt;baseImponible&gt;10.00&lt;/baseImponible&gt;
      &lt;porcentajeRetener&gt;0.00&lt;/porcentajeRetener&gt;
      &lt;valorRetenido&gt;0.00&lt;/valorRetenido&gt;
      &lt;codDocSustento&gt;01&lt;/codDocSustento&gt;
      &lt;numDocSustento&gt;001001000000001&lt;/numDocSustento&gt;
      &lt;fechaEmisionDocSustento&gt;03/05/2020&lt;/fechaEmisionDocSustento&gt;
    &lt;/impuesto&gt;
  &lt;/impuestos&gt;
  &lt;infoAdicional&gt;
    &lt;campoAdicional nombre="Campo adicional"&gt;Información adicional&lt;/campoAdicional&gt;
  &lt;/infoAdicional&gt;
&lt;/comprobanteRetencion&gt;"}'</span>
</code></pre><pre class="highlight python tab-python"><code><span class="kn">import</span> <span class="nn">requests</span><span class="p">,</span> <span class="n">json</span>

<span class="n">retencion</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s">"xml"</span><span class="p">:</span> <span class="s">'''&lt;?xml version=</span><span class="se">\"</span><span class="s">1.0</span><span class="se">\"</span><span class="s"> encoding=</span><span class="se">\"</span><span class="s">UTF-8</span><span class="se">\"</span><span class="s">?&gt;
    &lt;comprobanteRetencion id=</span><span class="se">\"</span><span class="s">comprobante</span><span class="se">\"</span><span class="s"> version=</span><span class="se">\"</span><span class="s">1.0.0</span><span class="se">\"</span><span class="s">&gt;
      &lt;infoTributaria&gt;
        &lt;ambiente&gt;1&lt;/ambiente&gt;
        &lt;tipoEmision&gt;1&lt;/tipoEmision&gt;
        &lt;razonSocial&gt;DATILMEDIA S.A.&lt;/razonSocial&gt;
        &lt;nombreComercial&gt;Datil&lt;/nombreComercial&gt;
        &lt;ruc&gt;1234567890001&lt;/ruc&gt;
        &lt;claveAcceso&gt;0405202007123456789000110010010000000012235571911&lt;/claveAcceso&gt;
        &lt;codDoc&gt;07&lt;/codDoc&gt;
        &lt;estab&gt;001&lt;/estab&gt;
        &lt;ptoEmi&gt;001&lt;/ptoEmi&gt;
        &lt;secuencial&gt;000000001&lt;/secuencial&gt;
        &lt;dirMatriz&gt;Innvernadero Coworking, Bálsamos 813 entre Guayacanes e Higueras&lt;/dirMatriz&gt;
      &lt;/infoTributaria&gt;
      &lt;infoCompRetencion&gt;
        &lt;fechaEmision&gt;04/05/2020&lt;/fechaEmision&gt;
        &lt;dirEstablecimiento&gt;Innvernadero Coworking, Bálsamos 813 entre Guayacanes e Higueras&lt;/dirEstablecimiento&gt;
        &lt;obligadoContabilidad&gt;NO&lt;/obligadoContabilidad&gt;
        &lt;tipoIdentificacionSujetoRetenido&gt;04&lt;/tipoIdentificacionSujetoRetenido&gt;
        &lt;razonSocialSujetoRetenido&gt;Juan Perez&lt;/razonSocialSujetoRetenido&gt;
        &lt;identificacionSujetoRetenido&gt;0953239092001&lt;/identificacionSujetoRetenido&gt;
        &lt;periodoFiscal&gt;05/2020&lt;/periodoFiscal&gt;
      &lt;/infoCompRetencion&gt;
      &lt;impuestos&gt;
        &lt;impuesto&gt;
          &lt;codigo&gt;1&lt;/codigo&gt;
          &lt;codigoRetencion&gt;401CD&lt;/codigoRetencion&gt;
          &lt;baseImponible&gt;10.00&lt;/baseImponible&gt;
          &lt;porcentajeRetener&gt;0.00&lt;/porcentajeRetener&gt;
          &lt;valorRetenido&gt;0.00&lt;/valorRetenido&gt;
          &lt;codDocSustento&gt;01&lt;/codDocSustento&gt;
          &lt;numDocSustento&gt;001001000000001&lt;/numDocSustento&gt;
          &lt;fechaEmisionDocSustento&gt;03/05/2020&lt;/fechaEmisionDocSustento&gt;
        &lt;/impuesto&gt;
      &lt;/impuestos&gt;
      &lt;infoAdicional&gt;
        &lt;campoAdicional nombre="Campo adicional"&gt;Información adicional&lt;/campoAdicional&gt;
      &lt;/infoAdicional&gt;
    &lt;/comprobanteRetencion&gt;'''</span>
<span class="p">}</span>

<span class="n">cabeceras</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s">'x-key'</span><span class="p">:</span> <span class="s">'&lt;clave-del-api&gt;'</span><span class="p">,</span>
    <span class="s">'x-password'</span><span class="p">:</span> <span class="s">'&lt;clave-certificado-firma&gt;'</span><span class="p">,</span>
    <span class="s">'content-type'</span><span class="p">:</span> <span class="s">'application/json'</span><span class="p">}</span>
<span class="n">respuesta</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">post</span><span class="p">(</span>
    <span class="s">"https://link.datil.co/retentions/issue/xml"</span><span class="p">,</span>
    <span class="n">headers</span> <span class="o">=</span> <span class="n">cabeceras</span><span class="p">,</span>
    <span class="n">data</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">retencion</span><span class="p">))</span>
</code></pre>
<blockquote>
<h4 id='respuesta-de-ejemplo-2'> Respuesta de ejemplo</h4></blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="s2">"secuencial"</span><span class="p">:</span><span class="w"> </span><span class="s2">"000000001"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"fecha_emision"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2020-05-04T00:00:00-05:19"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"emisor"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"ruc"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1234567890001"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"razon_social"</span><span class="p">:</span><span class="w"> </span><span class="s2">"DATILMEDIA S.A."</span><span class="p">,</span><span class="w">
        </span><span class="s2">"nombre_comercial"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Datil"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"contribuyente_especial"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w">
        </span><span class="s2">"direccion"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Innvernadero Coworking, Bálsamos 813 entre Guayacanes e Higueras"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"obligado_contabilidad"</span><span class="p">:</span><span class="w"> </span><span class="s2">"NO"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"establecimiento"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="s2">"punto_emision"</span><span class="p">:</span><span class="w"> </span><span class="s2">"001"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"codigo"</span><span class="p">:</span><span class="w"> </span><span class="s2">"001"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"direccion"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Innvernadero Coworking, Bálsamos 813 entre Guayacanes e Higueras"</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="s2">"email"</span><span class="p">:</span><span class="w"> </span><span class="s2">"devops@datilmedia.com"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="s2">"sujeto"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"identificacion"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0953239092001"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"razon_social"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Juan Perez"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"tipo_identificacion"</span><span class="p">:</span><span class="w"> </span><span class="s2">"04"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="s2">"es_valida"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
    </span><span class="s2">"periodo_fiscal"</span><span class="p">:</span><span class="w"> </span><span class="s2">"05/2020"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"41f5188e0256420cbe9e447db99c9753"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"informacion_adicional"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"Campo adicional"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Información adicional"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="s2">"ambiente"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"tipo_emision"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
    </span><span class="s2">"items"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="p">{</span><span class="w">
            </span><span class="s2">"porcentaje"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.0</span><span class="p">,</span><span class="w">
            </span><span class="s2">"codigo_porcentaje"</span><span class="p">:</span><span class="w"> </span><span class="s2">"401CD"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"fecha_emision_documento_sustento"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2020-05-03T00:00:00-05:19"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"numero_documento_sustento"</span><span class="p">:</span><span class="w"> </span><span class="s2">"001-001-000000001"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"codigo"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"tipo_documento_sustento"</span><span class="p">:</span><span class="w"> </span><span class="s2">"01"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"base_imponible"</span><span class="p">:</span><span class="w"> </span><span class="mf">10.0</span><span class="p">,</span><span class="w">
            </span><span class="s2">"valor_retenido"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.0</span><span class="w">
        </span><span class="p">}</span><span class="w">
    </span><span class="p">],</span><span class="w">
    </span><span class="s2">"clave_acceso"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0405202007123456789000110010010000000012235571911"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre><h2 id='consulta-de-un-comprobante-de-retencion'>Consulta de un Comprobante de Retención</h2>
<p>Consulta una retención para obtener toda la información del comprobante, incluyendo
el estado del mismo.
El parámetro <code>estado</code> de la respuesta obtenida al invocar esta operación, indica
el estado actual del comprobante.</p>

<p>Si es necesario conocer en detalle, en que estado del <a href="#proceso-de-emisión">proceso de emisión</a>,
se debe examinar los parámetros <code>envio_sri</code> y <code>autorizacion_sri</code> de la respuesta.</p>
<h3 id='operacion-2'>Operación</h3>
<p><code>GET /retentions/&lt;receipt-id&gt;</code></p>
<h3 id='requerimiento'>Requerimiento</h3>
<blockquote>
<h4 id='requerimiento-de-ejemplo-3'>Requerimiento de ejemplo</h4></blockquote>
<pre class="highlight shell tab-shell"><code>curl -v https://link.datil.co/retentions/&lt;id-retencion&gt; <span class="se">\</span>
-H <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
-H <span class="s2">"X-Key: &lt;clave-del-api&gt;"</span> <span class="se">\</span>
-H <span class="s2">"X-Password: &lt;clave-certificado-firma&gt;"</span> <span class="se">\</span>
</code></pre><pre class="highlight python tab-python"><code><span class="kn">import</span> <span class="nn">requests</span>
<span class="n">cabeceras</span> <span class="o">=</span> <span class="p">{</span><span class="s">'x-key'</span><span class="p">:</span> <span class="s">'&lt;clave-del-api&gt;'</span><span class="p">}</span>
<span class="n">respuesta</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span>
    <span class="s">'https://link.datil.co/retentions/&lt;id-retencion&gt;'</span><span class="p">,</span>
    <span class="n">headers</span> <span class="o">=</span> <span class="n">cabeceras</span><span class="p">)</span>
</code></pre><pre class="highlight csharp tab-csharp"><code><span class="k">using</span> <span class="nn">RestSharp</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">System</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">System.Collections.Generic</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">System.Linq</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">System.Text</span><span class="p">;</span>

<span class="k">namespace</span> <span class="nn">DatilClient</span> <span class="p">{</span>
  <span class="k">class</span> <span class="nc">InvoicingServiceClient</span> <span class="p">{</span>
    <span class="k">static</span> <span class="k">void</span> <span class="nf">Main</span><span class="p">(</span><span class="kt">string</span><span class="p">[]</span> <span class="n">args</span><span class="p">)</span> <span class="p">{</span>

      <span class="kt">var</span> <span class="n">client</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">RestClient</span><span class="p">(</span><span class="s">"https://link.datil.co/"</span><span class="p">);</span>
      <span class="kt">var</span> <span class="n">idNotaCredito</span> <span class="p">=</span> <span class="s">"&lt;id-retencion&gt;"</span><span class="p">;</span>
      <span class="kt">var</span> <span class="n">request</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">RestRequest</span><span class="p">(</span><span class="s">"invoices/"</span> <span class="p">+</span> <span class="n">idNotaCredito</span><span class="p">,</span> <span class="n">Method</span><span class="p">.</span><span class="n">GET</span><span class="p">);</span>
      <span class="n">request</span><span class="p">.</span><span class="nf">AddHeader</span><span class="p">(</span><span class="s">"X-Key"</span><span class="p">,</span> <span class="s">"&lt;clave-del-api&gt;"</span><span class="p">);</span>

      <span class="n">IRestResponse</span> <span class="n">response</span> <span class="p">=</span> <span class="n">client</span><span class="p">.</span><span class="nf">Execute</span><span class="p">(</span><span class="n">request</span><span class="p">);</span>

      <span class="n">Console</span><span class="p">.</span><span class="nf">WriteLine</span><span class="p">(</span><span class="n">response</span><span class="p">.</span><span class="n">Content</span><span class="p">);</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">}</span>
</code></pre>
<p>Reemplaza en la ruta <code>&lt;receipt-id&gt;</code> por el <code>id</code> de la retención que necesitas consultar.</p>
<h3 id='respuesta-2'>Respuesta</h3>
<blockquote>
<h4 id='respuesta-de-ejemplo-3'>Respuesta de ejemplo</h4></blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"abcf12343faad06785abcf12343faad0"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"secuencial"</span><span class="p">:</span><span class="w"> </span><span class="s2">"16"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"fecha_emision"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2015-05-15"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"version"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1.0.0"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"clave_acceso"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1505201501099271255400110011000000000162092727615"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"emisor"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"ruc"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0992712554001"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"razon_social"</span><span class="p">:</span><span class="w"> </span><span class="s2">"DATILMEDIA S.A."</span><span class="p">,</span><span class="w">
        </span><span class="s2">"nombre_comercial"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Dátil"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"direccion"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
        </span><span class="s2">"obligado_contabilidad"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
        </span><span class="s2">"contribuyente_especial"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w">
        </span><span class="s2">"establecimiento"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="s2">"codigo"</span><span class="p">:</span><span class="w"> </span><span class="s2">"001"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"direccion"</span><span class="p">:</span><span class="w"> </span><span class="s2">"V.E. 112 Y CIRCUNVALACION NORTE"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"punto_emision"</span><span class="p">:</span><span class="w"> </span><span class="s2">"100"</span><span class="w">
        </span><span class="p">}</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="s2">"estado"</span><span class="p">:</span><span class="w"> </span><span class="s2">"AUTORIZADO"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"items"</span><span class="p">:[</span><span class="w">
      </span><span class="p">{</span><span class="w">
        </span><span class="s2">"base_imponible"</span><span class="p">:</span><span class="w"> </span><span class="mf">4226.4</span><span class="p">,</span><span class="w">
        </span><span class="s2">"codigo"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
        </span><span class="s2">"codigo_porcentaje"</span><span class="p">:</span><span class="w"> </span><span class="s2">"312"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"fecha_emision_documento_sustento"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2015-12-04T00:00:00-05:19"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"numero_documento_sustento"</span><span class="p">:</span><span class="w"> </span><span class="s2">"011007000000251"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"porcentaje"</span><span class="p">:</span><span class="w"> </span><span class="mf">1.0</span><span class="p">,</span><span class="w">
        </span><span class="s2">"tipo_documento_sustento"</span><span class="p">:</span><span class="w"> </span><span class="s2">"01"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"valor_retenido"</span><span class="p">:</span><span class="w"> </span><span class="mf">42.26</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">],</span><span class="w">
    </span><span class="s2">"correos_enviados"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="p">{</span><span class="w">
            </span><span class="s2">"fecha_envio"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2015-05-15T16:36:48.274604"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"destinatarios"</span><span class="p">:</span><span class="w"> </span><span class="s2">"juanantonioplaza@datilmedia.com"</span><span class="w">
        </span><span class="p">}</span><span class="w">
    </span><span class="p">],</span><span class="w">
    </span><span class="s2">"informacion_adicional"</span><span class="p">:</span><span class="w"> </span><span class="p">{},</span><span class="w">
    </span><span class="s2">"ambiente"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"sujeto"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"razon_social"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Carlos L. Plaza"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"identificacion"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0900102222"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"tipo_identificacion"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
        </span><span class="s2">"email"</span><span class="p">:</span><span class="w"> </span><span class="s2">"cplaza@gye593.com"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"direccion"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Calle Uno y Calle Dos"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"telefono"</span><span class="p">:</span><span class="w"> </span><span class="s2">"043334445"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="s2">"envio_sri"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"mensajes"</span><span class="p">:</span><span class="w"> </span><span class="p">[],</span><span class="w">
        </span><span class="s2">"estado"</span><span class="p">:</span><span class="w"> </span><span class="s2">"RECIBIDA"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"fecha"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="s2">"tipo_emision"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"autorizacion"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"estado"</span><span class="p">:</span><span class="w"> </span><span class="s2">"AUTORIZADO"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"mensajes"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
            </span><span class="p">{</span><span class="w">
                </span><span class="s2">"identificador"</span><span class="p">:</span><span class="w"> </span><span class="s2">"60"</span><span class="p">,</span><span class="w">
                </span><span class="s2">"mensaje"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ESTE PROCESO FUE REALIZADO EN EL AMBIENTE DE PRUEBAS"</span><span class="p">,</span><span class="w">
                </span><span class="s2">"tipo"</span><span class="p">:</span><span class="w"> </span><span class="s2">"INFORMATIVO"</span><span class="p">,</span><span class="w">
                </span><span class="s2">"informacion_adicional"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="w">
            </span><span class="p">}</span><span class="w">
        </span><span class="p">],</span><span class="w">
        </span><span class="s2">"numero"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1505201516323509927125540010266935227"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"fecha"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2015-05-15T16:32:35.000380"</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<table><thead>
<tr>
<th>Parámetro</th>
<th>Tipo</th>
<th>Descripción</th>
</tr>
</thead><tbody>
<tr>
<td>secuencial</td>
<td>string</td>
<td>Número de secuencia de la retención.</td>
</tr>
<tr>
<td>estado</td>
<td>string</td>
<td>Posibles valores: <code>AUTORIZADO</code>, <code>NO AUTORIZADO</code>, <code>ENVIADO</code>, <code>DEVUELTO</code>, <code>RECIBIDO</code>, <code>ERROR</code></td>
</tr>
<tr>
<td>fecha_emision</td>
<td>string</td>
<td>Fecha de emisión en formato AAAA-MM-DDHoraZonaHoraria, definido en el estándar [ISO8601](http://tools.ietf.</td>
</tr>
<tr>
<td>clave_acceso</td>
<td>string</td>
<td>La clave de acceso representa un identificador único del comprobante. Si esta información no es provista, Dátil la generará.<br>¿Cómo <a href="#clave-de-acceso">generar</a> la clave de acceso?</td>
</tr>
<tr>
<td>envio_sri</td>
<td>objeto tipo <a href="#envío-sri">envio sri</a></td>
<td>Información luego de enviar el comprobante.</td>
</tr>
<tr>
<td>autorizacion</td>
<td>objeto tipo <a href="#autorización-sri">autorizacion sri</a></td>
<td>Información de la autorización.org/html/rfc3339#section-5.6).</td>
</tr>
<tr>
<td>emisor</td>
<td>objeto tipo <a href="#emisor">emisor</a></td>
<td>Información completa del emisor.</td>
</tr>
<tr>
<td>ambiente</td>
<td>integer</td>
<td>Pruebas: <code>1</code>.<br>Producción <code>2</code>.<br></td>
</tr>
<tr>
<td>items</td>
<td>vector de objetos tipo <a href="#impuesto-retenido">impuesto</a></td>
<td>Listado de impuestos retenidos. <strong>Requerido</strong></td>
</tr>
<tr>
<td>sujeto</td>
<td>objeto <a href="#persona">persona</a></td>
<td>Información del sujeto al que se le retiene.</td>
</tr>
<tr>
<td>tipo_emision</td>
<td>integer</td>
<td>Emisión normal: <code>1</code>.<br>Emisión por indisponibilidad: <code>2</code><br></td>
</tr>
<tr>
<td>version</td>
<td>string</td>
<td>Versión de la especificación, opciones válidas: <code>1.0.0</code>, <code>1.1.0</code></td>
</tr>
</tbody></table>
<h1 id='guias-de-remision'>Guías de Remisión</h1><h2 id='emision-de-una-guia-de-remision'>Emisión de una guía de remisión</h2><h3 id='operacion'>Operación</h3>
<p><code>POST /waybills/issue</code></p>

<h3 id="requerimiento-guia-remision">Requerimiento</h3>

<blockquote>
<h4 id='requerimiento-de-ejemplo'>Requerimiento de ejemplo</h4></blockquote>
<pre class="highlight shell tab-shell"><code>curl -v https://link.datil.co/waybills/issue <span class="se">\</span>
-H <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
-H <span class="s2">"X-Key: &lt;API-key&gt;"</span> <span class="se">\</span>
-H <span class="s2">"X-Password: &lt;clave-certificado-firma&gt;"</span> <span class="se">\</span>
-d <span class="s1">'{
  "ambiente":1,
  "tipo_emision":1,
  "secuencial":50,
  "fecha_inicio_transporte":"2015-02-28T11:28:56.782Z",
  "fecha_fin_transporte":"2015-02-28T11:28:56.782Z",
  "direccion_partida": "Victor Emilio Estrada",
  "emisor":{
    "ruc":"0910000000001",
    "obligado_contabilidad":true,
    "contribuyente_especial":"12345",
    "nombre_comercial":"XYZ Corp",
    "razon_social":"XYZ Corporación S.A.",
    "direccion":"Av. Primera 234 y calle 5ta",
    "establecimiento":{
      "punto_emision":"002",
      "codigo":"001",
      "direccion":"Av. Primera 234 y calle 5ta"
    }
  },
  "informacion_adicional":{
    "Tiempo de entrega":"5 días"
  },
  "transportista":{
    "email":"juan.perez@xyz.com",
    "identificacion":"0987654321",
    "tipo_identificacion":"05",
    "razon_social":"Juan Pérez",
    "direccion":"Calle única Numero 987",
    "telefono":"04 6029400",
    "placa":"GSM-0123"
  },
  "destinatarios": [{
    "identificacion":"0987654321",
    "tipo_identificacion":"05",
    "razon_social":"Juan Pérez",
    "direccion":"Calle única Numero 987",
    "email":"juan.perez@xyz.com",
    "telefono":"046029400",
    "fecha_emision_documento_sustento": "2015-02-27T11:28:56.782Z",
    "numero_documento_sustento": "001-001-000000008",
    "numero_autorizacion_documento_sustento": "0123456789",
    "motivo_traslado": "Venta",
    "tipo_documento_sustento": "01",
    "ruta": "GYE - UIO",
    "documento_aduanero_unico": "",
    "codigo_establecimiento_destino": "001",
    "items": [{
      "cantidad": 1.0,
      "codigo_principal": "SPS",
      "codigo_auxiliar": "001",
      "descripcion": "Playstation 4",
      "detalles_adicionales": {
        "numero": "DFGDG2342-2",
        "serie": "1-2014-2"
      }
    }]
  }]
}'</span>
</code></pre><pre class="highlight python tab-python"><code><span class="kn">import</span> <span class="nn">requests</span><span class="p">,</span> <span class="n">json</span>

<span class="n">guia_remision</span> <span class="o">=</span> <span class="p">{</span>
  <span class="s">"ambiente"</span><span class="p">:</span><span class="mi">1</span><span class="p">,</span>
  <span class="s">"tipo_emision"</span><span class="p">:</span><span class="mi">1</span><span class="p">,</span>
  <span class="s">"secuencial"</span><span class="p">:</span><span class="mi">50</span><span class="p">,</span>
  <span class="s">"fecha_inicio_transporte"</span><span class="p">:</span><span class="s">"2015-02-28T11:28:56.782Z"</span><span class="p">,</span>
  <span class="s">"fecha_fin_transporte"</span><span class="p">:</span><span class="s">"2015-02-28T11:28:56.782Z"</span><span class="p">,</span>
  <span class="s">"direccion_partida"</span><span class="p">:</span> <span class="s">"Victor Emilio Estrada"</span><span class="p">,</span>
  <span class="s">"emisor"</span><span class="p">:{</span>
    <span class="s">"ruc"</span><span class="p">:</span><span class="s">"0910000000001"</span><span class="p">,</span>
    <span class="s">"obligado_contabilidad"</span><span class="p">:</span><span class="n">true</span><span class="p">,</span>
    <span class="s">"contribuyente_especial"</span><span class="p">:</span><span class="s">"12345"</span><span class="p">,</span>
    <span class="s">"nombre_comercial"</span><span class="p">:</span><span class="s">"XYZ Corp"</span><span class="p">,</span>
    <span class="s">"razon_social"</span><span class="p">:</span><span class="s">"XYZ Corporación S.A."</span><span class="p">,</span>
    <span class="s">"direccion"</span><span class="p">:</span><span class="s">"Av. Primera 234 y calle 5ta"</span><span class="p">,</span>
    <span class="s">"establecimiento"</span><span class="p">:{</span>
      <span class="s">"punto_emision"</span><span class="p">:</span><span class="s">"002"</span><span class="p">,</span>
      <span class="s">"codigo"</span><span class="p">:</span><span class="s">"001"</span><span class="p">,</span>
      <span class="s">"direccion"</span><span class="p">:</span><span class="s">"Av. Primera 234 y calle 5ta"</span>
    <span class="p">}</span>
  <span class="p">},</span>
  <span class="s">"informacion_adicional"</span><span class="p">:{</span>
    <span class="s">"Tiempo de entrega"</span><span class="p">:</span><span class="s">"5 días"</span>
  <span class="p">},</span>
  <span class="s">"transportista"</span><span class="p">:{</span>
    <span class="s">"email"</span><span class="p">:</span><span class="s">"juan.perez@xyz.com"</span><span class="p">,</span>
    <span class="s">"identificacion"</span><span class="p">:</span><span class="s">"0987654321"</span><span class="p">,</span>
    <span class="s">"tipo_identificacion"</span><span class="p">:</span><span class="s">"05"</span><span class="p">,</span>
    <span class="s">"razon_social"</span><span class="p">:</span><span class="s">"Juan Pérez"</span><span class="p">,</span>
    <span class="s">"direccion"</span><span class="p">:</span><span class="s">"Calle única Numero 987"</span><span class="p">,</span>
    <span class="s">"telefono"</span><span class="p">:</span><span class="s">"04 6029400"</span><span class="p">,</span>
    <span class="s">"placa"</span><span class="p">:</span><span class="s">"GSM-0123"</span>
  <span class="p">},</span>
  <span class="s">"destinatarios"</span><span class="p">:</span> <span class="p">[{</span>
    <span class="s">"identificacion"</span><span class="p">:</span><span class="s">"0987654321"</span><span class="p">,</span>
    <span class="s">"tipo_identificacion"</span><span class="p">:</span><span class="s">"05"</span><span class="p">,</span>
    <span class="s">"razon_social"</span><span class="p">:</span><span class="s">"Juan Pérez"</span><span class="p">,</span>
    <span class="s">"direccion"</span><span class="p">:</span><span class="s">"Calle única Numero 987"</span><span class="p">,</span>
    <span class="s">"email"</span><span class="p">:</span><span class="s">"juan.perez@xyz.com"</span><span class="p">,</span>
    <span class="s">"telefono"</span><span class="p">:</span><span class="s">"046029400"</span><span class="p">,</span>
    <span class="s">"fecha_emision_documento_sustento"</span><span class="p">:</span> <span class="s">"2015-02-27T11:28:56.782Z"</span><span class="p">,</span>
    <span class="s">"numero_documento_sustento"</span><span class="p">:</span> <span class="s">"001-001-000000008"</span><span class="p">,</span>
    <span class="s">"numero_autorizacion_documento_sustento"</span><span class="p">:</span> <span class="s">"0123456789"</span><span class="p">,</span>
    <span class="s">"motivo_traslado"</span><span class="p">:</span> <span class="s">"Venta"</span><span class="p">,</span>
    <span class="s">"tipo_documento_sustento"</span><span class="p">:</span> <span class="s">"01"</span><span class="p">,</span>
    <span class="s">"ruta"</span><span class="p">:</span> <span class="s">"GYE - UIO"</span><span class="p">,</span>
    <span class="s">"documento_aduanero_unico"</span><span class="p">:</span> <span class="s">""</span><span class="p">,</span>
    <span class="s">"codigo_establecimiento_destino"</span><span class="p">:</span> <span class="s">"001"</span><span class="p">,</span>
    <span class="s">"items"</span><span class="p">:</span> <span class="p">[{</span>
      <span class="s">"cantidad"</span><span class="p">:</span> <span class="mf">1.0</span><span class="p">,</span>
      <span class="s">"codigo_principal"</span><span class="p">:</span> <span class="s">"SPS"</span><span class="p">,</span>
      <span class="s">"codigo_auxiliar"</span><span class="p">:</span> <span class="s">"001"</span><span class="p">,</span>
      <span class="s">"descripcion"</span><span class="p">:</span> <span class="s">"Playstation 4"</span><span class="p">,</span>
      <span class="s">"detalles_adicionales"</span><span class="p">:</span> <span class="p">{</span>
        <span class="s">"numero"</span><span class="p">:</span> <span class="s">"DFGDG2342-2"</span><span class="p">,</span>
        <span class="s">"serie"</span><span class="p">:</span> <span class="s">"1-2014-2"</span>
      <span class="p">}</span>
    <span class="p">}]</span>
  <span class="p">}]</span>
<span class="p">}</span>
<span class="n">cabeceras</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s">'x-key'</span><span class="p">:</span> <span class="s">'&lt;clave-del-api&gt;'</span><span class="p">,</span>
    <span class="s">'x-password'</span><span class="p">:</span> <span class="s">'&lt;clave-certificado-firma&gt;'</span><span class="p">,</span>
    <span class="s">'content-type'</span><span class="p">:</span> <span class="s">'application/json'</span><span class="p">}</span>
<span class="n">respuesta</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">post</span><span class="p">(</span>
    <span class="s">"https://link.datil.co/waybills/issue"</span><span class="p">,</span>
    <span class="n">headers</span> <span class="o">=</span> <span class="n">cabeceras</span><span class="p">,</span>
    <span class="n">data</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">guia_remision</span><span class="p">))</span>
</code></pre><pre class="highlight csharp tab-csharp"><code><span class="k">using</span> <span class="nn">RestSharp</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">System</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">System.Collections.Generic</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">System.Linq</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">System.Text</span><span class="p">;</span>

<span class="k">namespace</span> <span class="nn">DatilClient</span> <span class="p">{</span>
  <span class="k">class</span> <span class="nc">InvoicingServiceClient</span> <span class="p">{</span>
    <span class="k">static</span> <span class="k">void</span> <span class="nf">Main</span><span class="p">(</span><span class="kt">string</span><span class="p">[]</span> <span class="n">args</span><span class="p">)</span> <span class="p">{</span>

      <span class="c1">// Este ejemplo utiliza RestSharp</span>
      <span class="c1">// Para instalar anda al menú: tools &gt; Library Package Manager &gt; Package Manager Console</span>
      <span class="c1">// copia y pega y presiona enter: Install-Package RestSharp</span>

      <span class="kt">var</span> <span class="n">client</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">RestClient</span><span class="p">(</span><span class="s">"https://link.datil.co/"</span><span class="p">);</span>
      <span class="kt">var</span> <span class="n">request</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">RestRequest</span><span class="p">(</span><span class="s">"waybills/issue"</span><span class="p">,</span> <span class="n">Method</span><span class="p">.</span><span class="n">POST</span><span class="p">);</span>
      <span class="n">request</span><span class="p">.</span><span class="nf">AddHeader</span><span class="p">(</span><span class="s">"X-Key"</span><span class="p">,</span> <span class="s">"&lt;clave-del-api&gt;"</span><span class="p">);</span>
      <span class="n">request</span><span class="p">.</span><span class="nf">AddHeader</span><span class="p">(</span><span class="s">"X-Password"</span><span class="p">,</span> <span class="s">"&lt;clave-certificado-firma&gt;"</span><span class="p">);</span>

      <span class="n">request</span><span class="p">.</span><span class="nf">AddBody</span><span class="p">(</span><span class="err">@</span><span class="s">"{
</span>        <span class="s">""</span><span class="n">ambiente</span><span class="s">""</span><span class="p">:</span><span class="m">1</span><span class="p">,</span>
        <span class="s">""</span><span class="n">tipo_emision</span><span class="s">""</span><span class="p">:</span><span class="m">1</span><span class="p">,</span>
        <span class="s">""</span><span class="n">secuencial</span><span class="s">""</span><span class="p">:</span><span class="m">50</span><span class="p">,</span>
        <span class="s">""</span><span class="n">fecha_inicio_transporte</span><span class="s">""</span><span class="p">:</span><span class="s">""</span><span class="m">2015</span><span class="p">-</span><span class="m">02</span><span class="p">-</span><span class="m">28</span><span class="n">T11</span><span class="p">:</span><span class="m">28</span><span class="p">:</span><span class="m">56.782</span><span class="n">Z</span><span class="s">""</span><span class="p">,</span>
        <span class="s">""</span><span class="n">fecha_fin_transporte</span><span class="s">""</span><span class="p">:</span><span class="s">""</span><span class="m">2015</span><span class="p">-</span><span class="m">02</span><span class="p">-</span><span class="m">28</span><span class="n">T11</span><span class="p">:</span><span class="m">28</span><span class="p">:</span><span class="m">56.782</span><span class="n">Z</span><span class="s">""</span><span class="p">,</span>
        <span class="s">""</span><span class="n">direccion_partida</span><span class="s">""</span><span class="p">:</span> <span class="s">""</span><span class="n">Victor</span> <span class="n">Emilio</span> <span class="n">Estrada</span><span class="s">""</span><span class="p">,</span>
        <span class="s">""</span><span class="n">emisor</span><span class="s">""</span><span class="p">:{</span>
          <span class="s">""</span><span class="n">ruc</span><span class="s">""</span><span class="p">:</span><span class="s">""</span><span class="m">0910000000001</span><span class="s">""</span><span class="p">,</span>
          <span class="s">""</span><span class="n">obligado_contabilidad</span><span class="s">""</span><span class="p">:</span><span class="k">true</span><span class="p">,</span>
          <span class="s">""</span><span class="n">contribuyente_especial</span><span class="s">""</span><span class="p">:</span><span class="s">""</span><span class="m">12345</span><span class="s">""</span><span class="p">,</span>
          <span class="s">""</span><span class="n">nombre_comercial</span><span class="s">""</span><span class="p">:</span><span class="s">""</span><span class="n">XYZ</span> <span class="n">Corp</span><span class="s">""</span><span class="p">,</span>
          <span class="s">""</span><span class="n">razon_social</span><span class="s">""</span><span class="p">:</span><span class="s">""</span><span class="n">XYZ</span> <span class="n">Corporaci</span><span class="err">ó</span><span class="n">n</span> <span class="n">S</span><span class="p">.</span><span class="n">A</span><span class="p">.</span><span class="s">""</span><span class="p">,</span>
          <span class="s">""</span><span class="n">direccion</span><span class="s">""</span><span class="p">:</span><span class="s">""</span><span class="n">Av</span><span class="p">.</span> <span class="n">Primera</span> <span class="m">234</span> <span class="n">y</span> <span class="n">calle</span> <span class="m">5</span><span class="n">ta</span><span class="s">""</span><span class="p">,</span>
          <span class="s">""</span><span class="n">establecimiento</span><span class="s">""</span><span class="p">:{</span>
            <span class="s">""</span><span class="n">punto_emision</span><span class="s">""</span><span class="p">:</span><span class="s">""</span><span class="m">002</span><span class="s">""</span><span class="p">,</span>
            <span class="s">""</span><span class="n">codigo</span><span class="s">""</span><span class="p">:</span><span class="s">""</span><span class="m">001</span><span class="s">""</span><span class="p">,</span>
            <span class="s">""</span><span class="n">direccion</span><span class="s">""</span><span class="p">:</span><span class="s">""</span><span class="n">Av</span><span class="p">.</span> <span class="n">Primera</span> <span class="m">234</span> <span class="n">y</span> <span class="n">calle</span> <span class="m">5</span><span class="n">ta</span><span class="s">""</span>
          <span class="p">}</span>
        <span class="p">},</span>
        <span class="s">""</span><span class="n">informacion_adicional</span><span class="s">""</span><span class="p">:{</span>
          <span class="s">""</span><span class="n">Tiempo</span> <span class="n">de</span> <span class="n">entrega</span><span class="s">""</span><span class="p">:</span><span class="s">""</span><span class="m">5</span> <span class="n">d</span><span class="err">í</span><span class="k">as</span><span class="s">""</span>
        <span class="p">},</span>
        <span class="s">""</span><span class="n">transportista</span><span class="s">""</span><span class="p">:{</span>
          <span class="s">""</span><span class="n">email</span><span class="s">""</span><span class="p">:</span><span class="s">""</span><span class="n">juan</span><span class="p">.</span><span class="n">perez@xyz</span><span class="p">.</span><span class="n">com</span><span class="s">""</span><span class="p">,</span>
          <span class="s">""</span><span class="n">identificacion</span><span class="s">""</span><span class="p">:</span><span class="s">""</span><span class="m">0987654321</span><span class="s">""</span><span class="p">,</span>
          <span class="s">""</span><span class="n">tipo_identificacion</span><span class="s">""</span><span class="p">:</span><span class="s">""</span><span class="m">05</span><span class="s">""</span><span class="p">,</span>
          <span class="s">""</span><span class="n">razon_social</span><span class="s">""</span><span class="p">:</span><span class="s">""</span><span class="n">Juan</span> <span class="n">P</span><span class="err">é</span><span class="n">rez</span><span class="s">""</span><span class="p">,</span>
          <span class="s">""</span><span class="n">direccion</span><span class="s">""</span><span class="p">:</span><span class="s">""</span><span class="n">Calle</span> <span class="err">ú</span><span class="n">nica</span> <span class="n">Numero</span> <span class="m">987</span><span class="s">""</span><span class="p">,</span>
          <span class="s">""</span><span class="n">telefono</span><span class="s">""</span><span class="p">:</span><span class="s">""</span><span class="m">04</span> <span class="m">6029400</span><span class="s">""</span><span class="p">,</span>
          <span class="s">""</span><span class="n">placa</span><span class="s">""</span><span class="p">:</span><span class="s">""</span><span class="n">GSM</span><span class="p">-</span><span class="m">0123</span><span class="s">""</span>
        <span class="p">},</span>
        <span class="s">""</span><span class="n">destinatarios</span><span class="s">""</span><span class="p">:</span> <span class="p">[{</span>
          <span class="s">""</span><span class="n">identificacion</span><span class="s">""</span><span class="p">:</span><span class="s">""</span><span class="m">0987654321</span><span class="s">""</span><span class="p">,</span>
          <span class="s">""</span><span class="n">tipo_identificacion</span><span class="s">""</span><span class="p">:</span><span class="s">""</span><span class="m">05</span><span class="s">""</span><span class="p">,</span>
          <span class="s">""</span><span class="n">razon_social</span><span class="s">""</span><span class="p">:</span><span class="s">""</span><span class="n">Juan</span> <span class="n">P</span><span class="err">é</span><span class="n">rez</span><span class="s">""</span><span class="p">,</span>
          <span class="s">""</span><span class="n">direccion</span><span class="s">""</span><span class="p">:</span><span class="s">""</span><span class="n">Calle</span> <span class="err">ú</span><span class="n">nica</span> <span class="n">Numero</span> <span class="m">987</span><span class="s">""</span><span class="p">,</span>
          <span class="s">""</span><span class="n">email</span><span class="s">""</span><span class="p">:</span><span class="s">""</span><span class="n">juan</span><span class="p">.</span><span class="n">perez@xyz</span><span class="p">.</span><span class="n">com</span><span class="s">""</span><span class="p">,</span>
          <span class="s">""</span><span class="n">telefono</span><span class="s">""</span><span class="p">:</span><span class="s">""</span><span class="m">046029400</span><span class="s">""</span><span class="p">,</span>
          <span class="s">""</span><span class="n">fecha_emision_documento_sustento</span><span class="s">""</span><span class="p">:</span> <span class="s">""</span><span class="m">2015</span><span class="p">-</span><span class="m">02</span><span class="p">-</span><span class="m">27</span><span class="n">T11</span><span class="p">:</span><span class="m">28</span><span class="p">:</span><span class="m">56.782</span><span class="n">Z</span><span class="s">""</span><span class="p">,</span>
          <span class="s">""</span><span class="n">numero_documento_sustento</span><span class="s">""</span><span class="p">:</span> <span class="s">""</span><span class="m">001</span><span class="p">-</span><span class="m">001</span><span class="p">-</span><span class="m">000000008</span><span class="s">""</span><span class="p">,</span>
          <span class="s">""</span><span class="n">numero_autorizacion_documento_sustento</span><span class="s">""</span><span class="p">:</span> <span class="s">""</span><span class="m">0123456789</span><span class="s">""</span><span class="p">,</span>
          <span class="s">""</span><span class="n">motivo_traslado</span><span class="s">""</span><span class="p">:</span> <span class="s">""</span><span class="n">Venta</span><span class="s">""</span><span class="p">,</span>
          <span class="s">""</span><span class="n">tipo_documento_sustento</span><span class="s">""</span><span class="p">:</span> <span class="s">""</span><span class="m">01</span><span class="s">""</span><span class="p">,</span>
          <span class="s">""</span><span class="n">ruta</span><span class="s">""</span><span class="p">:</span> <span class="s">""</span><span class="n">GYE</span> <span class="p">-</span> <span class="n">UIO</span><span class="s">""</span><span class="p">,</span>
          <span class="s">""</span><span class="n">documento_aduanero_unico</span><span class="s">""</span><span class="p">:</span> <span class="s">""""</span><span class="p">,</span>
          <span class="s">""</span><span class="n">codigo_establecimiento_destino</span><span class="s">""</span><span class="p">:</span> <span class="s">""</span><span class="m">001</span><span class="s">""</span><span class="p">,</span>
          <span class="s">""</span><span class="n">items</span><span class="s">""</span><span class="p">:</span> <span class="p">[{</span>
            <span class="s">""</span><span class="n">cantidad</span><span class="s">""</span><span class="p">:</span> <span class="m">1.0</span><span class="p">,</span>
            <span class="s">""</span><span class="n">codigo_principal</span><span class="s">""</span><span class="p">:</span> <span class="s">""</span><span class="n">SPS</span><span class="s">""</span><span class="p">,</span>
            <span class="s">""</span><span class="n">codigo_auxiliar</span><span class="s">""</span><span class="p">:</span> <span class="s">""</span><span class="m">001</span><span class="s">""</span><span class="p">,</span>
            <span class="s">""</span><span class="n">descripcion</span><span class="s">""</span><span class="p">:</span> <span class="s">""</span><span class="n">Playstation</span> <span class="m">4</span><span class="s">""</span><span class="p">,</span>
            <span class="s">""</span><span class="n">detalles_adicionales</span><span class="s">""</span><span class="p">:</span> <span class="p">{</span>
              <span class="s">""</span><span class="n">numero</span><span class="s">""</span><span class="p">:</span> <span class="s">""</span><span class="n">DFGDG2342</span><span class="p">-</span><span class="m">2</span><span class="s">""</span><span class="p">,</span>
              <span class="s">""</span><span class="n">serie</span><span class="s">""</span><span class="p">:</span> <span class="s">""</span><span class="m">1</span><span class="p">-</span><span class="m">2014</span><span class="p">-</span><span class="m">2</span><span class="s">""</span>
            <span class="p">}</span>
          <span class="p">}]</span>
        <span class="p">}]</span>
      <span class="p">}</span><span class="s">");
</span>
      <span class="n">IRestResponse</span> <span class="n">response</span> <span class="p">=</span> <span class="n">client</span><span class="p">.</span><span class="nf">Execute</span><span class="p">(</span><span class="n">request</span><span class="p">);</span>

      <span class="n">Console</span><span class="p">.</span><span class="nf">WriteLine</span><span class="p">(</span><span class="n">response</span><span class="p">.</span><span class="n">Content</span><span class="p">);</span>
      <span class="n">Console</span><span class="p">.</span><span class="nf">ReadLine</span><span class="p">();</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">}</span>
</code></pre>
<p>Para la emisión de una guía de remisión se debe enviar la información completa del
comprobante en el cuerpo del requerimiento en formato JSON.</p>

<table><thead>
<tr>
<th>Parámetro</th>
<th>Tipo</th>
<th>Descripción</th>
</tr>
</thead><tbody>
<tr>
<td>secuencial</td>
<td>string</td>
<td>Número de secuencia de la guía de remisión. <strong>Requerido</strong></td>
</tr>
<tr>
<td>emisor</td>
<td><a href="#emisor">emisor</a></td>
<td>Información completa del emisor. <strong>Requerido</strong></td>
</tr>
<tr>
<td>fecha_inicio_transporte</td>
<td>string</td>
<td>Fecha de emisión en formato AAAA-MM-DDHoraZonaHoraria, definido en el estándar <a href="http://tools.ietf.org/html/rfc3339#section-5.6">ISO8601</a>.</td>
</tr>
<tr>
<td>fecha_fin_transporte</td>
<td>string</td>
<td>Fecha de emisión en formato AAAA-MM-DDHoraZonaHoraria, definido en el estándar <a href="http://tools.ietf.org/html/rfc3339#section-5.6">ISO8601</a>.</td>
</tr>
<tr>
<td>direccion_partida</td>
<td>string</td>
<td>Dirección de partida</td>
</tr>
<tr>
<td>transportista</td>
<td>objeto tipo <a href="#transportista">transportista</a></td>
<td>Información de la persona que transporta la carga</td>
</tr>
<tr>
<td>ambiente</td>
<td>integer</td>
<td>Pruebas: <code>1</code>.<br>Producción <code>2</code>.<br><strong>Requerido</strong></td>
</tr>
<tr>
<td>tipo_emision</td>
<td>integer</td>
<td>Emisión normal: <code>1</code>.<br>Emisión por indisponibilidad: <code>2</code><br><strong>Requerido</strong></td>
</tr>
<tr>
<td>destinatarios</td>
<td>listado de objetos tipo <a href="#destinatario">destinatario</a></td>
<td>Descripción de destinatarios y la mercadería transportada. <strong>Requerido</strong></td>
</tr>
<tr>
<td>version</td>
<td>string</td>
<td>Versión del formato de comprobantes electrónicos de SRI. Si no se especifica, se utilizará la última revisión del formato implementada,</td>
</tr>
<tr>
<td>clave_acceso</td>
<td>string</td>
<td>La clave de acceso representa un identificador único del comprobante. Si esta información no es provista, Dátil la generará.<br>¿Cómo <a href="#clave-de-acceso">generar</a> la clave de acceso?</td>
</tr>
<tr>
<td>informacion_adicional</td>
<td>objeto</td>
<td>Información adicional adjunta al comprobante en forma de diccionario. Ejemplo:<br><code>{&quot;email&quot;: &quot;juan@empresa.com&quot;, &quot;Carga asegurada por&quot;: &quot;Securitas&quot;}</code></td>
</tr>
</tbody></table>
<h4 id='destinatario'>Destinatario</h4>
<table><thead>
<tr>
<th>Parámetro</th>
<th>Tipo</th>
<th>Descripción</th>
</tr>
</thead><tbody>
<tr>
<td>razon_social</td>
<td>string</td>
<td>Razón social del comprador. Máximo 300 caracteres. <strong>Requerido</strong></td>
</tr>
<tr>
<td>identificacion</td>
<td>string</td>
<td>De 5 a 20 caracteres. <strong>Requerido</strong></td>
</tr>
<tr>
<td>tipo_identificacion</td>
<td>string</td>
<td>Ver <a href="#tipo-de-identificación">tabla</a> de tipos de identificación <strong>Requerido</strong></td>
</tr>
<tr>
<td>email</td>
<td>string</td>
<td>Correo electrónico del destinatario.</td>
</tr>
<tr>
<td>telefono</td>
<td>string</td>
<td>Teléfono.</td>
</tr>
<tr>
<td>direccion</td>
<td>string</td>
<td>Dirección</td>
</tr>
<tr>
<td>ruta</td>
<td>string</td>
<td>Ruta de transporte. Máximo 300 caracteres.</td>
</tr>
<tr>
<td>documento_aduanero_unico</td>
<td>string</td>
<td>Máximo 20 caracteres.</td>
</tr>
<tr>
<td>fecha_emision_documento_sustento</td>
<td>string</td>
<td>Fecha de emisión en formato AAAA-MM-DDHoraZonaHoraria, definido en el estándar <a href="http://tools.ietf.org/html/rfc3339#section-5.6">ISO8601</a>. <strong>Requerido</strong></td>
</tr>
<tr>
<td>numero_documento_sustento</td>
<td>string</td>
<td>Número completo del documento que detalla la mercadería a transportar. Normalmente facturas. Ejm: 001-002-010023098 <strong>Requerido</strong></td>
</tr>
<tr>
<td>codigo_establecimiento_destino</td>
<td>string</td>
<td>Número establecimiento que recibe la entrega. Ejm: 002 <strong>Requerido</strong></td>
</tr>
<tr>
<td>tipo_documento_sustento</td>
<td>string</td>
<td>Ver códigos de <a href="#tipos-de-documentos">tipos de documentos</a>. <strong>Requerido</strong></td>
</tr>
<tr>
<td>motivo_traslado</td>
<td>string</td>
<td>Motivo del traslado. Ejm: Entrega de mercadería. <strong>Requerido</strong></td>
</tr>
<tr>
<td>numero_autorizacion_documento_sustento</td>
<td>string</td>
<td>Autorización del documento de sustento.</td>
</tr>
<tr>
<td>items</td>
<td>arreglo de objetos tipo <a href="#item-destinatario">item destinatario</a></td>
<td>Items transportados</td>
</tr>
</tbody></table>
<h4 id='item-destinatario'>Item destinatario</h4>
<table><thead>
<tr>
<th>Parámetro</th>
<th>Tipo</th>
<th>Descripción</th>
</tr>
</thead><tbody>
<tr>
<td>descripcion</td>
<td>string</td>
<td>Descripción del ítem. <strong>Requerido</strong></td>
</tr>
<tr>
<td>codigo_principal</td>
<td>string</td>
<td>Código alfanumérico de uso del comercio. Máximo 25 caracteres.</td>
</tr>
<tr>
<td>codigo_auxiliar</td>
<td>string</td>
<td>Código alfanumérico de uso del comercio. Máximo 25 caracteres.</td>
</tr>
<tr>
<td>cantidad</td>
<td>float (hasta 6 cifras decimales)</td>
<td>Cantidad de items. <strong>Requerido</strong></td>
</tr>
<tr>
<td>detalles_adicionales</td>
<td>object</td>
<td>Diccionario de datos de carácter adicional. Ejemplo:<br><code>{&quot;marca&quot;: &quot;Ferrari&quot;, &quot;chasis&quot;: &quot;UANEI832-NAU101&quot;}</code></td>
</tr>
</tbody></table>
<h4 id='transportista'>Transportista</h4>
<table><thead>
<tr>
<th>Parámetro</th>
<th>Tipo</th>
<th>Descripción</th>
</tr>
</thead><tbody>
<tr>
<td>razon_social</td>
<td>string</td>
<td>Razón social. Máximo 300 caracteres. <strong>Requerido</strong></td>
</tr>
<tr>
<td>identificacion</td>
<td>string</td>
<td>De 5 a 20 caracteres. <strong>Requerido</strong></td>
</tr>
<tr>
<td>tipo_identificacion</td>
<td>string</td>
<td>Ver <a href="#tipo-de-identificación">tabla</a> de tipos de identificación <strong>Requerido</strong></td>
</tr>
<tr>
<td>email</td>
<td>string</td>
<td>Correo electrónico. Máximo 300 caracteres. <strong>Requerido</strong></td>
</tr>
<tr>
<td>telefono</td>
<td>string</td>
<td>Teléfono.</td>
</tr>
<tr>
<td>direccion</td>
<td>string</td>
<td>Dirección</td>
</tr>
<tr>
<td>placa</td>
<td>string</td>
<td>Placa del vehículo</td>
</tr>
</tbody></table>
<h3 id='respuesta'>Respuesta</h3>
<blockquote>
<h4 id='respuesta-de-ejemplo'>Respuesta de ejemplo</h4></blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"abcfde09817263847cdaef8493018fef"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"clave_acceso"</span><span class="p">:</span><span class="s2">"2802201501091000000000120010010000100451993736618"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"ambiente"</span><span class="p">:</span><span class="mi">1</span><span class="p">,</span><span class="w">
  </span><span class="s2">"tipo_emision"</span><span class="p">:</span><span class="mi">1</span><span class="p">,</span><span class="w">
  </span><span class="s2">"secuencial"</span><span class="p">:</span><span class="mi">50</span><span class="p">,</span><span class="w">
  </span><span class="s2">"fecha_inicio_transporte"</span><span class="p">:</span><span class="s2">"2015-02-28T11:28:56.782Z"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"fecha_fin_transporte"</span><span class="p">:</span><span class="s2">"2015-02-28T11:28:56.782Z"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"emisor"</span><span class="p">:{</span><span class="w">
    </span><span class="s2">"ruc"</span><span class="p">:</span><span class="s2">"0910000000001"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"obligado_contabilidad"</span><span class="p">:</span><span class="kc">true</span><span class="p">,</span><span class="w">
    </span><span class="s2">"contribuyente_especial"</span><span class="p">:</span><span class="s2">"12345"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"nombre_comercial"</span><span class="p">:</span><span class="s2">"XYZ Corp"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"razon_social"</span><span class="p">:</span><span class="s2">"XYZ Corporación S.A."</span><span class="p">,</span><span class="w">
    </span><span class="s2">"direccion"</span><span class="p">:</span><span class="s2">"Av. Primera 234 y calle 5ta"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"establecimiento"</span><span class="p">:{</span><span class="w">
      </span><span class="s2">"punto_emision"</span><span class="p">:</span><span class="s2">"002"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"codigo"</span><span class="p">:</span><span class="s2">"001"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"direccion"</span><span class="p">:</span><span class="s2">"Av. Primera 234 y calle 5ta"</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="s2">"informacion_adicional"</span><span class="p">:{</span><span class="w">
    </span><span class="s2">"Tiempo de entrega"</span><span class="p">:</span><span class="s2">"5 días"</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="s2">"transportista"</span><span class="p">:{</span><span class="w">
    </span><span class="s2">"email"</span><span class="p">:</span><span class="s2">"juan.perez@xyz.com"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"identificacion"</span><span class="p">:</span><span class="s2">"0987654321"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"tipo_identificacion"</span><span class="p">:</span><span class="s2">"05"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"razon_social"</span><span class="p">:</span><span class="s2">"Juan Pérez"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"direccion"</span><span class="p">:</span><span class="s2">"Calle única Numero 987"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"telefono"</span><span class="p">:</span><span class="s2">"04 6029400"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"placa"</span><span class="p">:</span><span class="s2">"GSM-0123"</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="s2">"destinatarios"</span><span class="p">:</span><span class="w"> </span><span class="p">[{</span><span class="w">
    </span><span class="s2">"identificacion"</span><span class="p">:</span><span class="s2">"0987654321"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"tipo_identificacion"</span><span class="p">:</span><span class="s2">"05"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"razon_social"</span><span class="p">:</span><span class="s2">"Juan Pérez"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"direccion"</span><span class="p">:</span><span class="s2">"Calle única Numero 987"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"email"</span><span class="p">:</span><span class="s2">"juan.perez@xyz.com"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"telefono"</span><span class="p">:</span><span class="s2">"046029400"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"fecha_emision_documento_sustento"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2015-02-27T11:28:56.782Z"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"numero_documento_sustento"</span><span class="p">:</span><span class="w"> </span><span class="s2">"001-001-000000008"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"numero_autorizacion_documento_sustento"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0123456789"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"motivo_traslado"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Venta"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"tipo_documento_sustento"</span><span class="p">:</span><span class="w"> </span><span class="s2">"01"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"ruta"</span><span class="p">:</span><span class="w"> </span><span class="s2">"GYE - UIO"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"documento_aduanero_unico"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w">
    </span><span class="s2">"codigo_establecimiento_destino"</span><span class="p">:</span><span class="w"> </span><span class="s2">"001"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"items"</span><span class="p">:</span><span class="w"> </span><span class="p">[{</span><span class="w">
      </span><span class="s2">"cantidad"</span><span class="p">:</span><span class="w"> </span><span class="mf">1.0</span><span class="p">,</span><span class="w">
      </span><span class="s2">"codigo_principal"</span><span class="p">:</span><span class="w"> </span><span class="s2">"SPS"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"codigo_auxiliar"</span><span class="p">:</span><span class="w"> </span><span class="s2">"001"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"descripcion"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Playstation 4"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"detalles_adicionales"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"numero"</span><span class="p">:</span><span class="w"> </span><span class="s2">"DFGDG2342-2"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"serie"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1-2014-2"</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">}]</span><span class="w">
  </span><span class="p">}]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>Retorna un objeto tipo <strong><a href="#requerimiento-guia-remision">guía de remisión</a></strong> que incluye un nuevo parámetro <code>id</code>,
el cual identifica de manera única a la guía de remisión. El campo <code>clave_acceso</code>
generado también se incluirá como parte de la respuesta.</p>
<h2 id='emision-de-una-guia-de-remision-a-partir-de-xml'>Emisión de una guia de remisión a partir de XML</h2>
<p><code>POST /waybills/issue/xml</code></p>
<h3 id='requerimiento-a-partir-de-xml'>Requerimiento a partir de XML</h3>
<p>Para la emisión de una guia de remisión a partir de un XML se debe enviar contenido del archivo XML como parámetro en el cuerpo del requerimiento en formato JSON. Este XML debe cumplir con la especificación del SRI.</p>

<table><thead>
<tr>
<th>Parámetro</th>
<th>Tipo</th>
<th>Descripción</th>
</tr>
</thead><tbody>
<tr>
<td>xml</td>
<td>string</td>
<td>Contenido del archivo xml. <strong>Requerido</strong></td>
</tr>
</tbody></table>

<blockquote>
<h4 id='requerimiento-de-ejemplo-2'>Requerimiento de ejemplo</h4></blockquote>
<pre class="highlight shell tab-shell"><code>curl -v https://link.datil.co/waybills/issue/xml <span class="se">\</span>
-H <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
-H <span class="s2">"X-Key: &lt;API-key&gt;"</span> <span class="se">\</span>
-H <span class="s2">"X-Password: &lt;clave-certificado-firma&gt;"</span> <span class="se">\</span>
-d <span class="s1">'{"xml": "&lt;?xml version=\"1.1.0\" encoding=\"UTF-8\"&gt;
&lt;guiaRemision id=\"comprobante\" version=\"1.1.0\"&gt;
  &lt;infoTributaria&gt;
    &lt;ambiente&gt;1&lt;/ambiente&gt;
    &lt;tipoEmision&gt;1&lt;/tipoEmision&gt;
    &lt;razonSocial&gt;DATILMEDIA S.A.&lt;/razonSocial&gt;
    &lt;nombreComercial&gt;Datil&lt;/nombreComercial&gt;
    &lt;ruc&gt;1234567890001&lt;/ruc&gt;
    &lt;claveAcceso&gt;0405202006123456789000110010010000000012235571913&lt;/claveAcceso&gt;
    &lt;codDoc&gt;06&lt;/codDoc&gt;
    &lt;estab&gt;001&lt;/estab&gt;
    &lt;ptoEmi&gt;001&lt;/ptoEmi&gt;
    &lt;secuencial&gt;000000001&lt;/secuencial&gt;
    &lt;dirMatriz&gt;Innvernadero Coworking, Bálsamos 813 entre Guayacanes e Higueras&lt;/dirMatriz&gt;
  &lt;/infoTributaria&gt;
  &lt;infoGuiaRemision&gt;
    &lt;dirEstablecimiento&gt;Innvernadero Coworking, Bálsamos 813 entre Guayacanes e Higueras&lt;/dirEstablecimiento&gt;
    &lt;dirPartida&gt;Calle única Numero 987&lt;/dirPartida&gt;
    &lt;razonSocialTransportista&gt;Juan Perez&lt;/razonSocialTransportista&gt;
    &lt;tipoIdentificacionTransportista&gt;05&lt;/tipoIdentificacionTransportista&gt;
    &lt;rucTransportista&gt;0987654321&lt;/rucTransportista&gt;
    &lt;obligadoContabilidad&gt;NO&lt;/obligadoContabilidad&gt;
    &lt;fechaIniTransporte&gt;04/05/2020&lt;/fechaIniTransporte&gt;
    &lt;fechaFinTransporte&gt;05/05/2020&lt;/fechaFinTransporte&gt;
    &lt;placa&gt;GSM-0123&lt;/placa&gt;
  &lt;/infoGuiaRemision&gt;
  &lt;destinatarios&gt;
    &lt;destinatario&gt;
      &lt;identificacionDestinatario&gt;0953239092001&lt;/identificacionDestinatario&gt;
      &lt;razonSocialDestinatario&gt;Santacruz Hernandez Anni Rosa&lt;/razonSocialDestinatario&gt;
      &lt;dirDestinatario&gt;Solar 23&lt;/dirDestinatario&gt;
      &lt;motivoTraslado&gt;Motivo del traslado&lt;/motivoTraslado&gt;
      &lt;codEstabDestino&gt;001&lt;/codEstabDestino&gt;
      &lt;ruta&gt;GYE - UIO&lt;/ruta&gt;
      &lt;codDocSustento&gt;01&lt;/codDocSustento&gt;
      &lt;numDocSustento&gt;001-001-000000001&lt;/numDocSustento&gt;
      &lt;fechaEmisionDocSustento&gt;01/05/2020&lt;/fechaEmisionDocSustento&gt;
      &lt;detalles&gt;
        &lt;detalle&gt;
          &lt;codigoInterno&gt;AGDAS-001&lt;/codigoInterno&gt;
          &lt;descripcion&gt;Agua purificada&lt;/descripcion&gt;
          &lt;cantidad&gt;1.000000&lt;/cantidad&gt;
          &lt;detallesAdicionales/&gt;
        &lt;/detalle&gt;
      &lt;/detalles&gt;
    &lt;/destinatario&gt;
  &lt;/destinatarios&gt;
  &lt;infoAdicional&gt;
    &lt;campoAdicional nombre=\"Campo Adicional\"&gt;Informacion Adicional&lt;/campoAdicional&gt;
  &lt;/infoAdicional&gt;
&lt;/guiaRemision&gt;"}'</span>
</code></pre><pre class="highlight python tab-python"><code><span class="kn">import</span> <span class="nn">requests</span><span class="p">,</span> <span class="n">json</span>

<span class="n">guia_remision</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s">"xml"</span><span class="p">:</span> <span class="s">'''&lt;?xml version=</span><span class="se">\"</span><span class="s">1.1.0</span><span class="se">\"</span><span class="s"> encoding=</span><span class="se">\"</span><span class="s">UTF-8</span><span class="se">\"</span><span class="s">&gt;
    &lt;guiaRemision id=</span><span class="se">\"</span><span class="s">comprobante</span><span class="se">\"</span><span class="s"> version=</span><span class="se">\"</span><span class="s">1.1.0</span><span class="se">\"</span><span class="s">&gt;
      &lt;infoTributaria&gt;
        &lt;ambiente&gt;1&lt;/ambiente&gt;
        &lt;tipoEmision&gt;1&lt;/tipoEmision&gt;
        &lt;razonSocial&gt;DATILMEDIA S.A.&lt;/razonSocial&gt;
        &lt;nombreComercial&gt;Datil&lt;/nombreComercial&gt;
        &lt;ruc&gt;1234567890001&lt;/ruc&gt;
        &lt;claveAcceso&gt;0405202006123456789000110010010000000012235571913&lt;/claveAcceso&gt;
        &lt;codDoc&gt;06&lt;/codDoc&gt;
        &lt;estab&gt;001&lt;/estab&gt;
        &lt;ptoEmi&gt;001&lt;/ptoEmi&gt;
        &lt;secuencial&gt;000000001&lt;/secuencial&gt;
        &lt;dirMatriz&gt;Innvernadero Coworking, Bálsamos 813 entre Guayacanes e Higueras&lt;/dirMatriz&gt;
      &lt;/infoTributaria&gt;
      &lt;infoGuiaRemision&gt;
        &lt;dirEstablecimiento&gt;Innvernadero Coworking, Bálsamos 813 entre Guayacanes e Higueras&lt;/dirEstablecimiento&gt;
        &lt;dirPartida&gt;Calle única Numero 987&lt;/dirPartida&gt;
        &lt;razonSocialTransportista&gt;Juan Perez&lt;/razonSocialTransportista&gt;
        &lt;tipoIdentificacionTransportista&gt;05&lt;/tipoIdentificacionTransportista&gt;
        &lt;rucTransportista&gt;0987654321&lt;/rucTransportista&gt;
        &lt;obligadoContabilidad&gt;NO&lt;/obligadoContabilidad&gt;
        &lt;fechaIniTransporte&gt;04/05/2020&lt;/fechaIniTransporte&gt;
        &lt;fechaFinTransporte&gt;05/05/2020&lt;/fechaFinTransporte&gt;
        &lt;placa&gt;GSM-0123&lt;/placa&gt;
      &lt;/infoGuiaRemision&gt;
      &lt;destinatarios&gt;
        &lt;destinatario&gt;
          &lt;identificacionDestinatario&gt;0953239092001&lt;/identificacionDestinatario&gt;
          &lt;razonSocialDestinatario&gt;Santacruz Hernandez Anni Rosa&lt;/razonSocialDestinatario&gt;
          &lt;dirDestinatario&gt;Solar 23&lt;/dirDestinatario&gt;
          &lt;motivoTraslado&gt;Motivo del traslado&lt;/motivoTraslado&gt;
          &lt;codEstabDestino&gt;001&lt;/codEstabDestino&gt;
          &lt;ruta&gt;GYE - UIO&lt;/ruta&gt;
          &lt;codDocSustento&gt;01&lt;/codDocSustento&gt;
          &lt;numDocSustento&gt;001-001-000000001&lt;/numDocSustento&gt;
          &lt;fechaEmisionDocSustento&gt;01/05/2020&lt;/fechaEmisionDocSustento&gt;
          &lt;detalles&gt;
            &lt;detalle&gt;
              &lt;codigoInterno&gt;AGDAS-001&lt;/codigoInterno&gt;
              &lt;descripcion&gt;Agua purificada&lt;/descripcion&gt;
              &lt;cantidad&gt;1.000000&lt;/cantidad&gt;
              &lt;detallesAdicionales/&gt;
            &lt;/detalle&gt;
          &lt;/detalles&gt;
        &lt;/destinatario&gt;
      &lt;/destinatarios&gt;
      &lt;infoAdicional&gt;
        &lt;campoAdicional nombre="Campo Adicional"&gt;Informacion Adicional&lt;/campoAdicional&gt;
      &lt;/infoAdicional&gt;
    &lt;/guiaRemision&gt;'''</span>
<span class="p">}</span>

<span class="n">cabeceras</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s">'x-key'</span><span class="p">:</span> <span class="s">'&lt;clave-del-api&gt;'</span><span class="p">,</span>
    <span class="s">'x-password'</span><span class="p">:</span> <span class="s">'&lt;clave-certificado-firma&gt;'</span><span class="p">,</span>
    <span class="s">'content-type'</span><span class="p">:</span> <span class="s">'application/json'</span><span class="p">}</span>
<span class="n">respuesta</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">post</span><span class="p">(</span>
    <span class="s">"https://link.datil.co/waybills/issue/xml"</span><span class="p">,</span>
    <span class="n">headers</span> <span class="o">=</span> <span class="n">cabeceras</span><span class="p">,</span>
    <span class="n">data</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">guia_remision</span><span class="p">))</span>
</code></pre>
<blockquote>
<h4 id='respuesta-de-ejemplo-2'>Respuesta de ejemplo</h4></blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="s2">"secuencial"</span><span class="p">:</span><span class="w"> </span><span class="s2">"000000001"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"emisor"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"ruc"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1234567890001"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"razon_social"</span><span class="p">:</span><span class="w"> </span><span class="s2">"DATILMEDIA S.A."</span><span class="p">,</span><span class="w">
        </span><span class="s2">"nombre_comercial"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Datil"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"contribuyente_especial"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w">
        </span><span class="s2">"direccion"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Innvernadero Coworking, Bálsamos 813 entre Guayacanes e Higueras"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"obligado_contabilidad"</span><span class="p">:</span><span class="w"> </span><span class="s2">"NO"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"establecimiento"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="s2">"punto_emision"</span><span class="p">:</span><span class="w"> </span><span class="s2">"001"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"codigo"</span><span class="p">:</span><span class="w"> </span><span class="s2">"001"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"direccion"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Innvernadero Coworking, Bálsamos 813 entre Guayacanes e Higueras"</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="s2">"email"</span><span class="p">:</span><span class="w"> </span><span class="s2">"devops@datilmedia.com"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="s2">"direccion_partida"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Calle única Numero 987"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"transportista"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"tipo_identificacion"</span><span class="p">:</span><span class="w"> </span><span class="s2">"05"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"razon_social"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Juan Perez"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"direccion"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w">
        </span><span class="s2">"placa"</span><span class="p">:</span><span class="w"> </span><span class="s2">"GSM-0123"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"identificacion"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0987654321"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"telefono"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w">
        </span><span class="s2">"email"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="s2">"fecha_fin_transporte"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2020-05-05T00:00:00-05:19"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"destinatarios"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="p">{</span><span class="w">
            </span><span class="s2">"fecha_emision_documento_sustento"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2020-05-01T00:00:00-05:19"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"email"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w">
            </span><span class="s2">"ruta"</span><span class="p">:</span><span class="w"> </span><span class="s2">"GYE - UIO"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"identificacion"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0953239092001"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"motivo_traslado"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Motivo del traslado"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"documento_aduanero_unico"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w">
            </span><span class="s2">"numero_documento_sustento"</span><span class="p">:</span><span class="w"> </span><span class="s2">"001-001-000000001"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"tipo_identificacion"</span><span class="p">:</span><span class="w"> </span><span class="s2">"05"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"codigo_establecimiento_destino"</span><span class="p">:</span><span class="w"> </span><span class="s2">"001"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"razon_social"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Santacruz Hernandez Anni Rosa"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"numero_autorizacion_documento_sustento"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w">
            </span><span class="s2">"direccion"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Solar 23"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"tipo_documento_sustento"</span><span class="p">:</span><span class="w"> </span><span class="s2">"01"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"items"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
                </span><span class="p">{</span><span class="w">
                    </span><span class="s2">"codigo_auxiliar"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w">
                    </span><span class="s2">"descripcion"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Agua purificada"</span><span class="p">,</span><span class="w">
                    </span><span class="s2">"codigo_principal"</span><span class="p">:</span><span class="w"> </span><span class="s2">"AGDAS-001"</span><span class="p">,</span><span class="w">
                    </span><span class="s2">"cantidad"</span><span class="p">:</span><span class="w"> </span><span class="mf">1.0</span><span class="p">,</span><span class="w">
                    </span><span class="s2">"detalles_adicionales"</span><span class="p">:</span><span class="w"> </span><span class="p">{}</span><span class="w">
                </span><span class="p">}</span><span class="w">
            </span><span class="p">],</span><span class="w">
            </span><span class="s2">"telefono"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="w">
        </span><span class="p">}</span><span class="w">
    </span><span class="p">],</span><span class="w">
    </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"a8ea19c75f2546b883c4a00e9e68e1b9"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"fecha_inicio_transporte"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2020-05-04T00:00:00-05:19"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"informacion_adicional"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"Campo Adicional"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Informacion Adicional"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="s2">"ambiente"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"tipo_emision"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
    </span><span class="s2">"clave_acceso"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0405202006123456789000110010010000000012235571913"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre><h2 id='consulta-de-una-guia-de-remision'>Consulta de una guía de remisión</h2>
<p>Consulta una guía de remisión para obtener toda la información del comprobante, incluyendo
el estado del mismo.
El parámetro <code>estado</code> de la respuesta obtenida al invocar esta operación, indica
el estado actual del comprobante.</p>

<p>Si es necesario conocer en detalle, en que estado del <a href="#proceso-de-emisión">proceso de emisión</a>,
se debe examinar los parámetros <code>envio_sri</code> y <code>autorizacion_sri</code> de la respuesta.</p>
<h3 id='operacion-2'>Operación</h3>
<p><code>GET /waybills/&lt;receipt-id&gt;</code></p>
<h3 id='requerimiento'>Requerimiento</h3>
<blockquote>
<h4 id='requerimiento-de-ejemplo-3'>Requerimiento de ejemplo</h4></blockquote>
<pre class="highlight shell tab-shell"><code>curl -v https://link.datil.co/waybills/&lt;id-notacredito&gt; <span class="se">\</span>
-H <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
-H <span class="s2">"X-Key: &lt;clave-del-api&gt;"</span> <span class="se">\</span>
-H <span class="s2">"X-Password: &lt;clave-certificado-firma&gt;"</span> <span class="se">\</span>
</code></pre><pre class="highlight python tab-python"><code><span class="kn">import</span> <span class="nn">requests</span>
<span class="n">cabeceras</span> <span class="o">=</span> <span class="p">{</span><span class="s">'x-key'</span><span class="p">:</span> <span class="s">'&lt;clave-del-api&gt;'</span><span class="p">}</span>
<span class="n">respuesta</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span>
    <span class="s">'https://link.datil.co/waybills/&lt;id-notacredito&gt;'</span><span class="p">,</span>
    <span class="n">headers</span> <span class="o">=</span> <span class="n">cabeceras</span><span class="p">)</span>
</code></pre><pre class="highlight csharp tab-csharp"><code><span class="k">using</span> <span class="nn">RestSharp</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">System</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">System.Collections.Generic</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">System.Linq</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">System.Text</span><span class="p">;</span>

<span class="k">namespace</span> <span class="nn">DatilClient</span> <span class="p">{</span>
  <span class="k">class</span> <span class="nc">InvoicingServiceClient</span> <span class="p">{</span>
    <span class="k">static</span> <span class="k">void</span> <span class="nf">Main</span><span class="p">(</span><span class="kt">string</span><span class="p">[]</span> <span class="n">args</span><span class="p">)</span> <span class="p">{</span>

      <span class="kt">var</span> <span class="n">client</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">RestClient</span><span class="p">(</span><span class="s">"https://link.datil.co/"</span><span class="p">);</span>
      <span class="kt">var</span> <span class="n">idNotaCredito</span> <span class="p">=</span> <span class="s">"&lt;id-notacredito&gt;"</span><span class="p">;</span>
      <span class="kt">var</span> <span class="n">request</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">RestRequest</span><span class="p">(</span><span class="s">"invoices/"</span> <span class="p">+</span> <span class="n">idNotaCredito</span><span class="p">,</span> <span class="n">Method</span><span class="p">.</span><span class="n">GET</span><span class="p">);</span>
      <span class="n">request</span><span class="p">.</span><span class="nf">AddHeader</span><span class="p">(</span><span class="s">"X-Key"</span><span class="p">,</span> <span class="s">"&lt;clave-del-api&gt;"</span><span class="p">);</span>

      <span class="n">IRestResponse</span> <span class="n">response</span> <span class="p">=</span> <span class="n">client</span><span class="p">.</span><span class="nf">Execute</span><span class="p">(</span><span class="n">request</span><span class="p">);</span>

      <span class="n">Console</span><span class="p">.</span><span class="nf">WriteLine</span><span class="p">(</span><span class="n">response</span><span class="p">.</span><span class="n">Content</span><span class="p">);</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">}</span>
</code></pre>
<p>Reemplaza en la ruta <code>&lt;receipt-id&gt;</code> por el <code>id</code> de la guía de remisión que necesitas consultar.</p>
<h3 id='respuesta-2'>Respuesta</h3>
<blockquote>
<h4 id='respuesta-de-ejemplo-3'>Respuesta de ejemplo</h4></blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"abcf12343faad06785"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"secuencial"</span><span class="p">:</span><span class="w"> </span><span class="s2">"16"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"fecha_emision"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2015-05-15"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"version"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1.0.0"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"clave_acceso"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1505201501099271255400110011000000000162092727615"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"emisor"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"ruc"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0992712554001"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"razon_social"</span><span class="p">:</span><span class="w"> </span><span class="s2">"DATILMEDIA S.A."</span><span class="p">,</span><span class="w">
        </span><span class="s2">"nombre_comercial"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Dátil"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"direccion"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
        </span><span class="s2">"obligado_contabilidad"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
        </span><span class="s2">"contribuyente_especial"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w">
        </span><span class="s2">"establecimiento"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="s2">"codigo"</span><span class="p">:</span><span class="w"> </span><span class="s2">"001"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"direccion"</span><span class="p">:</span><span class="w"> </span><span class="s2">"V.E. 112 Y CIRCUNVALACION NORTE"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"punto_emision"</span><span class="p">:</span><span class="w"> </span><span class="s2">"100"</span><span class="w">
        </span><span class="p">}</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="s2">"estado"</span><span class="p">:</span><span class="w"> </span><span class="s2">"AUTORIZADO"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"correos_enviados"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="p">{</span><span class="w">
            </span><span class="s2">"fecha_envio"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2015-05-15T16:36:48.274604"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"destinatarios"</span><span class="p">:</span><span class="w"> </span><span class="s2">"juanantonioplaza@datilmedia.com"</span><span class="w">
        </span><span class="p">}</span><span class="w">
    </span><span class="p">],</span><span class="w">
    </span><span class="s2">"guia_remision"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w">
    </span><span class="s2">"informacion_adicional"</span><span class="p">:</span><span class="w"> </span><span class="p">[],</span><span class="w">
    </span><span class="s2">"ambiente"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"totales"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"total_sin_impuestos"</span><span class="p">:</span><span class="w"> </span><span class="s2">"150.00"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"descuento"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0.00"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"propina"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0.00"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"impuestos"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
            </span><span class="p">{</span><span class="w">
                </span><span class="s2">"codigo"</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w">
                </span><span class="s2">"codigo_porcentaje"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2"</span><span class="p">,</span><span class="w">
                </span><span class="s2">"base_imponible"</span><span class="p">:</span><span class="w"> </span><span class="s2">"150.00"</span><span class="p">,</span><span class="w">
                </span><span class="s2">"valor"</span><span class="p">:</span><span class="w"> </span><span class="s2">"18.00"</span><span class="w">
            </span><span class="p">}</span><span class="w">
        </span><span class="p">],</span><span class="w">
        </span><span class="s2">"importe_total"</span><span class="p">:</span><span class="w"> </span><span class="s2">"168.00"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="s2">"comprador"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"razon_social"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Carlos L. Plaza"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"identificacion"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0900102222"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"tipo_identificacion"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
        </span><span class="s2">"email"</span><span class="p">:</span><span class="w"> </span><span class="s2">"cplaza@gye593.com"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"direccion"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Calle Uno y Calle Dos"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"telefono"</span><span class="p">:</span><span class="w"> </span><span class="s2">"043334445"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="s2">"envio_sri"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"mensajes"</span><span class="p">:</span><span class="w"> </span><span class="p">[],</span><span class="w">
        </span><span class="s2">"estado"</span><span class="p">:</span><span class="w"> </span><span class="s2">"RECIBIDA"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"fecha"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="s2">"tipo_emision"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"items"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="p">{</span><span class="w">
            </span><span class="s2">"detalles_adicionales"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                </span><span class="s2">"Estadía"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2 noches"</span><span class="p">,</span><span class="w">
                </span><span class="s2">"Habitación"</span><span class="p">:</span><span class="w"> </span><span class="s2">"203"</span><span class="w">
            </span><span class="p">},</span><span class="w">
            </span><span class="s2">"cantidad"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1.000000"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"codigo_principal"</span><span class="p">:</span><span class="w"> </span><span class="s2">"HAB"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"codigo_auxiliar"</span><span class="p">:</span><span class="w"> </span><span class="s2">"DOB"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"descripcion"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Habitación doble"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"precio_unitario"</span><span class="p">:</span><span class="w"> </span><span class="s2">"150.000000"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"descuento"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0.00"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"precio_total_sin_impuestos"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w">
            </span><span class="s2">"impuestos"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
                </span><span class="p">{</span><span class="w">
                    </span><span class="s2">"tarifa"</span><span class="p">:</span><span class="w"> </span><span class="s2">"12.00"</span><span class="p">,</span><span class="w">
                    </span><span class="s2">"codigo"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2"</span><span class="p">,</span><span class="w">
                    </span><span class="s2">"codigo_porcentaje"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2"</span><span class="p">,</span><span class="w">
                    </span><span class="s2">"base_imponible"</span><span class="p">:</span><span class="w"> </span><span class="s2">"150.00"</span><span class="p">,</span><span class="w">
                    </span><span class="s2">"valor"</span><span class="p">:</span><span class="w"> </span><span class="s2">"18.00"</span><span class="w">
                </span><span class="p">}</span><span class="w">
            </span><span class="p">]</span><span class="w">
        </span><span class="p">}</span><span class="w">
    </span><span class="p">],</span><span class="w">
    </span><span class="s2">"autorizacion"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"estado"</span><span class="p">:</span><span class="w"> </span><span class="s2">"AUTORIZADO"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"mensajes"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
            </span><span class="p">{</span><span class="w">
                </span><span class="s2">"identificador"</span><span class="p">:</span><span class="w"> </span><span class="s2">"60"</span><span class="p">,</span><span class="w">
                </span><span class="s2">"mensaje"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ESTE PROCESO FUE REALIZADO EN EL AMBIENTE DE PRUEBAS"</span><span class="p">,</span><span class="w">
                </span><span class="s2">"tipo"</span><span class="p">:</span><span class="w"> </span><span class="s2">"INFORMATIVO"</span><span class="p">,</span><span class="w">
                </span><span class="s2">"informacion_adicional"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="w">
            </span><span class="p">}</span><span class="w">
        </span><span class="p">],</span><span class="w">
        </span><span class="s2">"numero"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1505201516323509927125540010266935227"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"fecha"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2015-05-15T16:32:35.000380"</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<table><thead>
<tr>
<th>Parámetro</th>
<th>Tipo</th>
<th>Descripción</th>
</tr>
</thead><tbody>
<tr>
<td>secuencial</td>
<td>string</td>
<td>Número de secuencia de la guía de remisión. <strong>Requerido</strong></td>
</tr>
<tr>
<td>emisor</td>
<td><a href="#emisor">emisor</a></td>
<td>Información completa del emisor. <strong>Requerido</strong></td>
</tr>
<tr>
<td>fecha_inicio_transporte</td>
<td>string</td>
<td>Fecha de emisión en formato AAAA-MM-DDHoraZonaHoraria, definido en el estándar <a href="http://tools.ietf.org/html/rfc3339#section-5.6">ISO8601</a>.</td>
</tr>
<tr>
<td>fecha_fin_transporte</td>
<td>string</td>
<td>Fecha de emisión en formato AAAA-MM-DDHoraZonaHoraria, definido en el estándar <a href="http://tools.ietf.org/html/rfc3339#section-5.6">ISO8601</a>.</td>
</tr>
<tr>
<td>direccion_partida</td>
<td>string</td>
<td>Dirección de partida</td>
</tr>
<tr>
<td>transportista</td>
<td>objeto tipo <a href="#transportista">Transportista</a></td>
<td>Información de la persona que transporta la carga</td>
</tr>
<tr>
<td>ambiente</td>
<td>integer</td>
<td>Pruebas: <code>1</code>.<br>Producción <code>2</code>.<br><strong>Requerido</strong></td>
</tr>
<tr>
<td>tipo_emision</td>
<td>integer</td>
<td>Emisión normal: <code>1</code>.<br>Emisión por indisponibilidad: <code>2</code><br><strong>Requerido</strong></td>
</tr>
<tr>
<td>destinatarios</td>
<td>listado de objetos tipo <a href="#destinatario">destinatario</a></td>
<td>Descripción de destinatarios y la mercadería transportada. <strong>Requerido</strong></td>
</tr>
<tr>
<td>version</td>
<td>string</td>
<td>Versión del formato de comprobantes electrónicos de SRI. Si no se especifica, se utilizará la última revisión del formato implementada,</td>
</tr>
<tr>
<td>clave_acceso</td>
<td>string</td>
<td>La clave de acceso representa un identificador único del comprobante. Si esta información no es provista, Dátil la generará.<br>¿Cómo <a href="#clave-de-acceso">generar</a> la clave de acceso?</td>
</tr>
<tr>
<td>envio_sri</td>
<td>objeto tipo <a href="#envío-sri">envio sri</a></td>
<td>Información luego de enviar el comprobante.</td>
</tr>
<tr>
<td>autorizacion</td>
<td>objeto tipo <a href="#autorización-sri">autorizacion sri</a></td>
<td>Información de la autorización.org/html/rfc3339#section-5.6)</td>
</tr>
<tr>
<td>informacion_adicional</td>
<td>objeto</td>
<td>Información adicional adjunta al comprobante en forma de diccionario. Ejemplo:<br><code>{&quot;email&quot;: &quot;juan@empresa.com&quot;, &quot;Carga asegurada por&quot;: &quot;Securitas&quot;}</code></td>
</tr>
</tbody></table>
<h1 id='notas-de-debito'>Notas de Débito</h1><h2 id='emision-de-una-nota-de-debito'>Emisión de una nota de débito</h2><h3 id='operacion'>Operación</h3>
<p><code>POST /debit-notes/issue</code></p>

<h3 id="requerimiento-nota-debito">Requerimiento</h3>

<blockquote>
<h4 id='requerimiento-de-ejemplo'>Requerimiento de ejemplo</h4></blockquote>
<pre class="highlight shell tab-shell"><code>curl -v https://link.datil.co/debit-notes/issue <span class="se">\</span>
-H <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
-H <span class="s2">"X-Key: &lt;API-key&gt;"</span> <span class="se">\</span>
-H <span class="s2">"X-Password: &lt;clave-certificado-firma&gt;"</span> <span class="se">\</span>
-d <span class="s1">'{
  "ambiente":1,
  "tipo_emision":1,
  "secuencial":148,
  "fecha_emision":"2019-08-28T11:28:56.782Z",
  "emisor":{
    "ruc":"0910000000001",
    "obligado_contabilidad":true,
    "contribuyente_especial":"12345",
    "nombre_comercial":"XYZ Corp",
    "razon_social":"XYZ Corporación S.A.",
    "direccion":"Av. Primera 234 y calle 5ta",
    "establecimiento":{
      "punto_emision":"002",
      "codigo":"001",
      "direccion":"Av. Primera 234 y calle 5ta"
    }
  },
  "informacion_adicional":{
    "Tiempo de entrega":"5 días"
  },
  "totales":{
    "total_sin_impuestos":120.89,
    "impuestos":[
      {
        "base_imponible":120.89,
        "valor":14.51,
        "codigo":"2",
        "codigo_porcentaje":"2",
        "tarifa": 12.0
      }
    ],
    "importe_total":135.4
  },
  "fecha_emision_documento_modificado": "2015-02-27T11:28:56.782Z",
  "numero_documento_modificado": "001-002-000058473",
  "tipo_documento_modificado": "01",
  "comprador":{
    "email":"juan.perez@xyz.com",
    "identificacion":"0987654321",
    "tipo_identificacion":"05",
    "razon_social":"Juan Pérez",
    "direccion":"Calle única Numero 987",
    "telefono":"046029400"
  },
  "items":[
    {
      "motivo":"Interés por mora",
      "valor":120.89
    }
  ]
}'</span>
</code></pre><pre class="highlight python tab-python"><code><span class="kn">import</span> <span class="nn">requests</span><span class="p">,</span> <span class="n">json</span>

<span class="n">nota_debito</span> <span class="o">=</span> <span class="p">{</span>
  <span class="s">"ambiente"</span><span class="p">:</span><span class="mi">1</span><span class="p">,</span>
  <span class="s">"tipo_emision"</span><span class="p">:</span><span class="mi">1</span><span class="p">,</span>
  <span class="s">"secuencial"</span><span class="p">:</span><span class="mi">148</span><span class="p">,</span>
  <span class="s">"fecha_emision"</span><span class="p">:</span><span class="s">"2019-02-28T11:28:56.782Z"</span><span class="p">,</span>
  <span class="s">"emisor"</span><span class="p">:{</span>
    <span class="s">"ruc"</span><span class="p">:</span><span class="s">"0910000000001"</span><span class="p">,</span>
    <span class="s">"obligado_contabilidad"</span><span class="p">:</span><span class="bp">True</span><span class="p">,</span>
    <span class="s">"contribuyente_especial"</span><span class="p">:</span><span class="s">"12345"</span><span class="p">,</span>
    <span class="s">"nombre_comercial"</span><span class="p">:</span><span class="s">"XYZ Corp"</span><span class="p">,</span>
    <span class="s">"razon_social"</span><span class="p">:</span><span class="s">"XYZ Corporación S.A."</span><span class="p">,</span>
    <span class="s">"direccion"</span><span class="p">:</span><span class="s">"Av. Primera 234 y calle 5ta"</span><span class="p">,</span>
    <span class="s">"establecimiento"</span><span class="p">:{</span>
      <span class="s">"punto_emision"</span><span class="p">:</span><span class="s">"002"</span><span class="p">,</span>
      <span class="s">"codigo"</span><span class="p">:</span><span class="s">"001"</span><span class="p">,</span>
      <span class="s">"direccion"</span><span class="p">:</span><span class="s">"Av. Primera 234 y calle 5ta"</span>
    <span class="p">}</span>
  <span class="p">},</span>
  <span class="s">"informacion_adicional"</span><span class="p">:{</span>
    <span class="s">"Tiempo de entrega"</span><span class="p">:</span><span class="s">u"5 días"</span>
  <span class="p">},</span>
  <span class="s">"totales"</span><span class="p">:{</span>
    <span class="s">"total_sin_impuestos"</span><span class="p">:</span><span class="mf">120.89</span><span class="p">,</span>
    <span class="s">"impuestos"</span><span class="p">:[</span>
      <span class="p">{</span>
        <span class="s">"base_imponible"</span><span class="p">:</span><span class="mf">120.89</span><span class="p">,</span>
        <span class="s">"valor"</span><span class="p">:</span><span class="mf">14.51</span><span class="p">,</span>
        <span class="s">"codigo"</span><span class="p">:</span><span class="s">"2"</span><span class="p">,</span>
        <span class="s">"codigo_porcentaje"</span><span class="p">:</span><span class="s">"2"</span><span class="p">,</span>
        <span class="s">"tarifa"</span><span class="p">:</span> <span class="mf">12.0</span>
      <span class="p">}</span>
    <span class="p">],</span>
    <span class="s">"importe_total"</span><span class="p">:</span><span class="mf">135.4</span>
  <span class="p">},</span>
  <span class="s">"fecha_emision_documento_modificado"</span><span class="p">:</span> <span class="s">"2015-02-27T11:28:56.782Z"</span><span class="p">,</span>
  <span class="s">"numero_documento_modificado"</span><span class="p">:</span> <span class="s">"001-002-000058473"</span><span class="p">,</span>
  <span class="s">"tipo_documento_modificado"</span><span class="p">:</span> <span class="s">"01"</span><span class="p">,</span>
  <span class="s">"comprador"</span><span class="p">:{</span>
    <span class="s">"email"</span><span class="p">:</span><span class="s">"juan.perez@xyz.com"</span><span class="p">,</span>
    <span class="s">"identificacion"</span><span class="p">:</span><span class="s">"0987654321"</span><span class="p">,</span>
    <span class="s">"tipo_identificacion"</span><span class="p">:</span><span class="s">"05"</span><span class="p">,</span>
    <span class="s">"razon_social"</span><span class="p">:</span><span class="s">"Juan Pérez"</span><span class="p">,</span>
    <span class="s">"direccion"</span><span class="p">:</span><span class="s">"Calle única Numero 987"</span><span class="p">,</span>
    <span class="s">"telefono"</span><span class="p">:</span><span class="s">"046029400"</span>
  <span class="p">},</span>
  <span class="s">"items"</span><span class="p">:[</span>
    <span class="p">{</span>
      <span class="s">"motivo"</span><span class="p">:</span><span class="s">u"Interés por mora"</span><span class="p">,</span>
      <span class="s">"valor"</span><span class="p">:</span><span class="mf">120.89</span>
    <span class="p">}</span>
  <span class="p">]</span>
<span class="p">}}</span>
<span class="n">cabeceras</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s">'x-key'</span><span class="p">:</span> <span class="s">'&lt;clave-del-api&gt;'</span><span class="p">,</span>
    <span class="s">'x-password'</span><span class="p">:</span> <span class="s">'&lt;clave-certificado-firma&gt;'</span><span class="p">,</span>
    <span class="s">'content-type'</span><span class="p">:</span> <span class="s">'application/json'</span><span class="p">}</span>
<span class="n">respuesta</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">post</span><span class="p">(</span>
    <span class="s">"https://link.datil.co/debit-notes/issue"</span><span class="p">,</span>
    <span class="n">headers</span> <span class="o">=</span> <span class="n">cabeceras</span><span class="p">,</span>
    <span class="n">data</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">nota_debito</span><span class="p">))</span>
</code></pre><pre class="highlight csharp tab-csharp"><code><span class="k">using</span> <span class="nn">RestSharp</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">System</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">System.Collections.Generic</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">System.Linq</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">System.Text</span><span class="p">;</span>

<span class="k">namespace</span> <span class="nn">DatilClient</span> <span class="p">{</span>
  <span class="k">class</span> <span class="nc">InvoicingServiceClient</span> <span class="p">{</span>
    <span class="k">static</span> <span class="k">void</span> <span class="nf">Main</span><span class="p">(</span><span class="kt">string</span><span class="p">[]</span> <span class="n">args</span><span class="p">)</span> <span class="p">{</span>

      <span class="c1">// Este ejemplo utiliza RestSharp</span>
      <span class="c1">// Para instalar anda al menú: tools &gt; Library Package Manager &gt; Package Manager Console</span>
      <span class="c1">// copia y pega y presiona enter: Install-Package RestSharp</span>

      <span class="kt">var</span> <span class="n">client</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">RestClient</span><span class="p">(</span><span class="s">"https://link.datil.co/"</span><span class="p">);</span>
      <span class="kt">var</span> <span class="n">request</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">RestRequest</span><span class="p">(</span><span class="s">"debit-notes/issue"</span><span class="p">,</span> <span class="n">Method</span><span class="p">.</span><span class="n">POST</span><span class="p">);</span>
      <span class="n">request</span><span class="p">.</span><span class="nf">AddHeader</span><span class="p">(</span><span class="s">"X-Key"</span><span class="p">,</span> <span class="s">"&lt;clave-del-api&gt;"</span><span class="p">);</span>
      <span class="n">request</span><span class="p">.</span><span class="nf">AddHeader</span><span class="p">(</span><span class="s">"X-Password"</span><span class="p">,</span> <span class="s">"&lt;clave-certificado-firma&gt;"</span><span class="p">);</span>

      <span class="n">request</span><span class="p">.</span><span class="nf">AddBody</span><span class="p">(</span><span class="err">@</span><span class="s">"{
</span>        <span class="s">""</span><span class="n">ambiente</span><span class="s">""</span><span class="p">:</span><span class="m">1</span><span class="p">,</span>
        <span class="s">""</span><span class="n">tipo_emision</span><span class="s">""</span><span class="p">:</span><span class="m">1</span><span class="p">,</span>
        <span class="s">""</span><span class="n">secuencial</span><span class="s">""</span><span class="p">:</span><span class="m">148</span><span class="p">,</span>
        <span class="s">""</span><span class="n">fecha_emision</span><span class="s">""</span><span class="p">:</span><span class="s">""</span><span class="m">2015</span><span class="p">-</span><span class="m">02</span><span class="p">-</span><span class="m">28</span><span class="n">T11</span><span class="p">:</span><span class="m">28</span><span class="p">:</span><span class="m">56.782</span><span class="n">Z</span><span class="s">""</span><span class="p">,</span>
        <span class="s">""</span><span class="n">emisor</span><span class="s">""</span><span class="p">:{</span>
          <span class="s">""</span><span class="n">ruc</span><span class="s">""</span><span class="p">:</span><span class="s">""</span><span class="m">0910000000001</span><span class="s">""</span><span class="p">,</span>
          <span class="s">""</span><span class="n">obligado_contabilidad</span><span class="s">""</span><span class="p">:</span><span class="k">true</span><span class="p">,</span>
          <span class="s">""</span><span class="n">contribuyente_especial</span><span class="s">""</span><span class="p">:</span><span class="s">""</span><span class="m">12345</span><span class="s">""</span><span class="p">,</span>
          <span class="s">""</span><span class="n">nombre_comercial</span><span class="s">""</span><span class="p">:</span><span class="s">""</span><span class="n">XYZ</span> <span class="n">Corp</span><span class="s">""</span><span class="p">,</span>
          <span class="s">""</span><span class="n">razon_social</span><span class="s">""</span><span class="p">:</span><span class="s">""</span><span class="n">XYZ</span> <span class="n">Corporaci</span><span class="err">ó</span><span class="n">n</span> <span class="n">S</span><span class="p">.</span><span class="n">A</span><span class="p">.</span><span class="s">""</span><span class="p">,</span>
          <span class="s">""</span><span class="n">direccion</span><span class="s">""</span><span class="p">:</span><span class="s">""</span><span class="n">Av</span><span class="p">.</span> <span class="n">Primera</span> <span class="m">234</span> <span class="n">y</span> <span class="n">calle</span> <span class="m">5</span><span class="n">ta</span><span class="s">""</span><span class="p">,</span>
          <span class="s">""</span><span class="n">establecimiento</span><span class="s">""</span><span class="p">:{</span>
            <span class="s">""</span><span class="n">punto_emision</span><span class="s">""</span><span class="p">:</span><span class="s">""</span><span class="m">002</span><span class="s">""</span><span class="p">,</span>
            <span class="s">""</span><span class="n">codigo</span><span class="s">""</span><span class="p">:</span><span class="s">""</span><span class="m">001</span><span class="s">""</span><span class="p">,</span>
            <span class="s">""</span><span class="n">direccion</span><span class="s">""</span><span class="p">:</span><span class="s">""</span><span class="n">Av</span><span class="p">.</span> <span class="n">Primera</span> <span class="m">234</span> <span class="n">y</span> <span class="n">calle</span> <span class="m">5</span><span class="n">ta</span><span class="s">""</span>
          <span class="p">}</span>
        <span class="p">},</span>
        <span class="s">""</span><span class="n">moneda</span><span class="s">""</span><span class="p">:</span><span class="s">""</span><span class="n">USD</span><span class="s">""</span><span class="p">,</span>
        <span class="s">""</span><span class="n">informacion_adicional</span><span class="s">""</span><span class="p">:{</span>
          <span class="s">""</span><span class="n">Tiempo</span> <span class="n">de</span> <span class="n">entrega</span><span class="s">""</span><span class="p">:</span><span class="s">""</span><span class="m">5</span> <span class="n">d</span><span class="err">í</span><span class="k">as</span><span class="s">""</span>
        <span class="p">},</span>
        <span class="s">""</span><span class="n">totales</span><span class="s">""</span><span class="p">:{</span>
          <span class="s">""</span><span class="n">total_sin_impuestos</span><span class="s">""</span><span class="p">:</span><span class="m">120.89</span><span class="p">,</span>
          <span class="s">""</span><span class="n">impuestos</span><span class="s">""</span><span class="p">:[</span>
            <span class="p">{</span>
              <span class="s">""</span><span class="n">base_imponible</span><span class="s">""</span><span class="p">:</span><span class="m">0.0</span><span class="p">,</span>
              <span class="s">""</span><span class="n">valor</span><span class="s">""</span><span class="p">:</span><span class="m">0.0</span><span class="p">,</span>
              <span class="s">""</span><span class="n">codigo</span><span class="s">""</span><span class="p">:</span><span class="s">""</span><span class="m">2</span><span class="s">""</span><span class="p">,</span>
              <span class="s">""</span><span class="n">codigo_porcentaje</span><span class="s">""</span><span class="p">:</span><span class="s">""</span><span class="m">0</span><span class="s">""</span><span class="p">,</span>
              <span class="s">""</span><span class="n">tarifa</span><span class="s">""</span><span class="p">:</span> <span class="m">12.0</span>
            <span class="p">},</span>
            <span class="p">{</span>
              <span class="s">""</span><span class="n">base_imponible</span><span class="s">""</span><span class="p">:</span><span class="m">120.89</span><span class="p">,</span>
              <span class="s">""</span><span class="n">valor</span><span class="s">""</span><span class="p">:</span><span class="m">14.51</span><span class="p">,</span>
              <span class="s">""</span><span class="n">codigo</span><span class="s">""</span><span class="p">:</span><span class="s">""</span><span class="m">2</span><span class="s">""</span><span class="p">,</span>
              <span class="s">""</span><span class="n">codigo_porcentaje</span><span class="s">""</span><span class="p">:</span><span class="s">""</span><span class="m">2</span><span class="s">""</span>
            <span class="p">}</span>
          <span class="p">],</span>
          <span class="s">""</span><span class="n">total</span><span class="s">""</span><span class="p">:</span><span class="m">135.4</span><span class="p">,</span>
          <span class="s">""</span><span class="n">propina</span><span class="s">""</span><span class="p">:</span><span class="m">0.0</span><span class="p">,</span>
          <span class="s">""</span><span class="n">descuento</span><span class="s">""</span><span class="p">:</span><span class="m">0.0</span>
        <span class="p">},</span>
        <span class="s">""</span><span class="n">comprador</span><span class="s">""</span><span class="p">:{</span>
          <span class="s">""</span><span class="n">email</span><span class="s">""</span><span class="p">:</span><span class="s">""</span><span class="n">juan</span><span class="p">.</span><span class="n">perez@xyz</span><span class="p">.</span><span class="n">com</span><span class="s">""</span><span class="p">,</span>
          <span class="s">""</span><span class="n">identificacion</span><span class="s">""</span><span class="p">:</span><span class="s">""</span><span class="m">0987654321</span><span class="s">""</span><span class="p">,</span>
          <span class="s">""</span><span class="n">tipo_identificacion</span><span class="s">""</span><span class="p">:</span><span class="s">""</span><span class="m">05</span><span class="s">""</span><span class="p">,</span>
          <span class="s">""</span><span class="n">razon_social</span><span class="s">""</span><span class="p">:</span><span class="s">""</span><span class="n">Juan</span> <span class="n">P</span><span class="err">é</span><span class="n">rez</span><span class="s">""</span><span class="p">,</span>
          <span class="s">""</span><span class="n">direccion</span><span class="s">""</span><span class="p">:</span><span class="s">""</span><span class="n">Calle</span> <span class="err">ú</span><span class="n">nica</span> <span class="n">Numero</span> <span class="m">987</span><span class="s">""</span><span class="p">,</span>
          <span class="s">""</span><span class="n">telefono</span><span class="s">""</span><span class="p">:</span><span class="s">""</span><span class="m">046029400</span><span class="s">""</span>
        <span class="p">},</span>
        <span class="s">""</span><span class="n">items</span><span class="s">""</span><span class="p">:[</span>
          <span class="p">{</span>
            <span class="s">""</span><span class="n">cantidad</span><span class="s">""</span><span class="p">:</span><span class="m">622.0</span><span class="p">,</span>
            <span class="s">""</span><span class="n">codigo_principal</span><span class="s">""</span><span class="p">:</span><span class="s">""</span><span class="n">ZNC</span><span class="s">""</span>
            <span class="s">""</span><span class="n">codigo_auxiliar</span><span class="s">""</span><span class="p">:</span> <span class="s">""</span><span class="m">050</span><span class="s">""</span><span class="p">,</span>
            <span class="s">""</span><span class="n">precio_unitario</span><span class="s">""</span><span class="p">:</span> <span class="m">7.01</span><span class="p">,</span>
            <span class="s">""</span><span class="n">descripcion</span><span class="s">""</span><span class="p">:</span> <span class="s">""</span><span class="n">Zanahoria</span> <span class="n">granel</span>  <span class="m">50</span> <span class="n">Kg</span><span class="p">.</span><span class="s">""</span><span class="p">,</span>
            <span class="s">""</span><span class="n">precio_total_sin_impuestos</span><span class="s">""</span><span class="p">:</span> <span class="m">4360.22</span><span class="p">,</span>
            <span class="s">""</span><span class="n">impuestos</span><span class="s">""</span><span class="p">:</span> <span class="p">[</span>
              <span class="p">{</span>
                <span class="s">""</span><span class="n">base_imponible</span><span class="s">""</span><span class="p">:</span><span class="m">120.89</span><span class="p">,</span>
                <span class="s">""</span><span class="n">valor</span><span class="s">""</span><span class="p">:</span><span class="m">14.51</span><span class="p">,</span>
                <span class="s">""</span><span class="n">tarifa</span><span class="s">""</span><span class="p">:</span><span class="m">12.0</span><span class="p">,</span>
                <span class="s">""</span><span class="n">codigo</span><span class="s">""</span><span class="p">:</span><span class="s">""</span><span class="m">2</span><span class="s">""</span><span class="p">,</span>
                <span class="s">""</span><span class="n">codigo_porcentaje</span><span class="s">""</span><span class="p">:</span><span class="s">""</span><span class="m">2</span><span class="s">""</span>
              <span class="p">}</span>
            <span class="p">],</span>
            <span class="s">""</span><span class="n">detalles_adicionales</span><span class="s">""</span><span class="p">:</span> <span class="p">{</span>
              <span class="s">""</span><span class="n">Peso</span><span class="s">""</span><span class="p">:</span><span class="s">""</span><span class="m">5000.0000</span><span class="s">""</span>
            <span class="p">},</span>
            <span class="s">""</span><span class="n">descuento</span><span class="s">""</span><span class="p">:</span> <span class="m">0.0</span>
          <span class="p">}</span>
        <span class="p">]</span>
      <span class="p">}</span><span class="s">");
</span>
      <span class="n">IRestResponse</span> <span class="n">response</span> <span class="p">=</span> <span class="n">client</span><span class="p">.</span><span class="nf">Execute</span><span class="p">(</span><span class="n">request</span><span class="p">);</span>

      <span class="n">Console</span><span class="p">.</span><span class="nf">WriteLine</span><span class="p">(</span><span class="n">response</span><span class="p">.</span><span class="n">Content</span><span class="p">);</span>
      <span class="n">Console</span><span class="p">.</span><span class="nf">ReadLine</span><span class="p">();</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">}</span>
</code></pre>
<p>Para la emisión de una nota de débito se debe enviar la información completa del
comprobante en el cuerpo del requerimiento en formato JSON.</p>

<table><thead>
<tr>
<th>Parámetro</th>
<th>Tipo</th>
<th>Descripción</th>
</tr>
</thead><tbody>
<tr>
<td>secuencial</td>
<td>string</td>
<td>Número de secuencia de la nota de débito. <strong>Requerido</strong></td>
</tr>
<tr>
<td>emisor</td>
<td><a href="#emisor">emisor</a></td>
<td>Información completa del emisor. <strong>Requerido</strong></td>
</tr>
<tr>
<td>fecha_emision</td>
<td>string</td>
<td>Fecha de emisión en formato AAAA-MM-DDHoraZonaHoraria, definido en el estándar <a href="http://tools.ietf.org/html/rfc3339#section-5.6">ISO8601</a>.</td>
</tr>
<tr>
<td>ambiente</td>
<td>integer</td>
<td>Pruebas: <code>1</code>.<br>Producción <code>2</code>.<br><strong>Requerido</strong></td>
</tr>
<tr>
<td>comprador</td>
<td>objeto tipo <a href="#persona">persona</a></td>
<td>Información del comprador. <strong>Requerido</strong></td>
</tr>
<tr>
<td>totales</td>
<td>objeto tipo <a href="#totales-nota-debito">totales</a></td>
<td>Listado de totales. <strong>Requerido</strong></td>
</tr>
<tr>
<td>fecha_emision_documento_modificado</td>
<td>string</td>
<td>Fecha de emisión en formato AAAA-MM-DDHoraZonaHoraria, definido en el estándar <a href="http://tools.ietf.org/html/rfc3339#section-5.6">ISO8601</a>. <strong>Requerido</strong></td>
</tr>
<tr>
<td>numero_documento_modificado</td>
<td>string</td>
<td>Número completo del documento que se está afectando. Normalmente facturas. Ejm: 001-002-010023098 <strong>Requerido</strong></td>
</tr>
<tr>
<td>tipo_documento_modificado</td>
<td>string</td>
<td>Códigos de <a href="#tipos-de-documentos">tipos de documentos</a>. <strong>Requerido</strong></td>
</tr>
<tr>
<td>items</td>
<td>arreglo de objetos tipo <a href="#motivos">items</a></td>
<td>Motivos del débito. Ejm: Interés por mora. <strong>Requerido</strong></td>
</tr>
<tr>
<td>tipo_emision</td>
<td>integer</td>
<td>Emisión normal: <code>1</code>.<br>Emisión por indisponibilidad: <code>2</code><br><strong>Requerido</strong></td>
</tr>
<tr>
<td>version</td>
<td>string</td>
<td>Versión del formato de comprobantes electrónicos de SRI. Si no se especifica, se utilizará la última revisión del formato implementada,</td>
</tr>
<tr>
<td>clave_acceso</td>
<td>string</td>
<td>La clave de acceso representa un identificador único del comprobante. Si esta información no es provista, Dátil la generará.<br>¿Cómo <a href="#clave-de-acceso">generar</a> la clave de acceso?</td>
</tr>
<tr>
<td>informacion_adicional</td>
<td>objeto</td>
<td>Información adicional adjunta al comprobante en forma de diccionario. Ejemplo:<br><code>{&quot;plan&quot;: &quot;Inicial&quot;, &quot;vigencia&quot;: &quot;1 mes&quot;}</code></td>
</tr>
</tbody></table>

<h4 id="totales-nota-debito">Totales</h4>

<table><thead>
<tr>
<th>Parámetro</th>
<th>Tipo</th>
<th>Descripción</th>
</tr>
</thead><tbody>
<tr>
<td>total_sin_impuestos</td>
<td>float</td>
<td>Total antes de los impuestos. <strong>Requerido</strong></td>
</tr>
<tr>
<td>importe_total</td>
<td>float</td>
<td>Total incluyendo impuestos. <strong>Requerido</strong></td>
</tr>
<tr>
<td>impuestos</td>
<td>listado de objetos <a href="#impuesto-nota-debito">impuesto</a></td>
<td>Impuestos aplicados al total de cargos. <strong>Requerido</strong></td>
</tr>
</tbody></table>

<h4 id="motivos">Items</h4>

<table><thead>
<tr>
<th>Parámetro</th>
<th>Tipo</th>
<th>Descripción</th>
</tr>
</thead><tbody>
<tr>
<td>motivo</td>
<td>string</td>
<td>Motivo por el cuál se hace el débito. <strong>Requerido</strong></td>
</tr>
<tr>
<td>valor</td>
<td>float</td>
<td>Valor sin impuestos. <strong>Requerido</strong></td>
</tr>
</tbody></table>

<h4 id="impuesto-nota-debito">Impuesto</h4>

<table><thead>
<tr>
<th>Parámetro</th>
<th>Tipo</th>
<th>Descripción</th>
</tr>
</thead><tbody>
<tr>
<td>codigo</td>
<td>string</td>
<td>Código del <a href="#tipos-de-impuesto">tipo de impuesto</a> <strong>Requerido</strong></td>
</tr>
<tr>
<td>codigo_porcentaje</td>
<td>string</td>
<td>Código del porcentaje. <strong>Requerido</strong></td>
</tr>
<tr>
<td>base_imponible</td>
<td>float</td>
<td>Base imponible. <strong>Requerido</strong></td>
</tr>
<tr>
<td>valor</td>
<td>float</td>
<td>Valor del total. <strong>Requerido</strong></td>
</tr>
<tr>
<td>tarifa</td>
<td>float</td>
<td>Porcentaje actual del impuesto expresado por un número entre 0.0 y 100.0 <strong>Requerido</strong></td>
</tr>
</tbody></table>
<h3 id='respuesta'>Respuesta</h3>
<blockquote>
<h4 id='respuesta-de-ejemplo'>Respuesta de ejemplo</h4></blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"abcdef09876123cea56784f01"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"ambiente"</span><span class="p">:</span><span class="mi">1</span><span class="p">,</span><span class="w">
  </span><span class="s2">"tipo_emision"</span><span class="p">:</span><span class="mi">1</span><span class="p">,</span><span class="w">
  </span><span class="s2">"secuencial"</span><span class="p">:</span><span class="mi">148</span><span class="p">,</span><span class="w">
  </span><span class="s2">"fecha_emision"</span><span class="p">:</span><span class="s2">"2015-02-28T11:28:56.782Z"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"clave_acceso"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2802201501091000000000120010010000100451993736618"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"emisor"</span><span class="p">:{</span><span class="w">
    </span><span class="s2">"ruc"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0910000000001"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"obligado_contabilidad"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
    </span><span class="s2">"contribuyente_especial"</span><span class="p">:</span><span class="w"> </span><span class="s2">"12345"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"nombre_comercial"</span><span class="p">:</span><span class="w"> </span><span class="s2">"XYZ Corp"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"razon_social"</span><span class="p">:</span><span class="w"> </span><span class="s2">"XYZ Corporación S.A."</span><span class="p">,</span><span class="w">
    </span><span class="s2">"direccion"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Av. Primera 234 y calle 5ta"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"establecimiento"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="s2">"punto_emision"</span><span class="p">:</span><span class="w"> </span><span class="s2">"002"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"codigo"</span><span class="p">:</span><span class="w"> </span><span class="s2">"001"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"direccion"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Av. Primera 234 y calle 5ta"</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="s2">"moneda"</span><span class="p">:</span><span class="w"> </span><span class="s2">"USD"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"informacion_adicional"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"Tiempo de entrega"</span><span class="p">:</span><span class="w"> </span><span class="s2">"5 días"</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="s2">"totales"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"total_sin_impuestos"</span><span class="p">:</span><span class="w"> </span><span class="mf">120.89</span><span class="p">,</span><span class="w">
    </span><span class="s2">"impuestos"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
      </span><span class="p">{</span><span class="w">
        </span><span class="s2">"base_imponible"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.0</span><span class="p">,</span><span class="w">
        </span><span class="s2">"valor"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.0</span><span class="p">,</span><span class="w">
        </span><span class="s2">"codigo"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"codigo_porcentaje"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"tarifa"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.0</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="p">{</span><span class="w">
        </span><span class="s2">"base_imponible"</span><span class="p">:</span><span class="w"> </span><span class="mf">120.89</span><span class="p">,</span><span class="w">
        </span><span class="s2">"valor"</span><span class="p">:</span><span class="w"> </span><span class="mf">14.51</span><span class="p">,</span><span class="w">
        </span><span class="s2">"codigo"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"codigo_porcentaje"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"tarifa"</span><span class="p">:</span><span class="w"> </span><span class="mf">12.0</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">],</span><span class="w">
    </span><span class="s2">"importe_total"</span><span class="p">:</span><span class="w"> </span><span class="mf">135.4</span><span class="p">,</span><span class="w">
    </span><span class="s2">"propina"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.0</span><span class="p">,</span><span class="w">
    </span><span class="s2">"descuento"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.0</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="s2">"comprador"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"email"</span><span class="p">:</span><span class="w"> </span><span class="s2">"juan.perez@xyz.com"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"identificacion"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0987654321"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"tipo_identificacion"</span><span class="p">:</span><span class="w"> </span><span class="s2">"05"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"razon_social"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Juan Pérez"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"direccion"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Calle única Numero 987"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"telefono"</span><span class="p">:</span><span class="w"> </span><span class="s2">"046029400"</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="s2">"items"</span><span class="p">:[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="s2">"cantidad"</span><span class="p">:</span><span class="w"> </span><span class="mf">622.0</span><span class="p">,</span><span class="w">
      </span><span class="s2">"codigo_principal"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ZNC"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"codigo_auxiliar"</span><span class="p">:</span><span class="w"> </span><span class="s2">"050"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"precio_unitario"</span><span class="p">:</span><span class="w"> </span><span class="mf">7.01</span><span class="p">,</span><span class="w">
      </span><span class="s2">"descripcion"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Zanahoria granel  50 Kg."</span><span class="p">,</span><span class="w">
      </span><span class="s2">"precio_total_sin_impuestos"</span><span class="p">:</span><span class="w"> </span><span class="mf">4360.22</span><span class="p">,</span><span class="w">
      </span><span class="s2">"impuestos"</span><span class="p">:[</span><span class="w">
        </span><span class="p">{</span><span class="w">
          </span><span class="s2">"base_imponible"</span><span class="p">:</span><span class="w"> </span><span class="mf">120.89</span><span class="p">,</span><span class="w">
          </span><span class="s2">"valor"</span><span class="p">:</span><span class="w"> </span><span class="mf">14.51</span><span class="p">,</span><span class="w">
          </span><span class="s2">"tarifa"</span><span class="p">:</span><span class="w"> </span><span class="mf">12.0</span><span class="p">,</span><span class="w">
          </span><span class="s2">"codigo"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"codigo_porcentaje"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2"</span><span class="w">
        </span><span class="p">}</span><span class="w">
      </span><span class="p">],</span><span class="w">
      </span><span class="s2">"detalles_adicionales"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"Peso"</span><span class="p">:</span><span class="w"> </span><span class="s2">"5000.0000"</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="s2">"descuento"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.0</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>Retorna un objeto tipo <strong><a href="#requerimiento-nota-credito">nota de débito</a></strong> que incluye un nuevo parámetro <code>id</code>,
el cual identifica de manera única a la nota de débito. El campo <code>clave_acceso</code>
generado también se incluirá como parte de la respuesta.</p>
<h2 id='emision-de-una-nota-de-debito-a-partir-de-xml'>Emisión de una nota de débito a partir de XML</h2>
<p><code>POST /debit-notes/issue/xml</code></p>
<h3 id='requerimiento-a-partir-de-xml'>Requerimiento a partir de XML</h3>
<p>Para la emisión de una nota de débito a partir de un XML se debe enviar contenido del archivo XML como parámetro en el cuerpo del requerimiento en formato JSON. Este XML debe cumplir con la especificación del SRI.</p>

<table><thead>
<tr>
<th>Parámetro</th>
<th>Tipo</th>
<th>Descripción</th>
</tr>
</thead><tbody>
<tr>
<td>xml</td>
<td>string</td>
<td>Contenido del archivo xml. <strong>Requerido</strong></td>
</tr>
</tbody></table>

<blockquote>
<h4 id='requerimiento-de-ejemplo-2'>Requerimiento de ejemplo</h4></blockquote>
<pre class="highlight shell tab-shell"><code>curl -v https://link.datil.co/debit-notes/issue/xml <span class="se">\</span>
-H <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
-H <span class="s2">"X-Key: &lt;API-key&gt;"</span> <span class="se">\</span>
-H <span class="s2">"X-Password: &lt;clave-certificado-firma&gt;"</span> <span class="se">\</span>
-d <span class="s1">'{"xml": "&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;
&lt;notaDebito id=\"comprobante\" version=\"1.0.0\"&gt;
  &lt;infoTributaria&gt;
    &lt;ambiente&gt;1&lt;/ambiente&gt;
    &lt;tipoEmision&gt;1&lt;/tipoEmision&gt;
    &lt;razonSocial&gt;DATILMEDIA S.A.&lt;/razonSocial&gt;
    &lt;nombreComercial&gt;Datil&lt;/nombreComercial&gt;
    &lt;ruc&gt;1234567890001&lt;/ruc&gt;
    &lt;claveAcceso&gt;0405202005123456789000110010010000000012235571917&lt;/claveAcceso&gt;
    &lt;codDoc&gt;05&lt;/codDoc&gt;
    &lt;estab&gt;001&lt;/estab&gt;
    &lt;ptoEmi&gt;001&lt;/ptoEmi&gt;
    &lt;secuencial&gt;000000001&lt;/secuencial&gt;
    &lt;dirMatriz&gt;Innvernadero Coworking, Bálsamos 813 entre Guayacanes e Higueras&lt;/dirMatriz&gt;
  &lt;/infoTributaria&gt;
  &lt;infoNotaDebito&gt;
    &lt;fechaEmision&gt;04/05/2020&lt;/fechaEmision&gt;
    &lt;dirEstablecimiento&gt;Innvernadero Coworking, Bálsamos 813 entre Guayacanes e Higueras&lt;/dirEstablecimiento&gt;
    &lt;tipoIdentificacionComprador&gt;04&lt;/tipoIdentificacionComprador&gt;
    &lt;razonSocialComprador&gt;Santacruz Hernandez Anni Rosa&lt;/razonSocialComprador&gt;
    &lt;identificacionComprador&gt;0953239092001&lt;/identificacionComprador&gt;
    &lt;obligadoContabilidad&gt;NO&lt;/obligadoContabilidad&gt;
    &lt;codDocModificado&gt;01&lt;/codDocModificado&gt;
    &lt;numDocModificado&gt;001-001-000000001&lt;/numDocModificado&gt;
    &lt;fechaEmisionDocSustento&gt;04/05/2020&lt;/fechaEmisionDocSustento&gt;
    &lt;totalSinImpuestos&gt;0.45&lt;/totalSinImpuestos&gt;
    &lt;impuestos&gt;
      &lt;impuesto&gt;
        &lt;codigo&gt;2&lt;/codigo&gt;
        &lt;codigoPorcentaje&gt;2&lt;/codigoPorcentaje&gt;
        &lt;tarifa&gt;12.00&lt;/tarifa&gt;
        &lt;baseImponible&gt;0.45&lt;/baseImponible&gt;
        &lt;valor&gt;0.05&lt;/valor&gt;
      &lt;/impuesto&gt;
      &lt;impuesto&gt;
        &lt;codigo&gt;3&lt;/codigo&gt;
        &lt;codigoPorcentaje&gt;3080&lt;/codigoPorcentaje&gt;
        &lt;tarifa&gt;35.00&lt;/tarifa&gt;
        &lt;baseImponible&gt;0.45&lt;/baseImponible&gt;
        &lt;valor&gt;0.16&lt;/valor&gt;
      &lt;/impuesto&gt;
    &lt;/impuestos&gt;
    &lt;valorTotal&gt;0.50&lt;/valorTotal&gt;
  &lt;/infoNotaDebito&gt;
  &lt;motivos&gt;
    &lt;motivo&gt;
      &lt;razon&gt;Agua purificada&lt;/razon&gt;
      &lt;valor&gt;0.45&lt;/valor&gt;
    &lt;/motivo&gt;
  &lt;/motivos&gt;
  &lt;infoAdicional&gt;
    &lt;campoAdicional nombre=\"Campo Adicional\"&gt;Información adicional&lt;/campoAdicional&gt;
  &lt;/infoAdicional&gt;
&lt;/notaDebito&gt;"}'</span>
</code></pre><pre class="highlight python tab-python"><code><span class="kn">import</span> <span class="nn">requests</span><span class="p">,</span> <span class="n">json</span>

<span class="n">nota_debito</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s">"xml"</span><span class="p">:</span> <span class="s">'''&lt;?xml version=</span><span class="se">\"</span><span class="s">1.0</span><span class="se">\"</span><span class="s"> encoding=</span><span class="se">\"</span><span class="s">UTF-8</span><span class="se">\"</span><span class="s">?&gt;
    &lt;notaDebito id=</span><span class="se">\"</span><span class="s">comprobante</span><span class="se">\"</span><span class="s"> version=</span><span class="se">\"</span><span class="s">1.0.0</span><span class="se">\"</span><span class="s">&gt;
      &lt;infoTributaria&gt;
        &lt;ambiente&gt;1&lt;/ambiente&gt;
        &lt;tipoEmision&gt;1&lt;/tipoEmision&gt;
        &lt;razonSocial&gt;DATILMEDIA/razonSocial&gt;
        &lt;nombreComercial&gt;Dail&lt;/nombreComercial&gt;
        &lt;ruc&gt;1234567890001&lt;/ruc&gt;
        &lt;claveAcceso&gt;0405202005123456789000110010010000000012235571917&lt;/claveAcceso&gt;
        &lt;codDoc&gt;05&lt;/codDoc&gt;
        &lt;estab&gt;001&lt;/estab&gt;
        &lt;ptoEmi&gt;001&lt;/ptoEmi&gt;
        &lt;secuencial&gt;000000001&lt;/secuencial&gt;
        &lt;dirMatriz&gt;Innvernadero Coworking, Bálsamos 813 entre Guayacanes e Higueras&lt;/dirMatriz&gt;
      &lt;/infoTributaria&gt;
      &lt;infoNotaDebito&gt;
        &lt;fechaEmision&gt;04/05/2020&lt;/fechaEmision&gt;
        &lt;dirEstablecimiento&gt;Innvernadero Coworking, Bálsamos 813 entre Guayacanes e Higueras&lt;/dirEstablecimiento&gt;
        &lt;tipoIdentificacionComprador&gt;04&lt;/tipoIdentificacionComprador&gt;
        &lt;razonSocialComprador&gt;Santacruz Hernandez Anni Rosa&lt;/razonSocialComprador&gt;
        &lt;identificacionComprador&gt;0953239092001&lt;/identificacionComprador&gt;
        &lt;obligadoContabilidad&gt;NO&lt;/obligadoContabilidad&gt;
        &lt;codDocModificado&gt;01&lt;/codDocModificado&gt;
        &lt;numDocModificado&gt;001-001-000000001&lt;/numDocModificado&gt;
        &lt;fechaEmisionDocSustento&gt;04/05/2020&lt;/fechaEmisionDocSustento&gt;
        &lt;totalSinImpuestos&gt;0.45&lt;/totalSinImpuestos&gt;
        &lt;impuestos&gt;
          &lt;impuesto&gt;
            &lt;codigo&gt;2&lt;/codigo&gt;
            &lt;codigoPorcentaje&gt;2&lt;/codigoPorcentaje&gt;
            &lt;tarifa&gt;12.00&lt;/tarifa&gt;
            &lt;baseImponible&gt;0.45&lt;/baseImponible&gt;
            &lt;valor&gt;0.05&lt;/valor&gt;
          &lt;/impuesto&gt;
          &lt;impuesto&gt;
            &lt;codigo&gt;3&lt;/codigo&gt;
            &lt;codigoPorcentaje&gt;3080&lt;/codigoPorcentaje&gt;
            &lt;tarifa&gt;35.00&lt;/tarifa&gt;
            &lt;baseImponible&gt;0.45&lt;/baseImponible&gt;
            &lt;valor&gt;0.16&lt;/valor&gt;
          &lt;/impuesto&gt;
        &lt;/impuestos&gt;
        &lt;valorTotal&gt;0.50&lt;/valorTotal&gt;
      &lt;/infoNotaDebito&gt;
      &lt;motivos&gt;
        &lt;motivo&gt;
          &lt;razon&gt;Agua purificada&lt;/razon&gt;
          &lt;valor&gt;0.45&lt;/valor&gt;
        &lt;/motivo&gt;
      &lt;/motivos&gt;
      &lt;infoAdicional&gt;
        &lt;campoAdicional nombre="Campo Adicional"&gt;Información adicional&lt;/campoAdicional&gt;
      &lt;/infoAdicional&gt;
    &lt;/notaDebito&gt;'''</span>
<span class="p">}</span>

<span class="n">cabeceras</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s">'x-key'</span><span class="p">:</span> <span class="s">'&lt;clave-del-api&gt;'</span><span class="p">,</span>
    <span class="s">'x-password'</span><span class="p">:</span> <span class="s">'&lt;clave-certificado-firma&gt;'</span><span class="p">,</span>
    <span class="s">'content-type'</span><span class="p">:</span> <span class="s">'application/json'</span><span class="p">}</span>
<span class="n">respuesta</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">post</span><span class="p">(</span>
    <span class="s">"https://link.datil.co/debit-notes/issue/xml"</span><span class="p">,</span>
    <span class="n">headers</span> <span class="o">=</span> <span class="n">cabeceras</span><span class="p">,</span>
    <span class="n">data</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">nota_debito</span><span class="p">))</span>
</code></pre>
<blockquote>
<h4 id='reespuesta-de-ejemplo'>Reespuesta de ejemplo</h4></blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="s2">"secuencial"</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w">
    </span><span class="s2">"fecha_emision"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2020-05-04T00:00:00-05:00"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"emisor"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"ruc"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1234567890001"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"razon_social"</span><span class="p">:</span><span class="w"> </span><span class="s2">"DATILMEDIA S.A."</span><span class="p">,</span><span class="w">
        </span><span class="s2">"nombre_comercial"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Datil"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"contribuyente_especial"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w">
        </span><span class="s2">"direccion"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Innvernadero Coworking, Bálsamos 813 entre Guayacanes e Higueras"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"obligado_contabilidad"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
        </span><span class="s2">"establecimiento"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="s2">"punto_emision"</span><span class="p">:</span><span class="w"> </span><span class="s2">"001"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"codigo"</span><span class="p">:</span><span class="w"> </span><span class="s2">"001"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"direccion"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Innvernadero Coworking, Bálsamos 813 entre Guayacanes e Higueras"</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="s2">"email"</span><span class="p">:</span><span class="w"> </span><span class="s2">"devops@datilmedia.com"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="s2">"fecha_emision_documento_modificado"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2020-05-04T00:00:00-05:00"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1fb562334f654368ab26dc9ce1a5b99b"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"informacion_adicional"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"Campo Adicional"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Información adicional"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="s2">"ambiente"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"totales"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"total_sin_impuestos"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0.45"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"importe_total"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0.50"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"impuestos"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
            </span><span class="p">{</span><span class="w">
                </span><span class="s2">"tarifa"</span><span class="p">:</span><span class="w"> </span><span class="s2">"12.00"</span><span class="p">,</span><span class="w">
                </span><span class="s2">"codigo"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2"</span><span class="p">,</span><span class="w">
                </span><span class="s2">"codigo_porcentaje"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2"</span><span class="p">,</span><span class="w">
                </span><span class="s2">"base_imponible"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0.45"</span><span class="p">,</span><span class="w">
                </span><span class="s2">"valor"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0.05"</span><span class="w">
            </span><span class="p">},</span><span class="w">
            </span><span class="p">{</span><span class="w">
                </span><span class="s2">"tarifa"</span><span class="p">:</span><span class="w"> </span><span class="s2">"35.00"</span><span class="p">,</span><span class="w">
                </span><span class="s2">"codigo"</span><span class="p">:</span><span class="w"> </span><span class="s2">"3"</span><span class="p">,</span><span class="w">
                </span><span class="s2">"codigo_porcentaje"</span><span class="p">:</span><span class="w"> </span><span class="s2">"3080"</span><span class="p">,</span><span class="w">
                </span><span class="s2">"base_imponible"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0.45"</span><span class="p">,</span><span class="w">
                </span><span class="s2">"valor"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0.16"</span><span class="w">
            </span><span class="p">}</span><span class="w">
        </span><span class="p">],</span><span class="w">
        </span><span class="s2">"total_impuestos"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0.05"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="s2">"comprador"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"identificacion"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0953239092001"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"razon_social"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Santacruz Hernandez Anni Rosa"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"tipo_identificacion"</span><span class="p">:</span><span class="w"> </span><span class="s2">"04"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"direccion"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="s2">"tipo_emision"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"items"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="p">{</span><span class="w">
            </span><span class="s2">"motivo"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Agua purificada"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"valor"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0.45"</span><span class="w">
        </span><span class="p">}</span><span class="w">
    </span><span class="p">],</span><span class="w">
    </span><span class="s2">"tipo_documento_modificado"</span><span class="p">:</span><span class="w"> </span><span class="s2">"01"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"numero_documento_modificado"</span><span class="p">:</span><span class="w"> </span><span class="s2">"001-001-000000001"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"clave_acceso"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0405202005123456789000110010010000000012235571917"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre><h2 id='consulta-de-una-nota-de-debito'>Consulta de una nota de débito</h2>
<p>Consulta una nota de débito para obtener toda la información del comprobante, incluyendo
el estado del mismo.
El parámetro <code>estado</code> de la respuesta obtenida al invocar esta operación, indica
el estado actual del comprobante.</p>

<p>Si es necesario conocer en detalle, en que estado del <a href="#proceso-de-emisión">proceso de emisión</a>,
se debe examinar los parámetros <code>envio_sri</code> y <code>autorizacion_sri</code> de la respuesta.</p>
<h3 id='operacion-2'>Operación</h3>
<p><code>GET /debit-notes/&lt;invoice-id&gt;</code></p>
<h3 id='requerimiento'>Requerimiento</h3>
<blockquote>
<h4 id='requerimiento-de-ejemplo-3'>Requerimiento de ejemplo</h4></blockquote>
<pre class="highlight shell tab-shell"><code>curl -v https://link.datil.co/debit-notes/&lt;id-notacredito&gt; <span class="se">\</span>
-H <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
-H <span class="s2">"X-Key: &lt;clave-del-api&gt;"</span> <span class="se">\</span>
-H <span class="s2">"X-Password: &lt;clave-certificado-firma&gt;"</span> <span class="se">\</span>
</code></pre><pre class="highlight python tab-python"><code><span class="kn">import</span> <span class="nn">requests</span>
<span class="n">cabeceras</span> <span class="o">=</span> <span class="p">{</span><span class="s">'x-key'</span><span class="p">:</span> <span class="s">'&lt;clave-del-api&gt;'</span><span class="p">}</span>
<span class="n">respuesta</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span>
    <span class="s">'https://link.datil.co/debit-notes/&lt;id-notacredito&gt;'</span><span class="p">,</span>
    <span class="n">headers</span> <span class="o">=</span> <span class="n">cabeceras</span><span class="p">)</span>
</code></pre><pre class="highlight csharp tab-csharp"><code><span class="k">using</span> <span class="nn">RestSharp</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">System</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">System.Collections.Generic</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">System.Linq</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">System.Text</span><span class="p">;</span>

<span class="k">namespace</span> <span class="nn">DatilClient</span> <span class="p">{</span>
  <span class="k">class</span> <span class="nc">InvoicingServiceClient</span> <span class="p">{</span>
    <span class="k">static</span> <span class="k">void</span> <span class="nf">Main</span><span class="p">(</span><span class="kt">string</span><span class="p">[]</span> <span class="n">args</span><span class="p">)</span> <span class="p">{</span>

      <span class="kt">var</span> <span class="n">client</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">RestClient</span><span class="p">(</span><span class="s">"https://link.datil.co/"</span><span class="p">);</span>
      <span class="kt">var</span> <span class="n">idNotaCredito</span> <span class="p">=</span> <span class="s">"&lt;id-notacredito&gt;"</span><span class="p">;</span>
      <span class="kt">var</span> <span class="n">request</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">RestRequest</span><span class="p">(</span><span class="s">"invoices/"</span> <span class="p">+</span> <span class="n">idNotaCredito</span><span class="p">,</span> <span class="n">Method</span><span class="p">.</span><span class="n">GET</span><span class="p">);</span>
      <span class="n">request</span><span class="p">.</span><span class="nf">AddHeader</span><span class="p">(</span><span class="s">"X-Key"</span><span class="p">,</span> <span class="s">"&lt;clave-del-api&gt;"</span><span class="p">);</span>

      <span class="n">IRestResponse</span> <span class="n">response</span> <span class="p">=</span> <span class="n">client</span><span class="p">.</span><span class="nf">Execute</span><span class="p">(</span><span class="n">request</span><span class="p">);</span>

      <span class="n">Console</span><span class="p">.</span><span class="nf">WriteLine</span><span class="p">(</span><span class="n">response</span><span class="p">.</span><span class="n">Content</span><span class="p">);</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">}</span>
</code></pre>
<p>Reemplaza en la ruta <code>&lt;invoice-ID&gt;</code> por el <code>id</code> de la nota de débito que necesitas consultar.</p>
<h3 id='respuesta-2'>Respuesta</h3>
<blockquote>
<h4 id='respuesta-de-ejemplo-2'>Respuesta de ejemplo</h4></blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"abcf12343faad06785"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"secuencial"</span><span class="p">:</span><span class="w"> </span><span class="s2">"16"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"fecha_emision"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2015-05-15"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"version"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1.0.0"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"clave_acceso"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1505201501099271255400110011000000000162092727615"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"emisor"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"ruc"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0992712554001"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"razon_social"</span><span class="p">:</span><span class="w"> </span><span class="s2">"DATILMEDIA S.A."</span><span class="p">,</span><span class="w">
        </span><span class="s2">"nombre_comercial"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Dátil"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"direccion"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
        </span><span class="s2">"obligado_contabilidad"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
        </span><span class="s2">"contribuyente_especial"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w">
        </span><span class="s2">"establecimiento"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="s2">"codigo"</span><span class="p">:</span><span class="w"> </span><span class="s2">"001"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"direccion"</span><span class="p">:</span><span class="w"> </span><span class="s2">"V.E. 112 Y CIRCUNVALACION NORTE"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"punto_emision"</span><span class="p">:</span><span class="w"> </span><span class="s2">"100"</span><span class="w">
        </span><span class="p">}</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="s2">"estado"</span><span class="p">:</span><span class="w"> </span><span class="s2">"AUTORIZADO"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"correos_enviados"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="p">{</span><span class="w">
            </span><span class="s2">"fecha_envio"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2015-05-15T16:36:48.274604"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"destinatarios"</span><span class="p">:</span><span class="w"> </span><span class="s2">"juanantonioplaza@datilmedia.com"</span><span class="w">
        </span><span class="p">}</span><span class="w">
    </span><span class="p">],</span><span class="w">
    </span><span class="s2">"guia_remision"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w">
    </span><span class="s2">"moneda"</span><span class="p">:</span><span class="w"> </span><span class="s2">"USD"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"informacion_adicional"</span><span class="p">:</span><span class="w"> </span><span class="p">[],</span><span class="w">
    </span><span class="s2">"ambiente"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"totales"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"total_sin_impuestos"</span><span class="p">:</span><span class="w"> </span><span class="s2">"150.00"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"descuento"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0.00"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"propina"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0.00"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"impuestos"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
            </span><span class="p">{</span><span class="w">
                </span><span class="s2">"codigo"</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w">
                </span><span class="s2">"codigo_porcentaje"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2"</span><span class="p">,</span><span class="w">
                </span><span class="s2">"base_imponible"</span><span class="p">:</span><span class="w"> </span><span class="s2">"150.00"</span><span class="p">,</span><span class="w">
                </span><span class="s2">"valor"</span><span class="p">:</span><span class="w"> </span><span class="s2">"18.00"</span><span class="w">
            </span><span class="p">}</span><span class="w">
        </span><span class="p">],</span><span class="w">
        </span><span class="s2">"importe_total"</span><span class="p">:</span><span class="w"> </span><span class="s2">"168.00"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="s2">"comprador"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"razon_social"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Carlos L. Plaza"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"identificacion"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0900102222"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"tipo_identificacion"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
        </span><span class="s2">"email"</span><span class="p">:</span><span class="w"> </span><span class="s2">"cplaza@gye593.com"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"direccion"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Calle Uno y Calle Dos"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"telefono"</span><span class="p">:</span><span class="w"> </span><span class="s2">"043334445"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="s2">"envio_sri"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"mensajes"</span><span class="p">:</span><span class="w"> </span><span class="p">[],</span><span class="w">
        </span><span class="s2">"estado"</span><span class="p">:</span><span class="w"> </span><span class="s2">"RECIBIDA"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"fecha"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="s2">"tipo_emision"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"items"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="p">{</span><span class="w">
            </span><span class="s2">"detalles_adicionales"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                </span><span class="s2">"Estadía"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2 noches"</span><span class="p">,</span><span class="w">
                </span><span class="s2">"Habitación"</span><span class="p">:</span><span class="w"> </span><span class="s2">"203"</span><span class="w">
            </span><span class="p">},</span><span class="w">
            </span><span class="s2">"cantidad"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1.000000"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"codigo_principal"</span><span class="p">:</span><span class="w"> </span><span class="s2">"HAB"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"codigo_auxiliar"</span><span class="p">:</span><span class="w"> </span><span class="s2">"DOB"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"descripcion"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Habitación doble"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"precio_unitario"</span><span class="p">:</span><span class="w"> </span><span class="s2">"150.000000"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"descuento"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0.00"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"precio_total_sin_impuestos"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w">
            </span><span class="s2">"impuestos"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
                </span><span class="p">{</span><span class="w">
                    </span><span class="s2">"tarifa"</span><span class="p">:</span><span class="w"> </span><span class="s2">"12.00"</span><span class="p">,</span><span class="w">
                    </span><span class="s2">"codigo"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2"</span><span class="p">,</span><span class="w">
                    </span><span class="s2">"codigo_porcentaje"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2"</span><span class="p">,</span><span class="w">
                    </span><span class="s2">"base_imponible"</span><span class="p">:</span><span class="w"> </span><span class="s2">"150.00"</span><span class="p">,</span><span class="w">
                    </span><span class="s2">"valor"</span><span class="p">:</span><span class="w"> </span><span class="s2">"18.00"</span><span class="w">
                </span><span class="p">}</span><span class="w">
            </span><span class="p">]</span><span class="w">
        </span><span class="p">}</span><span class="w">
    </span><span class="p">],</span><span class="w">
    </span><span class="s2">"autorizacion"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"estado"</span><span class="p">:</span><span class="w"> </span><span class="s2">"AUTORIZADO"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"mensajes"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
            </span><span class="p">{</span><span class="w">
                </span><span class="s2">"identificador"</span><span class="p">:</span><span class="w"> </span><span class="s2">"60"</span><span class="p">,</span><span class="w">
                </span><span class="s2">"mensaje"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ESTE PROCESO FUE REALIZADO EN EL AMBIENTE DE PRUEBAS"</span><span class="p">,</span><span class="w">
                </span><span class="s2">"tipo"</span><span class="p">:</span><span class="w"> </span><span class="s2">"INFORMATIVO"</span><span class="p">,</span><span class="w">
                </span><span class="s2">"informacion_adicional"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="w">
            </span><span class="p">}</span><span class="w">
        </span><span class="p">],</span><span class="w">
        </span><span class="s2">"numero"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1505201516323509927125540010266935227"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"fecha"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2015-05-15T16:32:35.000380"</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<table><thead>
<tr>
<th>Parámetro</th>
<th>Tipo</th>
<th>Descripción</th>
</tr>
</thead><tbody>
<tr>
<td>secuencial</td>
<td>string</td>
<td>Número de secuencia de la nota de débito.</td>
</tr>
<tr>
<td>estado</td>
<td>string</td>
<td>Posibles valores: <code>AUTORIZADO</code>, <code>NO AUTORIZADO</code>, <code>ENVIADO</code>, <code>DEVUELTO</code>, <code>RECIBIDO</code>, <code>ERROR</code></td>
</tr>
<tr>
<td>fecha_emision</td>
<td>string</td>
<td>Fecha de emisión en formato AAAA-MM-DDHoraZonaHoraria, definido en el estándar [ISO8601](http://tools.ietf.</td>
</tr>
<tr>
<td>clave_acceso</td>
<td>string</td>
<td>La clave de acceso representa un identificador único del comprobante. Si esta información no es provista, Dátil la generará.<br>¿Cómo <a href="#clave-de-acceso">generar</a> la clave de acceso?</td>
</tr>
<tr>
<td>envio_sri</td>
<td>objeto tipo <a href="#envío-sri">envio sri</a></td>
<td>Información luego de enviar el comprobante.</td>
</tr>
<tr>
<td>autorizacion</td>
<td>objeto tipo <a href="#autorización-sri">autorizacion sri</a></td>
<td>Información de la autorización.org/html/rfc3339#section-5.6).</td>
</tr>
<tr>
<td>emisor</td>
<td>objeto tipo <a href="#emisor">emisor</a></td>
<td>Información completa del emisor.</td>
</tr>
<tr>
<td>moneda</td>
<td>string</td>
<td>Código <a href="https://en.wikipedia.org/wiki/ISO_4217">ISO</a> de la moneda.</td>
</tr>
<tr>
<td>ambiente</td>
<td>integer</td>
<td>Pruebas: <code>1</code>.<br>Producción <code>2</code>.<br></td>
</tr>
<tr>
<td>totales</td>
<td>objeto tipo <a href="#totales-notas-de-débito">totales</a></td>
<td>Listado de totales.</td>
</tr>
<tr>
<td>comprador</td>
<td>objeto <a href="#comprador">comprador</a></td>
<td>Información del comprador.</td>
</tr>
<tr>
<td>tipo_emision</td>
<td>integer</td>
<td>Emisión normal: <code>1</code>.<br>Emisión por indisponibilidad: <code>2</code><br></td>
</tr>
<tr>
<td>items</td>
<td>listado de objetos tipo <a href="#item-de-factura">item</a></td>
<td>Items incluídos en la nota de débito.</td>
</tr>
<tr>
<td>version</td>
<td>string</td>
<td>Versión de la especificación, opciones válidas: <code>1.0.0</code>, <code>1.1.0</code></td>
</tr>
</tbody></table>
<h1 id='liquidaciones-de-compras'>Liquidaciones de compras</h1><h2 id='emision-de-una-liquidacion-de-compras'>Emisión de una liquidación de compras</h2><h3 id='operacion'>Operación</h3>
<p><code>POST /purchase-settlements/issue</code>
<h3 id="requerimiento-liquidacion">Requerimiento</h3></p>

<blockquote>
<h4 id='requerimiento-de-ejemplo'>Requerimiento de ejemplo</h4></blockquote>
<pre class="highlight shell tab-shell"><code>curl -v https://link.datil.co/purchase-settlements/issue <span class="se">\</span>
-H <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
-H <span class="s2">"X-Key: &lt;API-key&gt;"</span> <span class="se">\</span>
-H <span class="s2">"X-Password: &lt;clave-certificado-firma&gt;"</span> <span class="se">\</span>
-d <span class="s1">'{
  "ambiente":1,
  "tipo_emision":1,
  "secuencial":148,
  "fecha_emision":"2015-02-28T11:28:56.782Z",
  "emisor":{
    "ruc":"0910000000001",
    "obligado_contabilidad":true,
    "contribuyente_especial":"12345",
    "nombre_comercial":"XYZ Corp",
    "razon_social":"XYZ Corporación S.A.",
    "direccion":"Av. Primera 234 y calle 5ta",
    "establecimiento":{
      "punto_emision":"002",
      "codigo":"001",
      "direccion":"Av. Primera 234 y calle 5ta"
    }
  },
  "moneda":"USD",
  "informacion_adicional":{
    "Tiempo de entrega":"5 días"
  },
  "totales":{
    "total_sin_impuestos":4359.54,
    "impuestos":[
      {
        "base_imponible":4359.54,
        "valor":523.14,
        "codigo":"2",
        "codigo_porcentaje":"2"
      }
    ],
    "importe_total":4882.68,
    "descuento":0.0
  },
  "maquina_fiscal": {
    "marca": "SISPAU",
    "modelo": "ABC123",
    "serie": "CGNC1405"
  },
  "proveedor":{
    "email":"juan.perez@xyz.com",
    "identificacion":"0987654321",
    "tipo_identificacion":"05",
    "razon_social":"Juan Pérez",
    "direccion":"Calle única Numero 987",
    "telefono":"046029400"
  },
  "items":[
    {
      "cantidad":622.0,
      "codigo_principal": "ZNC",
      "codigo_auxiliar": "050",
      "precio_unitario": 7.008907,
      "descripcion": "Zanahoria granel  50 Kg.",
      "precio_total_sin_impuestos": 4359.54,
      "impuestos": [
        {
          "base_imponible":4359.54,
          "valor":523.14,
          "tarifa":12.0,
          "codigo":"2",
          "codigo_porcentaje":"2"
        }
      ],
      "detalles_adicionales": {
        "Peso":"5000.0000"
      },
      "descuento": 0.0,
      "unidad_medida": "Kilos"
    }
  ],
  "pagos": [
    {
      "forma_pago": "01",
      "total": 4882.68,
      "unidad_tiempo": "10",
      "plazo": "30"
    }
  ],
}'</span>
</code></pre><pre class="highlight python tab-python"><code><span class="kn">import</span> <span class="nn">requests</span><span class="p">,</span> <span class="n">json</span>

<span class="n">liquidacion_compras</span> <span class="o">=</span> <span class="p">{</span>
  <span class="s">"ambiente"</span><span class="p">:</span><span class="mi">1</span><span class="p">,</span>
  <span class="s">"tipo_emision"</span><span class="p">:</span><span class="mi">1</span><span class="p">,</span>
  <span class="s">"secuencial"</span><span class="p">:</span><span class="mi">148</span><span class="p">,</span>
  <span class="s">"fecha_emision"</span><span class="p">:</span><span class="s">"2019-02-28T11:28:56.782Z"</span><span class="p">,</span>
  <span class="s">"emisor"</span><span class="p">:{</span>
    <span class="s">"ruc"</span><span class="p">:</span><span class="s">"0910000000001"</span><span class="p">,</span>
    <span class="s">"obligado_contabilidad"</span><span class="p">:</span><span class="bp">True</span><span class="p">,</span>
    <span class="s">"contribuyente_especial"</span><span class="p">:</span><span class="s">"12345"</span><span class="p">,</span>
    <span class="s">"nombre_comercial"</span><span class="p">:</span><span class="s">"XYZ Corp"</span><span class="p">,</span>
    <span class="s">"razon_social"</span><span class="p">:</span><span class="s">"XYZ Corporación S.A."</span><span class="p">,</span>
    <span class="s">"direccion"</span><span class="p">:</span><span class="s">"Av. Primera 234 y calle 5ta"</span><span class="p">,</span>
    <span class="s">"establecimiento"</span><span class="p">:{</span>
      <span class="s">"punto_emision"</span><span class="p">:</span><span class="s">"002"</span><span class="p">,</span>
      <span class="s">"codigo"</span><span class="p">:</span><span class="s">"001"</span><span class="p">,</span>
      <span class="s">"direccion"</span><span class="p">:</span><span class="s">"Av. Primera 234 y calle 5ta"</span>
    <span class="p">}</span>
  <span class="p">},</span>
  <span class="s">"moneda"</span><span class="p">:</span><span class="s">"USD"</span><span class="p">,</span>
  <span class="s">"informacion_adicional"</span><span class="p">:{</span>
    <span class="s">"Tiempo de entrega"</span><span class="p">:</span><span class="s">"5 días"</span>
  <span class="p">},</span>
  <span class="s">"totales"</span><span class="p">:{</span>
    <span class="s">"total_sin_impuestos"</span><span class="p">:</span><span class="mf">4359.54</span><span class="p">,</span>
    <span class="s">"impuestos"</span><span class="p">:[</span>
      <span class="p">{</span>
        <span class="s">"base_imponible"</span><span class="p">:</span><span class="mf">0.0</span><span class="p">,</span>
        <span class="s">"valor"</span><span class="p">:</span><span class="mf">0.0</span><span class="p">,</span>
        <span class="s">"codigo"</span><span class="p">:</span><span class="s">"2"</span><span class="p">,</span>
        <span class="s">"codigo_porcentaje"</span><span class="p">:</span><span class="s">"0"</span>
      <span class="p">},</span>
      <span class="p">{</span>
        <span class="s">"base_imponible"</span><span class="p">:</span><span class="mf">4359.54</span><span class="p">,</span>
        <span class="s">"valor"</span><span class="p">:</span><span class="mf">523.14</span><span class="p">,</span>
        <span class="s">"codigo"</span><span class="p">:</span><span class="s">"2"</span><span class="p">,</span>
        <span class="s">"codigo_porcentaje"</span><span class="p">:</span><span class="s">"2"</span>
      <span class="p">}</span>
    <span class="p">],</span>
    <span class="s">"importe_total"</span><span class="p">:</span><span class="mf">4882.68</span><span class="p">,</span>
    <span class="s">"descuento"</span><span class="p">:</span><span class="mf">0.0</span>
  <span class="p">},</span>
  <span class="s">"maquina_fiscal"</span><span class="p">:</span> <span class="p">{</span>
    <span class="s">"marca"</span><span class="p">:</span> <span class="s">"SISPAU"</span><span class="p">,</span>
    <span class="s">"modelo"</span><span class="p">:</span> <span class="s">"ABC123"</span><span class="p">,</span>
    <span class="s">"serie"</span><span class="p">:</span> <span class="s">"CGNC1405"</span>
  <span class="p">},</span>
  <span class="s">"proveedor"</span><span class="p">:{</span>
    <span class="s">"email"</span><span class="p">:</span><span class="s">"juan.perez@xyz.com"</span><span class="p">,</span>
    <span class="s">"identificacion"</span><span class="p">:</span><span class="s">"0987654321"</span><span class="p">,</span>
    <span class="s">"tipo_identificacion"</span><span class="p">:</span><span class="s">"05"</span><span class="p">,</span>
    <span class="s">"razon_social"</span><span class="p">:</span><span class="s">"Juan Pérez"</span><span class="p">,</span>
    <span class="s">"direccion"</span><span class="p">:</span><span class="s">"Calle única Numero 987"</span><span class="p">,</span>
    <span class="s">"telefono"</span><span class="p">:</span><span class="s">"046029400"</span>
  <span class="p">},</span>
  <span class="s">"items"</span><span class="p">:[</span>
    <span class="p">{</span>
      <span class="s">"cantidad"</span><span class="p">:</span><span class="mf">622.0</span><span class="p">,</span>
      <span class="s">"codigo_principal"</span><span class="p">:</span><span class="s">"ZNC"</span><span class="p">,</span>
      <span class="s">"codigo_auxiliar"</span><span class="p">:</span> <span class="s">"050"</span><span class="p">,</span>
      <span class="s">"precio_unitario"</span><span class="p">:</span> <span class="mf">7.01</span><span class="p">,</span>
      <span class="s">"descripcion"</span><span class="p">:</span> <span class="s">"Zanahoria granel  50 Kg."</span><span class="p">,</span>
      <span class="s">"precio_total_sin_impuestos"</span><span class="p">:</span> <span class="mf">4359.54</span><span class="p">,</span>
      <span class="s">"impuestos"</span><span class="p">:</span> <span class="p">[</span>
        <span class="p">{</span>
          <span class="s">"base_imponible"</span><span class="p">:</span><span class="mf">4359.54</span><span class="p">,</span>
          <span class="s">"valor"</span><span class="p">:</span><span class="mf">523.14</span><span class="p">,</span>
          <span class="s">"tarifa"</span><span class="p">:</span><span class="mf">12.0</span><span class="p">,</span>
          <span class="s">"codigo"</span><span class="p">:</span><span class="s">"2"</span><span class="p">,</span>
          <span class="s">"codigo_porcentaje"</span><span class="p">:</span><span class="s">"2"</span>
        <span class="p">}</span>
      <span class="p">],</span>
      <span class="s">"detalles_adicionales"</span><span class="p">:</span> <span class="p">{</span>
        <span class="s">"Peso"</span><span class="p">:</span><span class="s">"5000.0000"</span>
      <span class="p">},</span>
      <span class="s">"descuento"</span><span class="p">:</span> <span class="mf">0.0</span><span class="p">,</span>
      <span class="s">"unidad_medida"</span><span class="p">:</span> <span class="s">"Kilos"</span>
    <span class="p">}</span>
  <span class="p">],</span>
  <span class="s">"pagos"</span><span class="p">:</span> <span class="p">[</span>
    <span class="p">{</span>
      <span class="s">"forma_pago"</span><span class="p">:</span> <span class="s">"01"</span><span class="p">,</span>
      <span class="s">"total"</span><span class="p">:</span> <span class="mf">4882.68</span><span class="p">,</span>
      <span class="s">"unidad_tiempo"</span><span class="p">:</span> <span class="s">"10"</span><span class="p">,</span>
      <span class="s">"plazo"</span><span class="p">:</span> <span class="s">"30"</span>
    <span class="p">}</span>
  <span class="p">]</span>
<span class="p">}</span>
<span class="n">cabeceras</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s">'x-key'</span><span class="p">:</span> <span class="s">'&lt;clave-del-api&gt;'</span><span class="p">,</span>
    <span class="s">'x-password'</span><span class="p">:</span> <span class="s">'&lt;clave-certificado-firma&gt;'</span><span class="p">,</span>
    <span class="s">'content-type'</span><span class="p">:</span> <span class="s">'application/json'</span><span class="p">}</span>
<span class="n">respuesta</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">post</span><span class="p">(</span>
    <span class="s">"https://link.datil.co/purchase-settlements/issue"</span><span class="p">,</span>
    <span class="n">headers</span> <span class="o">=</span> <span class="n">cabeceras</span><span class="p">,</span>
    <span class="n">data</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">liquidacion_compras</span><span class="p">))</span>
</code></pre><pre class="highlight csharp tab-csharp"><code><span class="k">using</span> <span class="nn">RestSharp</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">System</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">System.Collections.Generic</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">System.Linq</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">System.Text</span><span class="p">;</span>

<span class="k">namespace</span> <span class="nn">DatilClient</span> <span class="p">{</span>
  <span class="k">class</span> <span class="nc">InvoicingServiceClient</span> <span class="p">{</span>
    <span class="k">static</span> <span class="k">void</span> <span class="nf">Main</span><span class="p">(</span><span class="kt">string</span><span class="p">[]</span> <span class="n">args</span><span class="p">)</span> <span class="p">{</span>

      <span class="c1">// Este ejemplo utiliza RestSharp</span>
      <span class="c1">// Para instalar anda al menú: tools &gt; Library Package Manager &gt; Package Manager Console</span>
      <span class="c1">// copia y pega y presiona enter: Install-Package RestSharp</span>

      <span class="kt">var</span> <span class="n">client</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">RestClient</span><span class="p">(</span><span class="s">"https://link.datil.co/"</span><span class="p">);</span>
      <span class="kt">var</span> <span class="n">request</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">RestRequest</span><span class="p">(</span><span class="s">"purchase-settlements/issue"</span><span class="p">,</span> <span class="n">Method</span><span class="p">.</span><span class="n">POST</span><span class="p">);</span>
      <span class="n">request</span><span class="p">.</span><span class="nf">AddHeader</span><span class="p">(</span><span class="s">"X-Key"</span><span class="p">,</span> <span class="s">"&lt;clave-del-api&gt;"</span><span class="p">);</span>
      <span class="n">request</span><span class="p">.</span><span class="nf">AddHeader</span><span class="p">(</span><span class="s">"X-Password"</span><span class="p">,</span> <span class="s">"&lt;clave-certificado-firma&gt;"</span><span class="p">);</span>
      <span class="n">request</span><span class="p">.</span><span class="nf">AddHeader</span><span class="p">(</span><span class="s">"Content-Type"</span><span class="p">,</span> <span class="s">"application/json"</span><span class="p">);</span>
      <span class="n">request</span><span class="p">.</span><span class="n">RequestFormat</span> <span class="p">=</span> <span class="n">DataFormat</span><span class="p">.</span><span class="n">Json</span><span class="p">;</span>

      <span class="kt">var</span> <span class="n">body</span> <span class="p">=</span> <span class="p">(</span><span class="err">@</span><span class="s">"{
</span>        <span class="s">""</span><span class="n">ambiente</span><span class="s">""</span><span class="p">:</span><span class="m">1</span><span class="p">,</span>
        <span class="s">""</span><span class="n">tipo_emision</span><span class="s">""</span><span class="p">:</span><span class="m">1</span><span class="p">,</span>
        <span class="s">""</span><span class="n">secuencial</span><span class="s">""</span><span class="p">:</span><span class="m">148</span><span class="p">,</span>
        <span class="s">""</span><span class="n">fecha_emision</span><span class="s">""</span><span class="p">:</span><span class="s">""</span><span class="m">2015</span><span class="p">-</span><span class="m">02</span><span class="p">-</span><span class="m">28</span><span class="n">T11</span><span class="p">:</span><span class="m">28</span><span class="p">:</span><span class="m">56.782</span><span class="n">Z</span><span class="s">""</span><span class="p">,</span>
        <span class="s">""</span><span class="n">emisor</span><span class="s">""</span><span class="p">:{</span>
          <span class="s">""</span><span class="n">ruc</span><span class="s">""</span><span class="p">:</span><span class="s">""</span><span class="m">0910000000001</span><span class="s">""</span><span class="p">,</span>
          <span class="s">""</span><span class="n">obligado_contabilidad</span><span class="s">""</span><span class="p">:</span><span class="k">true</span><span class="p">,</span>
          <span class="s">""</span><span class="n">contribuyente_especial</span><span class="s">""</span><span class="p">:</span><span class="s">""</span><span class="m">12345</span><span class="s">""</span><span class="p">,</span>
          <span class="s">""</span><span class="n">nombre_comercial</span><span class="s">""</span><span class="p">:</span><span class="s">""</span><span class="n">XYZ</span> <span class="n">Corp</span><span class="s">""</span><span class="p">,</span>
          <span class="s">""</span><span class="n">razon_social</span><span class="s">""</span><span class="p">:</span><span class="s">""</span><span class="n">XYZ</span> <span class="n">Corporaci</span><span class="err">ó</span><span class="n">n</span> <span class="n">S</span><span class="p">.</span><span class="n">A</span><span class="p">.</span><span class="s">""</span><span class="p">,</span>
          <span class="s">""</span><span class="n">direccion</span><span class="s">""</span><span class="p">:</span><span class="s">""</span><span class="n">Av</span><span class="p">.</span> <span class="n">Primera</span> <span class="m">234</span> <span class="n">y</span> <span class="n">calle</span> <span class="m">5</span><span class="n">ta</span><span class="s">""</span><span class="p">,</span>
          <span class="s">""</span><span class="n">establecimiento</span><span class="s">""</span><span class="p">:{</span>
            <span class="s">""</span><span class="n">punto_emision</span><span class="s">""</span><span class="p">:</span><span class="s">""</span><span class="m">002</span><span class="s">""</span><span class="p">,</span>
            <span class="s">""</span><span class="n">codigo</span><span class="s">""</span><span class="p">:</span><span class="s">""</span><span class="m">001</span><span class="s">""</span><span class="p">,</span>
            <span class="s">""</span><span class="n">direccion</span><span class="s">""</span><span class="p">:</span><span class="s">""</span><span class="n">Av</span><span class="p">.</span> <span class="n">Primera</span> <span class="m">234</span> <span class="n">y</span> <span class="n">calle</span> <span class="m">5</span><span class="n">ta</span><span class="s">""</span>
          <span class="p">}</span>
        <span class="p">},</span>
        <span class="s">""</span><span class="n">moneda</span><span class="s">""</span><span class="p">:</span><span class="s">""</span><span class="n">USD</span><span class="s">""</span><span class="p">,</span>
        <span class="s">""</span><span class="n">informacion_adicional</span><span class="s">""</span><span class="p">:{</span>
          <span class="s">""</span><span class="n">Tiempo</span> <span class="n">de</span> <span class="n">entrega</span><span class="s">""</span><span class="p">:</span><span class="s">""</span><span class="m">5</span> <span class="n">d</span><span class="err">í</span><span class="k">as</span><span class="s">""</span>
        <span class="p">},</span>
        <span class="s">""</span><span class="n">totales</span><span class="s">""</span><span class="p">:{</span>
          <span class="s">""</span><span class="n">total_sin_impuestos</span><span class="s">""</span><span class="p">:</span><span class="m">4359.54</span><span class="p">,</span>
          <span class="s">""</span><span class="n">impuestos</span><span class="s">""</span><span class="p">:[</span>
            <span class="p">{</span>
              <span class="s">""</span><span class="n">base_imponible</span><span class="s">""</span><span class="p">:</span><span class="m">0.0</span><span class="p">,</span>
              <span class="s">""</span><span class="n">valor</span><span class="s">""</span><span class="p">:</span><span class="m">0.0</span><span class="p">,</span>
              <span class="s">""</span><span class="n">codigo</span><span class="s">""</span><span class="p">:</span><span class="s">""</span><span class="m">2</span><span class="s">""</span><span class="p">,</span>
              <span class="s">""</span><span class="n">codigo_porcentaje</span><span class="s">""</span><span class="p">:</span><span class="s">""</span><span class="m">0</span><span class="s">""</span>
            <span class="p">},</span>
            <span class="p">{</span>
              <span class="s">""</span><span class="n">base_imponible</span><span class="s">""</span><span class="p">:</span><span class="m">4359.54</span><span class="p">,</span>
              <span class="s">""</span><span class="n">valor</span><span class="s">""</span><span class="p">:</span><span class="m">523.14</span><span class="p">,</span>
              <span class="s">""</span><span class="n">codigo</span><span class="s">""</span><span class="p">:</span><span class="s">""</span><span class="m">2</span><span class="s">""</span><span class="p">,</span>
              <span class="s">""</span><span class="n">codigo_porcentaje</span><span class="s">""</span><span class="p">:</span><span class="s">""</span><span class="m">2</span><span class="s">""</span>
            <span class="p">}</span>
          <span class="p">],</span>
          <span class="s">""</span><span class="n">importe_total</span><span class="s">""</span><span class="p">:</span><span class="m">4882.68</span><span class="p">,</span>
          <span class="s">""</span><span class="n">descuento</span><span class="s">""</span><span class="p">:</span><span class="m">0.0</span>
        <span class="p">},</span>
        <span class="s">""</span><span class="n">maquina_fiscal</span><span class="s">""</span><span class="p">:</span> <span class="p">{</span>
          <span class="s">""</span><span class="n">marca</span><span class="s">""</span><span class="p">:</span> <span class="s">""</span><span class="n">SISPAU</span><span class="s">""</span><span class="p">,</span>
          <span class="s">""</span><span class="n">modelo</span><span class="s">""</span><span class="p">:</span> <span class="s">""</span><span class="n">ABC123</span><span class="s">""</span><span class="p">,</span>
          <span class="s">""</span><span class="n">serie</span><span class="s">""</span><span class="p">:</span> <span class="s">""</span><span class="n">CGNC1405</span><span class="s">""</span>
        <span class="p">},</span>
        <span class="s">""</span><span class="n">proveedor</span><span class="s">""</span><span class="p">:{</span>
          <span class="s">""</span><span class="n">email</span><span class="s">""</span><span class="p">:</span><span class="s">""</span><span class="n">juan</span><span class="p">.</span><span class="n">perez@xyz</span><span class="p">.</span><span class="n">com</span><span class="s">""</span><span class="p">,</span>
          <span class="s">""</span><span class="n">identificacion</span><span class="s">""</span><span class="p">:</span><span class="s">""</span><span class="m">0987654321</span><span class="s">""</span><span class="p">,</span>
          <span class="s">""</span><span class="n">tipo_identificacion</span><span class="s">""</span><span class="p">:</span><span class="s">""</span><span class="m">05</span><span class="s">""</span><span class="p">,</span>
          <span class="s">""</span><span class="n">razon_social</span><span class="s">""</span><span class="p">:</span><span class="s">""</span><span class="n">Juan</span> <span class="n">P</span><span class="err">é</span><span class="n">rez</span><span class="s">""</span><span class="p">,</span>
          <span class="s">""</span><span class="n">direccion</span><span class="s">""</span><span class="p">:</span><span class="s">""</span><span class="n">Calle</span> <span class="err">ú</span><span class="n">nica</span> <span class="n">Numero</span> <span class="m">987</span><span class="s">""</span><span class="p">,</span>
          <span class="s">""</span><span class="n">telefono</span><span class="s">""</span><span class="p">:</span><span class="s">""</span><span class="m">046029400</span><span class="s">""</span>
        <span class="p">},</span>
        <span class="s">""</span><span class="n">items</span><span class="s">""</span><span class="p">:[</span>
          <span class="p">{</span>
            <span class="s">""</span><span class="n">cantidad</span><span class="s">""</span><span class="p">:</span><span class="m">622.0</span><span class="p">,</span>
            <span class="s">""</span><span class="n">codigo_principal</span><span class="s">""</span><span class="p">:</span><span class="s">""</span><span class="n">ZNC</span><span class="s">""</span><span class="p">,</span>
            <span class="s">""</span><span class="n">codigo_auxiliar</span><span class="s">""</span><span class="p">:</span> <span class="s">""</span><span class="m">050</span><span class="s">""</span><span class="p">,</span>
            <span class="s">""</span><span class="n">precio_unitario</span><span class="s">""</span><span class="p">:</span> <span class="m">7.01</span><span class="p">,</span>
            <span class="s">""</span><span class="n">descripcion</span><span class="s">""</span><span class="p">:</span> <span class="s">""</span><span class="n">Zanahoria</span> <span class="n">granel</span>  <span class="m">50</span> <span class="n">Kg</span><span class="p">.</span><span class="s">""</span><span class="p">,</span>
            <span class="s">""</span><span class="n">precio_total_sin_impuestos</span><span class="s">""</span><span class="p">:</span> <span class="m">4359.54</span><span class="p">,</span>
            <span class="s">""</span><span class="n">impuestos</span><span class="s">""</span><span class="p">:</span> <span class="p">[</span>
              <span class="p">{</span>
                <span class="s">""</span><span class="n">base_imponible</span><span class="s">""</span><span class="p">:</span><span class="m">4359.54</span><span class="p">,</span>
                <span class="s">""</span><span class="n">valor</span><span class="s">""</span><span class="p">:</span><span class="m">523.14</span><span class="p">,</span>
                <span class="s">""</span><span class="n">tarifa</span><span class="s">""</span><span class="p">:</span><span class="m">12.0</span><span class="p">,</span>
                <span class="s">""</span><span class="n">codigo</span><span class="s">""</span><span class="p">:</span><span class="s">""</span><span class="m">2</span><span class="s">""</span><span class="p">,</span>
                <span class="s">""</span><span class="n">codigo_porcentaje</span><span class="s">""</span><span class="p">:</span><span class="s">""</span><span class="m">2</span><span class="s">""</span>
              <span class="p">}</span>
            <span class="p">],</span>
            <span class="s">""</span><span class="n">detalles_adicionales</span><span class="s">""</span><span class="p">:</span> <span class="p">{</span>
              <span class="s">""</span><span class="n">Peso</span><span class="s">""</span><span class="p">:</span><span class="s">""</span><span class="m">5000.0000</span><span class="s">""</span>
            <span class="p">},</span>
            <span class="s">""</span><span class="n">descuento</span><span class="s">""</span><span class="p">:</span> <span class="m">0.0</span><span class="p">,</span>
            <span class="s">""</span><span class="n">unidad_medida</span><span class="s">""</span><span class="p">:</span> <span class="s">""</span><span class="n">Kilos</span><span class="s">""</span>
          <span class="p">}</span>
      <span class="p">],</span>
      <span class="s">""</span><span class="n">pagos</span><span class="s">""</span><span class="p">:</span> <span class="p">[</span>
        <span class="p">{</span>
          <span class="s">""</span><span class="n">forma_pago</span><span class="s">""</span><span class="p">:</span> <span class="s">""</span><span class="m">01</span><span class="s">""</span><span class="p">,</span>
          <span class="s">""</span><span class="n">total</span><span class="s">""</span><span class="p">:</span> <span class="m">4882.68</span>
        <span class="p">}</span>
      <span class="p">]</span>
      <span class="p">}</span><span class="s">");
</span>      <span class="n">request</span><span class="p">.</span><span class="nf">AddParameter</span><span class="p">(</span><span class="s">"application/json"</span><span class="p">,</span> <span class="n">body</span><span class="p">,</span> <span class="n">ParameterType</span><span class="p">.</span><span class="n">RequestBody</span><span class="p">);</span>
      <span class="n">IRestResponse</span> <span class="n">response</span> <span class="p">=</span> <span class="n">client</span><span class="p">.</span><span class="nf">Execute</span><span class="p">(</span><span class="n">request</span><span class="p">);</span>

      <span class="n">Console</span><span class="p">.</span><span class="nf">WriteLine</span><span class="p">(</span><span class="n">response</span><span class="p">.</span><span class="n">Content</span><span class="p">);</span>
      <span class="n">Console</span><span class="p">.</span><span class="nf">ReadLine</span><span class="p">();</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">}</span>
</code></pre>
<p>Para la emisión de una liquidación de compras se debe enviar la información completa del
comprobante en el cuerpo del requerimiento en formato JSON.</p>

<table><thead>
<tr>
<th>Parámetro</th>
<th>Tipo</th>
<th>Descripción</th>
</tr>
</thead><tbody>
<tr>
<td>secuencial</td>
<td>string</td>
<td>Número de secuencia de la liquidación de compras. <strong>Requerido</strong></td>
</tr>
<tr>
<td>emisor</td>
<td><a href="#emisor">emisor</a></td>
<td>Información completa del emisor. <strong>Requerido</strong></td>
</tr>
<tr>
<td>moneda</td>
<td>string</td>
<td>Código <a href="https://en.wikipedia.org/wiki/ISO_4217">ISO</a> de la moneda. <strong>Requerido</strong></td>
</tr>
<tr>
<td>fecha_emision</td>
<td>string</td>
<td>Fecha de emisión en formato AAAA-MM-DDHoraZonaHoraria, definido en el estándar <a href="http://tools.ietf.org/html/rfc3339#section-5.6">ISO8601</a>.</td>
</tr>
<tr>
<td>ambiente</td>
<td>integer</td>
<td>Pruebas: <code>1</code>.<br>Producción <code>2</code>.<br><strong>Requerido</strong></td>
</tr>
<tr>
<td>totales</td>
<td>objeto tipo <a href="#totales-liquidacion">totales</a></td>
<td>Listado de totales. <strong>Requerido</strong></td>
</tr>
<tr>
<td>maquina_fiscal</td>
<td>objeto <a href="#maquina-fiscal">maquina_fiscal</a></td>
<td>Información de máquina fiscal.</td>
</tr>
<tr>
<td>proveedor</td>
<td>objeto tipo <a href="#persona">persona</a></td>
<td>Información del proveedor. <strong>Requerido</strong></td>
</tr>
<tr>
<td>tipo_emision</td>
<td>integer</td>
<td>Emisión normal: <code>1</code>.<br>Emisión por indisponibilidad: <code>2</code><br><strong>Requerido</strong></td>
</tr>
<tr>
<td>items</td>
<td>listado de objetos tipo <a href="#item-de-factura">item</a></td>
<td>Items incluídos en la liquidación de compras. <strong>Requerido</strong></td>
</tr>
<tr>
<td>version</td>
<td>string</td>
<td>Versión del formato de comprobantes electrónicos de SRI. Si no se especifica, se utilizará la última revisión del formato implementada,</td>
</tr>
<tr>
<td>clave_acceso</td>
<td>string</td>
<td>La clave de acceso representa un identificador único del comprobante. Si esta información no es provista, Dátil la generará.<br>¿Cómo <a href="#clave-de-acceso">generar</a> la clave de acceso?</td>
</tr>
<tr>
<td>informacion_adicional</td>
<td>objeto</td>
<td>Información adicional adjunta al comprobante en forma de diccionario. Ejemplo:<br><code>{&quot;plan&quot;: &quot;Inicial&quot;, &quot;vigencia&quot;: &quot;1 mes&quot;}</code></td>
</tr>
<tr>
<td>pagos</td>
<td>Listado de objetos tipo <a href="#pagos-liquidacion">pagos</a></td>
<td>Listado de formas de pago aplicables a la liquidación de compras. <strong>Requerido</strong></td>
</tr>
</tbody></table>

<h4 id="totales-liquidacion"> Totales </h4>

<table><thead>
<tr>
<th>Parámetro</th>
<th>Tipo</th>
<th>Descripción</th>
</tr>
</thead><tbody>
<tr>
<td>total_sin_impuestos</td>
<td>float</td>
<td>Total antes de los impuestos. <strong>Requerido</strong></td>
</tr>
<tr>
<td>descuento</td>
<td>float</td>
<td>Suma de los descuentos de cada ítem. <strong>Requerido</strong></td>
</tr>
<tr>
<td>importe_total</td>
<td>float</td>
<td>Total incluyendo impuestos. <strong>Requerido</strong></td>
</tr>
<tr>
<td>impuestos</td>
<td>listado de objetos <a href="#total-impuesto">total impuesto</a></td>
<td>Listado de impuesto totalizados. <strong>Requerido</strong></td>
</tr>
</tbody></table>

<h4 id="pagos-liquidacion">Pagos</h4>

<table><thead>
<tr>
<th>Parámetro</th>
<th>Tipo</th>
<th>Descripción</th>
</tr>
</thead><tbody>
<tr>
<td>forma_pago</td>
<td>string</td>
<td>Código del <a href="#tipos-de-forma-de-pago-del-sri">tipo de forma de pago</a>. <strong>Requerido</strong></td>
</tr>
<tr>
<td>total</td>
<td>float</td>
<td>Total aplicable a la forma de pago especificada. <strong>Requerido</strong></td>
</tr>
<tr>
<td>unidad_tiempo</td>
<td>string</td>
<td>Máximo 10 caracteres.</td>
</tr>
<tr>
<td>plazo</td>
<td>string</td>
<td>Máximo 14 caracteres.</td>
</tr>
</tbody></table>
<h3 id='respuesta'>Respuesta</h3>
<blockquote>
<h4 id='respuesta-de-ejemplo'>Respuesta de ejemplo</h4></blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"abcdef09876123cea56784f01"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"ambiente"</span><span class="p">:</span><span class="mi">1</span><span class="p">,</span><span class="w">
  </span><span class="s2">"tipo_emision"</span><span class="p">:</span><span class="mi">1</span><span class="p">,</span><span class="w">
  </span><span class="s2">"secuencial"</span><span class="p">:</span><span class="mi">148</span><span class="p">,</span><span class="w">
  </span><span class="s2">"fecha_emision"</span><span class="p">:</span><span class="s2">"2015-02-28T11:28:56.782Z"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"clave_acceso"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2802201501091000000000120010010000100451993736618"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"emisor"</span><span class="p">:{</span><span class="w">
    </span><span class="s2">"ruc"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0910000000001"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"obligado_contabilidad"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
    </span><span class="s2">"contribuyente_especial"</span><span class="p">:</span><span class="w"> </span><span class="s2">"12345"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"nombre_comercial"</span><span class="p">:</span><span class="w"> </span><span class="s2">"XYZ Corp"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"razon_social"</span><span class="p">:</span><span class="w"> </span><span class="s2">"XYZ Corporación S.A."</span><span class="p">,</span><span class="w">
    </span><span class="s2">"direccion"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Av. Primera 234 y calle 5ta"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"establecimiento"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="s2">"punto_emision"</span><span class="p">:</span><span class="w"> </span><span class="s2">"002"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"codigo"</span><span class="p">:</span><span class="w"> </span><span class="s2">"001"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"direccion"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Av. Primera 234 y calle 5ta"</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="s2">"moneda"</span><span class="p">:</span><span class="w"> </span><span class="s2">"USD"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"informacion_adicional"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"Tiempo de entrega"</span><span class="p">:</span><span class="w"> </span><span class="s2">"5 días"</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="s2">"totales"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"total_sin_impuestos"</span><span class="p">:</span><span class="w"> </span><span class="mf">4359.54</span><span class="p">,</span><span class="w">
    </span><span class="s2">"impuestos"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
      </span><span class="p">{</span><span class="w">
        </span><span class="s2">"base_imponible"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.0</span><span class="p">,</span><span class="w">
        </span><span class="s2">"valor"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.0</span><span class="p">,</span><span class="w">
        </span><span class="s2">"codigo"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"codigo_porcentaje"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0"</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="p">{</span><span class="w">
        </span><span class="s2">"base_imponible"</span><span class="p">:</span><span class="w"> </span><span class="mf">4359.54</span><span class="p">,</span><span class="w">
        </span><span class="s2">"valor"</span><span class="p">:</span><span class="w"> </span><span class="mf">523.14</span><span class="p">,</span><span class="w">
        </span><span class="s2">"codigo"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"codigo_porcentaje"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2"</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">],</span><span class="w">
    </span><span class="s2">"importe_total"</span><span class="p">:</span><span class="w"> </span><span class="mf">4882.68</span><span class="p">,</span><span class="w">
    </span><span class="s2">"descuento"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.0</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="s2">"maquina_fiscal"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"marca"</span><span class="p">:</span><span class="w"> </span><span class="s2">"SISPAU"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"modelo"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ABC123"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"serie"</span><span class="p">:</span><span class="w"> </span><span class="s2">"CGNC1405"</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="s2">"proveedor"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"email"</span><span class="p">:</span><span class="w"> </span><span class="s2">"juan.perez@xyz.com"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"identificacion"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0987654321"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"tipo_identificacion"</span><span class="p">:</span><span class="w"> </span><span class="s2">"05"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"razon_social"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Juan Pérez"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"direccion"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Calle única Numero 987"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"telefono"</span><span class="p">:</span><span class="w"> </span><span class="s2">"046029400"</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="s2">"maquina_fiscal"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"marca"</span><span class="p">:</span><span class="w"> </span><span class="s2">"SISPAU"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"modelo"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ABC123"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"serie"</span><span class="p">:</span><span class="w"> </span><span class="s2">"CGNC1405"</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="s2">"items"</span><span class="p">:[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="s2">"cantidad"</span><span class="p">:</span><span class="w"> </span><span class="mf">622.0</span><span class="p">,</span><span class="w">
      </span><span class="s2">"codigo_principal"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ZNC"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"codigo_auxiliar"</span><span class="p">:</span><span class="w"> </span><span class="s2">"050"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"precio_unitario"</span><span class="p">:</span><span class="w"> </span><span class="mf">7.01</span><span class="p">,</span><span class="w">
      </span><span class="s2">"descripcion"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Zanahoria granel  50 Kg."</span><span class="p">,</span><span class="w">
      </span><span class="s2">"precio_total_sin_impuestos"</span><span class="p">:</span><span class="w"> </span><span class="mf">4359.54</span><span class="p">,</span><span class="w">
      </span><span class="s2">"impuestos"</span><span class="p">:[</span><span class="w">
        </span><span class="p">{</span><span class="w">
          </span><span class="s2">"base_imponible"</span><span class="p">:</span><span class="w"> </span><span class="mf">4359.54</span><span class="p">,</span><span class="w">
          </span><span class="s2">"valor"</span><span class="p">:</span><span class="w"> </span><span class="mf">523.14</span><span class="p">,</span><span class="w">
          </span><span class="s2">"tarifa"</span><span class="p">:</span><span class="w"> </span><span class="mf">12.0</span><span class="p">,</span><span class="w">
          </span><span class="s2">"codigo"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"codigo_porcentaje"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2"</span><span class="w">
        </span><span class="p">}</span><span class="w">
      </span><span class="p">],</span><span class="w">
      </span><span class="s2">"detalles_adicionales"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"Peso"</span><span class="p">:</span><span class="w"> </span><span class="s2">"5000.0000"</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="s2">"descuento"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.0</span><span class="p">,</span><span class="w">
      </span><span class="s2">"unidad_medida"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Kilos"</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">],</span><span class="w">
  </span><span class="s2">"pagos"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="s2">"forma_pago"</span><span class="p">:</span><span class="w"> </span><span class="s2">"01"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"total"</span><span class="p">:</span><span class="w"> </span><span class="mf">4882.68</span><span class="p">,</span><span class="w">
      </span><span class="s2">"unidad_tiempo"</span><span class="p">:</span><span class="w"> </span><span class="s2">"10"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"plazo"</span><span class="p">:</span><span class="w"> </span><span class="s2">"30"</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>Retorna un objeto tipo <strong><a href="#requerimiento-liquidacion">liquidacion</a></strong> que incluye un nuevo parámetro <code>id</code>,
el cual identifica de manera única a la liquidación de compras. El campo <code>clave_acceso</code> generado
también se incluirá como parte de la respuesta.</p>
<h2 id='emision-de-una-liquidacion-de-compra-a-partir-de-xml'>Emisión de una liquidación de compra a partir de XML</h2>
<p><code>POST /purchase-settlements/issue/xml</code></p>
<h3 id='requerimiento-a-partir-de-xml'>Requerimiento a partir de XML</h3>
<p>Para la emisión de una liquidación de compra a partir de un XML se debe enviar contenido del archivo XML como parámetro en el cuerpo del requerimiento en formato JSON.</p>

<table><thead>
<tr>
<th>Parámetro</th>
<th>Tipo</th>
<th>Descripción</th>
</tr>
</thead><tbody>
<tr>
<td>xml</td>
<td>string</td>
<td>Contenido del archivo xml. <strong>Requerido</strong></td>
</tr>
</tbody></table>

<blockquote>
<h4 id='requerimiento-de-ejemplo-2'>Requerimiento de ejemplo</h4></blockquote>
<pre class="highlight shell tab-shell"><code>curl -v https://link.datil.co/purchase-settlements/issue/xml <span class="se">\</span>
-H <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
-H <span class="s2">"X-Key: &lt;API-key&gt;"</span> <span class="se">\</span>
-H <span class="s2">"X-Password: &lt;clave-certificado-firma&gt;"</span> <span class="se">\</span>
-d <span class="s1">'{"xml" : "&lt;?xml version=\"1.1.0\" encoding=\"UTF-8\"?&gt;
&lt;liquidacionCompra id= \"comprobante\" version= \"1.1.0\"&gt;
    &lt;infoTributaria&gt;
        &lt;ambiente&gt;1&lt;/ambiente&gt;
        &lt;tipoEmision&gt;1&lt;/tipoEmision&gt;
        &lt;razonSocial&gt;DATILMEDIA S.A. DE C.V.&lt;/razonSocial&gt;
        &lt;nombreComercial&gt;DATILMEDIA S.A.&lt;/nombreComercial&gt;
        &lt;ruc&gt;0992712554001&lt;/ruc&gt;
        &lt;claveAcceso&gt;1234567890098765432112345678900987654321987654321&lt;/claveAcceso&gt;
        &lt;codDoc&gt;03&lt;/codDoc&gt;
        &lt;estab&gt;001&lt;/estab&gt;
        &lt;ptoEmi&gt;001&lt;/ptoEmi&gt;
        &lt;secuencial&gt;000002134&lt;/secuencial&gt;
        &lt;dirMatriz&gt;VICTOR EMILIO ESTRADA 112 Y CIRCUNVALACION NORTE&lt;/dirMatriz&gt;
    &lt;/infoTributaria&gt;
    &lt;infoLiquidacionCompra&gt;
        &lt;fechaEmision&gt;20/10/2019&lt;/fechaEmision&gt;
        &lt;dirEstablecimiento&gt;VICTOR EMILIO ESTRADA 112 Y CIRCUNVALACION NORTE 2&lt;/dirEstablecimiento&gt;
        &lt;obligadoContabilidad&gt;NO&lt;/obligadoContabilidad&gt;
        &lt;tipoIdentificacionProveedor&gt;04&lt;/tipoIdentificacionProveedor&gt;
        &lt;razonSocialProveedor&gt;Sistemas XYZ&lt;/razonSocialProveedor&gt;
        &lt;identificacionProveedor&gt;0987343992001&lt;/identificacionProveedor&gt;
        &lt;totalSinImpuestos&gt;6.00&lt;/totalSinImpuestos&gt;
        &lt;totalDescuento&gt;1.50&lt;/totalDescuento&gt;
        &lt;totalConImpuestos&gt;
            &lt;totalImpuesto&gt;
                &lt;codigo&gt;2&lt;/codigo&gt;
                &lt;codigoPorcentaje&gt;2&lt;/codigoPorcentaje&gt;
                &lt;baseImponible&gt;6.00&lt;/baseImponible&gt;
                &lt;valor&gt;0.72&lt;/valor&gt;
            &lt;/totalImpuesto&gt;
        &lt;/totalConImpuestos&gt;
        &lt;importeTotal&gt;6.72&lt;/importeTotal&gt;
        &lt;moneda&gt;DOLAR&lt;/moneda&gt;
        &lt;pagos&gt;
            &lt;pago&gt;
                &lt;formaPago&gt;01&lt;/formaPago&gt;
                &lt;total&gt;6.72&lt;/total&gt;
            &lt;/pago&gt;
        &lt;/pagos&gt;
    &lt;/infoLiquidacionCompra&gt;
    &lt;detalles&gt;
        &lt;detalle&gt;
            &lt;codigoPrincipal&gt;105AP&lt;/codigoPrincipal&gt;
            &lt;descripcion&gt;Aceite Protector&lt;/descripcion&gt;
            &lt;cantidad&gt;1.400000&lt;/cantidad&gt;
            &lt;precioUnitario&gt;5.357143&lt;/precioUnitario&gt;
            &lt;descuento&gt;1.50&lt;/descuento&gt;
            &lt;precioTotalSinImpuesto&gt;6.00&lt;/precioTotalSinImpuesto&gt;
            &lt;impuestos&gt;
                &lt;impuesto&gt;
                    &lt;codigo&gt;2&lt;/codigo&gt;
                    &lt;codigoPorcentaje&gt;2&lt;/codigoPorcentaje&gt;
                    &lt;tarifa&gt;12.00&lt;/tarifa&gt;
                    &lt;baseImponible&gt;6.00&lt;/baseImponible&gt;
                    &lt;valor&gt;0.72&lt;/valor&gt;
                &lt;/impuesto&gt;
            &lt;/impuestos&gt;
        &lt;/detalle&gt;
    &lt;/detalles&gt;
    &lt;infoAdicional&gt;
        &lt;campoAdicional nombre= \"Info\"&gt;Adicional&lt;/campoAdicional&gt;
    &lt;/infoAdicional&gt;
&lt;/liquidacionCompra&gt;"}'</span>
</code></pre><pre class="highlight python tab-python"><code><span class="kn">import</span> <span class="nn">requests</span><span class="p">,</span> <span class="n">json</span>

<span class="n">liquidacion_compra</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s">"xml"</span><span class="p">:</span> <span class="s">'''&lt;?xml version="1.1.0" encoding="UTF-8"?&gt;
    &lt;liquidacionCompra id="comprobante" version="1.1.0"&gt;
      &lt;infoTributaria&gt;
        &lt;ambiente&gt;1&lt;/ambiente&gt;
        &lt;tipoEmision&gt;1&lt;/tipoEmision&gt;
        &lt;razonSocial&gt;DATILMEDIA S.A.&lt;/razonSocial&gt;
        &lt;nombreComercial&gt;DATILMEDIA S.A.&lt;/nombreComercial&gt;
        &lt;ruc&gt;0992712554001&lt;/ruc&gt;
        &lt;claveAcceso&gt;1234567890098765432112345678900987654321987654321&lt;/claveAcceso&gt;
        &lt;codDoc&gt;03&lt;/codDoc&gt;
        &lt;estab&gt;001&lt;/estab&gt;
        &lt;ptoEmi&gt;001&lt;/ptoEmi&gt;
        &lt;secuencial&gt;000002134&lt;/secuencial&gt;
        &lt;dirMatriz&gt;VICTOR EMILIO ESTRADA 112 Y CIRCUNVALACION NORTE&lt;/dirMatriz&gt;
      &lt;/infoTributaria&gt;
      &lt;infoLiquidacionCompra&gt;
        &lt;fechaEmision&gt;20/10/2019&lt;/fechaEmision&gt;
        &lt;dirEstablecimiento&gt;VICTOR EMILIO ESTRADA 112 Y CIRCUNVALACION NORTE 2&lt;/dirEstablecimiento&gt;
        &lt;obligadoContabilidad&gt;NO&lt;/obligadoContabilidad&gt;
        &lt;tipoIdentificacionProveedor&gt;04&lt;/tipoIdentificacionProveedor&gt;
        &lt;razonSocialProveedor&gt;Sistemas XYZ&lt;/razonSocialProveedor&gt;
        &lt;identificacionProveedor&gt;0987343992001&lt;/identificacionProveedor&gt;
        &lt;totalSinImpuestos&gt;6.00&lt;/totalSinImpuestos&gt;
        &lt;totalDescuento&gt;1.50&lt;/totalDescuento&gt;
        &lt;totalConImpuestos&gt;
          &lt;totalImpuesto&gt;
            &lt;codigo&gt;2&lt;/codigo&gt;
            &lt;codigoPorcentaje&gt;2&lt;/codigoPorcentaje&gt;
            &lt;baseImponible&gt;6.00&lt;/baseImponible&gt;
            &lt;valor&gt;0.72&lt;/valor&gt;
          &lt;/totalImpuesto&gt;
        &lt;/totalConImpuestos&gt;
        &lt;importeTotal&gt;6.72&lt;/importeTotal&gt;
        &lt;moneda&gt;DOLAR&lt;/moneda&gt;
        &lt;pagos&gt;
          &lt;pago&gt;
            &lt;formaPago&gt;01&lt;/formaPago&gt;
            &lt;total&gt;6.72&lt;/total&gt;
          &lt;/pago&gt;
        &lt;/pagos&gt;
      &lt;/infoLiquidacionCompra&gt;
      &lt;detalles&gt;
        &lt;detalle&gt;
          &lt;codigoPrincipal&gt;105AP&lt;/codigoPrincipal&gt;
          &lt;descripcion&gt;Aceite Protector&lt;/descripcion&gt;
          &lt;cantidad&gt;1.400000&lt;/cantidad&gt;
          &lt;precioUnitario&gt;5.357143&lt;/precioUnitario&gt;
          &lt;descuento&gt;1.50&lt;/descuento&gt;
          &lt;precioTotalSinImpuesto&gt;6.00&lt;/precioTotalSinImpuesto&gt;
          &lt;impuestos&gt;
            &lt;impuesto&gt;
              &lt;codigo&gt;2&lt;/codigo&gt;
              &lt;codigoPorcentaje&gt;2&lt;/codigoPorcentaje&gt;
              &lt;tarifa&gt;12.00&lt;/tarifa&gt;
              &lt;baseImponible&gt;6.00&lt;/baseImponible&gt;
              &lt;valor&gt;0.72&lt;/valor&gt;
            &lt;/impuesto&gt;
          &lt;/impuestos&gt;
        &lt;/detalle&gt;
      &lt;/detalles&gt;
      &lt;infoAdicional&gt;
        &lt;campoAdicional nombre="Info"&gt;Adicional&lt;/campoAdicional&gt;
      &lt;/infoAdicional&gt;
    &lt;/liquidacionCompra&gt;'''</span>
<span class="p">}</span>

<span class="n">cabeceras</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s">'x-key'</span><span class="p">:</span> <span class="s">'&lt;clave-del-api&gt;'</span><span class="p">,</span>
    <span class="s">'x-password'</span><span class="p">:</span> <span class="s">'&lt;clave-certificado-firma&gt;'</span><span class="p">,</span>
    <span class="s">'content-type'</span><span class="p">:</span> <span class="s">'application/json'</span><span class="p">}</span>
<span class="n">respuesta</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">post</span><span class="p">(</span>
    <span class="s">"https://link.datil.co/invoices/issue/xml"</span><span class="p">,</span>
    <span class="n">headers</span> <span class="o">=</span> <span class="n">cabeceras</span><span class="p">,</span>
    <span class="n">data</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">liquidacion_compra</span><span class="p">))</span>
</code></pre><pre class="highlight csharp tab-csharp"><code></code></pre>
<blockquote>
<h4 id='reespuesta-de-ejemplo'>Reespuesta de ejemplo</h4></blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="s2">"pagos"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="p">{</span><span class="w">
            </span><span class="s2">"plazo"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
            </span><span class="s2">"total"</span><span class="p">:</span><span class="w"> </span><span class="s2">"6.72"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"unidad_tiempo"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w">
            </span><span class="s2">"forma_pago"</span><span class="p">:</span><span class="w"> </span><span class="s2">"01"</span><span class="w">
        </span><span class="p">}</span><span class="w">
    </span><span class="p">],</span><span class="w">
    </span><span class="s2">"secuencial"</span><span class="p">:</span><span class="w"> </span><span class="mi">3</span><span class="p">,</span><span class="w">
    </span><span class="s2">"proveedor"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"correo"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
        </span><span class="s2">"identificacion"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0987343992001"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"razon_social"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Sistemas XYZ"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"direccion"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w">
        </span><span class="s2">"tipo_identificacion"</span><span class="p">:</span><span class="w"> </span><span class="s2">"04"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="s2">"emisor"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"provincia"</span><span class="p">:</span><span class="w"> </span><span class="mi">10</span><span class="p">,</span><span class="w">
        </span><span class="s2">"email"</span><span class="p">:</span><span class="w"> </span><span class="s2">"devops@datilmedia.com"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"categoria"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Combustible"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"ruc"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1234567890001"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"obligado_contabilidad"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
        </span><span class="s2">"contribuyente_especial"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w">
        </span><span class="s2">"subcategoria"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Desarrollo de software"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"nombre_comercial"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Hexlab Demo"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"pais"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
        </span><span class="s2">"market_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"denny"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"razon_social"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Hexlab Demo"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"direccion"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Innvernadero Coworking, Bálsamos 813 entre Guayacanes e Higueras"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"ciudad"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Guayaquil"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"exportador"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
        </span><span class="s2">"telefono"</span><span class="p">:</span><span class="w"> </span><span class="s2">"046029400"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"tipoentidad"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Sociedad Anónima"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="s2">"correos_enviados"</span><span class="p">:</span><span class="w"> </span><span class="p">[],</span><span class="w">
    </span><span class="s2">"numero"</span><span class="p">:</span><span class="w"> </span><span class="s2">"001-001-000000003"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"anulado"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
    </span><span class="s2">"es_valida"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
    </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"c1f05f6cd3494c88a21877d8c8d3a5ea"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"informacion_adicional"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"Info"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Adicional"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="s2">"ambiente"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"totales"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"total_sin_impuestos"</span><span class="p">:</span><span class="w"> </span><span class="s2">"6.00"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"importe_total"</span><span class="p">:</span><span class="w"> </span><span class="s2">"6.72"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"impuestos"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
            </span><span class="p">{</span><span class="w">
                </span><span class="s2">"codigo"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2"</span><span class="p">,</span><span class="w">
                </span><span class="s2">"codigo_porcentaje"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2"</span><span class="p">,</span><span class="w">
                </span><span class="s2">"base_imponible"</span><span class="p">:</span><span class="w"> </span><span class="s2">"6.00"</span><span class="p">,</span><span class="w">
                </span><span class="s2">"valor"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0.72"</span><span class="w">
            </span><span class="p">}</span><span class="w">
        </span><span class="p">],</span><span class="w">
        </span><span class="s2">"descuento"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1.50"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="s2">"envio_sri"</span><span class="p">:</span><span class="w"> </span><span class="p">{},</span><span class="w">
    </span><span class="s2">"items"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="p">{</span><span class="w">
            </span><span class="s2">"precio_unitario"</span><span class="p">:</span><span class="w"> </span><span class="s2">"5.357143"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"descripcion"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Aceite Protector"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"precio_total_sin_impuestos"</span><span class="p">:</span><span class="w"> </span><span class="s2">"6.00"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"unidad_medida"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
            </span><span class="s2">"impuestos"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
                </span><span class="p">{</span><span class="w">
                    </span><span class="s2">"codigo"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2"</span><span class="p">,</span><span class="w">
                    </span><span class="s2">"tarifa"</span><span class="p">:</span><span class="w"> </span><span class="s2">"12.00"</span><span class="p">,</span><span class="w">
                    </span><span class="s2">"codigo_porcentaje"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2"</span><span class="p">,</span><span class="w">
                    </span><span class="s2">"base_imponible"</span><span class="p">:</span><span class="w"> </span><span class="s2">"6.00"</span><span class="p">,</span><span class="w">
                    </span><span class="s2">"valor"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0.72"</span><span class="w">
                </span><span class="p">}</span><span class="w">
            </span><span class="p">],</span><span class="w">
            </span><span class="s2">"detalles_adicionales"</span><span class="p">:</span><span class="w"> </span><span class="p">{},</span><span class="w">
            </span><span class="s2">"cantidad"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1.400000"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"codigo_auxiliar"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
            </span><span class="s2">"descuento"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1.50"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"codigo_principal"</span><span class="p">:</span><span class="w"> </span><span class="s2">"105AP"</span><span class="w">
        </span><span class="p">}</span><span class="w">
    </span><span class="p">],</span><span class="w">
    </span><span class="s2">"pre_autorizado"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
    </span><span class="s2">"clave_acceso"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2010201903123456789000110010010000000032235587919"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"autorizacion"</span><span class="p">:</span><span class="w"> </span><span class="p">{}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre><h2 id='emision-de-una-liquidacion-de-compras-de-reembolso'>Emisión de una liquidación de compras de reembolso</h2><h3 id='operacion-2'>Operación</h3>
<p><code>POST /purchase-settlements/issue</code>
<h3 id="requerimiento-liquidacion">Requerimiento</h3></p>

<blockquote>
<h4 id='requerimiento-de-ejemplo-3'>Requerimiento de ejemplo</h4></blockquote>
<pre class="highlight shell tab-shell"><code>curl -v https://link.datil.co/purchase-settlements/issue <span class="se">\</span>
-H <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
-H <span class="s2">"X-Key: &lt;API-key&gt;"</span> <span class="se">\</span>
-H <span class="s2">"X-Password: &lt;clave-certificado-firma&gt;"</span> <span class="se">\</span>
-d <span class="s1">'{
  "ambiente":1,
  "tipo_emision":1,
  "secuencial":148,
  "fecha_emision":"2015-02-28T11:28:56.782Z",
  "emisor":{
    "ruc":"0910000000001",
    "obligado_contabilidad":true,
    "contribuyente_especial":"12345",
    "nombre_comercial":"XYZ Corp",
    "razon_social":"XYZ Corporación S.A.",
    "direccion":"Av. Primera 234 y calle 5ta",
    "establecimiento":{
      "punto_emision":"002",
      "codigo":"001",
      "direccion":"Av. Primera 234 y calle 5ta"
    }
  },
  "moneda":"USD",
  "informacion_adicional":{
    "Tiempo de entrega":"5 días"
  },
  "totales":{
    "total_sin_impuestos":50.00,
    "impuestos":[
      {
        "base_imponible":50.00,
        "valor":0.00,
        "codigo":"2",
        "codigo_porcentaje":"0"
      }
    ],
    "importe_total":50.00,
    "descuento":0.0
  },
  "maquina_fiscal": {
    "marca": "SISPAU",
    "modelo": "ABC123",
    "serie": "CGNC1405"
  },
  "proveedor":{
    "email":"juan.perez@xyz.com",
    "identificacion":"0987654321",
    "tipo_identificacion":"05",
    "razon_social":"Juan Pérez",
    "direccion":"Calle única Numero 987",
    "telefono":"046029400"
  },
  "items": [{
    "cantidad": 1.0,
    "codigo_principal": "REEM",
    "codigo_auxiliar": "",
    "precio_unitario": 50.00,
    "descuento": 0,
    "descripcion": "Reembolso de gastos",
    "precio_total_sin_impuestos": 50.00,
    "impuestos": [{
      "base_imponible": 50.00,
      "valor": 0.00,
      "tarifa": 0.00,
      "codigo": "2",
      "codigo_porcentaje": "0"
    }],
    "descuento": 0.00
  }],
  "reembolso": {
    "subtotal": 50.00,
    "total": 50.00,
    "total_impuestos": 0.00,
    "documentos": [
      {
        "tipo_identificacion_proveedor": "04",
        "pais_origen_proveedor": "593",
        "tipo_proveedor": "01",
        "identificacion_proveedor": "0918723323001",
        "tipo": "01",
        "numero_autorizacion": 3811201601,
        "fecha_emision": "2020-01-28T10:50:26-05:00",
        "codigo_punto_emision": "001",
        "codigo_establecimiento": "003",
        "secuencia": 897,
        "impuestos": [
          {
            "tarifa": 0.0,
            "codigo": "2",
            "codigo_porcentaje": "0",
            "base_imponible": "50.0",
            "valor": "0.00",
          }
        ],
      }
    ],
  },
  "pagos": [
    {
      "forma_pago": "01",
      "total": 50.00,
      "unidad_tiempo": "10",
      "plazo": "30"
    }
  ],
}'</span>
</code></pre><pre class="highlight python tab-python"><code><span class="kn">import</span> <span class="nn">requests</span><span class="p">,</span> <span class="n">json</span>

<span class="n">liquidacion_compras</span> <span class="o">=</span> <span class="p">{</span>
  <span class="s">"ambiente"</span><span class="p">:</span><span class="mi">1</span><span class="p">,</span>
  <span class="s">"tipo_emision"</span><span class="p">:</span><span class="mi">1</span><span class="p">,</span>
  <span class="s">"secuencial"</span><span class="p">:</span><span class="mi">148</span><span class="p">,</span>
  <span class="s">"fecha_emision"</span><span class="p">:</span><span class="s">"2015-02-28T11:28:56.782Z"</span><span class="p">,</span>
  <span class="s">"emisor"</span><span class="p">:{</span>
    <span class="s">"ruc"</span><span class="p">:</span><span class="s">"0910000000001"</span><span class="p">,</span>
    <span class="s">"obligado_contabilidad"</span><span class="p">:</span><span class="n">true</span><span class="p">,</span>
    <span class="s">"contribuyente_especial"</span><span class="p">:</span><span class="s">"12345"</span><span class="p">,</span>
    <span class="s">"nombre_comercial"</span><span class="p">:</span><span class="s">"XYZ Corp"</span><span class="p">,</span>
    <span class="s">"razon_social"</span><span class="p">:</span><span class="s">"XYZ Corporación S.A."</span><span class="p">,</span>
    <span class="s">"direccion"</span><span class="p">:</span><span class="s">"Av. Primera 234 y calle 5ta"</span><span class="p">,</span>
    <span class="s">"establecimiento"</span><span class="p">:{</span>
      <span class="s">"punto_emision"</span><span class="p">:</span><span class="s">"002"</span><span class="p">,</span>
      <span class="s">"codigo"</span><span class="p">:</span><span class="s">"001"</span><span class="p">,</span>
      <span class="s">"direccion"</span><span class="p">:</span><span class="s">"Av. Primera 234 y calle 5ta"</span>
    <span class="p">}</span>
  <span class="p">},</span>
  <span class="s">"moneda"</span><span class="p">:</span><span class="s">"USD"</span><span class="p">,</span>
  <span class="s">"informacion_adicional"</span><span class="p">:{</span>
    <span class="s">"Tiempo de entrega"</span><span class="p">:</span><span class="s">"5 días"</span>
  <span class="p">},</span>
  <span class="s">"totales"</span><span class="p">:{</span>
    <span class="s">"total_sin_impuestos"</span><span class="p">:</span><span class="mf">50.00</span><span class="p">,</span>
    <span class="s">"impuestos"</span><span class="p">:[</span>
      <span class="p">{</span>
        <span class="s">"base_imponible"</span><span class="p">:</span><span class="mf">50.00</span><span class="p">,</span>
        <span class="s">"valor"</span><span class="p">:</span><span class="mf">0.00</span><span class="p">,</span>
        <span class="s">"codigo"</span><span class="p">:</span><span class="s">"2"</span><span class="p">,</span>
        <span class="s">"codigo_porcentaje"</span><span class="p">:</span><span class="s">"0"</span>
      <span class="p">}</span>
    <span class="p">],</span>
    <span class="s">"importe_total"</span><span class="p">:</span><span class="mf">50.00</span><span class="p">,</span>
    <span class="s">"descuento"</span><span class="p">:</span><span class="mf">0.0</span>
  <span class="p">},</span>
  <span class="s">"maquina_fiscal"</span><span class="p">:</span> <span class="p">{</span>
    <span class="s">"marca"</span><span class="p">:</span> <span class="s">"SISPAU"</span><span class="p">,</span>
    <span class="s">"modelo"</span><span class="p">:</span> <span class="s">"ABC123"</span><span class="p">,</span>
    <span class="s">"serie"</span><span class="p">:</span> <span class="s">"CGNC1405"</span>
  <span class="p">},</span>
  <span class="s">"proveedor"</span><span class="p">:{</span>
    <span class="s">"email"</span><span class="p">:</span><span class="s">"juan.perez@xyz.com"</span><span class="p">,</span>
    <span class="s">"identificacion"</span><span class="p">:</span><span class="s">"0987654321"</span><span class="p">,</span>
    <span class="s">"tipo_identificacion"</span><span class="p">:</span><span class="s">"05"</span><span class="p">,</span>
    <span class="s">"razon_social"</span><span class="p">:</span><span class="s">"Juan Pérez"</span><span class="p">,</span>
    <span class="s">"direccion"</span><span class="p">:</span><span class="s">"Calle única Numero 987"</span><span class="p">,</span>
    <span class="s">"telefono"</span><span class="p">:</span><span class="s">"046029400"</span>
  <span class="p">},</span>
  <span class="s">"items"</span><span class="p">:</span> <span class="p">[{</span>
    <span class="s">"cantidad"</span><span class="p">:</span> <span class="mf">1.0</span><span class="p">,</span>
    <span class="s">"codigo_principal"</span><span class="p">:</span> <span class="s">"REEM"</span><span class="p">,</span>
    <span class="s">"codigo_auxiliar"</span><span class="p">:</span> <span class="s">""</span><span class="p">,</span>
    <span class="s">"precio_unitario"</span><span class="p">:</span> <span class="mf">50.00</span><span class="p">,</span>
    <span class="s">"descuento"</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
    <span class="s">"descripcion"</span><span class="p">:</span> <span class="s">"Reembolso de gastos"</span><span class="p">,</span>
    <span class="s">"precio_total_sin_impuestos"</span><span class="p">:</span> <span class="mf">50.00</span><span class="p">,</span>
    <span class="s">"impuestos"</span><span class="p">:</span> <span class="p">[{</span>
      <span class="s">"base_imponible"</span><span class="p">:</span> <span class="mf">50.00</span><span class="p">,</span>
      <span class="s">"valor"</span><span class="p">:</span> <span class="mf">0.00</span><span class="p">,</span>
      <span class="s">"tarifa"</span><span class="p">:</span> <span class="mf">0.00</span><span class="p">,</span>
      <span class="s">"codigo"</span><span class="p">:</span> <span class="s">"2"</span><span class="p">,</span>
      <span class="s">"codigo_porcentaje"</span><span class="p">:</span> <span class="s">"0"</span>
    <span class="p">}],</span>
    <span class="s">"descuento"</span><span class="p">:</span> <span class="mf">0.00</span>
  <span class="p">}],</span>
  <span class="s">"reembolso"</span><span class="p">:</span> <span class="p">{</span>
    <span class="s">"subtotal"</span><span class="p">:</span> <span class="mf">50.00</span><span class="p">,</span>
    <span class="s">"total"</span><span class="p">:</span> <span class="mf">50.00</span><span class="p">,</span>
    <span class="s">"total_impuestos"</span><span class="p">:</span> <span class="mf">0.00</span><span class="p">,</span>
    <span class="s">"documentos"</span><span class="p">:</span> <span class="p">[</span>
      <span class="p">{</span>
        <span class="s">"tipo_identificacion_proveedor"</span><span class="p">:</span> <span class="s">"04"</span><span class="p">,</span>
        <span class="s">"pais_origen_proveedor"</span><span class="p">:</span> <span class="s">"593"</span><span class="p">,</span>
        <span class="s">"tipo_proveedor"</span><span class="p">:</span> <span class="s">"01"</span><span class="p">,</span>
        <span class="s">"identificacion_proveedor"</span><span class="p">:</span> <span class="s">"0918723323001"</span><span class="p">,</span>
        <span class="s">"tipo"</span><span class="p">:</span> <span class="s">"01"</span><span class="p">,</span>
        <span class="s">"numero_autorizacion"</span><span class="p">:</span> <span class="mi">3811201601</span><span class="p">,</span>
        <span class="s">"fecha_emision"</span><span class="p">:</span> <span class="s">"2020-01-28T10:50:26-05:00"</span><span class="p">,</span>
        <span class="s">"codigo_punto_emision"</span><span class="p">:</span> <span class="s">"001"</span><span class="p">,</span>
        <span class="s">"codigo_establecimiento"</span><span class="p">:</span> <span class="s">"003"</span><span class="p">,</span>
        <span class="s">"secuencia"</span><span class="p">:</span> <span class="mi">897</span><span class="p">,</span>
        <span class="s">"impuestos"</span><span class="p">:</span> <span class="p">[</span>
          <span class="p">{</span>
            <span class="s">"tarifa"</span><span class="p">:</span> <span class="mf">0.0</span><span class="p">,</span>
            <span class="s">"codigo"</span><span class="p">:</span> <span class="s">"2"</span><span class="p">,</span>
            <span class="s">"codigo_porcentaje"</span><span class="p">:</span> <span class="s">"0"</span><span class="p">,</span>
            <span class="s">"base_imponible"</span><span class="p">:</span> <span class="mf">50.00</span><span class="p">,</span>
            <span class="s">"valor"</span><span class="p">:</span> <span class="mf">0.00</span><span class="p">,</span>
          <span class="p">}</span>
        <span class="p">],</span>
      <span class="p">}</span>
    <span class="p">],</span>
  <span class="p">},</span>
  <span class="s">"pagos"</span><span class="p">:</span> <span class="p">[</span>
    <span class="p">{</span>
      <span class="s">"forma_pago"</span><span class="p">:</span> <span class="s">"01"</span><span class="p">,</span>
      <span class="s">"total"</span><span class="p">:</span> <span class="mf">50.00</span><span class="p">,</span>
      <span class="s">"unidad_tiempo"</span><span class="p">:</span> <span class="s">"10"</span><span class="p">,</span>
      <span class="s">"plazo"</span><span class="p">:</span> <span class="s">"30"</span>
    <span class="p">}</span>
  <span class="p">]</span>
<span class="p">}</span>
<span class="n">cabeceras</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s">'x-key'</span><span class="p">:</span> <span class="s">'&lt;clave-del-api&gt;'</span><span class="p">,</span>
    <span class="s">'x-password'</span><span class="p">:</span> <span class="s">'&lt;clave-certificado-firma&gt;'</span><span class="p">,</span>
    <span class="s">'content-type'</span><span class="p">:</span> <span class="s">'application/json'</span><span class="p">}</span>
<span class="n">respuesta</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">post</span><span class="p">(</span>
    <span class="s">"https://link.datil.co/purchase-settlements/issue"</span><span class="p">,</span>
    <span class="n">headers</span> <span class="o">=</span> <span class="n">cabeceras</span><span class="p">,</span>
    <span class="n">data</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">liquidacion_compras</span><span class="p">))</span>
</code></pre><pre class="highlight csharp tab-csharp"><code><span class="k">using</span> <span class="nn">RestSharp</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">System</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">System.Collections.Generic</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">System.Linq</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">System.Text</span><span class="p">;</span>

<span class="k">namespace</span> <span class="nn">DatilClient</span> <span class="p">{</span>
  <span class="k">class</span> <span class="nc">InvoicingServiceClient</span> <span class="p">{</span>
    <span class="k">static</span> <span class="k">void</span> <span class="nf">Main</span><span class="p">(</span><span class="kt">string</span><span class="p">[]</span> <span class="n">args</span><span class="p">)</span> <span class="p">{</span>

      <span class="c1">// Este ejemplo utiliza RestSharp</span>
      <span class="c1">// Para instalar anda al menú: tools &gt; Library Package Manager &gt; Package Manager Console</span>
      <span class="c1">// copia y pega y presiona enter: Install-Package RestSharp</span>

      <span class="kt">var</span> <span class="n">client</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">RestClient</span><span class="p">(</span><span class="s">"https://link.datil.co/"</span><span class="p">);</span>
      <span class="kt">var</span> <span class="n">request</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">RestRequest</span><span class="p">(</span><span class="s">"purchase-settlements/issue"</span><span class="p">,</span> <span class="n">Method</span><span class="p">.</span><span class="n">POST</span><span class="p">);</span>
      <span class="n">request</span><span class="p">.</span><span class="nf">AddHeader</span><span class="p">(</span><span class="s">"X-Key"</span><span class="p">,</span> <span class="s">"&lt;clave-del-api&gt;"</span><span class="p">);</span>
      <span class="n">request</span><span class="p">.</span><span class="nf">AddHeader</span><span class="p">(</span><span class="s">"X-Password"</span><span class="p">,</span> <span class="s">"&lt;clave-certificado-firma&gt;"</span><span class="p">);</span>
      <span class="n">request</span><span class="p">.</span><span class="nf">AddHeader</span><span class="p">(</span><span class="s">"Content-Type"</span><span class="p">,</span> <span class="s">"application/json"</span><span class="p">);</span>
      <span class="n">request</span><span class="p">.</span><span class="n">RequestFormat</span> <span class="p">=</span> <span class="n">DataFormat</span><span class="p">.</span><span class="n">Json</span><span class="p">;</span>

      <span class="kt">var</span> <span class="n">body</span> <span class="p">=</span> <span class="p">(</span><span class="err">@</span><span class="s">"{
</span>        <span class="s">""</span><span class="n">ambiente</span><span class="s">""</span><span class="p">:</span><span class="m">1</span><span class="p">,</span>
        <span class="s">""</span><span class="n">tipo_emision</span><span class="s">""</span><span class="p">:</span><span class="m">1</span><span class="p">,</span>
        <span class="s">""</span><span class="n">secuencial</span><span class="s">""</span><span class="p">:</span><span class="m">148</span><span class="p">,</span>
        <span class="s">""</span><span class="n">fecha_emision</span><span class="s">""</span><span class="p">:</span><span class="s">""</span><span class="m">2015</span><span class="p">-</span><span class="m">02</span><span class="p">-</span><span class="m">28</span><span class="n">T11</span><span class="p">:</span><span class="m">28</span><span class="p">:</span><span class="m">56.782</span><span class="n">Z</span><span class="s">""</span><span class="p">,</span>
        <span class="s">""</span><span class="n">emisor</span><span class="s">""</span><span class="p">:{</span>
          <span class="s">""</span><span class="n">ruc</span><span class="s">""</span><span class="p">:</span><span class="s">""</span><span class="m">0910000000001</span><span class="s">""</span><span class="p">,</span>
          <span class="s">""</span><span class="n">obligado_contabilidad</span><span class="s">""</span><span class="p">:</span><span class="k">true</span><span class="p">,</span>
          <span class="s">""</span><span class="n">contribuyente_especial</span><span class="s">""</span><span class="p">:</span><span class="s">""</span><span class="m">12345</span><span class="s">""</span><span class="p">,</span>
          <span class="s">""</span><span class="n">nombre_comercial</span><span class="s">""</span><span class="p">:</span><span class="s">""</span><span class="n">XYZ</span> <span class="n">Corp</span><span class="s">""</span><span class="p">,</span>
          <span class="s">""</span><span class="n">razon_social</span><span class="s">""</span><span class="p">:</span><span class="s">""</span><span class="n">XYZ</span> <span class="n">Corporaci</span><span class="err">ó</span><span class="n">n</span> <span class="n">S</span><span class="p">.</span><span class="n">A</span><span class="p">.</span><span class="s">""</span><span class="p">,</span>
          <span class="s">""</span><span class="n">direccion</span><span class="s">""</span><span class="p">:</span><span class="s">""</span><span class="n">Av</span><span class="p">.</span> <span class="n">Primera</span> <span class="m">234</span> <span class="n">y</span> <span class="n">calle</span> <span class="m">5</span><span class="n">ta</span><span class="s">""</span><span class="p">,</span>
          <span class="s">""</span><span class="n">establecimiento</span><span class="s">""</span><span class="p">:{</span>
            <span class="s">""</span><span class="n">punto_emision</span><span class="s">""</span><span class="p">:</span><span class="s">""</span><span class="m">002</span><span class="s">""</span><span class="p">,</span>
            <span class="s">""</span><span class="n">codigo</span><span class="s">""</span><span class="p">:</span><span class="s">""</span><span class="m">001</span><span class="s">""</span><span class="p">,</span>
            <span class="s">""</span><span class="n">direccion</span><span class="s">""</span><span class="p">:</span><span class="s">""</span><span class="n">Av</span><span class="p">.</span> <span class="n">Primera</span> <span class="m">234</span> <span class="n">y</span> <span class="n">calle</span> <span class="m">5</span><span class="n">ta</span><span class="s">""</span>
          <span class="p">}</span>
        <span class="p">},</span>
        <span class="s">""</span><span class="n">moneda</span><span class="s">""</span><span class="p">:</span><span class="s">""</span><span class="n">USD</span><span class="s">""</span><span class="p">,</span>
        <span class="s">""</span><span class="n">informacion_adicional</span><span class="s">""</span><span class="p">:{</span>
          <span class="s">""</span><span class="n">Tiempo</span> <span class="n">de</span> <span class="n">entrega</span><span class="s">""</span><span class="p">:</span><span class="s">""</span><span class="m">5</span> <span class="n">d</span><span class="err">í</span><span class="k">as</span><span class="s">""</span>
        <span class="p">},</span>
        <span class="s">""</span><span class="n">totales</span><span class="s">""</span><span class="p">:{</span>
          <span class="s">""</span><span class="n">total_sin_impuestos</span><span class="s">""</span><span class="p">:</span><span class="m">50.00</span><span class="p">,</span>
          <span class="s">""</span><span class="n">impuestos</span><span class="s">""</span><span class="p">:[</span>
            <span class="p">{</span>
              <span class="s">""</span><span class="n">base_imponible</span><span class="s">""</span><span class="p">:</span><span class="m">0.0</span><span class="p">,</span>
              <span class="s">""</span><span class="n">valor</span><span class="s">""</span><span class="p">:</span><span class="m">0.0</span><span class="p">,</span>
              <span class="s">""</span><span class="n">codigo</span><span class="s">""</span><span class="p">:</span><span class="s">""</span><span class="m">2</span><span class="s">""</span><span class="p">,</span>
              <span class="s">""</span><span class="n">codigo_porcentaje</span><span class="s">""</span><span class="p">:</span><span class="s">""</span><span class="m">0</span><span class="s">""</span>
            <span class="p">},</span>
            <span class="p">{</span>
              <span class="s">""</span><span class="n">base_imponible</span><span class="s">""</span><span class="p">:</span><span class="m">50.00</span><span class="p">,</span>
              <span class="s">""</span><span class="n">valor</span><span class="s">""</span><span class="p">:</span><span class="m">523.14</span><span class="p">,</span>
              <span class="s">""</span><span class="n">codigo</span><span class="s">""</span><span class="p">:</span><span class="s">""</span><span class="m">2</span><span class="s">""</span><span class="p">,</span>
              <span class="s">""</span><span class="n">codigo_porcentaje</span><span class="s">""</span><span class="p">:</span><span class="s">""</span><span class="m">2</span><span class="s">""</span>
            <span class="p">}</span>
          <span class="p">],</span>
          <span class="s">""</span><span class="n">importe_total</span><span class="s">""</span><span class="p">:</span><span class="m">50.00</span><span class="p">,</span>
          <span class="s">""</span><span class="n">descuento</span><span class="s">""</span><span class="p">:</span><span class="m">0.0</span>
        <span class="p">},</span>
        <span class="s">""</span><span class="n">maquina_fiscal</span><span class="s">""</span><span class="p">:</span> <span class="p">{</span>
          <span class="s">""</span><span class="n">marca</span><span class="s">""</span><span class="p">:</span> <span class="s">""</span><span class="n">SISPAU</span><span class="s">""</span><span class="p">,</span>
          <span class="s">""</span><span class="n">modelo</span><span class="s">""</span><span class="p">:</span> <span class="s">""</span><span class="n">ABC123</span><span class="s">""</span><span class="p">,</span>
          <span class="s">""</span><span class="n">serie</span><span class="s">""</span><span class="p">:</span> <span class="s">""</span><span class="n">CGNC1405</span><span class="s">""</span>
        <span class="p">},</span>
        <span class="s">""</span><span class="n">proveedor</span><span class="s">""</span><span class="p">:{</span>
          <span class="s">""</span><span class="n">email</span><span class="s">""</span><span class="p">:</span><span class="s">""</span><span class="n">juan</span><span class="p">.</span><span class="n">perez@xyz</span><span class="p">.</span><span class="n">com</span><span class="s">""</span><span class="p">,</span>
          <span class="s">""</span><span class="n">identificacion</span><span class="s">""</span><span class="p">:</span><span class="s">""</span><span class="m">0987654321</span><span class="s">""</span><span class="p">,</span>
          <span class="s">""</span><span class="n">tipo_identificacion</span><span class="s">""</span><span class="p">:</span><span class="s">""</span><span class="m">05</span><span class="s">""</span><span class="p">,</span>
          <span class="s">""</span><span class="n">razon_social</span><span class="s">""</span><span class="p">:</span><span class="s">""</span><span class="n">Juan</span> <span class="n">P</span><span class="err">é</span><span class="n">rez</span><span class="s">""</span><span class="p">,</span>
          <span class="s">""</span><span class="n">direccion</span><span class="s">""</span><span class="p">:</span><span class="s">""</span><span class="n">Calle</span> <span class="err">ú</span><span class="n">nica</span> <span class="n">Numero</span> <span class="m">987</span><span class="s">""</span><span class="p">,</span>
          <span class="s">""</span><span class="n">telefono</span><span class="s">""</span><span class="p">:</span><span class="s">""</span><span class="m">046029400</span><span class="s">""</span>
        <span class="p">},</span>
        <span class="s">""</span><span class="n">items</span><span class="s">""</span><span class="p">:[</span>
          <span class="p">{</span>
            <span class="s">""</span><span class="n">cantidad</span><span class="s">""</span><span class="p">:</span><span class="m">1.0</span><span class="p">,</span>
            <span class="s">""</span><span class="n">codigo_principal</span><span class="s">""</span><span class="p">:</span><span class="s">""</span><span class="n">REEM</span><span class="s">""</span><span class="p">,</span>
            <span class="s">""</span><span class="n">codigo_auxiliar</span><span class="s">""</span><span class="p">:</span> <span class="s">""""</span><span class="p">,</span>
            <span class="s">""</span><span class="n">precio_unitario</span><span class="s">""</span><span class="p">:</span> <span class="m">50.00</span><span class="p">,</span>
            <span class="s">""</span><span class="n">descripcion</span><span class="s">""</span><span class="p">:</span> <span class="s">""</span><span class="n">Reembolso</span> <span class="n">de</span> <span class="n">gastos</span><span class="s">""</span><span class="p">,</span>
            <span class="s">""</span><span class="n">precio_total_sin_impuestos</span><span class="s">""</span><span class="p">:</span> <span class="m">50.00</span><span class="p">,</span>
            <span class="s">""</span><span class="n">impuestos</span><span class="s">""</span><span class="p">:</span> <span class="p">[</span>
              <span class="p">{</span>
                <span class="s">""</span><span class="n">base_imponible</span><span class="s">""</span><span class="p">:</span><span class="m">50.00</span><span class="p">,</span>
                <span class="s">""</span><span class="n">valor</span><span class="s">""</span><span class="p">:</span><span class="m">0.00</span><span class="p">,</span>
                <span class="s">""</span><span class="n">tarifa</span><span class="s">""</span><span class="p">:</span><span class="m">0.00</span><span class="p">,</span>
                <span class="s">""</span><span class="n">codigo</span><span class="s">""</span><span class="p">:</span><span class="s">""</span><span class="m">2</span><span class="s">""</span><span class="p">,</span>
                <span class="s">""</span><span class="n">codigo_porcentaje</span><span class="s">""</span><span class="p">:</span><span class="s">""</span><span class="m">0</span><span class="s">""</span>
              <span class="p">}</span>
            <span class="p">],</span>
            <span class="s">""</span><span class="n">detalles_adicionales</span><span class="s">""</span><span class="p">:</span> <span class="p">{</span>
              <span class="s">""</span><span class="n">Peso</span><span class="s">""</span><span class="p">:</span><span class="s">""</span><span class="m">5000.0000</span><span class="s">""</span>
            <span class="p">},</span>
            <span class="s">""</span><span class="n">descuento</span><span class="s">""</span><span class="p">:</span> <span class="m">0.0</span><span class="p">,</span>
          <span class="p">}</span>
      <span class="p">],</span>
      <span class="s">""</span><span class="n">reembolso</span><span class="s">""</span><span class="p">:</span> <span class="p">{</span>
        <span class="s">""</span><span class="n">subtotal</span><span class="s">""</span><span class="p">:</span> <span class="m">50.00</span><span class="p">,</span>
        <span class="s">""</span><span class="n">total</span><span class="s">""</span><span class="p">:</span> <span class="m">50.00</span><span class="p">,</span>
        <span class="s">""</span><span class="n">total_impuestos</span><span class="s">""</span><span class="p">:</span> <span class="m">0.00</span><span class="p">,</span>
        <span class="s">""</span><span class="n">documentos</span><span class="s">""</span><span class="p">:</span> <span class="p">[</span>
          <span class="p">{</span>
            <span class="s">""</span><span class="n">tipo_identificacion_proveedor</span><span class="s">""</span><span class="p">:</span> <span class="s">""</span><span class="m">04</span><span class="s">""</span><span class="p">,</span>
            <span class="s">""</span><span class="n">pais_origen_proveedor</span><span class="s">""</span><span class="p">:</span> <span class="s">""</span><span class="m">593</span><span class="s">""</span><span class="p">,</span>
            <span class="s">""</span><span class="n">tipo_proveedor</span><span class="s">""</span><span class="p">:</span> <span class="s">""</span><span class="m">01</span><span class="s">""</span><span class="p">,</span>
            <span class="s">""</span><span class="n">identificacion_proveedor</span><span class="s">""</span><span class="p">:</span> <span class="s">""</span><span class="m">0918723323001</span><span class="s">""</span><span class="p">,</span>
            <span class="s">""</span><span class="n">tipo</span><span class="s">""</span><span class="p">:</span> <span class="s">""</span><span class="m">01</span><span class="s">""</span><span class="p">,</span>
            <span class="s">""</span><span class="n">numero_autorizacion</span><span class="s">""</span><span class="p">:</span> <span class="m">3811201601</span><span class="p">,</span>
            <span class="s">""</span><span class="n">fecha_emision</span><span class="s">""</span><span class="p">:</span> <span class="s">""</span><span class="m">2020</span><span class="p">-</span><span class="m">01</span><span class="p">-</span><span class="m">28</span><span class="n">T10</span><span class="p">:</span><span class="m">50</span><span class="p">:</span><span class="m">26</span><span class="p">-</span><span class="m">05</span><span class="p">:</span><span class="m">00</span><span class="s">""</span><span class="p">,</span>
            <span class="s">""</span><span class="n">codigo_punto_emision</span><span class="s">""</span><span class="p">:</span> <span class="s">""</span><span class="m">001</span><span class="s">""</span><span class="p">,</span>
            <span class="s">""</span><span class="n">codigo_establecimiento</span><span class="s">""</span><span class="p">:</span> <span class="s">""</span><span class="m">003</span><span class="s">""</span><span class="p">,</span>
            <span class="s">""</span><span class="n">secuencia</span><span class="s">""</span><span class="p">:</span> <span class="m">897</span><span class="p">,</span>
            <span class="s">""</span><span class="n">impuestos</span><span class="s">""</span><span class="p">:</span> <span class="p">[</span>
              <span class="p">{</span>
                <span class="s">""</span><span class="n">tarifa</span><span class="s">""</span><span class="p">:</span> <span class="m">0.0</span><span class="p">,</span>
                <span class="s">""</span><span class="n">codigo</span><span class="s">""</span><span class="p">:</span> <span class="s">""</span><span class="m">2</span><span class="s">""</span><span class="p">,</span>
                <span class="s">""</span><span class="n">codigo_porcentaje</span><span class="s">""</span><span class="p">:</span> <span class="s">""</span><span class="m">0</span><span class="s">""</span><span class="p">,</span>
                <span class="s">""</span><span class="n">base_imponible</span><span class="s">""</span><span class="p">:</span> <span class="m">50.00</span><span class="p">,</span>
                <span class="s">""</span><span class="n">valor</span><span class="s">""</span><span class="p">:</span> <span class="m">0.00</span><span class="p">,</span>
              <span class="p">}</span>
            <span class="p">],</span>
          <span class="p">}</span>
        <span class="p">],</span>
      <span class="p">},</span>
      <span class="s">""</span><span class="n">pagos</span><span class="s">""</span><span class="p">:</span> <span class="p">[</span>
        <span class="p">{</span>
          <span class="s">""</span><span class="n">forma_pago</span><span class="s">""</span><span class="p">:</span> <span class="s">""</span><span class="m">01</span><span class="s">""</span><span class="p">,</span>
          <span class="s">""</span><span class="n">total</span><span class="s">""</span><span class="p">:</span> <span class="m">50.00</span><span class="p">,</span>
          <span class="s">""</span><span class="n">unidad_tiempo</span><span class="s">""</span><span class="p">:</span> <span class="s">""</span><span class="m">10</span><span class="s">""</span><span class="p">,</span>
          <span class="s">""</span><span class="n">plazo</span><span class="s">""</span><span class="p">:</span> <span class="s">""</span><span class="m">30</span><span class="s">""</span>
        <span class="p">}</span>
      <span class="p">]</span>
      <span class="p">}</span><span class="s">");
</span>      <span class="n">request</span><span class="p">.</span><span class="nf">AddParameter</span><span class="p">(</span><span class="s">"application/json"</span><span class="p">,</span> <span class="n">body</span><span class="p">,</span> <span class="n">ParameterType</span><span class="p">.</span><span class="n">RequestBody</span><span class="p">);</span>
      <span class="n">IRestResponse</span> <span class="n">response</span> <span class="p">=</span> <span class="n">client</span><span class="p">.</span><span class="nf">Execute</span><span class="p">(</span><span class="n">request</span><span class="p">);</span>

      <span class="n">Console</span><span class="p">.</span><span class="nf">WriteLine</span><span class="p">(</span><span class="n">response</span><span class="p">.</span><span class="n">Content</span><span class="p">);</span>
      <span class="n">Console</span><span class="p">.</span><span class="nf">ReadLine</span><span class="p">();</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">}</span>
</code></pre>
<p>Para la emisión de una liquidación de compras de reembolso se debe enviar la información completa del
comprobante en el cuerpo del requerimiento en formato JSON.</p>

<table><thead>
<tr>
<th>Parámetro</th>
<th>Tipo</th>
<th>Descripción</th>
</tr>
</thead><tbody>
<tr>
<td>secuencial</td>
<td>string</td>
<td>Número de secuencia de la liquidación de compras. <strong>Requerido</strong></td>
</tr>
<tr>
<td>emisor</td>
<td><a href="#emisor">emisor</a></td>
<td>Información completa del emisor. <strong>Requerido</strong></td>
</tr>
<tr>
<td>moneda</td>
<td>string</td>
<td>Código <a href="https://en.wikipedia.org/wiki/ISO_4217">ISO</a> de la moneda. <strong>Requerido</strong></td>
</tr>
<tr>
<td>fecha_emision</td>
<td>string</td>
<td>Fecha de emisión en formato AAAA-MM-DDHoraZonaHoraria, definido en el estándar <a href="http://tools.ietf.org/html/rfc3339#section-5.6">ISO8601</a>.</td>
</tr>
<tr>
<td>ambiente</td>
<td>integer</td>
<td>Pruebas: <code>1</code>.<br>Producción <code>2</code>.<br><strong>Requerido</strong></td>
</tr>
<tr>
<td>totales</td>
<td>objeto tipo <a href="#totales-liquidacion">totales</a></td>
<td>Listado de totales. <strong>Requerido</strong></td>
</tr>
<tr>
<td>maquina_fiscal</td>
<td>objeto <a href="#maquina-fiscal">maquina_fiscal</a></td>
<td>Información de máquina fiscal.</td>
</tr>
<tr>
<td>proveedor</td>
<td>objeto tipo <a href="#persona">persona</a></td>
<td>Información del proveedor. <strong>Requerido</strong></td>
</tr>
<tr>
<td>tipo_emision</td>
<td>integer</td>
<td>Emisión normal: <code>1</code>.<br>Emisión por indisponibilidad: <code>2</code><br><strong>Requerido</strong></td>
</tr>
<tr>
<td>items</td>
<td>listado de objetos tipo <a href="#item-de-factura">item</a></td>
<td>Items incluídos en la liquidación de compras. Para liquidaciones de compras de reembolso el impuesto del ítem es No Objeto de Impuesto <strong>Requerido</strong></td>
</tr>
<tr>
<td>version</td>
<td>string</td>
<td>Versión del formato de comprobantes electrónicos de SRI. Si no se especifica, se utilizará la última revisión del formato implementada,</td>
</tr>
<tr>
<td>clave_acceso</td>
<td>string</td>
<td>La clave de acceso representa un identificador único del comprobante. Si esta información no es provista, Dátil la generará.<br>¿Cómo <a href="#clave-de-acceso">generar</a> la clave de acceso?</td>
</tr>
<tr>
<td>informacion_adicional</td>
<td>objeto</td>
<td>Información adicional adjunta al comprobante en forma de diccionario. Ejemplo:<br><code>{&quot;plan&quot;: &quot;Inicial&quot;, &quot;vigencia&quot;: &quot;1 mes&quot;}</code></td>
</tr>
<tr>
<td>pagos</td>
<td>Listado de objetos tipo <a href="#pagos-liquidacion">pagos</a></td>
<td>Listado de formas de pago aplicables a la liquidación de compras. <strong>Requerido</strong></td>
</tr>
<tr>
<td>reembolso</td>
<td>objeto tipo <a href="#reembolso">reembolso</a></td>
<td>Información de reembolso. <strong>Requerido</strong></td>
</tr>
</tbody></table>

<h4 id="totales-liquidacion"> Totales </h4>

<table><thead>
<tr>
<th>Parámetro</th>
<th>Tipo</th>
<th>Descripción</th>
</tr>
</thead><tbody>
<tr>
<td>total_sin_impuestos</td>
<td>float</td>
<td>Total antes de los impuestos. <strong>Requerido</strong></td>
</tr>
<tr>
<td>descuento</td>
<td>float</td>
<td>Suma de los descuentos de cada ítem. <strong>Requerido</strong></td>
</tr>
<tr>
<td>importe_total</td>
<td>float</td>
<td>Total incluyendo impuestos. <strong>Requerido</strong></td>
</tr>
<tr>
<td>impuestos</td>
<td>listado de objetos <a href="#total-impuesto">total impuesto</a></td>
<td>Listado de impuesto totalizados. <strong>Requerido</strong></td>
</tr>
</tbody></table>

<h4 id="pagos-liquidacion">Pagos</h4>

<table><thead>
<tr>
<th>Parámetro</th>
<th>Tipo</th>
<th>Descripción</th>
</tr>
</thead><tbody>
<tr>
<td>forma_pago</td>
<td>string</td>
<td>Código del <a href="#tipos-de-forma-de-pago-del-sri">tipo de forma de pago</a>. <strong>Requerido</strong></td>
</tr>
<tr>
<td>total</td>
<td>float</td>
<td>Total aplicable a la forma de pago especificada. <strong>Requerido</strong></td>
</tr>
<tr>
<td>unidad_tiempo</td>
<td>string</td>
<td>Máximo 10 caracteres.</td>
</tr>
<tr>
<td>plazo</td>
<td>string</td>
<td>Máximo 14 caracteres.</td>
</tr>
</tbody></table>
<h3 id='respuesta-2'>Respuesta</h3>
<blockquote>
<h4 id='respuesta-de-ejemplo-2'>Respuesta de ejemplo</h4></blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"ambiente"</span><span class="p">:</span><span class="mi">1</span><span class="p">,</span><span class="w">
  </span><span class="s2">"tipo_emision"</span><span class="p">:</span><span class="mi">1</span><span class="p">,</span><span class="w">
  </span><span class="s2">"secuencial"</span><span class="p">:</span><span class="mi">148</span><span class="p">,</span><span class="w">
  </span><span class="s2">"fecha_emision"</span><span class="p">:</span><span class="s2">"2015-02-28T11:28:56.782Z"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"emisor"</span><span class="p">:{</span><span class="w">
    </span><span class="s2">"ruc"</span><span class="p">:</span><span class="s2">"0910000000001"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"obligado_contabilidad"</span><span class="p">:</span><span class="kc">true</span><span class="p">,</span><span class="w">
    </span><span class="s2">"contribuyente_especial"</span><span class="p">:</span><span class="s2">"12345"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"nombre_comercial"</span><span class="p">:</span><span class="s2">"XYZ Corp"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"razon_social"</span><span class="p">:</span><span class="s2">"XYZ Corporación S.A."</span><span class="p">,</span><span class="w">
    </span><span class="s2">"direccion"</span><span class="p">:</span><span class="s2">"Av. Primera 234 y calle 5ta"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"establecimiento"</span><span class="p">:{</span><span class="w">
      </span><span class="s2">"punto_emision"</span><span class="p">:</span><span class="s2">"002"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"codigo"</span><span class="p">:</span><span class="s2">"001"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"direccion"</span><span class="p">:</span><span class="s2">"Av. Primera 234 y calle 5ta"</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="s2">"moneda"</span><span class="p">:</span><span class="s2">"USD"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"informacion_adicional"</span><span class="p">:{</span><span class="w">
    </span><span class="s2">"Tiempo de entrega"</span><span class="p">:</span><span class="s2">"5 días"</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="s2">"totales"</span><span class="p">:{</span><span class="w">
    </span><span class="s2">"total_sin_impuestos"</span><span class="p">:</span><span class="mf">50.00</span><span class="p">,</span><span class="w">
    </span><span class="s2">"impuestos"</span><span class="p">:[</span><span class="w">
      </span><span class="p">{</span><span class="w">
        </span><span class="s2">"base_imponible"</span><span class="p">:</span><span class="mf">50.00</span><span class="p">,</span><span class="w">
        </span><span class="s2">"valor"</span><span class="p">:</span><span class="mf">0.00</span><span class="p">,</span><span class="w">
        </span><span class="s2">"codigo"</span><span class="p">:</span><span class="s2">"2"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"codigo_porcentaje"</span><span class="p">:</span><span class="s2">"0"</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">],</span><span class="w">
    </span><span class="s2">"importe_total"</span><span class="p">:</span><span class="mf">50.00</span><span class="p">,</span><span class="w">
    </span><span class="s2">"descuento"</span><span class="p">:</span><span class="mf">0.0</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="s2">"maquina_fiscal"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"marca"</span><span class="p">:</span><span class="w"> </span><span class="s2">"SISPAU"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"modelo"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ABC123"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"serie"</span><span class="p">:</span><span class="w"> </span><span class="s2">"CGNC1405"</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="s2">"proveedor"</span><span class="p">:{</span><span class="w">
    </span><span class="s2">"email"</span><span class="p">:</span><span class="s2">"juan.perez@xyz.com"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"identificacion"</span><span class="p">:</span><span class="s2">"0987654321"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"tipo_identificacion"</span><span class="p">:</span><span class="s2">"05"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"razon_social"</span><span class="p">:</span><span class="s2">"Juan Pérez"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"direccion"</span><span class="p">:</span><span class="s2">"Calle única Numero 987"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"telefono"</span><span class="p">:</span><span class="s2">"046029400"</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="s2">"items"</span><span class="p">:</span><span class="w"> </span><span class="p">[{</span><span class="w">
    </span><span class="s2">"cantidad"</span><span class="p">:</span><span class="w"> </span><span class="mf">1.0</span><span class="p">,</span><span class="w">
    </span><span class="s2">"codigo_principal"</span><span class="p">:</span><span class="w"> </span><span class="s2">"REEM"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"codigo_auxiliar"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w">
    </span><span class="s2">"precio_unitario"</span><span class="p">:</span><span class="w"> </span><span class="mf">50.00</span><span class="p">,</span><span class="w">
    </span><span class="s2">"descuento"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
    </span><span class="s2">"descripcion"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Reembolso de gastos"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"precio_total_sin_impuestos"</span><span class="p">:</span><span class="w"> </span><span class="mf">50.00</span><span class="p">,</span><span class="w">
    </span><span class="s2">"impuestos"</span><span class="p">:</span><span class="w"> </span><span class="p">[{</span><span class="w">
      </span><span class="s2">"base_imponible"</span><span class="p">:</span><span class="w"> </span><span class="mf">50.00</span><span class="p">,</span><span class="w">
      </span><span class="s2">"valor"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.00</span><span class="p">,</span><span class="w">
      </span><span class="s2">"tarifa"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.00</span><span class="p">,</span><span class="w">
      </span><span class="s2">"codigo"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"codigo_porcentaje"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0"</span><span class="w">
    </span><span class="p">}],</span><span class="w">
    </span><span class="s2">"descuento"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.00</span><span class="w">
  </span><span class="p">}],</span><span class="w">
  </span><span class="s2">"reembolso"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"subtotal"</span><span class="p">:</span><span class="w"> </span><span class="mf">50.00</span><span class="p">,</span><span class="w">
    </span><span class="s2">"total"</span><span class="p">:</span><span class="w"> </span><span class="mf">50.00</span><span class="p">,</span><span class="w">
    </span><span class="s2">"total_impuestos"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.00</span><span class="p">,</span><span class="w">
    </span><span class="s2">"documentos"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
      </span><span class="p">{</span><span class="w">
        </span><span class="s2">"tipo_identificacion_proveedor"</span><span class="p">:</span><span class="w"> </span><span class="s2">"04"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"pais_origen_proveedor"</span><span class="p">:</span><span class="w"> </span><span class="s2">"593"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"tipo_proveedor"</span><span class="p">:</span><span class="w"> </span><span class="s2">"01"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"identificacion_proveedor"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0918723323001"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"tipo"</span><span class="p">:</span><span class="w"> </span><span class="s2">"01"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"numero_autorizacion"</span><span class="p">:</span><span class="w"> </span><span class="mi">3811201601</span><span class="p">,</span><span class="w">
        </span><span class="s2">"fecha_emision"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2020-01-28T10:50:26-05:00"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"codigo_punto_emision"</span><span class="p">:</span><span class="w"> </span><span class="s2">"001"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"codigo_establecimiento"</span><span class="p">:</span><span class="w"> </span><span class="s2">"003"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"secuencia"</span><span class="p">:</span><span class="w"> </span><span class="mi">897</span><span class="p">,</span><span class="w">
        </span><span class="s2">"impuestos"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
          </span><span class="p">{</span><span class="w">
            </span><span class="s2">"tarifa"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.0</span><span class="p">,</span><span class="w">
            </span><span class="s2">"codigo"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"codigo_porcentaje"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"base_imponible"</span><span class="p">:</span><span class="w"> </span><span class="mf">50.00</span><span class="p">,</span><span class="w">
            </span><span class="s2">"valor"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.00</span><span class="p">,</span><span class="w">
          </span><span class="p">}</span><span class="w">
        </span><span class="p">],</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">],</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="s2">"pagos"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="s2">"forma_pago"</span><span class="p">:</span><span class="w"> </span><span class="s2">"01"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"total"</span><span class="p">:</span><span class="w"> </span><span class="mf">50.00</span><span class="p">,</span><span class="w">
      </span><span class="s2">"unidad_tiempo"</span><span class="p">:</span><span class="w"> </span><span class="s2">"10"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"plazo"</span><span class="p">:</span><span class="w"> </span><span class="s2">"30"</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>Retorna un objeto tipo <strong><a href="#requerimiento-liquidacion">liquidacion</a></strong> que incluye un nuevo parámetro <code>id</code>,
el cual identifica de manera única a la liquidación de compras. El campo <code>clave_acceso</code> generado
también se incluirá como parte de la respuesta.</p>
<h2 id='consulta-de-una-liquidacion-de-compra'>Consulta de una liquidación de compra</h2>
<p>Consulta una liquidación de compra para obtener toda la información del comprobante, incluyendo
el estado del mismo.
El parámetro <code>estado</code> de la respuesta obtenida al invocar esta operación, indica
el estado actual del comprobante.</p>

<p>Si es necesario conocer en detalle, en que estado del <a href="#proceso-de-emision">proceso de emisión</a>,
se debe examinar los parámetros <code>envio_sri</code> y <code>autorizacion_sri</code> de la respuesta.</p>
<h3 id='operacion-3'>Operación</h3>
<p><code>GET /purchase-settlements/&lt;purchase-settlement-ID&gt;</code></p>
<h3 id='requerimiento'>Requerimiento</h3>
<blockquote>
<h4 id='requerimiento-de-ejemplo-4'>Requerimiento de ejemplo</h4></blockquote>
<pre class="highlight shell tab-shell"><code>curl -v https://link.datil.co/purchase-settlements/&lt;id-liquidacion&gt; <span class="se">\</span>
-H <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
-H <span class="s2">"X-Key: &lt;clave-del-api&gt;"</span> <span class="se">\</span>
-H <span class="s2">"X-Password: &lt;clave-certificado-firma&gt;"</span> <span class="se">\</span>
</code></pre><pre class="highlight python tab-python"><code><span class="kn">import</span> <span class="nn">requests</span>
<span class="n">cabeceras</span> <span class="o">=</span> <span class="p">{</span><span class="s">'x-key'</span><span class="p">:</span> <span class="s">'&lt;clave-del-api&gt;'</span><span class="p">}</span>
<span class="n">respuesta</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span>
    <span class="s">'https://link.datil.co/purchase-settlements/&lt;id-liquidacion&gt;'</span><span class="p">,</span>
    <span class="n">headers</span> <span class="o">=</span> <span class="n">cabeceras</span><span class="p">)</span>
</code></pre><pre class="highlight csharp tab-csharp"><code><span class="k">using</span> <span class="nn">RestSharp</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">System</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">System.Collections.Generic</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">System.Linq</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">System.Text</span><span class="p">;</span>

<span class="k">namespace</span> <span class="nn">DatilClient</span> <span class="p">{</span>
  <span class="k">class</span> <span class="nc">InvoicingServiceClient</span> <span class="p">{</span>
    <span class="k">static</span> <span class="k">void</span> <span class="nf">Main</span><span class="p">(</span><span class="kt">string</span><span class="p">[]</span> <span class="n">args</span><span class="p">)</span> <span class="p">{</span>

      <span class="kt">var</span> <span class="n">client</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">RestClient</span><span class="p">(</span><span class="s">"https://link.datil.co/"</span><span class="p">);</span>
      <span class="kt">var</span> <span class="n">idLiquidacion</span> <span class="p">=</span> <span class="s">"&lt;id-liquidacion&gt;"</span><span class="p">;</span>
      <span class="kt">var</span> <span class="n">request</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">RestRequest</span><span class="p">(</span><span class="s">"purchase-settlements/"</span> <span class="p">+</span> <span class="n">idLiquidacion</span><span class="p">,</span> <span class="n">Method</span><span class="p">.</span><span class="n">GET</span><span class="p">);</span>
      <span class="n">request</span><span class="p">.</span><span class="nf">AddHeader</span><span class="p">(</span><span class="s">"X-Key"</span><span class="p">,</span> <span class="s">"&lt;clave-del-api&gt;"</span><span class="p">);</span>

      <span class="n">IRestResponse</span> <span class="n">response</span> <span class="p">=</span> <span class="n">client</span><span class="p">.</span><span class="nf">Execute</span><span class="p">(</span><span class="n">request</span><span class="p">);</span>

      <span class="n">Console</span><span class="p">.</span><span class="nf">WriteLine</span><span class="p">(</span><span class="n">response</span><span class="p">.</span><span class="n">Content</span><span class="p">);</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">}</span>
</code></pre>
<p>Reemplaza en la ruta <code>&lt;purchase-settlement-ID&gt;</code> por el <code>id</code> de la liquidación de compra que necesitas consultar.</p>
<h3 id='respuesta-3'>Respuesta</h3>
<blockquote>
<h4 id='respuesta-de-ejemplo-3'>Respuesta de ejemplo</h4></blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"abcf12343faad0678512343faad06785"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"secuencial"</span><span class="p">:</span><span class="w"> </span><span class="s2">"16"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"fecha_emision"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2019-05-03"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"version"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1.0.0"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"clave_acceso"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1505201501099271255400110011000000000162092727615"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"emisor"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"ruc"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0992712554001"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"razon_social"</span><span class="p">:</span><span class="w"> </span><span class="s2">"DATILMEDIA S.A."</span><span class="p">,</span><span class="w">
        </span><span class="s2">"nombre_comercial"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Dátil"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"direccion"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
        </span><span class="s2">"obligado_contabilidad"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
        </span><span class="s2">"contribuyente_especial"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w">
        </span><span class="s2">"establecimiento"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="s2">"codigo"</span><span class="p">:</span><span class="w"> </span><span class="s2">"001"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"direccion"</span><span class="p">:</span><span class="w"> </span><span class="s2">"V.E. 112 Y CIRCUNVALACION NORTE"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"punto_emision"</span><span class="p">:</span><span class="w"> </span><span class="s2">"100"</span><span class="w">
        </span><span class="p">}</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="s2">"estado"</span><span class="p">:</span><span class="w"> </span><span class="s2">"AUTORIZADO"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"correos_enviados"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="p">{</span><span class="w">
            </span><span class="s2">"fecha_envio"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2019-05-03T16:36:48.274604"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"destinatarios"</span><span class="p">:</span><span class="w"> </span><span class="s2">"cplaza@gye593.com"</span><span class="w">
        </span><span class="p">}</span><span class="w">
    </span><span class="p">],</span><span class="w">
    </span><span class="s2">"moneda"</span><span class="p">:</span><span class="w"> </span><span class="s2">"USD"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"informacion_adicional"</span><span class="p">:</span><span class="w"> </span><span class="p">[],</span><span class="w">
    </span><span class="s2">"ambiente"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"totales"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"total_sin_impuestos"</span><span class="p">:</span><span class="w"> </span><span class="s2">"150.00"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"descuento"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0.00"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"impuestos"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
            </span><span class="p">{</span><span class="w">
                </span><span class="s2">"codigo"</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w">
                </span><span class="s2">"codigo_porcentaje"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2"</span><span class="p">,</span><span class="w">
                </span><span class="s2">"base_imponible"</span><span class="p">:</span><span class="w"> </span><span class="s2">"150.00"</span><span class="p">,</span><span class="w">
                </span><span class="s2">"valor"</span><span class="p">:</span><span class="w"> </span><span class="s2">"18.00"</span><span class="w">
            </span><span class="p">}</span><span class="w">
        </span><span class="p">],</span><span class="w">
        </span><span class="s2">"importe_total"</span><span class="p">:</span><span class="w"> </span><span class="s2">"168.00"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="s2">"maquina_fiscal"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"marca"</span><span class="p">:</span><span class="w"> </span><span class="s2">"SISPAU"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"modelo"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ABC123"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"serie"</span><span class="p">:</span><span class="w"> </span><span class="s2">"CGNC1405"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="s2">"proveedor"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"razon_social"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Carlos L. Plaza"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"identificacion"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0900102222"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"tipo_identificacion"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
        </span><span class="s2">"email"</span><span class="p">:</span><span class="w"> </span><span class="s2">"cplaza@gye593.com"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"direccion"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Calle Uno y Calle Dos"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"telefono"</span><span class="p">:</span><span class="w"> </span><span class="s2">"043334445"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="s2">"envio_sri"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"mensajes"</span><span class="p">:</span><span class="w"> </span><span class="p">[],</span><span class="w">
        </span><span class="s2">"estado"</span><span class="p">:</span><span class="w"> </span><span class="s2">"RECIBIDA"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"fecha"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="s2">"tipo_emision"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"items"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="p">{</span><span class="w">
            </span><span class="s2">"detalles_adicionales"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                </span><span class="s2">"Estadía"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2 noches"</span><span class="p">,</span><span class="w">
                </span><span class="s2">"Habitación"</span><span class="p">:</span><span class="w"> </span><span class="s2">"203"</span><span class="w">
            </span><span class="p">},</span><span class="w">
            </span><span class="s2">"cantidad"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1.000000"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"codigo_principal"</span><span class="p">:</span><span class="w"> </span><span class="s2">"HAB"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"codigo_auxiliar"</span><span class="p">:</span><span class="w"> </span><span class="s2">"DOB"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"descripcion"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Habitación doble"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"precio_unitario"</span><span class="p">:</span><span class="w"> </span><span class="s2">"150.000000"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"descuento"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0.00"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"precio_total_sin_impuestos"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w">
            </span><span class="s2">"impuestos"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
                </span><span class="p">{</span><span class="w">
                    </span><span class="s2">"tarifa"</span><span class="p">:</span><span class="w"> </span><span class="s2">"12.00"</span><span class="p">,</span><span class="w">
                    </span><span class="s2">"codigo"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2"</span><span class="p">,</span><span class="w">
                    </span><span class="s2">"codigo_porcentaje"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2"</span><span class="p">,</span><span class="w">
                    </span><span class="s2">"base_imponible"</span><span class="p">:</span><span class="w"> </span><span class="s2">"150.00"</span><span class="p">,</span><span class="w">
                    </span><span class="s2">"valor"</span><span class="p">:</span><span class="w"> </span><span class="s2">"18.00"</span><span class="w">
                </span><span class="p">}</span><span class="w">
            </span><span class="p">],</span><span class="w">
            </span><span class="s2">"unidad_medida"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Kilos"</span><span class="w">
        </span><span class="p">}</span><span class="w">
    </span><span class="p">],</span><span class="w">  
    </span><span class="s2">"pagos"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
      </span><span class="p">{</span><span class="w">
        </span><span class="s2">"forma_pago"</span><span class="p">:</span><span class="w"> </span><span class="s2">"01"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"total"</span><span class="p">:</span><span class="w"> </span><span class="mf">168.0</span><span class="p">,</span><span class="w">
        </span><span class="s2">"unidad_tiempo"</span><span class="p">:</span><span class="w"> </span><span class="s2">"10"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"plazo"</span><span class="p">:</span><span class="w"> </span><span class="s2">"30"</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">],</span><span class="w">
    </span><span class="s2">"autorizacion"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"estado"</span><span class="p">:</span><span class="w"> </span><span class="s2">"AUTORIZADO"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"mensajes"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
            </span><span class="p">{</span><span class="w">
                </span><span class="s2">"identificador"</span><span class="p">:</span><span class="w"> </span><span class="s2">"60"</span><span class="p">,</span><span class="w">
                </span><span class="s2">"mensaje"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ESTE PROCESO FUE REALIZADO EN EL AMBIENTE DE PRUEBAS"</span><span class="p">,</span><span class="w">
                </span><span class="s2">"tipo"</span><span class="p">:</span><span class="w"> </span><span class="s2">"INFORMATIVO"</span><span class="p">,</span><span class="w">
                </span><span class="s2">"informacion_adicional"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="w">
            </span><span class="p">}</span><span class="w">
        </span><span class="p">],</span><span class="w">
        </span><span class="s2">"numero"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1505201516323509927125540010266935227"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"fecha"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2015-05-15T16:32:35.000380"</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<table><thead>
<tr>
<th>Parámetro</th>
<th>Tipo</th>
<th>Descripción</th>
</tr>
</thead><tbody>
<tr>
<td>secuencial</td>
<td>string</td>
<td>Número de secuencia de la liquidación de compras.</td>
</tr>
<tr>
<td>estado</td>
<td>string</td>
<td>Posibles valores: <code>AUTORIZADO</code>, <code>NO AUTORIZADO</code>, <code>ENVIADO</code>, <code>DEVUELTO</code>, <code>RECIBIDO</code>, <code>ERROR</code></td>
</tr>
<tr>
<td>fecha_emision</td>
<td>string</td>
<td>Fecha de emisión en formato AAAA-MM-DDHoraZonaHoraria, definido en el estándar <a href="http://tools.ietf">ISO8601</a>.</td>
</tr>
<tr>
<td>clave_acceso</td>
<td>string</td>
<td>La clave de acceso representa un identificador único del comprobante. Si esta información no es provista, Dátil la generará.<br>¿Cómo <a href="#clave-de-acceso">generar</a> la clave de acceso?</td>
</tr>
<tr>
<td>envio_sri</td>
<td>objeto tipo <a href="#envio-sri">envio sri</a></td>
<td>Información luego de enviar el comprobante.</td>
</tr>
<tr>
<td>autorizacion</td>
<td>objeto tipo <a href="#autorizacion-sri">autorizacion sri</a></td>
<td>Información de la autorización.org/html/rfc3339#section-5.6).</td>
</tr>
<tr>
<td>emisor</td>
<td>objeto tipo <a href="#emisor">emisor</a></td>
<td>Información completa del emisor.</td>
</tr>
<tr>
<td>moneda</td>
<td>string</td>
<td>Código <a href="https://en.wikipedia.org/wiki/ISO_4217">ISO</a> de la moneda.</td>
</tr>
<tr>
<td>ambiente</td>
<td>integer</td>
<td>Pruebas: <code>1</code>.<br>Producción <code>2</code>.<br></td>
</tr>
<tr>
<td>totales</td>
<td>objeto tipo <a href="#totales-liquidacion">totales</a></td>
<td>Listado de totales.</td>
</tr>
<tr>
<td>maquina_fiscal</td>
<td>objeto <a href="#maquina-fiscal">maquina_fiscal</a></td>
<td>Información de máquina fiscal.</td>
</tr>
<tr>
<td>proveedor</td>
<td>objeto <a href="#persona">persona</a></td>
<td>Información del proveedor.</td>
</tr>
<tr>
<td>tipo_emision</td>
<td>integer</td>
<td>Emisión normal: <code>1</code>.<br>Emisión por indisponibilidad: <code>2</code><br></td>
</tr>
<tr>
<td>items</td>
<td>listado de objetos tipo <a href="#item-de-factura">item</a></td>
<td>Items incluídos en la liquidación de compras.</td>
</tr>
<tr>
<td>pagos</td>
<td>listado de objetos tipo <a href="#pagos-liquidacion">pagos</a></td>
<td>Listado de formas de pago aplicables a la liquidación de compras.</td>
</tr>
<tr>
<td>version</td>
<td>string</td>
<td>Versión de la especificación, opciones válidas: <code>1.0.0</code>, <code>1.1.0</code></td>
</tr>
</tbody></table>
<h2 id='consulta-de-una-liquidacion-de-compra-de-reembolso'>Consulta de una liquidación de compra de reembolso</h2>
<p>Consulta una liquidación de compra de reembolso para obtener toda la información del comprobante, incluyendo
el estado del mismo.
El parámetro <code>estado</code> de la respuesta obtenida al invocar esta operación, indica
el estado actual del comprobante.</p>

<p>Si es necesario conocer en detalle, en que estado del <a href="#proceso-de-emision">proceso de emisión</a>,
se debe examinar los parámetros <code>envio_sri</code> y <code>autorizacion_sri</code> de la respuesta.</p>
<h3 id='operacion-4'>Operación</h3>
<p><code>GET /purchase-settlements/&lt;purchase-settlement-ID&gt;</code></p>
<h3 id='requerimiento-2'>Requerimiento</h3>
<blockquote>
<h4 id='requerimiento-de-ejemplo-5'>Requerimiento de ejemplo</h4></blockquote>
<pre class="highlight shell tab-shell"><code>curl -v https://link.datil.co/purchase-settlements/&lt;id-liquidacion&gt; <span class="se">\</span>
-H <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
-H <span class="s2">"X-Key: &lt;clave-del-api&gt;"</span> <span class="se">\</span>
-H <span class="s2">"X-Password: &lt;clave-certificado-firma&gt;"</span> <span class="se">\</span>
</code></pre><pre class="highlight python tab-python"><code><span class="kn">import</span> <span class="nn">requests</span>
<span class="n">cabeceras</span> <span class="o">=</span> <span class="p">{</span><span class="s">'x-key'</span><span class="p">:</span> <span class="s">'&lt;clave-del-api&gt;'</span><span class="p">}</span>
<span class="n">respuesta</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span>
    <span class="s">'https://link.datil.co/purchase-settlements/&lt;id-liquidacion&gt;'</span><span class="p">,</span>
    <span class="n">headers</span> <span class="o">=</span> <span class="n">cabeceras</span><span class="p">)</span>
</code></pre><pre class="highlight csharp tab-csharp"><code><span class="k">using</span> <span class="nn">RestSharp</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">System</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">System.Collections.Generic</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">System.Linq</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">System.Text</span><span class="p">;</span>

<span class="k">namespace</span> <span class="nn">DatilClient</span> <span class="p">{</span>
  <span class="k">class</span> <span class="nc">InvoicingServiceClient</span> <span class="p">{</span>
    <span class="k">static</span> <span class="k">void</span> <span class="nf">Main</span><span class="p">(</span><span class="kt">string</span><span class="p">[]</span> <span class="n">args</span><span class="p">)</span> <span class="p">{</span>

      <span class="kt">var</span> <span class="n">client</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">RestClient</span><span class="p">(</span><span class="s">"https://link.datil.co/"</span><span class="p">);</span>
      <span class="kt">var</span> <span class="n">idLiquidacion</span> <span class="p">=</span> <span class="s">"&lt;id-liquidacion&gt;"</span><span class="p">;</span>
      <span class="kt">var</span> <span class="n">request</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">RestRequest</span><span class="p">(</span><span class="s">"purchase-settlements/"</span> <span class="p">+</span> <span class="n">idLiquidacion</span><span class="p">,</span> <span class="n">Method</span><span class="p">.</span><span class="n">GET</span><span class="p">);</span>
      <span class="n">request</span><span class="p">.</span><span class="nf">AddHeader</span><span class="p">(</span><span class="s">"X-Key"</span><span class="p">,</span> <span class="s">"&lt;clave-del-api&gt;"</span><span class="p">);</span>

      <span class="n">IRestResponse</span> <span class="n">response</span> <span class="p">=</span> <span class="n">client</span><span class="p">.</span><span class="nf">Execute</span><span class="p">(</span><span class="n">request</span><span class="p">);</span>

      <span class="n">Console</span><span class="p">.</span><span class="nf">WriteLine</span><span class="p">(</span><span class="n">response</span><span class="p">.</span><span class="n">Content</span><span class="p">);</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">}</span>
</code></pre>
<p>Reemplaza en la ruta <code>&lt;purchase-settlement-ID&gt;</code> por el <code>id</code> de la liquidación de compra que necesitas consultar.</p>
<h3 id='respuesta-4'>Respuesta</h3>
<blockquote>
<h4 id='respuesta-de-ejemplo-4'>Respuesta de ejemplo</h4></blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"abcf12343faad0678512343faad06785"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"secuencial"</span><span class="p">:</span><span class="w"> </span><span class="s2">"16"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"fecha_emision"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2019-05-03"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"version"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1.0.0"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"clave_acceso"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1505201501099271255400110011000000000162092727615"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"emisor"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"ruc"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0992712554001"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"razon_social"</span><span class="p">:</span><span class="w"> </span><span class="s2">"DATILMEDIA S.A."</span><span class="p">,</span><span class="w">
        </span><span class="s2">"nombre_comercial"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Dátil"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"direccion"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
        </span><span class="s2">"obligado_contabilidad"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
        </span><span class="s2">"contribuyente_especial"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w">
        </span><span class="s2">"establecimiento"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="s2">"codigo"</span><span class="p">:</span><span class="w"> </span><span class="s2">"001"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"direccion"</span><span class="p">:</span><span class="w"> </span><span class="s2">"V.E. 112 Y CIRCUNVALACION NORTE"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"punto_emision"</span><span class="p">:</span><span class="w"> </span><span class="s2">"100"</span><span class="w">
        </span><span class="p">}</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="s2">"estado"</span><span class="p">:</span><span class="w"> </span><span class="s2">"AUTORIZADO"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"correos_enviados"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="p">{</span><span class="w">
            </span><span class="s2">"fecha_envio"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2019-05-03T16:36:48.274604"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"destinatarios"</span><span class="p">:</span><span class="w"> </span><span class="s2">"cplaza@gye593.com"</span><span class="w">
        </span><span class="p">}</span><span class="w">
    </span><span class="p">],</span><span class="w">
    </span><span class="s2">"moneda"</span><span class="p">:</span><span class="w"> </span><span class="s2">"USD"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"informacion_adicional"</span><span class="p">:</span><span class="w"> </span><span class="p">[],</span><span class="w">
    </span><span class="s2">"ambiente"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"totales"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"total_sin_impuestos"</span><span class="p">:</span><span class="w"> </span><span class="mf">50.00</span><span class="p">,</span><span class="w">
        </span><span class="s2">"descuento"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0.00"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"impuestos"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
            </span><span class="p">{</span><span class="w">
                </span><span class="s2">"codigo"</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w">
                </span><span class="s2">"codigo_porcentaje"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2"</span><span class="p">,</span><span class="w">
                </span><span class="s2">"base_imponible"</span><span class="p">:</span><span class="w"> </span><span class="mf">50.00</span><span class="p">,</span><span class="w">
                </span><span class="s2">"valor"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.00</span><span class="w">
            </span><span class="p">}</span><span class="w">
        </span><span class="p">],</span><span class="w">
        </span><span class="s2">"importe_total"</span><span class="p">:</span><span class="w"> </span><span class="mf">50.00</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="s2">"maquina_fiscal"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"marca"</span><span class="p">:</span><span class="w"> </span><span class="s2">"SISPAU"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"modelo"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ABC123"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"serie"</span><span class="p">:</span><span class="w"> </span><span class="s2">"CGNC1405"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="s2">"proveedor"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"razon_social"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Carlos L. Plaza"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"identificacion"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0900102222"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"tipo_identificacion"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
        </span><span class="s2">"email"</span><span class="p">:</span><span class="w"> </span><span class="s2">"cplaza@gye593.com"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"direccion"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Calle Uno y Calle Dos"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"telefono"</span><span class="p">:</span><span class="w"> </span><span class="s2">"043334445"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="s2">"envio_sri"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"mensajes"</span><span class="p">:</span><span class="w"> </span><span class="p">[],</span><span class="w">
        </span><span class="s2">"estado"</span><span class="p">:</span><span class="w"> </span><span class="s2">"RECIBIDA"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"fecha"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="s2">"tipo_emision"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"items"</span><span class="p">:</span><span class="w"> </span><span class="p">[{</span><span class="w">
      </span><span class="s2">"cantidad"</span><span class="p">:</span><span class="w"> </span><span class="mf">1.0</span><span class="p">,</span><span class="w">
      </span><span class="s2">"codigo_principal"</span><span class="p">:</span><span class="w"> </span><span class="s2">"REEM"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"codigo_auxiliar"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w">
      </span><span class="s2">"precio_unitario"</span><span class="p">:</span><span class="w"> </span><span class="mf">50.00</span><span class="p">,</span><span class="w">
      </span><span class="s2">"descuento"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
      </span><span class="s2">"descripcion"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Reembolso de gastos"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"precio_total_sin_impuestos"</span><span class="p">:</span><span class="w"> </span><span class="mf">50.00</span><span class="p">,</span><span class="w">
      </span><span class="s2">"impuestos"</span><span class="p">:</span><span class="w"> </span><span class="p">[{</span><span class="w">
        </span><span class="s2">"base_imponible"</span><span class="p">:</span><span class="w"> </span><span class="mf">50.00</span><span class="p">,</span><span class="w">
        </span><span class="s2">"valor"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.00</span><span class="p">,</span><span class="w">
        </span><span class="s2">"tarifa"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.00</span><span class="p">,</span><span class="w">
        </span><span class="s2">"codigo"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"codigo_porcentaje"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0"</span><span class="w">
      </span><span class="p">}],</span><span class="w">
      </span><span class="s2">"descuento"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.00</span><span class="w">
    </span><span class="p">}],</span><span class="w">
    </span><span class="s2">"reembolso"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="s2">"subtotal"</span><span class="p">:</span><span class="w"> </span><span class="mf">50.00</span><span class="p">,</span><span class="w">
      </span><span class="s2">"total"</span><span class="p">:</span><span class="w"> </span><span class="mf">50.00</span><span class="p">,</span><span class="w">
      </span><span class="s2">"total_impuestos"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.00</span><span class="p">,</span><span class="w">
      </span><span class="s2">"documentos"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="p">{</span><span class="w">
          </span><span class="s2">"tipo_identificacion_proveedor"</span><span class="p">:</span><span class="w"> </span><span class="s2">"04"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"pais_origen_proveedor"</span><span class="p">:</span><span class="w"> </span><span class="s2">"593"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"tipo_proveedor"</span><span class="p">:</span><span class="w"> </span><span class="s2">"01"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"identificacion_proveedor"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0918723323001"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"tipo"</span><span class="p">:</span><span class="w"> </span><span class="s2">"01"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"numero_autorizacion"</span><span class="p">:</span><span class="w"> </span><span class="mi">3811201601</span><span class="p">,</span><span class="w">
          </span><span class="s2">"fecha_emision"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2020-01-28T10:50:26-05:00"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"codigo_punto_emision"</span><span class="p">:</span><span class="w"> </span><span class="s2">"001"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"codigo_establecimiento"</span><span class="p">:</span><span class="w"> </span><span class="s2">"003"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"secuencia"</span><span class="p">:</span><span class="w"> </span><span class="mi">897</span><span class="p">,</span><span class="w">
          </span><span class="s2">"impuestos"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
            </span><span class="p">{</span><span class="w">
              </span><span class="s2">"tarifa"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.0</span><span class="p">,</span><span class="w">
              </span><span class="s2">"codigo"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2"</span><span class="p">,</span><span class="w">
              </span><span class="s2">"codigo_porcentaje"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0"</span><span class="p">,</span><span class="w">
              </span><span class="s2">"base_imponible"</span><span class="p">:</span><span class="w"> </span><span class="mf">50.00</span><span class="p">,</span><span class="w">
              </span><span class="s2">"valor"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.00</span><span class="p">,</span><span class="w">
            </span><span class="p">}</span><span class="w">
          </span><span class="p">],</span><span class="w">
        </span><span class="p">}</span><span class="w">
      </span><span class="p">],</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="s2">"pagos"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
      </span><span class="p">{</span><span class="w">
        </span><span class="s2">"forma_pago"</span><span class="p">:</span><span class="w"> </span><span class="s2">"01"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"total"</span><span class="p">:</span><span class="w"> </span><span class="mf">50.0</span><span class="p">,</span><span class="w">
        </span><span class="s2">"unidad_tiempo"</span><span class="p">:</span><span class="w"> </span><span class="s2">"10"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"plazo"</span><span class="p">:</span><span class="w"> </span><span class="s2">"30"</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">],</span><span class="w">
    </span><span class="s2">"autorizacion"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="s2">"estado"</span><span class="p">:</span><span class="w"> </span><span class="s2">"AUTORIZADO"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"mensajes"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
          </span><span class="p">{</span><span class="w">
              </span><span class="s2">"identificador"</span><span class="p">:</span><span class="w"> </span><span class="s2">"60"</span><span class="p">,</span><span class="w">
              </span><span class="s2">"mensaje"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ESTE PROCESO FUE REALIZADO EN EL AMBIENTE DE PRUEBAS"</span><span class="p">,</span><span class="w">
              </span><span class="s2">"tipo"</span><span class="p">:</span><span class="w"> </span><span class="s2">"INFORMATIVO"</span><span class="p">,</span><span class="w">
              </span><span class="s2">"informacion_adicional"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="w">
          </span><span class="p">}</span><span class="w">
      </span><span class="p">],</span><span class="w">
      </span><span class="s2">"numero"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1505201516323509927125540010266935227"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"fecha"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2019-05-15T16:32:35.000380"</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<table><thead>
<tr>
<th>Parámetro</th>
<th>Tipo</th>
<th>Descripción</th>
</tr>
</thead><tbody>
<tr>
<td>secuencial</td>
<td>string</td>
<td>Número de secuencia de la liquidación de compras.</td>
</tr>
<tr>
<td>estado</td>
<td>string</td>
<td>Posibles valores: <code>AUTORIZADO</code>, <code>NO AUTORIZADO</code>, <code>ENVIADO</code>, <code>DEVUELTO</code>, <code>RECIBIDO</code>, <code>ERROR</code></td>
</tr>
<tr>
<td>fecha_emision</td>
<td>string</td>
<td>Fecha de emisión en formato AAAA-MM-DDHoraZonaHoraria, definido en el estándar <a href="http://tools.ietf">ISO8601</a>.</td>
</tr>
<tr>
<td>clave_acceso</td>
<td>string</td>
<td>La clave de acceso representa un identificador único del comprobante. Si esta información no es provista, Dátil la generará.<br>¿Cómo <a href="#clave-de-acceso">generar</a> la clave de acceso?</td>
</tr>
<tr>
<td>envio_sri</td>
<td>objeto tipo <a href="#envio-sri">envio sri</a></td>
<td>Información luego de enviar el comprobante.</td>
</tr>
<tr>
<td>autorizacion</td>
<td>objeto tipo <a href="#autorizacion-sri">autorizacion sri</a></td>
<td>Información de la autorización.org/html/rfc3339#section-5.6).</td>
</tr>
<tr>
<td>emisor</td>
<td>objeto tipo <a href="#emisor">emisor</a></td>
<td>Información completa del emisor.</td>
</tr>
<tr>
<td>moneda</td>
<td>string</td>
<td>Código <a href="https://en.wikipedia.org/wiki/ISO_4217">ISO</a> de la moneda.</td>
</tr>
<tr>
<td>ambiente</td>
<td>integer</td>
<td>Pruebas: <code>1</code>.<br>Producción <code>2</code>.<br></td>
</tr>
<tr>
<td>totales</td>
<td>objeto tipo <a href="#totales-liquidacion">totales</a></td>
<td>Listado de totales.</td>
</tr>
<tr>
<td>maquina_fiscal</td>
<td>objeto <a href="#maquina-fiscal">maquina_fiscal</a></td>
<td>Información de máquina fiscal.</td>
</tr>
<tr>
<td>proveedor</td>
<td>objeto <a href="#persona">persona</a></td>
<td>Información del proveedor.</td>
</tr>
<tr>
<td>tipo_emision</td>
<td>integer</td>
<td>Emisión normal: <code>1</code>.<br>Emisión por indisponibilidad: <code>2</code><br></td>
</tr>
<tr>
<td>items</td>
<td>listado de objetos tipo <a href="#item-de-factura">item</a></td>
<td>Items incluídos en la liquidación de compras.</td>
</tr>
<tr>
<td>pagos</td>
<td>listado de objetos tipo <a href="#pagos-liquidacion">pagos</a></td>
<td>Listado de formas de pago aplicables a la liquidación de compras.</td>
</tr>
<tr>
<td>version</td>
<td>string</td>
<td>Versión de la especificación, opciones válidas: <code>1.0.0</code>, <code>1.1.0</code></td>
</tr>
<tr>
<td>reembolso</td>
<td>objeto tipo <a href="#reembolso">reembolso</a></td>
<td>Información de reembolso.</td>
</tr>
</tbody></table>
<h1 id='consulta-de-autorizacion'>Consulta de autorización</h1>
<p>Consulta la información de autorización de cualquier tipo de comprobante electrónico.
El ID del documento <code>id-doc</code> es el ID que obtienes después de emitir un documento.</p>

<h3 id="consulta-comprobante-op">Operación</h3>

<p><code>GET /edocs/&lt;id-doc&gt;</code></p>

<h3 id="consulta-comprobante-requerimiento">Requerimiento</h3>

<blockquote>
<h4 id='requerimiento-de-ejemplo'>Requerimiento de ejemplo</h4></blockquote>
<pre class="highlight shell tab-shell"><code>curl -v https://link.datil.co/edocs/&lt;id-doc&gt; <span class="se">\</span>
-H <span class="s2">"Accept: application/json"</span> <span class="se">\</span>
-H <span class="s2">"X-Key: &lt;clave-del-api&gt;"</span>
</code></pre><pre class="highlight python tab-python"><code><span class="kn">import</span> <span class="nn">requests</span>
<span class="n">cabeceras</span> <span class="o">=</span> <span class="p">{</span><span class="s">'x-key'</span><span class="p">:</span> <span class="s">'&lt;clave-del-api&gt;'</span><span class="p">}</span>
<span class="n">respuesta</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span>
    <span class="s">'https://link.datil.co/edocs/&lt;id-factura&gt;'</span><span class="p">,</span>
    <span class="n">headers</span> <span class="o">=</span> <span class="n">cabeceras</span><span class="p">)</span>
</code></pre><pre class="highlight csharp tab-csharp"><code><span class="k">using</span> <span class="nn">RestSharp</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">System</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">System.Collections.Generic</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">System.Linq</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">System.Text</span><span class="p">;</span>

<span class="k">namespace</span> <span class="nn">DatilClient</span> <span class="p">{</span>
  <span class="k">class</span> <span class="nc">InvoicingServiceClient</span> <span class="p">{</span>
    <span class="k">static</span> <span class="k">void</span> <span class="nf">Main</span><span class="p">(</span><span class="kt">string</span><span class="p">[]</span> <span class="n">args</span><span class="p">)</span> <span class="p">{</span>

      <span class="kt">var</span> <span class="n">client</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">RestClient</span><span class="p">(</span><span class="s">"https://link.datil.co/"</span><span class="p">);</span>
      <span class="kt">var</span> <span class="n">idDocumento</span> <span class="p">=</span> <span class="s">"&lt;id-doc&gt;"</span><span class="p">;</span>
      <span class="kt">var</span> <span class="n">request</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">RestRequest</span><span class="p">(</span><span class="s">"edocs/"</span> <span class="p">+</span> <span class="n">idDocumento</span><span class="p">,</span> <span class="n">Method</span><span class="p">.</span><span class="n">GET</span><span class="p">);</span>
      <span class="n">request</span><span class="p">.</span><span class="nf">AddHeader</span><span class="p">(</span><span class="s">"X-Key"</span><span class="p">,</span> <span class="s">"&lt;clave-del-api&gt;"</span><span class="p">);</span>

      <span class="n">IRestResponse</span> <span class="n">response</span> <span class="p">=</span> <span class="n">client</span><span class="p">.</span><span class="nf">Execute</span><span class="p">(</span><span class="n">request</span><span class="p">);</span>

      <span class="n">Console</span><span class="p">.</span><span class="nf">WriteLine</span><span class="p">(</span><span class="n">response</span><span class="p">.</span><span class="n">Content</span><span class="p">);</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">}</span>
</code></pre>
<h3 id="consulta-comprobante-respuesta">Respuesta</h3>

<table><thead>
<tr>
<th>Parámetro</th>
<th>Tipo</th>
<th>Descripción</th>
</tr>
</thead><tbody>
<tr>
<td>id</td>
<td>string</td>
<td>El id del documento consultado</td>
</tr>
<tr>
<td>tipo</td>
<td>string</td>
<td>Código que representa el tipo de documento. Revisa <a href="#tipos-de-documentos">aquí</a> el código que corresponde a cada tipo de documento</td>
</tr>
<tr>
<td>estado</td>
<td>string</td>
<td>Estado de autorización del comprobante. Posibles valores: <code>AUTORIZADO</code>, <code>NO AUTORIZADO</code>, <code>ENVIADO</code>, <code>DEVUELTO</code>, <code>RECIBIDO</code>, <code>ERROR</code></td>
</tr>
<tr>
<td>clave_acceso</td>
<td>string</td>
<td>Clave de acceso del documento.</td>
</tr>
<tr>
<td>url_formato_impresion</td>
<td>url</td>
<td>Esta URL te permite acceder de manera directa al formato de impresión (RIDE) del comprobante</td>
</tr>
<tr>
<td>url_documento_electronico</td>
<td>url</td>
<td>Esta URL te permite acceder de manera directa al documento electrónico (XML)</td>
</tr>
<tr>
<td>autorizacion</td>
<td>Objeto de tipo <a href="#autorizacion-sri">autorización SRI</a></td>
<td></td>
</tr>
</tbody></table>

<blockquote>
<h4 id='respuesta-de-ejemplo'>Respuesta de ejemplo</h4></blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="s2">"url_documento_electronico"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://app.datil.co/ver/be69b7bc64b643718a643caa9a8c3569/xml"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"autorizacion"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"fecha"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2020-01-23T15:41:51Z"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"estado"</span><span class="p">:</span><span class="w"> </span><span class="s2">"AUTORIZADO"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"mensajes"</span><span class="p">:</span><span class="w"> </span><span class="p">[],</span><span class="w">
        </span><span class="s2">"numero"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2301202035679285132400120010020000287082794874518"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="s2">"tipo"</span><span class="p">:</span><span class="w"> </span><span class="s2">"01"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"url_formato_impresion"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://app.datil.co/ver/be69b7bc64b643718a643caa9a8c3569/pdf"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"clave_acceso"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2301202035679285132400120010020000287082794874518"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"estado"</span><span class="p">:</span><span class="w"> </span><span class="s2">"AUTORIZADO"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"be69b7bc64b643718a643caa9a8c3569"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"ambiente"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre><h1 id='descarga-de-comprobantes'>Descarga de comprobantes</h1><h2 id='consulta-de-ride'>Consulta de RIDE</h2>
<p>Consulta de la representación impresa del documento electrónico (RIDE). El ID del comprobante <code>id-doc</code> es el ID que se obtiene después de emitir un comprobante.</p>
<h3 id='operacion'>Operación</h3>
<p><code>GET app.datil.co/ver/&lt;id-doc&gt;/pdf</code></p>
<h2 id='consulta-de-xml'>Consulta de XML</h2>
<p>Consulta de representación XML de los comprobantes. El ID del comprobante <code>id-doc</code> es el ID que se obtiene después de emitir un comprobante.</p>
<h3 id='operacion-2'>Operación</h3>
<p><code>GET app.datil.co/ver/&lt;id-doc&gt;/xml</code></p>
<h1 id='objetos-comunes'>Objetos comunes</h1><h2 id='clave-de-acceso'>Clave de acceso</h2>
<p>El sistema se encarga de generar automáticamente la clave de acceso de cada
comprobante y luego retornarla como parte de la respuesta de emisión del mismo.
Pero es posible también proveer la clave de acceso si se requiere tener control
en la generación de esta clave. La siguiente documentación explica como debe
estar estructurada la clave de acceso.</p>

<p>Las claves de acceso estarán compuestas de 49 caracteres numéricos, la herramienta o aplicativo a utilizar por el sujeto pasivo deberá generar de manera automática la clave de acceso, que constituirá un requisito que dará el carácter de único a cada uno de los comprobantes, y la misma servirá para que el SRI indique si el comprobante es autorizado o no; se describe a continuación su conformación:</p>

<table><thead>
<tr>
<th>Campo</th>
<th>Formato</th>
<th>Longitud</th>
</tr>
</thead><tbody>
<tr>
<td>Fecha de Emisión</td>
<td>DDMMAAAA</td>
<td>8</td>
</tr>
<tr>
<td>Tipo de Comprobante</td>
<td>Tabla 4</td>
<td>2</td>
</tr>
<tr>
<td>Número de RUC</td>
<td>1234567890001</td>
<td>13</td>
</tr>
<tr>
<td>Tipo de Ambiente</td>
<td>Tabla 5</td>
<td>1</td>
</tr>
<tr>
<td>Serie</td>
<td>001001</td>
<td>6</td>
</tr>
<tr>
<td>Número del Comprobante (secuencial)</td>
<td>000000001</td>
<td>9</td>
</tr>
<tr>
<td>Código Numérico</td>
<td>Numérico</td>
<td>8</td>
</tr>
<tr>
<td>Tipo de Emisión</td>
<td>Tabla 2</td>
<td>1</td>
</tr>
<tr>
<td>Dígito Verificador (módulo 11 )</td>
<td>Numérico</td>
<td>1</td>
</tr>
</tbody></table>

<p><strong>Nota:</strong> Todos los campos deben completarse conforme a la longitud indicada, es decir si en el número secuencial no completa los 9 dígitos, la clave de acceso estará mal conformada y será motivo de rechazo de la autorización en línea.</p>

<p>El dígito verificador será aplicado sobre toda la clave de acceso (48 dígitos) y deberá ser incorporado por el contribuyente a través del método denominado Módulo 11, con un factor de chequeo ponderado (2), este mecanismo de detección de errores, será verificado al momento de la recepción del comprobante. Cuando el resultado del dígito verificador obtenido sea igual a once (11), el digito verificador será el cero (0) y cuando el resultado del dígito verificador obtenido sea igual a diez 10, el digito verificador será el uno (1).</p>

<p>El código numérico constituye un mecanismo para brindar seguridad al emisor en cada comprobante emitido, el algoritmo numérico para conformar este código es potestad absoluta del contribuyente emisor.</p>

<p>Ver <a href="https://es.wikipedia.org/wiki/C%C3%B3digo_de_control">aquí</a> ejemplo de verificación utilizando algoritmo de módulo 11.</p>
<h2 id='emisor'>Emisor</h2>
<p>Información del emisor de un comprobante.</p>

<table><thead>
<tr>
<th>Parámetro</th>
<th>Tipo</th>
<th>Descripción</th>
</tr>
</thead><tbody>
<tr>
<td>ruc</td>
<td>string</td>
<td>Número de RUC de 13 caracteres</td>
</tr>
<tr>
<td>razon_social</td>
<td>string</td>
<td>Razón social. Máximo 300 caracteres</td>
</tr>
<tr>
<td>nombre_comercial</td>
<td>string</td>
<td>Nombre comercial. Máximo 300 caracteres</td>
</tr>
<tr>
<td>direccion</td>
<td>string</td>
<td>Dirección registrada en el SRI. Máximo 300 caracteres.</td>
</tr>
<tr>
<td>contribuyente_especial</td>
<td>string</td>
<td>Número de resolución. En blanco si no es contribuyente especial.</td>
</tr>
<tr>
<td>obligado_contabilidad</td>
<td>boolean</td>
<td><code>true</code> si está obligado a llevar contabilidad.</td>
</tr>
<tr>
<td>establecimiento</td>
<td><a href="#establecimiento">establecimiento</a></td>
<td>Establecimiento que emite la factura.</td>
</tr>
</tbody></table>
<h2 id='establecimiento'>Establecimiento</h2>
<p>Representa un establecimiento del comercio.</p>

<table><thead>
<tr>
<th>Parámetro</th>
<th>Tipo</th>
<th>Descripción</th>
</tr>
</thead><tbody>
<tr>
<td>codigo</td>
<td>string</td>
<td>Código numérico de 3 caracteres que representa al establecimiento. Ejemplo: <code>001</code></td>
</tr>
<tr>
<td>direccion</td>
<td>string</td>
<td>Dirección registrada en el SRI. Máximo 300 caracteres</td>
</tr>
<tr>
<td>punto_emision</td>
<td>string</td>
<td>Código numérico de 3 caracteres que representa al punto de emisión, o punto de venta. Ejemplo: <code>001</code></td>
</tr>
</tbody></table>
<h2 id='maquina-fiscal'>Máquina fiscal</h2>
<p>Datos de una máquina fiscal.</p>

<table><thead>
<tr>
<th>Parámetro</th>
<th>Tipo</th>
<th>Descripción</th>
</tr>
</thead><tbody>
<tr>
<td>marca</td>
<td>string</td>
<td>Máximo 300 caracteres. <strong>Requerido</strong></td>
</tr>
<tr>
<td>modelo</td>
<td>string</td>
<td>Máximo 300 caracteres. <strong>Requerido</strong></td>
</tr>
<tr>
<td>serie</td>
<td>string</td>
<td>Máximo 300 caracteres. <strong>Requerido</strong></td>
</tr>
</tbody></table>
<h2 id='reembolso'>Reembolso</h2>
<p>Datos de una factura o liquidación de compras de reembolso.</p>

<table><thead>
<tr>
<th>Parámetro</th>
<th>Tipo</th>
<th>Descripción</th>
</tr>
</thead><tbody>
<tr>
<td>codigo</td>
<td>string</td>
<td>Código del tipo de documento de reembolso equivalente a 41. <strong>Requerido</strong></td>
</tr>
<tr>
<td>documentos</td>
<td>listado de objeto <a href="#documento">Documento</a></td>
<td>Lista de documentos. <strong>Requerido</strong></td>
</tr>
<tr>
<td>subtotal</td>
<td>float</td>
<td>Sumatoria de los subtotales de los documentos. <strong>Requerido</strong></td>
</tr>
<tr>
<td>total_impuestos</td>
<td>float</td>
<td>Sumatoria de los totales de impuestos de los documentos. <strong>Requerido</strong></td>
</tr>
<tr>
<td>total</td>
<td>float</td>
<td>Subtotal más total de impuestos. <strong>Requerido</strong></td>
</tr>
</tbody></table>
<h2 id='documento'>Documento</h2>
<p>Datos de un documento.</p>

<table><thead>
<tr>
<th>Parámetro</th>
<th>Tipo</th>
<th>Descripción</th>
</tr>
</thead><tbody>
<tr>
<td>codigo_establecimiento</td>
<td>string</td>
<td>3 caracteres. <strong>Requerido</strong></td>
</tr>
<tr>
<td>codigo_punto_emision</td>
<td>string</td>
<td>3 caracteres. <strong>Requerido</strong></td>
</tr>
<tr>
<td>secuencia</td>
<td>integer (min. 1 - max. 999999999 )</td>
<td>Número de secuencia del documento. <strong>Requerido</strong></td>
</tr>
<tr>
<td>fecha_emision</td>
<td>string</td>
<td>Fecha de emisión en formato AAAA-MM-DDHoraZonaHoraria, definido en el estándar <a href="http://tools.ietf.org/html/rfc3339#section-5.6">ISO8601</a>. <strong>Requerido</strong></td>
</tr>
<tr>
<td>identificacion_proveedor</td>
<td>string</td>
<td>De 5 a 20 caracteres. <strong>Requerido</strong></td>
</tr>
<tr>
<td>tipo_identificacion_proveedor</td>
<td>string</td>
<td>Ver <a href="#tipo-de-identificacion">tabla</a> de tipos de identificación <strong>Requerido</strong></td>
</tr>
<tr>
<td>impuestos</td>
<td>listado de objeto <a href="#impuesto-item">impuesto</a></td>
<td>Impuestos totales del documento. <strong>Requerido</strong></td>
</tr>
<tr>
<td>numero_autorizacion</td>
<td>string</td>
<td>Número de autorización del documento. 10, 37 o 49 caracteres. <strong>Requerido</strong></td>
</tr>
<tr>
<td>pais_origen_proveedor</td>
<td>string</td>
<td>Código  de dos caracteres del país origen según <a href="https://en.wikipedia.org/wiki/ISO_3166-1_alpha-2#Officially_assigned_code_elements">ISO_3166</a>. <strong>Requerido</strong></td>
</tr>
<tr>
<td>tipo</td>
<td>string</td>
<td>Código de <a href="#tipos-de-documentos">tipos de documentos</a>. <strong>Requerido</strong></td>
</tr>
<tr>
<td>tipo_proveedor</td>
<td>string</td>
<td>Código de <a href="#tipo-de-proveedor">tipo de proveedor</a> de reembolso. <strong>Requerido</strong></td>
</tr>
</tbody></table>
<h2 id='info-adicional'>Info adicional</h2>
<p>Información adicional adjunta al documento. Es utilizada para especificar cualquier detalle
que no pueda ser descrito con los elementos que son parte del documento.</p>

<table><thead>
<tr>
<th>Parámetro</th>
<th>Tipo</th>
<th>Descripción</th>
</tr>
</thead><tbody>
<tr>
<td>nombre</td>
<td>string</td>
<td>Máximo 300 caracteres. <strong>Requerido</strong></td>
</tr>
<tr>
<td>valor</td>
<td>string</td>
<td>Máximo 300 caracteres. <strong>Requerido</strong></td>
</tr>
</tbody></table>
<h2 id='persona'>Persona</h2>
<p>Datos de una persona. Utilizado como <strong>comprador</strong> en facturas y notas de crédito, como <strong>sujeto</strong> en retenciones</p>

<table><thead>
<tr>
<th>Parámetro</th>
<th>Tipo</th>
<th>Descripción</th>
</tr>
</thead><tbody>
<tr>
<td>razon_social</td>
<td>string</td>
<td>Razón social. Máximo 300 caracteres. <strong>Requerido</strong></td>
</tr>
<tr>
<td>identificacion</td>
<td>string</td>
<td>De 5 a 20 caracteres. <strong>Requerido</strong></td>
</tr>
<tr>
<td>tipo_identificacion</td>
<td>string</td>
<td>Ver <a href="#tipo-de-identificacion">tabla</a> de tipos de identificación <strong>Requerido</strong></td>
</tr>
<tr>
<td>email</td>
<td>string</td>
<td>Correo electrónico. Máximo 300 caracteres.</td>
</tr>
<tr>
<td>telefono</td>
<td>string</td>
<td>Teléfono.</td>
</tr>
<tr>
<td>direccion</td>
<td>string</td>
<td>Dirección</td>
</tr>
</tbody></table>
<h2 id='total-impuesto'>Total Impuesto</h2>
<table><thead>
<tr>
<th>Parámetro</th>
<th>Tipo</th>
<th>Descripción</th>
</tr>
</thead><tbody>
<tr>
<td>codigo</td>
<td>string</td>
<td>Código del <a href="#tipos-de-impuesto">tipo de impuesto</a></td>
</tr>
<tr>
<td>codigo_porcentaje</td>
<td>string</td>
<td>Código del <a href="#codigo-de-porcentaje-de-iva">porcentaje</a>.</td>
</tr>
<tr>
<td>base_imponible</td>
<td>float</td>
<td>Base imponible.</td>
</tr>
<tr>
<td>valor</td>
<td>float</td>
<td>Valor del total.</td>
</tr>
</tbody></table>
<h2 id='impuesto-item'>Impuesto Item</h2>
<table><thead>
<tr>
<th>Parámetro</th>
<th>Tipo</th>
<th>Descripción</th>
</tr>
</thead><tbody>
<tr>
<td>codigo</td>
<td>string</td>
<td>Código del <a href="#tipos-de-impuesto">tipo de impuesto</a></td>
</tr>
<tr>
<td>codigo_porcentaje</td>
<td>string</td>
<td>Código del <a href="#codigo-de-porcentaje-de-iva">porcentaje</a>.</td>
</tr>
<tr>
<td>base_imponible</td>
<td>float (hasta 2 cifras decimales)</td>
<td>Base imponible.</td>
</tr>
<tr>
<td>valor</td>
<td>float (hasta 2 cifras decimales)</td>
<td>Valor del total.</td>
</tr>
<tr>
<td>tarifa</td>
<td>float (hasta 2 cifras decimales)</td>
<td>Porcentaje actual del impuesto expresado por un número entre 0.0 y 100.0</td>
</tr>
</tbody></table>
<h2 id='envio-sri'>Envío SRI</h2>
<p>Contiene la información y el estado de la fase de envío al SRI</p>

<table><thead>
<tr>
<th>Parámetro</th>
<th>Tipo</th>
<th>Descripción</th>
</tr>
</thead><tbody>
<tr>
<td>mensajes</td>
<td>listado de objeto <a href="#mensajes-de-respuesta-sri">mensaje SRI</a></td>
<td>Listado de mensajes.</td>
</tr>
<tr>
<td>estado</td>
<td>string</td>
<td>Posibles valores: <code>RECIBIDA</code>, <code>DEVUELTA</code></td>
</tr>
<tr>
<td>fecha</td>
<td>string</td>
<td>Fecha en la que se realizó el envío en formato AAAA-MM-DDHoraZonaHoraria, definido en el estándar <a href="http://tools.ietf.org/html/rfc3339#section-5.6">ISO8601</a>.</td>
</tr>
</tbody></table>
<h2 id='autorizacion-sri'>Autorización SRI</h2>
<p>Contiene la información y el estado de la fase de autorización del comprobante.</p>

<table><thead>
<tr>
<th>Parámetro</th>
<th>Tipo</th>
<th>Descripción</th>
</tr>
</thead><tbody>
<tr>
<td>mensajes</td>
<td>listado de objeto <a href="#mensajes-de-respuesta-sri">mensaje SRI</a></td>
<td>Listado de mensajes.</td>
</tr>
<tr>
<td>estado</td>
<td>string</td>
<td>Posibles valores: <code>AUTORIZADO</code>, <code>NO AUTORIZADO</code>, <code>PRE-AUTORIZADO</code></td>
</tr>
<tr>
<td>numero</td>
<td>string</td>
<td>Número de autorización.</td>
</tr>
<tr>
<td>fecha</td>
<td>string</td>
<td>Fecha en la que se otorgó la autorización en formato AAAA-MM-DDHoraZonaHoraria, definido en el estándar <a href="http://tools.ietf.org/html/rfc3339#section-5.6">ISO8601</a>.</td>
</tr>
</tbody></table>
<h2 id='mensajes-de-respuesta-sri'>Mensajes de respuesta SRI</h2>
<table><thead>
<tr>
<th>Parámetro</th>
<th>Tipo</th>
<th>Descripción</th>
</tr>
</thead><tbody>
<tr>
<td>identificador</td>
<td>string</td>
<td>Número con el que el SRI identifica al mensaje.</td>
</tr>
<tr>
<td>mensaje</td>
<td>string</td>
<td>Descripción del error, información o advertencia.</td>
</tr>
<tr>
<td>tipo</td>
<td>string</td>
<td>Posibles valores: <code>INFORMATIVO</code>, <code>ADVERTENCIA</code>, <code>ERROR</code></td>
</tr>
<tr>
<td>informacion_adicional</td>
<td>string</td>
<td>Información adicional del mensaje.</td>
</tr>
</tbody></table>

<h2 id="item-de-factura">Item de factura, nota de crédito y liquidación de compras</h2>

<p>Representa un producto o servicio del comercio.</p>

<table><thead>
<tr>
<th>Parámetro</th>
<th>Tipo</th>
<th>Descripción</th>
</tr>
</thead><tbody>
<tr>
<td>descripcion</td>
<td>string (máximo 300 caracteres)</td>
<td>Descripción del ítem. <strong>Requerido</strong></td>
</tr>
<tr>
<td>codigo_principal</td>
<td>string (máximo 25 caracteres)</td>
<td>Código alfanumérico de uso del comercio. Máximo 25 caracteres.</td>
</tr>
<tr>
<td>codigo_auxiliar</td>
<td>string (máximo 25 caracteres)</td>
<td>Código alfanumérico de uso del comercio. Máximo 25 caracteres.</td>
</tr>
<tr>
<td>cantidad</td>
<td>float (hasta 6 cifras decimales)</td>
<td>Cantidad de items. <strong>Requerido</strong></td>
</tr>
<tr>
<td>precio_unitario</td>
<td>float (hasta 6 cifras decimales)</td>
<td>Precio unitario. <strong>Requerido</strong></td>
</tr>
<tr>
<td>descuento</td>
<td>float (hasta 2 cifras decimales)</td>
<td>El descuento es aplicado por cada producto, expresado en valor monetario. <strong>Requerido</strong></td>
</tr>
<tr>
<td>precio_total_sin_impuestos</td>
<td>float (hasta 2 cifras decimales)</td>
<td>Precio antes de los impuestos. Se obtiene multiplicando la <code>cantidad</code> por el <code>precio_unitario</code></td>
</tr>
<tr>
<td>unidad_medida</td>
<td>string</td>
<td>Unidad de medida <strong>Requerido para facturas de exportación</strong></td>
</tr>
<tr>
<td>impuestos</td>
<td>listado de objetos tipo <a href="#impuesto-item">impuesto item</a></td>
<td>Impuestos grabados sobre el producto. <strong>Requerido</strong></td>
</tr>
<tr>
<td>detalles_adicionales</td>
<td>object</td>
<td>Diccionario de datos de carácter adicional. Ejemplo:<br><code>{&quot;marca&quot;: &quot;Ferrari&quot;, &quot;chasis&quot;: &quot;UANEI832-NAU101&quot;}</code></td>
</tr>
</tbody></table>

<h2 id="retencion-de-factura">Retención en factura </h2>

<p>Caso específico de Retenciones en la Comercializadores / Distribuidores de derivados del Petróleo y Retención presuntiva de IVA a los Editores, Distribuidores y Voceadores que participan en la comercialización de periódicos y/o revistas.</p>

<table><thead>
<tr>
<th>Parámetro</th>
<th>Tipo</th>
<th>Descripción</th>
</tr>
</thead><tbody>
<tr>
<td>codigo</td>
<td>string</td>
<td>Código del <a href="#tipos-de-impuesto-para-la-retencion-en-la-factura">tipo de impuesto para la retención en la factura</a>.  <strong>Requerido</strong></td>
</tr>
<tr>
<td>codigo_porcentaje</td>
<td>string</td>
<td>Código del <a href="#retencion-de-iva-presuntivo-y-renta">porcentaje del impuesto</a>. <strong>Requerido</strong></td>
</tr>
<tr>
<td>tarifa</td>
<td>float (hasta 2 cifras decimales)</td>
<td>Porcentaje actual del impuesto.  <strong>Requerido</strong></td>
</tr>
<tr>
<td>valor</td>
<td>float (hasta 2 cifras decimales)</td>
<td>Valor del impuesto.  <strong>Requerido</strong></td>
</tr>
</tbody></table>
<h1 id='catalogo'>Catálogo</h1><h2 id='tipo-de-identificacion'>Tipo de identificación</h2>
<table><thead>
<tr>
<th>Tipo de identificación</th>
<th>Código</th>
</tr>
</thead><tbody>
<tr>
<td>RUC</td>
<td><code>04</code></td>
</tr>
<tr>
<td>CEDULA</td>
<td><code>05</code></td>
</tr>
<tr>
<td>PASAPORTE</td>
<td><code>06</code></td>
</tr>
<tr>
<td>VENTA A CONSUMIDOR FINAL*</td>
<td><code>07</code></td>
</tr>
<tr>
<td>IDENTIFICACION DELEXTERIOR*</td>
<td><code>08</code></td>
</tr>
<tr>
<td>PLACA</td>
<td><code>09</code></td>
</tr>
</tbody></table>
<h2 id='tipos-de-impuesto'>Tipos de impuesto</h2>
<table><thead>
<tr>
<th>Impuesto</th>
<th>Código</th>
</tr>
</thead><tbody>
<tr>
<td>IVA</td>
<td>2</td>
</tr>
<tr>
<td>ICE</td>
<td>3</td>
</tr>
<tr>
<td>IRBPNR</td>
<td>5</td>
</tr>
</tbody></table>
<h2 id='codigo-de-porcentaje-de-iva'>Código de Porcentaje de IVA</h2>
<table><thead>
<tr>
<th>Porcentaje de IVA</th>
<th>Código</th>
<th>Tarifa</th>
</tr>
</thead><tbody>
<tr>
<td>0%</td>
<td>0</td>
<td>0</td>
</tr>
<tr>
<td>12%</td>
<td>2</td>
<td>12</td>
</tr>
<tr>
<td>14%</td>
<td>3</td>
<td>14</td>
</tr>
<tr>
<td>No Objeto de Impuesto</td>
<td>6</td>
<td>-</td>
</tr>
<tr>
<td>Exento de IVA</td>
<td>7</td>
<td>-</td>
</tr>
</tbody></table>
<h2 id='tipos-de-impuesto-para-la-retencion'>Tipos de impuesto para la retención</h2>
<table><thead>
<tr>
<th>Impuesto</th>
<th>Código</th>
</tr>
</thead><tbody>
<tr>
<td>RENTA</td>
<td>1</td>
</tr>
<tr>
<td>IVA</td>
<td>2</td>
</tr>
<tr>
<td>ISD</td>
<td>6</td>
</tr>
</tbody></table>
<h2 id='tipos-de-impuesto-para-la-retencion-en-la-factura'>Tipos de impuesto para la retención en la factura</h2>
<p>Caso específico de Retenciones en la Comercializadores / Distribuidores de derivados del
Petróleo y Retención presuntiva de IVA a los Editores, Distribuidores y Voceadores que
participan en la comercialización de periódicos y/o revistas.</p>

<table><thead>
<tr>
<th>Impuesto</th>
<th>Código</th>
</tr>
</thead><tbody>
<tr>
<td>IVA PRESUNTIVO Y RENTA</td>
<td>4</td>
</tr>
</tbody></table>
<h2 id='retencion-de-iva'>Retención de IVA</h2>
<table><thead>
<tr>
<th>Porcentaje IVA</th>
<th>Código</th>
</tr>
</thead><tbody>
<tr>
<td>10%</td>
<td>9</td>
</tr>
<tr>
<td>20%</td>
<td>10</td>
</tr>
<tr>
<td>30%</td>
<td>1</td>
</tr>
<tr>
<td>70%</td>
<td>2</td>
</tr>
<tr>
<td>100%</td>
<td>3</td>
</tr>
</tbody></table>

<p><strong>Retención en cero</strong></p>

<table><thead>
<tr>
<th>Porcentaje IVA</th>
<th>Código</th>
</tr>
</thead><tbody>
<tr>
<td>0%</td>
<td>7</td>
</tr>
</tbody></table>

<p><strong>No procede retención</strong></p>

<table><thead>
<tr>
<th>Porcentaje IVA</th>
<th>Código</th>
</tr>
</thead><tbody>
<tr>
<td>0%</td>
<td>8</td>
</tr>
</tbody></table>
<h2 id='retencion-isd'>Retención ISD</h2>
<table><thead>
<tr>
<th>Porcentaje IVA</th>
<th>Código</th>
</tr>
</thead><tbody>
<tr>
<td>5%</td>
<td>4580</td>
</tr>
</tbody></table>
<h2 id='retencion-a-la-fuente-renta'>Retención a la Fuente (Renta)</h2>
<p>Consulta el catálogo vigente de códigos en:</p>

<p><a href="https://www.sri.gob.ec/web/guest/retenciones-en-la-fuente">https://www.sri.gob.ec/web/guest/retenciones-en-la-fuente</a></p>

<aside class="notice">
Utiliza los códigos indicados en la columna <em>"Código del Anexo"</em>
</aside>
<h2 id='retencion-de-iva-presuntivo-y-renta'>Retención de IVA Presuntivo y Renta</h2>
<p>Caso específico de Retenciones en la Comercializadores / Distribuidores de derivados del
Petróleo y Retención presuntiva de IVA a los Editores, Distribuidores y Voceadores que
participan en la comercialización de periódicos y/o revistas.</p>

<p><strong>Retención IVA</strong></p>

<table><thead>
<tr>
<th>Porcentaje IVA presuntivo</th>
<th>Código</th>
</tr>
</thead><tbody>
<tr>
<td>100%</td>
<td>3</td>
</tr>
<tr>
<td>12%  (Editores a Margen de Comercialización Voceadores)</td>
<td>4</td>
</tr>
<tr>
<td>100% (Venta periódicos y/o Revistas a Distribuidores)</td>
<td>5</td>
</tr>
<tr>
<td>100% (Venta periódicos y/o Revistas a Voceadores)</td>
<td>6</td>
</tr>
</tbody></table>

<p><strong>Retención Renta</strong></p>

<table><thead>
<tr>
<th>Porcentaje Renta</th>
<th>Código</th>
</tr>
</thead><tbody>
<tr>
<td>0.2%</td>
<td>327</td>
</tr>
<tr>
<td>0.3%</td>
<td>328</td>
</tr>
</tbody></table>
<h2 id='tipos-de-documentos'>Tipos de documentos</h2>
<table><thead>
<tr>
<th>Documento</th>
<th>Código</th>
</tr>
</thead><tbody>
<tr>
<td>Factura</td>
<td>01</td>
</tr>
<tr>
<td>Liquidación de Compra</td>
<td>03</td>
</tr>
<tr>
<td>Nota de Crédito</td>
<td>04</td>
</tr>
<tr>
<td>Nota de Débito</td>
<td>05</td>
</tr>
<tr>
<td>Guía de Remisión</td>
<td>06</td>
</tr>
<tr>
<td>Comprobante de Retención</td>
<td>07</td>
</tr>
</tbody></table>
<h2 id='tipos-de-forma-de-pago'>Tipos de forma de pago</h2>
<table><thead>
<tr>
<th>Forma de pago</th>
<th>Código</th>
</tr>
</thead><tbody>
<tr>
<td>Efectivo</td>
<td>efectivo</td>
</tr>
<tr>
<td>Cheque</td>
<td>cheque</td>
</tr>
<tr>
<td>Débito de cuenta bancaria</td>
<td>debito_cuenta_bancaria</td>
</tr>
<tr>
<td>Transferencia bancaria</td>
<td>transferencia</td>
</tr>
<tr>
<td>Depósito en cuenta (Corriente / Ahorros)</td>
<td>deposito_cuenta_bancaria</td>
</tr>
<tr>
<td>Tarjeta de débito</td>
<td>tarjeta_debito</td>
</tr>
<tr>
<td>Dinero electrónico Ecuador</td>
<td>dinero_electronico_ec</td>
</tr>
<tr>
<td>Tarjeta prepago</td>
<td>tarjeta_prepago</td>
</tr>
<tr>
<td>Tarjeta de crédito</td>
<td>tarjeta_credito</td>
</tr>
<tr>
<td>Otros</td>
<td>otros</td>
</tr>
<tr>
<td>Endoso de títulos</td>
<td>endoso_titulos</td>
</tr>
</tbody></table>
<h2 id='tipos-de-forma-de-pago-del-sri'>Tipos de forma de pago del SRI</h2>
<table><thead>
<tr>
<th>Forma de pago</th>
<th>Código</th>
</tr>
</thead><tbody>
<tr>
<td>Sin utilización del sistema financiero</td>
<td>01</td>
</tr>
<tr>
<td>Compensación de deudas</td>
<td>15</td>
</tr>
<tr>
<td>Tarjeta de débito</td>
<td>16</td>
</tr>
<tr>
<td>Dinero electrónico</td>
<td>17</td>
</tr>
<tr>
<td>Tarjeta prepago</td>
<td>18</td>
</tr>
<tr>
<td>Tarjeta de crédito</td>
<td>19</td>
</tr>
<tr>
<td>Otros con utilización del sistema financiero</td>
<td>20</td>
</tr>
<tr>
<td>Endoso de títulos</td>
<td>21</td>
</tr>
</tbody></table>
<h2 id='equivalencia-entre-formas-de-pago-datil-y-formas-de-pago-del-sri'>Equivalencia entre formas de pago Dátil y formas de pago del SRI</h2>
<table><thead>
<tr>
<th>Forma de pago Dátil</th>
<th>Código</th>
<th>Forma de pago SRI</th>
<th>Código</th>
</tr>
</thead><tbody>
<tr>
<td>Efectivo</td>
<td>efectivo</td>
<td>Sin utilización del sistema financiero</td>
<td>01</td>
</tr>
<tr>
<td>Cheque</td>
<td>cheque</td>
<td>Otros con utilización del sistema financiero</td>
<td>20</td>
</tr>
<tr>
<td>Débito bancario</td>
<td>debito_cuenta_bancaria</td>
<td>Otros con utilización del sistema financiero</td>
<td>20</td>
</tr>
<tr>
<td>Transferencia bancaria</td>
<td>transferencia</td>
<td>Otros con utilización del sistema financiero</td>
<td>20</td>
</tr>
<tr>
<td>Tarjeta de crédito</td>
<td>tarjeta_credito</td>
<td>Tarjeta de crédito nacional</td>
<td>19</td>
</tr>
<tr>
<td>Depósito en cuenta (Corriente / Ahorros)</td>
<td>deposito_cuenta_bancaria</td>
<td>Otros con utilización del sistema financiero</td>
<td>20</td>
</tr>
<tr>
<td>Tarjeta de débito</td>
<td>tarjeta_debito</td>
<td>Tarjeta de débito</td>
<td>16</td>
</tr>
<tr>
<td>Dinero electrónico Ecuador</td>
<td>dinero_electronico_ec</td>
<td>Dinero electrónico</td>
<td>17</td>
</tr>
<tr>
<td>Tarjeta prepago</td>
<td>tarjeta_prepago</td>
<td>Tarjeta prepago</td>
<td>18</td>
</tr>
<tr>
<td>Otros</td>
<td>otros</td>
<td>Otros con utilización del sistema financiero</td>
<td>20</td>
</tr>
<tr>
<td>Endoso de títulos</td>
<td>endoso_titulos</td>
<td>Endoso de títulos</td>
<td>21</td>
</tr>
</tbody></table>

<p>Debido a que el Servicio de Rentas Internas exige incluir información del pago,
las facturas a crédito se enviarán al SRI con forma de pago &quot;Otros con utilización del sistema financiero&quot;.</p>
<h2 id='tipo-de-proveedor'>Tipo de proveedor</h2>
<table><thead>
<tr>
<th>Tipo</th>
<th>Código</th>
</tr>
</thead><tbody>
<tr>
<td>Personal natural</td>
<td>01</td>
</tr>
<tr>
<td>Sociedad</td>
<td>02</td>
</tr>
</tbody></table>
<h1 id='errores'>Errores</h1>
<p>Listado de códigos de error y su significado.</p>

<table><thead>
<tr>
<th>Código</th>
<th>Significado</th>
</tr>
</thead><tbody>
<tr>
<td>400</td>
<td>Bad Request -- La información provista está mal formada o incompleta.</td>
</tr>
<tr>
<td>401</td>
<td>Unauthorized -- Tu clave de API no está autorizada para realizar esta acción</td>
</tr>
<tr>
<td>403</td>
<td>Forbidden --</td>
</tr>
<tr>
<td>404</td>
<td>Not Found -- El recurso especificado no existe.</td>
</tr>
<tr>
<td>405</td>
<td>Method Not Allowed --</td>
</tr>
<tr>
<td>406</td>
<td>Not Acceptable --</td>
</tr>
<tr>
<td>500</td>
<td>Internal Server Error -- Error en el sistema.</td>
</tr>
<tr>
<td>503</td>
<td>Service Unavailable -- Servicio temporalmente fuera de línea. Intenta más tarde.</td>
</tr>
</tbody></table>
<h1 id='notificaciones'>Notificaciones</h1>
<p>Dátil emite notificaciones cada vez que un comprobante es emitido. Te podrás
suscribir a estas notificaciones proveyendo una URL en donde recibir los datos
del comprobante emitido.</p>
<h2 id='suscripcion'>Suscripción</h2>
<p>Para suscribirte a las notificaciones envía un requerimiento a:</p>
<h3 id='operacion'>Operación</h3>
<p><code>POST /webhooks</code></p>
<h3 id='requerimiento'>Requerimiento</h3>
<blockquote>
<h4 id='requerimiento-de-ejemplo'>Requerimiento de ejemplo</h4></blockquote>
<pre class="highlight shell tab-shell"><code>curl -v https://link.datil.co/webhooks <span class="se">\</span>
-H <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
-H <span class="s2">"X-Key: &lt;clave-del-api&gt;"</span> <span class="se">\</span>
-H <span class="s2">"X-Password: &lt;clave-certificado-firma&gt;"</span> <span class="se">\</span>
-d <span class="s1">'{
  "event_name": "receipt-issued",
  "webhook_url": "http://www.b2b.com/ereceipts/receive"
}'</span>
</code></pre><pre class="highlight python tab-python"><code><span class="kn">import</span> <span class="nn">requests</span>
<span class="n">cabeceras</span> <span class="o">=</span> <span class="p">{</span><span class="s">'x-key'</span><span class="p">:</span> <span class="s">'&lt;clave-del-api&gt;'</span><span class="p">}</span>
<span class="n">suscripcion</span> <span class="o">=</span> <span class="p">{</span>
  <span class="s">"event_name"</span><span class="p">:</span> <span class="s">"receipt-issued"</span><span class="p">,</span>
  <span class="s">"webhook_url"</span><span class="p">:</span> <span class="s">"http://www.b2b.com/ereceipts/receive"</span><span class="p">}</span>

<span class="n">respuesta</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">post</span><span class="p">(</span>
    <span class="s">'https://link.datil.co/webhooks'</span><span class="p">,</span>
    <span class="n">headers</span> <span class="o">=</span> <span class="n">cabeceras</span><span class="p">,</span>
    <span class="n">data</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">suscripcion</span><span class="p">))</span>
</code></pre><pre class="highlight csharp tab-csharp"><code><span class="k">using</span> <span class="nn">RestSharp</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">System</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">System.Collections.Generic</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">System.Linq</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">System.Text</span><span class="p">;</span>

<span class="k">namespace</span> <span class="nn">DatilClient</span> <span class="p">{</span>
  <span class="k">class</span> <span class="nc">InvoicingServiceClient</span> <span class="p">{</span>
    <span class="k">static</span> <span class="k">void</span> <span class="nf">Main</span><span class="p">(</span><span class="kt">string</span><span class="p">[]</span> <span class="n">args</span><span class="p">)</span> <span class="p">{</span>

      <span class="c1">// Este ejemplo utiliza RestSharp </span>
      <span class="c1">// Para instalar anda al menú: tools &gt; Library Package Manager &gt; Package Manager Console</span>
      <span class="c1">// copia y pega y presiona enter: Install-Package RestSharp</span>

      <span class="kt">var</span> <span class="n">client</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">RestClient</span><span class="p">(</span><span class="s">"https://link.datil.co/"</span><span class="p">);</span>
      <span class="kt">var</span> <span class="n">idFactura</span> <span class="p">=</span> <span class="s">"&lt;id-factura&gt;"</span><span class="p">;</span>
      <span class="kt">var</span> <span class="n">request</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">RestRequest</span><span class="p">(</span><span class="s">"invoices/"</span> <span class="p">+</span> <span class="n">idFactura</span><span class="p">,</span> <span class="n">Method</span><span class="p">.</span><span class="n">POST</span><span class="p">);</span>
      <span class="n">request</span><span class="p">.</span><span class="nf">AddHeader</span><span class="p">(</span><span class="s">"X-Key"</span><span class="p">,</span> <span class="s">"&lt;clave-del-api&gt;"</span><span class="p">);</span>
      <span class="n">request</span><span class="p">.</span><span class="nf">AddBody</span><span class="p">(</span><span class="err">@</span><span class="s">"{
</span>        <span class="s">""</span><span class="n">event_name</span><span class="s">""</span><span class="p">:</span> <span class="s">"receipt-issued"</span><span class="p">,</span>
        <span class="s">""</span><span class="n">webhook_url</span><span class="s">""</span><span class="p">:</span> <span class="s">"http://www.b2b.com/ereceipts/receive"</span>
      <span class="p">}</span><span class="s">");
</span>
      <span class="n">IRestResponse</span> <span class="n">response</span> <span class="p">=</span> <span class="n">client</span><span class="p">.</span><span class="nf">Execute</span><span class="p">(</span><span class="n">request</span><span class="p">);</span>

      <span class="n">Console</span><span class="p">.</span><span class="nf">WriteLine</span><span class="p">(</span><span class="n">response</span><span class="p">.</span><span class="n">Content</span><span class="p">);</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">}</span>
</code></pre>
<table><thead>
<tr>
<th>Parámetro</th>
<th>Tipo</th>
<th>Descripción</th>
</tr>
</thead><tbody>
<tr>
<td>event_name</td>
<td>string</td>
<td>Podrá ser <code>receipt-issued</code> o <code>issue-error</code>. <strong>Requerido</strong></td>
</tr>
<tr>
<td>webhook_url</td>
<td>string</td>
<td>Dirección donde se recibirá la información en formato JSON <strong>Requerido</strong></td>
</tr>
</tbody></table>

<p>El evento <code>receipt-issued</code> es emitido cuando el proceso de emisión termina
correctamente. Los posibles estados de un comprobante al terminar de ser
procesado correctamente pueden ser:</p>

<ul>
<li>AUTORIZADO</li>
<li>NO AUTORIZADO</li>
</ul>

<p>El evento <code>issue-error</code> es emitido cuando ocurre un error en uno de los pasos
del proceso de emisión. Los posibles estados de un comprobante al terminar de ser
procesado correctamente pueden ser:</p>

<ul>
<li>CREADO (cuando no pudo ser firmado)</li>
<li>DEVUELTO</li>
</ul>
<h2 id='eventos'>Eventos</h2>
<p>Al ejecutarse un evento se enviará en un requerimiento tipo <em>POST</em>, la información completa del comprobante en
conjunto con la autorización a la dirección registrada como <code>webhook_url</code> al
momento de la suscripción.</p>
<h3 id='autorizado'>Autorizado</h3>
<p>Un comprobante <em>Autorizado</em> contendrá información como el siguiente ejemplo: </p>
<pre class="highlight plaintext"><code>{
  "secuencial":1267,
  "fecha_emision":"2015-12-04T19:28:56.782Z",
  "emisor":{
    "ruc":"0992712554001",
    "obligado_contabilidad":true,
    "contribuyente_especial":"",
    "nombre_comercial":"Datilmedia",
    "razon_social":"Datilmedia S.A.",
    "direccion":"Kennedy Norte Av. Miguel H. Alcivar",
    "establecimiento":{
      "punto_emision":"002",
      "codigo":"001",
      "direccion":"Calle A"
    },
    "email":"clientes@datilmedia.com"
  },
  "guia_remision":"001-002-007654320",
  "tipo":"factura",
  "moneda":"USD",
  "id":"1ae2afaf6fed46dcabb14d424311e232",
  "informacion_adicional":{
    "Tiempo de entrega":"5 días"
  },
  "ambiente":1,
  "totales":{
    "total_sin_impuestos":4359.54,
    "impuestos":[
      {
        "base_imponible":0.0,
        "valor":0.0,
        "codigo":"2",
        "codigo_porcentaje":"0"
      },
      {
        "base_imponible":4359.54,
        "valor":523.14,
        "codigo":"2",
        "codigo_porcentaje":"2"
      }
    ],
    "importe_total":4882.68,
    "propina":0.0,
    "descuento":0.0
  },
  "comprador":{
    "identificacion":"0924447956001",
    "tipo_identificacion":"04",
    "razon_social":"Juan Antonio Plaza",
    "direccion":"Calle única Numero: S/N",
    "telefono":"046015159",
    "email":"jplazaarguello@gmail.com"
  },
  "tipo_emision":1,
  "items":[
    {
      "precio_unitario":7.01,
      "descripcion":"CEMENTO ROCA 50 KG. (1) 40U C/PALET",
      "precio_total_sin_impuestos":4359.54,
      "impuestos":[
        {
          "base_imponible":4359.54,
          "valor":523.14,
          "tarifa":12.0,
          "codigo":"2",
          "codigo_porcentaje":"2"
        }
      ],
      "detalles_adicionales":{
        "Peso":"5000.0000",
        "Volumen":"1 Gl"
      },
      "cantidad":622.0,
      "codigo_auxiliar":"CTO2",
      "descuento":0.0,
      "codigo_principal":"CTO1"
    }
  ],
  "version":"1.0.0",
  "clave_acceso":"0412201501099271255400110010020000012671994716611",
  "api-key":"abcxyz1234567890mnbvqwe321tyu653",
  "autorizacion":{
    "numero":"0412201516042509927125540010331009539",
    "fecha":"2015-12-04T16:04:25",
    "estado":"AUTORIZADO",
    "mensajes":[

    ]
  }
}
</code></pre><h3 id='no-autorizado'>No Autorizado</h3>
<p>Un comprobante <em>No autorizado</em> contendrá información como el siguiente ejemplo: </p>
<pre class="highlight plaintext"><code>{
  "secuencial":1267,
  "fecha_emision":"2015-12-04T19:28:56.782Z",
  "emisor":{
    "ruc":"0992712554001",
    "obligado_contabilidad":true,
    "contribuyente_especial":"",
    "nombre_comercial":"Datilmedia",
    "razon_social":"Datilmedia S.A.",
    "direccion":"Kennedy Norte Av. Miguel H. Alcivar",
    "establecimiento":{
      "punto_emision":"002",
      "codigo":"001",
      "direccion":"Calle A"
    },
    "email":"clientes@datilmedia.com"
  },
  "guia_remision":"001-002-007654320",
  "tipo":"factura",
  "moneda":"USD",
  "id":"1ae2afaf6fed46dcabb14d424311e232",
  "informacion_adicional":{
    "Tiempo de entrega":"5 días"
  },
  "ambiente":1,
  "totales":{
    "total_sin_impuestos":4359.54,
    "impuestos":[
      {
        "base_imponible":0.0,
        "valor":0.0,
        "codigo":"2",
        "codigo_porcentaje":"0"
      },
      {
        "base_imponible":4359.54,
        "valor":523.14,
        "codigo":"2",
        "codigo_porcentaje":"2"
      }
    ],
    "importe_total":4882.68,
    "propina":0.0,
    "descuento":0.0
  },
  "comprador":{
    "identificacion":"0924447956001",
    "tipo_identificacion":"04",
    "razon_social":"Juan Antonio Plaza",
    "direccion":"Calle única Numero: S/N",
    "telefono":"046015159",
    "email":"jplazaarguello@gmail.com"
  },
  "tipo_emision":1,
  "items":[
    {
      "precio_unitario":7.01,
      "descripcion":"CEMENTO ROCA 50 KG. (1) 40U C/PALET",
      "precio_total_sin_impuestos":4359.54,
      "impuestos":[
        {
          "base_imponible":4359.54,
          "valor":523.14,
          "tarifa":12.0,
          "codigo":"2",
          "codigo_porcentaje":"2"
        }
      ],
      "detalles_adicionales":{
        "Peso":"5000.0000",
        "Volumen":"1 Gl"
      },
      "cantidad":622.0,
      "codigo_auxiliar":"CTO2",
      "descuento":0.0,
      "codigo_principal":"CTO1"
    }
  ],
  "version":"1.0.0",
  "clave_acceso":"0412201501099271255400110010020000012671994716611",
  "api-key":"abcxyz1234567890mnbvqwe321tyu653",
  "autorizacion": {
    "numero": "2907201515283909927125540017656314390",
    "fecha": "2015-09-28T19:28:56.782Z",
    "estado": "NO AUTORIZADO",
    "mensajes": [{
      "identificador": 46,
      "mensaje": "RUC NO EXISTE",
      "informacion_adicional": "El RUC debe tener 13 dígitos.",
      "tipo": "ERROR"
    }]
  }
}
</code></pre><h3 id='devuelto'>Devuelto</h3>
<p>Un comprobante <em>Devuelto</em> contendrá información como el siguiente ejemplo: </p>
<pre class="highlight plaintext"><code>{
  "secuencial":1267,
  "fecha_emision":"2015-12-04T19:28:56.782Z",
  "emisor":{
    "ruc":"0992712554001",
    "obligado_contabilidad":true,
    "contribuyente_especial":"",
    "nombre_comercial":"Datilmedia",
    "razon_social":"Datilmedia S.A.",
    "direccion":"Kennedy Norte Av. Miguel H. Alcivar",
    "establecimiento":{
      "punto_emision":"002",
      "codigo":"001",
      "direccion":"Calle A"
    },
    "email":"clientes@datilmedia.com"
  },
  "guia_remision":"001-002-007654320",
  "tipo":"factura",
  "moneda":"USD",
  "id":"1ae2afaf6fed46dcabb14d424311e231",
  "informacion_adicional":{
    "Tiempo de entrega":"5 días"
  },
  "ambiente":1,
  "totales":{
    "total_sin_impuestos":4359.54,
    "impuestos":[
      {
        "base_imponible":0.0,
        "valor":0.0,
        "codigo":"2",
        "codigo_porcentaje":"0"
      },
      {
        "base_imponible":4359.54,
        "valor":523.14,
        "codigo":"2",
        "codigo_porcentaje":"2"
      }
    ],
    "importe_total":4882.68,
    "propina":0.0,
    "descuento":0.0
  },
  "comprador":{
    "identificacion":"0924447956001",
    "tipo_identificacion":"04",
    "razon_social":"Juan Antonio Plaza",
    "direccion":"Calle única Numero: S/N",
    "telefono":"046015159",
    "email":"jplazaarguello@gmail.com"
  },
  "tipo_emision":1,
  "items":[
    {
      "precio_unitario":7.01,
      "descripcion":"CEMENTO ROCA 50 KG. (1) 40U C/PALET",
      "precio_total_sin_impuestos":4359.54,
      "impuestos":[
        {
          "base_imponible":4359.54,
          "valor":523.14,
          "tarifa":12.0,
          "codigo":"2",
          "codigo_porcentaje":"2"
        }
      ],
      "detalles_adicionales":{
        "Peso":"5000.0000",
        "Volumen":"1 Gl"
      },
      "cantidad":622.0,
      "codigo_auxiliar":"CTO2",
      "descuento":0.0,
      "codigo_principal":"CTO1"
    }
  ],
  "version":"1.0.0",
  "clave_acceso":"0412201501099271255400110010020000012671994716611",
  "api-key":"abcxyz1234567890mnbvqwe321tyu653",
  "envio_sri":{
    "estado":"DEVUELTA",
    "mensajes":[
      {
        "identificador":"35",
        "mensaje":"ARCHIVO NO CUMPLE ESTRUCTURA XML",
        "tipo":"ERROR",
        "informacion_adicional":"Se encontró el siguiente error en la estructura del comprobante: cvc-minLength-valid: Value '' with length = '0' is not facet-valid with respect to minLength '1' for type '#AnonType_valordetAdicionaldetallesAdicionalesdetalledetallesfactura'."
      }
    ]
  }
}
</code></pre><h3 id='error-en-firma'>Error en firma</h3><pre class="highlight plaintext"><code>{
  "secuencial":766,
  "firma":{
    "result":"bad",
    "error":"Clave de firma incorrecta, por favor inténtalo nuevamente.",
    "status":400
  },
  "fecha_emision":"2015-12-16T15:38:01-05:00",
  "emisor":{
    "ruc":"1792478103001",
    "obligado_contabilidad":"true",
    "contribuyente_especial":"",
    "nombre_comercial":"Dátil",
    "razon_social":"Datilmedia S.A.",
    "direccion":"Guayaquil Ecuador",
    "establecimiento":{
      "punto_emision":"003",
      "codigo":"001",
      "direccion":"Av. Primera 123 y Calle 2da, Guayas, Guayaquil."
    },
    "email":"jplaza@datilmedia.com"
  },
  "tipo":"factura",
  "moneda":"USD",
  "id":"9d30f85b12435a007ba1235e5007d123",
  "informacion_adicional":null,
  "ambiente":2,
  "certificate-password":null,
  "totales":{
    "total_sin_impuestos":2,
    "impuestos":[
      {
        "base_imponible":2274.11,
        "valor":272.89,
        "codigo":"2",
        "codigo_porcentaje":"2"
      }
    ],
    "importe_total":2547.0,
    "propina":0,
    "descuento":0,
    "descuento_adicional":0
  },
  "comprador":{
    "email":"jplaza@datilmedia.com",
    "identificacion":"0924392929",
    "tipo_identificacion":"04",
    "razon_social":"Juan Antonio Plaza",
    "direccion":"Mall del Sol Piso 3, Guayaquil",
    "telefono":"099999119"
  },
  "tipo_emision":1,
  "items":[
    {
      "cantidad":1,
      "codigo_principal":"8806085980334",
      "precio_unitario":1,
      "descripcion":"TELEVISORES LED 3D SAMSUNG UN55H6400AHXPA",
      "precio_total_sin_impuestos":1,
      "impuestos":[
        {
          "base_imponible":1,
          "valor":0.12,
          "tarifa":12.0,
          "codigo":"2",
          "codigo_porcentaje":"2"
        }
      ],
      "descuento":0
    },
    {
      "cantidad":2,
      "codigo_principal":"8806085462113",
      "precio_unitario":600,
      "descripcion":"LED 46 UN46F5500 SMART SAMSUNG",
      "precio_total_sin_impuestos":1200.00,
      "impuestos":[
        {
          "base_imponible":1200.00,
          "valor":144,
          "tarifa":12,
          "codigo":"2",
          "codigo_porcentaje":"2"
        }
      ],
      "descuento":0
    }
  ],
  "clave_acceso":"1612201501179247810300120010030987657662795494211",
  "api-key":"1b123043215678b890ce7656780032ce"
}
</code></pre>
      </div>
      <div class="dark-box">
          <div class="lang-selector">
                <a href="#" data-language-name="shell">cURL</a>
                <a href="#" data-language-name="python">Python</a>
                <a href="#" data-language-name="csharp">C#</a>
          </div>
      </div>
    </div>
  </body>
</html>
