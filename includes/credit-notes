<h1 id='notas-de-credito'>Notas de Crédito</h1><h2 id='emision-de-una-nota-de-credito'>Emisión de una nota de crédito</h2><h3 id='operacion'>Operación</h3>
<p><code>POST /credit-notes/issue</code></p>

<h3 id="requerimiento-nota-credito">Requerimiento</h3>

<blockquote>
<h4 id='requerimiento-de-ejemplo'>Requerimiento de ejemplo</h4></blockquote>
<pre class="highlight shell tab-shell"><code>curl -v https://link.datil.co/credit-notes/issue <span class="se">\</span>
-H <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
-H <span class="s2">"X-Key: &lt;API-key&gt;"</span> <span class="se">\</span>
-H <span class="s2">"X-Password: &lt;clave-certificado-firma&gt;"</span> <span class="se">\</span>
-d <span class="s1">'{
  "ambiente":1,
  "tipo_emision":1,
  "secuencial":148,
  "fecha_emision":"2015-02-28T11:28:56.782Z",
  "emisor":{
    "ruc":"0910000000001",
    "obligado_contabilidad":true,
    "contribuyente_especial":"12345",
    "nombre_comercial":"XYZ Corp",
    "razon_social":"XYZ Corporación S.A.",
    "direccion":"Av. Primera 234 y calle 5ta",
    "establecimiento":{
      "punto_emision":"002",
      "codigo":"001",
      "direccion":"Av. Primera 234 y calle 5ta"
    }
  },
  "moneda":"USD",
  "informacion_adicional":{
    "Tiempo de entrega":"5 días"
  },
  "totales":{
    "total_sin_impuestos":4359.54,
    "impuestos":[
      {
        "base_imponible":0.0,
        "valor":0.0,
        "codigo":"2",
        "codigo_porcentaje":"0"
      },
      {
        "base_imponible":4359.54,
        "valor":523.14,
        "codigo":"2",
        "codigo_porcentaje":"2"
      }
    ],
    "importe_total":4882.68
  },
  "fecha_emision_documento_modificado": "2015-02-27T11:28:56.782Z",
  "numero_documento_modificado": "001-002-000058473",
  "tipo_documento_modificado": "01",
  "motivo": "Devolución de produtos",
  "comprador":{
    "email":"juan.perez@xyz.com",
    "identificacion":"0987654321",
    "tipo_identificacion":"05",
    "razon_social":"Juan Pérez",
    "direccion":"Calle única Numero 987",
    "telefono":"046029400"
  },
  "items":[
    {
      "cantidad":622.0,
      "codigo_principal": "ZNC",
      "codigo_auxiliar": "050",
      "precio_unitario": 7.008907,
      "descripcion": "Zanahoria granel  50 Kg.",
      "precio_total_sin_impuestos": 4359.54,
      "impuestos": [
        {
          "base_imponible":4359.54,
          "valor":523.14,
          "tarifa":12.0,
          "codigo":"2",
          "codigo_porcentaje":"2"
        }
      ],
      "detalles_adicionales": {
        "Peso":"5000.0000"
      },
      "descuento": 0.0
    }
  ]
}'</span>
</code></pre><pre class="highlight python tab-python"><code><span class="kn">import</span> <span class="nn">requests</span><span class="p">,</span> <span class="n">json</span>

<span class="n">nota_credito</span> <span class="o">=</span> <span class="p">{</span>
  <span class="s">"ambiente"</span><span class="p">:</span><span class="mi">1</span><span class="p">,</span>
  <span class="s">"tipo_emision"</span><span class="p">:</span><span class="mi">1</span><span class="p">,</span>
  <span class="s">"secuencial"</span><span class="p">:</span><span class="mi">148</span><span class="p">,</span>
  <span class="s">"fecha_emision"</span><span class="p">:</span><span class="s">"2015-02-28T11:28:56.782Z"</span><span class="p">,</span>
  <span class="s">"emisor"</span><span class="p">:{</span>
    <span class="s">"ruc"</span><span class="p">:</span><span class="s">"0910000000001"</span><span class="p">,</span>
    <span class="s">"obligado_contabilidad"</span><span class="p">:</span><span class="n">true</span><span class="p">,</span>
    <span class="s">"contribuyente_especial"</span><span class="p">:</span><span class="s">"12345"</span><span class="p">,</span>
    <span class="s">"nombre_comercial"</span><span class="p">:</span><span class="s">"XYZ Corp"</span><span class="p">,</span>
    <span class="s">"razon_social"</span><span class="p">:</span><span class="s">"XYZ Corporación S.A."</span><span class="p">,</span>
    <span class="s">"direccion"</span><span class="p">:</span><span class="s">"Av. Primera 234 y calle 5ta"</span><span class="p">,</span>
    <span class="s">"establecimiento"</span><span class="p">:{</span>
      <span class="s">"punto_emision"</span><span class="p">:</span><span class="s">"002"</span><span class="p">,</span>
      <span class="s">"codigo"</span><span class="p">:</span><span class="s">"001"</span><span class="p">,</span>
      <span class="s">"direccion"</span><span class="p">:</span><span class="s">"Av. Primera 234 y calle 5ta"</span>
    <span class="p">}</span>
  <span class="p">},</span>
  <span class="s">"moneda"</span><span class="p">:</span><span class="s">"USD"</span><span class="p">,</span>
  <span class="s">"informacion_adicional"</span><span class="p">:{</span>
    <span class="s">"Tiempo de entrega"</span><span class="p">:</span><span class="s">"5 días"</span>
  <span class="p">},</span>
  <span class="s">"totales"</span><span class="p">:{</span>
    <span class="s">"total_sin_impuestos"</span><span class="p">:</span><span class="mf">4359.54</span><span class="p">,</span>
    <span class="s">"impuestos"</span><span class="p">:[</span>
      <span class="p">{</span>
        <span class="s">"base_imponible"</span><span class="p">:</span><span class="mf">0.0</span><span class="p">,</span>
        <span class="s">"valor"</span><span class="p">:</span><span class="mf">0.0</span><span class="p">,</span>
        <span class="s">"codigo"</span><span class="p">:</span><span class="s">"2"</span><span class="p">,</span>
        <span class="s">"codigo_porcentaje"</span><span class="p">:</span><span class="s">"0"</span>
      <span class="p">},</span>
      <span class="p">{</span>
        <span class="s">"base_imponible"</span><span class="p">:</span><span class="mf">4359.54</span><span class="p">,</span>
        <span class="s">"valor"</span><span class="p">:</span><span class="mf">523.14</span><span class="p">,</span>
        <span class="s">"codigo"</span><span class="p">:</span><span class="s">"2"</span><span class="p">,</span>
        <span class="s">"codigo_porcentaje"</span><span class="p">:</span><span class="s">"2"</span>
      <span class="p">}</span>
    <span class="p">],</span>
    <span class="s">"importe_total"</span><span class="p">:</span><span class="mf">4882.68</span>
  <span class="p">},</span>
  <span class="s">"fecha_emision_documento_modificado"</span><span class="p">:</span> <span class="s">"2015-02-27T11:28:56.782Z"</span><span class="p">,</span>
  <span class="s">"numero_documento_modificado"</span><span class="p">:</span> <span class="s">"001-002-000058473"</span><span class="p">,</span>
  <span class="s">"tipo_documento_modificado"</span><span class="p">:</span> <span class="s">"01"</span><span class="p">,</span>
  <span class="s">"motivo"</span><span class="p">:</span> <span class="s">"Devolución de produtos"</span><span class="p">,</span>
  <span class="s">"comprador"</span><span class="p">:{</span>
    <span class="s">"email"</span><span class="p">:</span><span class="s">"juan.perez@xyz.com"</span><span class="p">,</span>
    <span class="s">"identificacion"</span><span class="p">:</span><span class="s">"0987654321"</span><span class="p">,</span>
    <span class="s">"tipo_identificacion"</span><span class="p">:</span><span class="s">"05"</span><span class="p">,</span>
    <span class="s">"razon_social"</span><span class="p">:</span><span class="s">"Juan Pérez"</span><span class="p">,</span>
    <span class="s">"direccion"</span><span class="p">:</span><span class="s">"Calle única Numero 987"</span><span class="p">,</span>
    <span class="s">"telefono"</span><span class="p">:</span><span class="s">"046029400"</span>
  <span class="p">},</span>
  <span class="s">"items"</span><span class="p">:[</span>
    <span class="p">{</span>
      <span class="s">"cantidad"</span><span class="p">:</span><span class="mf">622.0</span><span class="p">,</span>
      <span class="s">"codigo_principal"</span><span class="p">:</span><span class="s">"ZNC"</span><span class="p">,</span>
      <span class="s">"codigo_auxiliar"</span><span class="p">:</span> <span class="s">"050"</span><span class="p">,</span>
      <span class="s">"precio_unitario"</span><span class="p">:</span> <span class="mf">7.008907</span><span class="p">,</span>
      <span class="s">"descripcion"</span><span class="p">:</span> <span class="s">"Zanahoria granel  50 Kg."</span><span class="p">,</span>
      <span class="s">"precio_total_sin_impuestos"</span><span class="p">:</span> <span class="mf">4359.54</span><span class="p">,</span>
      <span class="s">"impuestos"</span><span class="p">:</span> <span class="p">[</span>
        <span class="p">{</span>
          <span class="s">"base_imponible"</span><span class="p">:</span><span class="mf">4359.54</span><span class="p">,</span>
          <span class="s">"valor"</span><span class="p">:</span><span class="mf">523.14</span><span class="p">,</span>
          <span class="s">"tarifa"</span><span class="p">:</span><span class="mf">12.0</span><span class="p">,</span>
          <span class="s">"codigo"</span><span class="p">:</span><span class="s">"2"</span><span class="p">,</span>
          <span class="s">"codigo_porcentaje"</span><span class="p">:</span><span class="s">"2"</span>
        <span class="p">}</span>
      <span class="p">],</span>
      <span class="s">"detalles_adicionales"</span><span class="p">:</span> <span class="p">{</span>
        <span class="s">"Peso"</span><span class="p">:</span><span class="s">"5000.0000"</span>
      <span class="p">},</span>
      <span class="s">"descuento"</span><span class="p">:</span> <span class="mf">0.0</span>
    <span class="p">}</span>
  <span class="p">]</span>
<span class="p">}</span>
<span class="n">cabeceras</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s">'x-key'</span><span class="p">:</span> <span class="s">'&lt;clave-del-api&gt;'</span><span class="p">,</span>
    <span class="s">'x-password'</span><span class="p">:</span> <span class="s">'&lt;clave-certificado-firma&gt;'</span><span class="p">,</span>
    <span class="s">'content-type'</span><span class="p">:</span> <span class="s">'application/json'</span><span class="p">}</span>
<span class="n">respuesta</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">post</span><span class="p">(</span>
    <span class="s">"https://link.datil.co/credit-notes/issue"</span><span class="p">,</span>
    <span class="n">headers</span> <span class="o">=</span> <span class="n">cabeceras</span><span class="p">,</span>
    <span class="n">data</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">nota_credito</span><span class="p">))</span>
</code></pre><pre class="highlight csharp tab-csharp"><code><span class="k">using</span> <span class="nn">RestSharp</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">System</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">System.Collections.Generic</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">System.Linq</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">System.Text</span><span class="p">;</span>

<span class="k">namespace</span> <span class="nn">DatilClient</span> <span class="p">{</span>
  <span class="k">class</span> <span class="nc">InvoicingServiceClient</span> <span class="p">{</span>
    <span class="k">static</span> <span class="k">void</span> <span class="nf">Main</span><span class="p">(</span><span class="kt">string</span><span class="p">[]</span> <span class="n">args</span><span class="p">)</span> <span class="p">{</span>

      <span class="c1">// Este ejemplo utiliza RestSharp</span>
      <span class="c1">// Para instalar anda al menú: tools &gt; Library Package Manager &gt; Package Manager Console</span>
      <span class="c1">// copia y pega y presiona enter: Install-Package RestSharp</span>

      <span class="kt">var</span> <span class="n">client</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">RestClient</span><span class="p">(</span><span class="s">"https://link.datil.co/"</span><span class="p">);</span>
      <span class="kt">var</span> <span class="n">request</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">RestRequest</span><span class="p">(</span><span class="s">"credit-notes/issue"</span><span class="p">,</span> <span class="n">Method</span><span class="p">.</span><span class="n">POST</span><span class="p">);</span>
      <span class="n">request</span><span class="p">.</span><span class="nf">AddHeader</span><span class="p">(</span><span class="s">"X-Key"</span><span class="p">,</span> <span class="s">"&lt;clave-del-api&gt;"</span><span class="p">);</span>
      <span class="n">request</span><span class="p">.</span><span class="nf">AddHeader</span><span class="p">(</span><span class="s">"X-Password"</span><span class="p">,</span> <span class="s">"&lt;clave-certificado-firma&gt;"</span><span class="p">);</span>

      <span class="n">request</span><span class="p">.</span><span class="nf">AddBody</span><span class="p">(</span><span class="err">@</span><span class="s">"{
</span>        <span class="s">""</span><span class="n">ambiente</span><span class="s">""</span><span class="p">:</span><span class="m">1</span><span class="p">,</span>
        <span class="s">""</span><span class="n">tipo_emision</span><span class="s">""</span><span class="p">:</span><span class="m">1</span><span class="p">,</span>
        <span class="s">""</span><span class="n">secuencial</span><span class="s">""</span><span class="p">:</span><span class="m">148</span><span class="p">,</span>
        <span class="s">""</span><span class="n">fecha_emision</span><span class="s">""</span><span class="p">:</span><span class="s">""</span><span class="m">2015</span><span class="p">-</span><span class="m">02</span><span class="p">-</span><span class="m">28</span><span class="n">T11</span><span class="p">:</span><span class="m">28</span><span class="p">:</span><span class="m">56.782</span><span class="n">Z</span><span class="s">""</span><span class="p">,</span>
        <span class="s">""</span><span class="n">emisor</span><span class="s">""</span><span class="p">:{</span>
          <span class="s">""</span><span class="n">ruc</span><span class="s">""</span><span class="p">:</span><span class="s">""</span><span class="m">0910000000001</span><span class="s">""</span><span class="p">,</span>
          <span class="s">""</span><span class="n">obligado_contabilidad</span><span class="s">""</span><span class="p">:</span><span class="k">true</span><span class="p">,</span>
          <span class="s">""</span><span class="n">contribuyente_especial</span><span class="s">""</span><span class="p">:</span><span class="s">""</span><span class="m">12345</span><span class="s">""</span><span class="p">,</span>
          <span class="s">""</span><span class="n">nombre_comercial</span><span class="s">""</span><span class="p">:</span><span class="s">""</span><span class="n">XYZ</span> <span class="n">Corp</span><span class="s">""</span><span class="p">,</span>
          <span class="s">""</span><span class="n">razon_social</span><span class="s">""</span><span class="p">:</span><span class="s">""</span><span class="n">XYZ</span> <span class="n">Corporaci</span><span class="err">ó</span><span class="n">n</span> <span class="n">S</span><span class="p">.</span><span class="n">A</span><span class="p">.</span><span class="s">""</span><span class="p">,</span>
          <span class="s">""</span><span class="n">direccion</span><span class="s">""</span><span class="p">:</span><span class="s">""</span><span class="n">Av</span><span class="p">.</span> <span class="n">Primera</span> <span class="m">234</span> <span class="n">y</span> <span class="n">calle</span> <span class="m">5</span><span class="n">ta</span><span class="s">""</span><span class="p">,</span>
          <span class="s">""</span><span class="n">establecimiento</span><span class="s">""</span><span class="p">:{</span>
            <span class="s">""</span><span class="n">punto_emision</span><span class="s">""</span><span class="p">:</span><span class="s">""</span><span class="m">002</span><span class="s">""</span><span class="p">,</span>
            <span class="s">""</span><span class="n">codigo</span><span class="s">""</span><span class="p">:</span><span class="s">""</span><span class="m">001</span><span class="s">""</span><span class="p">,</span>
            <span class="s">""</span><span class="n">direccion</span><span class="s">""</span><span class="p">:</span><span class="s">""</span><span class="n">Av</span><span class="p">.</span> <span class="n">Primera</span> <span class="m">234</span> <span class="n">y</span> <span class="n">calle</span> <span class="m">5</span><span class="n">ta</span><span class="s">""</span>
          <span class="p">}</span>
        <span class="p">},</span>
        <span class="s">""</span><span class="n">moneda</span><span class="s">""</span><span class="p">:</span><span class="s">""</span><span class="n">USD</span><span class="s">""</span><span class="p">,</span>
        <span class="s">""</span><span class="n">informacion_adicional</span><span class="s">""</span><span class="p">:{</span>
          <span class="s">""</span><span class="n">Tiempo</span> <span class="n">de</span> <span class="n">entrega</span><span class="s">""</span><span class="p">:</span><span class="s">""</span><span class="m">5</span> <span class="n">d</span><span class="err">í</span><span class="k">as</span><span class="s">""</span>
        <span class="p">},</span>
        <span class="s">""</span><span class="n">totales</span><span class="s">""</span><span class="p">:{</span>
          <span class="s">""</span><span class="n">total_sin_impuestos</span><span class="s">""</span><span class="p">:</span><span class="m">4359.54</span><span class="p">,</span>
          <span class="s">""</span><span class="n">impuestos</span><span class="s">""</span><span class="p">:[</span>
            <span class="p">{</span>
              <span class="s">""</span><span class="n">base_imponible</span><span class="s">""</span><span class="p">:</span><span class="m">0.0</span><span class="p">,</span>
              <span class="s">""</span><span class="n">valor</span><span class="s">""</span><span class="p">:</span><span class="m">0.0</span><span class="p">,</span>
              <span class="s">""</span><span class="n">codigo</span><span class="s">""</span><span class="p">:</span><span class="s">""</span><span class="m">2</span><span class="s">""</span><span class="p">,</span>
              <span class="s">""</span><span class="n">codigo_porcentaje</span><span class="s">""</span><span class="p">:</span><span class="s">""</span><span class="m">0</span><span class="s">""</span>
            <span class="p">},</span>
            <span class="p">{</span>
              <span class="s">""</span><span class="n">base_imponible</span><span class="s">""</span><span class="p">:</span><span class="m">4359.54</span><span class="p">,</span>
              <span class="s">""</span><span class="n">valor</span><span class="s">""</span><span class="p">:</span><span class="m">523.14</span><span class="p">,</span>
              <span class="s">""</span><span class="n">codigo</span><span class="s">""</span><span class="p">:</span><span class="s">""</span><span class="m">2</span><span class="s">""</span><span class="p">,</span>
              <span class="s">""</span><span class="n">codigo_porcentaje</span><span class="s">""</span><span class="p">:</span><span class="s">""</span><span class="m">2</span><span class="s">""</span>
            <span class="p">}</span>
          <span class="p">],</span>
          <span class="s">""</span><span class="n">importe_total</span><span class="s">""</span><span class="p">:</span><span class="m">4882.68</span>
        <span class="p">},</span>
        <span class="s">""</span><span class="n">comprador</span><span class="s">""</span><span class="p">:{</span>
          <span class="s">""</span><span class="n">email</span><span class="s">""</span><span class="p">:</span><span class="s">""</span><span class="n">juan</span><span class="p">.</span><span class="n">perez@xyz</span><span class="p">.</span><span class="n">com</span><span class="s">""</span><span class="p">,</span>
          <span class="s">""</span><span class="n">identificacion</span><span class="s">""</span><span class="p">:</span><span class="s">""</span><span class="m">0987654321</span><span class="s">""</span><span class="p">,</span>
          <span class="s">""</span><span class="n">tipo_identificacion</span><span class="s">""</span><span class="p">:</span><span class="s">""</span><span class="m">05</span><span class="s">""</span><span class="p">,</span>
          <span class="s">""</span><span class="n">razon_social</span><span class="s">""</span><span class="p">:</span><span class="s">""</span><span class="n">Juan</span> <span class="n">P</span><span class="err">é</span><span class="n">rez</span><span class="s">""</span><span class="p">,</span>
          <span class="s">""</span><span class="n">direccion</span><span class="s">""</span><span class="p">:</span><span class="s">""</span><span class="n">Calle</span> <span class="err">ú</span><span class="n">nica</span> <span class="n">Numero</span> <span class="m">987</span><span class="s">""</span><span class="p">,</span>
          <span class="s">""</span><span class="n">telefono</span><span class="s">""</span><span class="p">:</span><span class="s">""</span><span class="m">046029400</span><span class="s">""</span>
        <span class="p">},</span>
        <span class="s">""</span><span class="n">items</span><span class="s">""</span><span class="p">:[</span>
          <span class="p">{</span>
            <span class="s">""</span><span class="n">cantidad</span><span class="s">""</span><span class="p">:</span><span class="m">622.0</span><span class="p">,</span>
            <span class="s">""</span><span class="n">codigo_principal</span><span class="s">""</span><span class="p">:</span><span class="s">""</span><span class="n">ZNC</span><span class="s">""</span>
            <span class="s">""</span><span class="n">codigo_auxiliar</span><span class="s">""</span><span class="p">:</span> <span class="s">""</span><span class="m">050</span><span class="s">""</span><span class="p">,</span>
            <span class="s">""</span><span class="n">precio_unitario</span><span class="s">""</span><span class="p">:</span> <span class="m">7.008907</span><span class="p">,</span>
            <span class="s">""</span><span class="n">descripcion</span><span class="s">""</span><span class="p">:</span> <span class="s">""</span><span class="n">Zanahoria</span> <span class="n">granel</span>  <span class="m">50</span> <span class="n">Kg</span><span class="p">.</span><span class="s">""</span><span class="p">,</span>
            <span class="s">""</span><span class="n">precio_total_sin_impuestos</span><span class="s">""</span><span class="p">:</span> <span class="m">4359.54</span><span class="p">,</span>
            <span class="s">""</span><span class="n">impuestos</span><span class="s">""</span><span class="p">:</span> <span class="p">[</span>
              <span class="p">{</span>
                <span class="s">""</span><span class="n">base_imponible</span><span class="s">""</span><span class="p">:</span><span class="m">4359.54</span><span class="p">,</span>
                <span class="s">""</span><span class="n">valor</span><span class="s">""</span><span class="p">:</span><span class="m">523.14</span><span class="p">,</span>
                <span class="s">""</span><span class="n">tarifa</span><span class="s">""</span><span class="p">:</span><span class="m">12.0</span><span class="p">,</span>
                <span class="s">""</span><span class="n">codigo</span><span class="s">""</span><span class="p">:</span><span class="s">""</span><span class="m">2</span><span class="s">""</span><span class="p">,</span>
                <span class="s">""</span><span class="n">codigo_porcentaje</span><span class="s">""</span><span class="p">:</span><span class="s">""</span><span class="m">2</span><span class="s">""</span>
              <span class="p">}</span>
            <span class="p">],</span>
            <span class="s">""</span><span class="n">detalles_adicionales</span><span class="s">""</span><span class="p">:</span> <span class="p">{</span>
              <span class="s">""</span><span class="n">Peso</span><span class="s">""</span><span class="p">:</span><span class="s">""</span><span class="m">5000.0000</span><span class="s">""</span>
            <span class="p">},</span>
            <span class="s">""</span><span class="n">descuento</span><span class="s">""</span><span class="p">:</span> <span class="m">0.0</span>
          <span class="p">}</span>
        <span class="p">]</span>
      <span class="p">}</span><span class="s">");
</span>
      <span class="n">IRestResponse</span> <span class="n">response</span> <span class="p">=</span> <span class="n">client</span><span class="p">.</span><span class="nf">Execute</span><span class="p">(</span><span class="n">request</span><span class="p">);</span>

      <span class="n">Console</span><span class="p">.</span><span class="nf">WriteLine</span><span class="p">(</span><span class="n">response</span><span class="p">.</span><span class="n">Content</span><span class="p">);</span>
      <span class="n">Console</span><span class="p">.</span><span class="nf">ReadLine</span><span class="p">();</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">}</span>
</code></pre>
<p>Para la emisión de una nota de crédito se debe enviar la información completa del
comprobante en el cuerpo del requerimiento en formato JSON.</p>

<table><thead>
<tr>
<th>Parámetro</th>
<th>Tipo</th>
<th>Descripción</th>
</tr>
</thead><tbody>
<tr>
<td>secuencial</td>
<td>integer (min. 1 - max. 999999999 )</td>
<td>Número de secuencia de la nota de crédito. <strong>Requerido</strong></td>
</tr>
<tr>
<td>emisor</td>
<td><a href="#emisor">emisor</a></td>
<td>Información completa del emisor. <strong>Requerido</strong></td>
</tr>
<tr>
<td>moneda</td>
<td>string</td>
<td>Código <a href="https://en.wikipedia.org/wiki/ISO_4217">ISO</a> de la moneda. <strong>Requerido</strong></td>
</tr>
<tr>
<td>fecha_emision</td>
<td>string</td>
<td>Fecha de emisión en formato AAAA-MM-DDHoraZonaHoraria, definido en el estándar <a href="http://tools.ietf.org/html/rfc3339#section-5.6">ISO8601</a>.</td>
</tr>
<tr>
<td>ambiente</td>
<td>integer</td>
<td>Pruebas: <code>1</code>.<br>Producción <code>2</code>.<br><strong>Requerido</strong></td>
</tr>
<tr>
<td>comprador</td>
<td>objeto tipo <a href="#persona">persona</a></td>
<td>Información del comprador. <strong>Requerido</strong></td>
</tr>
<tr>
<td>totales</td>
<td>objeto tipo <a href="#totales-nota-credito">totales</a></td>
<td>Listado de totales. <strong>Requerido</strong></td>
</tr>
<tr>
<td>fecha_emision_documento_modificado</td>
<td>string</td>
<td>Fecha de emisión en formato AAAA-MM-DDHoraZonaHoraria, definido en el estándar <a href="http://tools.ietf.org/html/rfc3339#section-5.6">ISO8601</a>. <strong>Requerido</strong></td>
</tr>
<tr>
<td>numero_documento_modificado</td>
<td>string</td>
<td>Número completo del documento que se está afectando. Normalmente facturas. Ejm: 001-002-010023098 <strong>Requerido</strong></td>
</tr>
<tr>
<td>tipo_documento_modificado</td>
<td>string</td>
<td>Códigos de <a href="#tipos-de-documentos">tipos de documentos</a>. <strong>Requerido</strong></td>
</tr>
<tr>
<td>motivo</td>
<td>string</td>
<td>Motivo de la operación. Ejm: Devolución de producto. <strong>Requerido</strong></td>
</tr>
<tr>
<td>tipo_emision</td>
<td>integer</td>
<td>Emisión normal: <code>1</code>.<br>Emisión por indisponibilidad: <code>2</code><br><strong>Requerido</strong></td>
</tr>
<tr>
<td>items</td>
<td>listado de objetos tipo <a href="#item-de-factura">item</a></td>
<td>Items incluídos en la nota de crédito. <strong>Requerido</strong></td>
</tr>
<tr>
<td>version</td>
<td>string</td>
<td>Versión del formato de comprobantes electrónicos de SRI. Si no se especifica, se utilizará la última revisión del formato implementada,</td>
</tr>
<tr>
<td>clave_acceso</td>
<td>string</td>
<td>La clave de acceso representa un identificador único del comprobante. Si esta información no es provista, Dátil la generará.<br>¿Cómo <a href="#clave-de-acceso">generar</a> la clave de acceso?</td>
</tr>
<tr>
<td>informacion_adicional</td>
<td>objeto</td>
<td>Información adicional adjunta al comprobante en forma de diccionario. Ejemplo:<br><code>{&quot;plan&quot;: &quot;Inicial&quot;, &quot;vigencia&quot;: &quot;1 mes&quot;}</code></td>
</tr>
</tbody></table>

<h4 id="totales-nota-credito">Totales</h4>

<table><thead>
<tr>
<th>Parámetro</th>
<th>Tipo</th>
<th>Descripción</th>
</tr>
</thead><tbody>
<tr>
<td>total_sin_impuestos</td>
<td>float</td>
<td>Total antes de los impuestos. <strong>Requerido</strong></td>
</tr>
<tr>
<td>importe_total</td>
<td>float</td>
<td>Total incluyendo impuestos. <strong>Requerido</strong></td>
</tr>
<tr>
<td>impuestos</td>
<td>listado de objetos <a href="#total-impuesto">total impuesto</a></td>
<td>Listado de impuesto totalizados. <strong>Requerido</strong></td>
</tr>
</tbody></table>

<!--aside class="success">
Remember — a happy kitten is an authenticated kitten!
</aside-->
<h3 id='respuesta'>Respuesta</h3>
<blockquote>
<h4 id='respuesta-de-ejemplo'>Respuesta de ejemplo</h4></blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"abcdef09876123cea56784f01"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"ambiente"</span><span class="p">:</span><span class="mi">1</span><span class="p">,</span><span class="w">
  </span><span class="s2">"tipo_emision"</span><span class="p">:</span><span class="mi">1</span><span class="p">,</span><span class="w">
  </span><span class="s2">"secuencial"</span><span class="p">:</span><span class="mi">148</span><span class="p">,</span><span class="w">
  </span><span class="s2">"fecha_emision"</span><span class="p">:</span><span class="s2">"2015-02-28T11:28:56.782Z"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"clave_acceso"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2802201501091000000000120010010000100451993736618"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"emisor"</span><span class="p">:{</span><span class="w">
    </span><span class="s2">"ruc"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0910000000001"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"obligado_contabilidad"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
    </span><span class="s2">"contribuyente_especial"</span><span class="p">:</span><span class="w"> </span><span class="s2">"12345"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"nombre_comercial"</span><span class="p">:</span><span class="w"> </span><span class="s2">"XYZ Corp"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"razon_social"</span><span class="p">:</span><span class="w"> </span><span class="s2">"XYZ Corporación S.A."</span><span class="p">,</span><span class="w">
    </span><span class="s2">"direccion"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Av. Primera 234 y calle 5ta"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"establecimiento"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="s2">"punto_emision"</span><span class="p">:</span><span class="w"> </span><span class="s2">"002"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"codigo"</span><span class="p">:</span><span class="w"> </span><span class="s2">"001"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"direccion"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Av. Primera 234 y calle 5ta"</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="s2">"moneda"</span><span class="p">:</span><span class="w"> </span><span class="s2">"USD"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"informacion_adicional"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"Tiempo de entrega"</span><span class="p">:</span><span class="w"> </span><span class="s2">"5 días"</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="s2">"totales"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"total_sin_impuestos"</span><span class="p">:</span><span class="w"> </span><span class="mf">4359.54</span><span class="p">,</span><span class="w">
    </span><span class="s2">"impuestos"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
      </span><span class="p">{</span><span class="w">
        </span><span class="s2">"base_imponible"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.0</span><span class="p">,</span><span class="w">
        </span><span class="s2">"valor"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.0</span><span class="p">,</span><span class="w">
        </span><span class="s2">"codigo"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"codigo_porcentaje"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0"</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="p">{</span><span class="w">
        </span><span class="s2">"base_imponible"</span><span class="p">:</span><span class="w"> </span><span class="mf">4359.54</span><span class="p">,</span><span class="w">
        </span><span class="s2">"valor"</span><span class="p">:</span><span class="w"> </span><span class="mf">523.14</span><span class="p">,</span><span class="w">
        </span><span class="s2">"codigo"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"codigo_porcentaje"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2"</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">],</span><span class="w">
    </span><span class="s2">"importe_total"</span><span class="p">:</span><span class="w"> </span><span class="mf">4882.68</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="s2">"comprador"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"email"</span><span class="p">:</span><span class="w"> </span><span class="s2">"juan.perez@xyz.com"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"identificacion"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0987654321"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"tipo_identificacion"</span><span class="p">:</span><span class="w"> </span><span class="s2">"05"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"razon_social"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Juan Pérez"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"direccion"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Calle única Numero 987"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"telefono"</span><span class="p">:</span><span class="w"> </span><span class="s2">"046029400"</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="s2">"items"</span><span class="p">:[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="s2">"cantidad"</span><span class="p">:</span><span class="w"> </span><span class="mf">622.0</span><span class="p">,</span><span class="w">
      </span><span class="s2">"codigo_principal"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ZNC"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"codigo_auxiliar"</span><span class="p">:</span><span class="w"> </span><span class="s2">"050"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"precio_unitario"</span><span class="p">:</span><span class="w"> </span><span class="mf">7.008907</span><span class="p">,</span><span class="w">
      </span><span class="s2">"descripcion"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Zanahoria granel  50 Kg."</span><span class="p">,</span><span class="w">
      </span><span class="s2">"precio_total_sin_impuestos"</span><span class="p">:</span><span class="w"> </span><span class="mf">4359.54</span><span class="p">,</span><span class="w">
      </span><span class="s2">"impuestos"</span><span class="p">:[</span><span class="w">
        </span><span class="p">{</span><span class="w">
          </span><span class="s2">"base_imponible"</span><span class="p">:</span><span class="w"> </span><span class="mf">4359.54</span><span class="p">,</span><span class="w">
          </span><span class="s2">"valor"</span><span class="p">:</span><span class="w"> </span><span class="mf">523.14</span><span class="p">,</span><span class="w">
          </span><span class="s2">"tarifa"</span><span class="p">:</span><span class="w"> </span><span class="mf">12.0</span><span class="p">,</span><span class="w">
          </span><span class="s2">"codigo"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"codigo_porcentaje"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2"</span><span class="w">
        </span><span class="p">}</span><span class="w">
      </span><span class="p">],</span><span class="w">
      </span><span class="s2">"detalles_adicionales"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"Peso"</span><span class="p">:</span><span class="w"> </span><span class="s2">"5000.0000"</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="s2">"descuento"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.0</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>Retorna un objeto tipo <strong><a href="#requerimiento-nota-credito">nota de crédito</a></strong> que incluye un nuevo parámetro <code>id</code>,
el cual identifica de manera única a la nota de crédito. El campo <code>clave_acceso</code>
generado también se incluirá como parte de la respuesta.</p>
<h2 id='emision-de-una-nota-de-credito-a-partir-de-xml'>Emisión de una nota de crédito a partir de XML</h2>
<p><code>POST /credit-notes/issue/xml</code></p>
<h3 id='requerimiento-a-partir-de-xml'>Requerimiento a partir de XML</h3>
<p>Para la emisión de una nota de crédito a partir de un XML se debe enviar contenido del archivo XML como parámetro en el cuerpo del requerimiento en formato JSON. Este XML debe cumplir con la especificación del SRI.</p>

<table><thead>
<tr>
<th>Parámetro</th>
<th>Tipo</th>
<th>Descripción</th>
</tr>
</thead><tbody>
<tr>
<td>xml</td>
<td>string</td>
<td>Contenido del archivo xml. <strong>Requerido</strong></td>
</tr>
</tbody></table>

<blockquote>
<h4 id='requerimiento-de-ejemplo-2'>Requerimiento de ejemplo</h4></blockquote>
<pre class="highlight shell tab-shell"><code>curl -v https://link.datil.co/credit-notes/issue/xml <span class="se">\</span>
-H <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
-H <span class="s2">"X-Key: &lt;API-key&gt;"</span> <span class="se">\</span>
-H <span class="s2">"X-Password: &lt;clave-certificado-firma&gt;"</span> <span class="se">\</span>
-d <span class="s1">'{"xml": "&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;
&lt;notaCredito id=\"comprobante\" version=\"1.1.0\"&gt;
  &lt;infoTributaria&gt;
    &lt;ambiente&gt;1&lt;/ambiente&gt;
    &lt;tipoEmision&gt;1&lt;/tipoEmision&gt;
    &lt;razonSocial&gt;DATILMEDIA S.A.&lt;/razonSocial&gt;
    &lt;nombreComercial&gt;Datil&lt;/nombreComercial&gt;
    &lt;ruc&gt;1234567890001&lt;/ruc&gt;
    &lt;claveAcceso&gt;0405202004123456789000110010010000000062235571918&lt;/claveAcceso&gt;
    &lt;codDoc&gt;04&lt;/codDoc&gt;
    &lt;estab&gt;001&lt;/estab&gt;
    &lt;ptoEmi&gt;001&lt;/ptoEmi&gt;
    &lt;secuencial&gt;000000006&lt;/secuencial&gt;
    &lt;dirMatriz&gt;Innvernadero Coworking, Bálsamos 813 entre Guayacanes e Higueras&lt;/dirMatriz&gt;
  &lt;/infoTributaria&gt;
  &lt;infoNotaCredito&gt;
    &lt;fechaEmision&gt;04/05/2020&lt;/fechaEmision&gt;
    &lt;dirEstablecimiento&gt;Innvernadero Coworking, Bálsamos 813 entre Guayacanes e Higueras&lt;/dirEstablecimiento&gt;
    &lt;tipoIdentificacionComprador&gt;04&lt;/tipoIdentificacionComprador&gt;
    &lt;razonSocialComprador&gt;Juan Pérez&lt;/razonSocialComprador&gt;
    &lt;identificacionComprador&gt;0953239092001&lt;/identificacionComprador&gt;
    &lt;obligadoContabilidad&gt;NO&lt;/obligadoContabilidad&gt;
    &lt;codDocModificado&gt;01&lt;/codDocModificado&gt;
    &lt;numDocModificado&gt;001-002-000000001&lt;/numDocModificado&gt;
    &lt;fechaEmisionDocSustento&gt;04/05/2020&lt;/fechaEmisionDocSustento&gt;
    &lt;totalSinImpuestos&gt;0.45&lt;/totalSinImpuestos&gt;
    &lt;valorModificacion&gt;0.68&lt;/valorModificacion&gt;
    &lt;moneda&gt;DOLAR&lt;/moneda&gt;
    &lt;totalConImpuestos&gt;
      &lt;totalImpuesto&gt;
        &lt;codigo&gt;3&lt;/codigo&gt;
        &lt;codigoPorcentaje&gt;3080&lt;/codigoPorcentaje&gt;
        &lt;baseImponible&gt;0.45&lt;/baseImponible&gt;
        &lt;valor&gt;0.16&lt;/valor&gt;
      &lt;/totalImpuesto&gt;
      &lt;totalImpuesto&gt;
        &lt;codigo&gt;2&lt;/codigo&gt;
        &lt;codigoPorcentaje&gt;2&lt;/codigoPorcentaje&gt;
        &lt;baseImponible&gt;0.61&lt;/baseImponible&gt;
        &lt;valor&gt;0.07&lt;/valor&gt;
      &lt;/totalImpuesto&gt;
    &lt;/totalConImpuestos&gt;
    &lt;motivo&gt;Motivo de la nota de credito&lt;/motivo&gt;
  &lt;/infoNotaCredito&gt;
  &lt;detalles&gt;
    &lt;detalle&gt;
      &lt;codigoInterno&gt;AGDAS-001&lt;/codigoInterno&gt;
      &lt;descripcion&gt;Agua purificada&lt;/descripcion&gt;
      &lt;cantidad&gt;1.000000&lt;/cantidad&gt;
      &lt;precioUnitario&gt;0.450000&lt;/precioUnitario&gt;
      &lt;descuento&gt;0.00&lt;/descuento&gt;
      &lt;precioTotalSinImpuesto&gt;0.45&lt;/precioTotalSinImpuesto&gt;
      &lt;impuestos&gt;
        &lt;impuesto&gt;
          &lt;codigo&gt;2&lt;/codigo&gt;
          &lt;codigoPorcentaje&gt;2&lt;/codigoPorcentaje&gt;
          &lt;tarifa&gt;12.00&lt;/tarifa&gt;
          &lt;baseImponible&gt;0.61&lt;/baseImponible&gt;
          &lt;valor&gt;0.07&lt;/valor&gt;
        &lt;/impuesto&gt;
        &lt;impuesto&gt;
          &lt;codigo&gt;3&lt;/codigo&gt;
          &lt;codigoPorcentaje&gt;3080&lt;/codigoPorcentaje&gt;
          &lt;tarifa&gt;35.00&lt;/tarifa&gt;
          &lt;baseImponible&gt;0.45&lt;/baseImponible&gt;
          &lt;valor&gt;0.16&lt;/valor&gt;
        &lt;/impuesto&gt;
      &lt;/impuestos&gt;
    &lt;/detalle&gt;
  &lt;/detalles&gt;
  &lt;infoAdicional&gt;
    &lt;campoAdicional nombre=\"Campo Adicional\"&gt;Informacion Adicional&lt;/campoAdicional&gt;
  &lt;/infoAdicional&gt;
&lt;/notaCredito&gt;"}'</span>
</code></pre><pre class="highlight python tab-python"><code><span class="kn">import</span> <span class="nn">requests</span><span class="p">,</span> <span class="n">json</span>

<span class="n">nota_credito</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s">"xml"</span><span class="p">:</span> <span class="s">'''&lt;?xml version=</span><span class="se">\"</span><span class="s">1.0</span><span class="se">\"</span><span class="s"> encoding=</span><span class="se">\"</span><span class="s">UTF-8</span><span class="se">\"</span><span class="s">?&gt;
    &lt;notaCredito id=</span><span class="se">\"</span><span class="s">comprobante</span><span class="se">\"</span><span class="s"> version=</span><span class="se">\"</span><span class="s">1.1.0</span><span class="se">\"</span><span class="s">&gt;
      &lt;infoTributaria&gt;
        &lt;ambiente&gt;1&lt;/ambiente&gt;
        &lt;tipoEmision&gt;1&lt;/tipoEmision&gt;
        &lt;razonSocial&gt;DATILMEDIA S.A.&lt;/razonSocial&gt;
        &lt;nombreComercial&gt;Datil&lt;/nombreComercial&gt;
        &lt;ruc&gt;1234567890001&lt;/ruc&gt;
        &lt;claveAcceso&gt;0405202004123456789000110010010000000062235571918&lt;/claveAcceso&gt;
        &lt;codDoc&gt;04&lt;/codDoc&gt;
        &lt;estab&gt;001&lt;/estab&gt;
        &lt;ptoEmi&gt;001&lt;/ptoEmi&gt;
        &lt;secuencial&gt;000000006&lt;/secuencial&gt;
        &lt;dirMatriz&gt;Innvernadero Coworking, Bálsamos 813 entre Guayacanes e Higueras&lt;/dirMatriz&gt;
      &lt;/infoTributaria&gt;
      &lt;infoNotaCredito&gt;
        &lt;fechaEmision&gt;04/05/2020&lt;/fechaEmision&gt;
        &lt;dirEstablecimiento&gt;Innvernadero Coworking, Bálsamos 813 entre Guayacanes e Higueras&lt;/dirEstablecimiento&gt;
        &lt;tipoIdentificacionComprador&gt;04&lt;/tipoIdentificacionComprador&gt;
        &lt;razonSocialComprador&gt;Juan Pérez&lt;/razonSocialComprador&gt;
        &lt;identificacionComprador&gt;0953239092001&lt;/identificacionComprador&gt;
        &lt;obligadoContabilidad&gt;NO&lt;/obligadoContabilidad&gt;
        &lt;codDocModificado&gt;01&lt;/codDocModificado&gt;
        &lt;numDocModificado&gt;001-002-000000001&lt;/numDocModificado&gt;
        &lt;fechaEmisionDocSustento&gt;04/05/2020&lt;/fechaEmisionDocSustento&gt;
        &lt;totalSinImpuestos&gt;0.45&lt;/totalSinImpuestos&gt;
        &lt;valorModificacion&gt;0.68&lt;/valorModificacion&gt;
        &lt;moneda&gt;DOLAR&lt;/moneda&gt;
        &lt;totalConImpuestos&gt;
          &lt;totalImpuesto&gt;
            &lt;codigo&gt;3&lt;/codigo&gt;
            &lt;codigoPorcentaje&gt;3080&lt;/codigoPorcentaje&gt;
            &lt;baseImponible&gt;0.45&lt;/baseImponible&gt;
            &lt;valor&gt;0.16&lt;/valor&gt;
          &lt;/totalImpuesto&gt;
          &lt;totalImpuesto&gt;
            &lt;codigo&gt;2&lt;/codigo&gt;
            &lt;codigoPorcentaje&gt;2&lt;/codigoPorcentaje&gt;
            &lt;baseImponible&gt;0.61&lt;/baseImponible&gt;
            &lt;valor&gt;0.07&lt;/valor&gt;
          &lt;/totalImpuesto&gt;
        &lt;/totalConImpuestos&gt;
        &lt;motivo&gt;Motivo de la nota de credito&lt;/motivo&gt;
      &lt;/infoNotaCredito&gt;
      &lt;detalles&gt;
        &lt;detalle&gt;
          &lt;codigoInterno&gt;AGDAS-001&lt;/codigoInterno&gt;
          &lt;descripcion&gt;Agua purificada&lt;/descripcion&gt;
          &lt;cantidad&gt;1.000000&lt;/cantidad&gt;
          &lt;precioUnitario&gt;0.450000&lt;/precioUnitario&gt;
          &lt;descuento&gt;0.00&lt;/descuento&gt;
          &lt;precioTotalSinImpuesto&gt;0.45&lt;/precioTotalSinImpuesto&gt;
          &lt;impuestos&gt;
            &lt;impuesto&gt;
              &lt;codigo&gt;2&lt;/codigo&gt;
              &lt;codigoPorcentaje&gt;2&lt;/codigoPorcentaje&gt;
              &lt;tarifa&gt;12.00&lt;/tarifa&gt;
              &lt;baseImponible&gt;0.61&lt;/baseImponible&gt;
              &lt;valor&gt;0.07&lt;/valor&gt;
            &lt;/impuesto&gt;
            &lt;impuesto&gt;
              &lt;codigo&gt;3&lt;/codigo&gt;
              &lt;codigoPorcentaje&gt;3080&lt;/codigoPorcentaje&gt;
              &lt;tarifa&gt;35.00&lt;/tarifa&gt;
              &lt;baseImponible&gt;0.45&lt;/baseImponible&gt;
              &lt;valor&gt;0.16&lt;/valor&gt;
            &lt;/impuesto&gt;
          &lt;/impuestos&gt;
        &lt;/detalle&gt;
      &lt;/detalles&gt;
      &lt;infoAdicional&gt;
        &lt;campoAdicional nombre="Campo Adicional"&gt;Informacion Adicional&lt;/campoAdicional&gt;
      &lt;/infoAdicional&gt;
    &lt;/notaCredito&gt;'''</span>
<span class="p">}</span>

<span class="n">cabeceras</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s">'x-key'</span><span class="p">:</span> <span class="s">'&lt;clave-del-api&gt;'</span><span class="p">,</span>
    <span class="s">'x-password'</span><span class="p">:</span> <span class="s">'&lt;clave-certificado-firma&gt;'</span><span class="p">,</span>
    <span class="s">'content-type'</span><span class="p">:</span> <span class="s">'application/json'</span><span class="p">}</span>
<span class="n">respuesta</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">post</span><span class="p">(</span>
    <span class="s">"https://link.datil.co/credit-notes/issue/xml"</span><span class="p">,</span>
    <span class="n">headers</span> <span class="o">=</span> <span class="n">cabeceras</span><span class="p">,</span>
    <span class="n">data</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">nota_credito</span><span class="p">))</span>
</code></pre>
<blockquote>
<h4 id='respuesta-de-ejemplo-2'>Respuesta de ejemplo</h4></blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="s2">"secuencial"</span><span class="p">:</span><span class="w"> </span><span class="s2">"000000006"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"fecha_emision"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2020-05-04T00:00:00-05:19"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"emisor"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"ruc"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1234567890001"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"razon_social"</span><span class="p">:</span><span class="w"> </span><span class="s2">"DATILMEDIA S.A."</span><span class="p">,</span><span class="w">
        </span><span class="s2">"nombre_comercial"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Datil"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"contribuyente_especial"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w">
        </span><span class="s2">"direccion"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Innvernadero Coworking, Bálsamos 813 entre Guayacanes e Higueras"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"obligado_contabilidad"</span><span class="p">:</span><span class="w"> </span><span class="s2">"NO"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"establecimiento"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="s2">"punto_emision"</span><span class="p">:</span><span class="w"> </span><span class="s2">"001"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"codigo"</span><span class="p">:</span><span class="w"> </span><span class="s2">"001"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"direccion"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Innvernadero Coworking, Bálsamos 813 entre Guayacanes e Higueras"</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="s2">"email"</span><span class="p">:</span><span class="w"> </span><span class="s2">"devops@datilmedia.com"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="s2">"fecha_emision_documento_modificado"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2020-05-04T00:00:00-05:00"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"es_valida"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
    </span><span class="s2">"moneda"</span><span class="p">:</span><span class="w"> </span><span class="s2">"USD"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"21da58fa6ecf4827ae002b8c641e1b00"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"informacion_adicional"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"Campo Adicional"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Informacion Adicional"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="s2">"ambiente"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"totales"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"total_sin_impuestos"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.45</span><span class="p">,</span><span class="w">
        </span><span class="s2">"importe_total"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.68</span><span class="p">,</span><span class="w">
        </span><span class="s2">"impuestos"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
            </span><span class="p">{</span><span class="w">
                </span><span class="s2">"codigo"</span><span class="p">:</span><span class="w"> </span><span class="s2">"3"</span><span class="p">,</span><span class="w">
                </span><span class="s2">"codigo_porcentaje"</span><span class="p">:</span><span class="w"> </span><span class="s2">"3080"</span><span class="p">,</span><span class="w">
                </span><span class="s2">"base_imponible"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.45</span><span class="p">,</span><span class="w">
                </span><span class="s2">"valor"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.16</span><span class="w">
            </span><span class="p">},</span><span class="w">
            </span><span class="p">{</span><span class="w">
                </span><span class="s2">"codigo"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2"</span><span class="p">,</span><span class="w">
                </span><span class="s2">"codigo_porcentaje"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2"</span><span class="p">,</span><span class="w">
                </span><span class="s2">"base_imponible"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.61</span><span class="p">,</span><span class="w">
                </span><span class="s2">"valor"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.07</span><span class="w">
            </span><span class="p">}</span><span class="w">
        </span><span class="p">]</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="s2">"comprador"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"identificacion"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0953239092001"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"razon_social"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Juan Pérez"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"direccion"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w">
        </span><span class="s2">"tipo_identificacion"</span><span class="p">:</span><span class="w"> </span><span class="s2">"04"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="s2">"tipo_emision"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
    </span><span class="s2">"items"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="p">{</span><span class="w">
            </span><span class="s2">"precio_unitario"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.45</span><span class="p">,</span><span class="w">
            </span><span class="s2">"descripcion"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Agua purificada"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"precio_total_sin_impuestos"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.45</span><span class="p">,</span><span class="w">
            </span><span class="s2">"impuestos"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
                </span><span class="p">{</span><span class="w">
                    </span><span class="s2">"codigo"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2"</span><span class="p">,</span><span class="w">
                    </span><span class="s2">"tarifa"</span><span class="p">:</span><span class="w"> </span><span class="mf">12.0</span><span class="p">,</span><span class="w">
                    </span><span class="s2">"codigo_porcentaje"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2"</span><span class="p">,</span><span class="w">
                    </span><span class="s2">"base_imponible"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.61</span><span class="p">,</span><span class="w">
                    </span><span class="s2">"valor"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.07</span><span class="w">
                </span><span class="p">},</span><span class="w">
                </span><span class="p">{</span><span class="w">
                    </span><span class="s2">"codigo"</span><span class="p">:</span><span class="w"> </span><span class="s2">"3"</span><span class="p">,</span><span class="w">
                    </span><span class="s2">"tarifa"</span><span class="p">:</span><span class="w"> </span><span class="mf">35.0</span><span class="p">,</span><span class="w">
                    </span><span class="s2">"codigo_porcentaje"</span><span class="p">:</span><span class="w"> </span><span class="s2">"3080"</span><span class="p">,</span><span class="w">
                    </span><span class="s2">"base_imponible"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.45</span><span class="p">,</span><span class="w">
                    </span><span class="s2">"valor"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.16</span><span class="w">
                </span><span class="p">}</span><span class="w">
            </span><span class="p">],</span><span class="w">
            </span><span class="s2">"detalles_adicionales"</span><span class="p">:</span><span class="w"> </span><span class="p">{},</span><span class="w">
            </span><span class="s2">"cantidad"</span><span class="p">:</span><span class="w"> </span><span class="mf">1.0</span><span class="p">,</span><span class="w">
            </span><span class="s2">"codigo_auxiliar"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w">
            </span><span class="s2">"descuento"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.0</span><span class="p">,</span><span class="w">
            </span><span class="s2">"codigo_principal"</span><span class="p">:</span><span class="w"> </span><span class="s2">"AGDAS-001"</span><span class="w">
        </span><span class="p">}</span><span class="w">
    </span><span class="p">],</span><span class="w">
    </span><span class="s2">"tipo_documento_modificado"</span><span class="p">:</span><span class="w"> </span><span class="s2">"01"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"numero_documento_modificado"</span><span class="p">:</span><span class="w"> </span><span class="s2">"001-002-000000001"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"clave_acceso"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0405202004123456789000110010010000000062235571918"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"motivo"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Motivo de la nota de credito"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre><h2 id='consulta-de-una-nota-de-credito'>Consulta de una nota de crédito</h2>
<p>Consulta una nota de crédito para obtener toda la información del comprobante, incluyendo
el estado del mismo.
El parámetro <code>estado</code> de la respuesta obtenida al invocar esta operación, indica
el estado actual del comprobante.</p>

<p>Si es necesario conocer en detalle, en que estado del <a href="#proceso-de-emisión">proceso de emisión</a>,
se debe examinar los parámetros <code>envio_sri</code> y <code>autorizacion_sri</code> de la respuesta.</p>
<h3 id='operacion-2'>Operación</h3>
<p><code>GET /credit-notes/&lt;invoice-id&gt;</code></p>
<h3 id='requerimiento'>Requerimiento</h3>
<blockquote>
<h4 id='requerimiento-de-ejemplo-3'>Requerimiento de ejemplo</h4></blockquote>
<pre class="highlight shell tab-shell"><code>curl -v https://link.datil.co/credit-notes/&lt;id-notacredito&gt; <span class="se">\</span>
-H <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
-H <span class="s2">"X-Key: &lt;clave-del-api&gt;"</span> <span class="se">\</span>
-H <span class="s2">"X-Password: &lt;clave-certificado-firma&gt;"</span> <span class="se">\</span>
</code></pre><pre class="highlight python tab-python"><code><span class="kn">import</span> <span class="nn">requests</span>
<span class="n">cabeceras</span> <span class="o">=</span> <span class="p">{</span><span class="s">'x-key'</span><span class="p">:</span> <span class="s">'&lt;clave-del-api&gt;'</span><span class="p">}</span>
<span class="n">respuesta</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span>
    <span class="s">'https://link.datil.co/credit-notes/&lt;id-notacredito&gt;'</span><span class="p">,</span>
    <span class="n">headers</span> <span class="o">=</span> <span class="n">cabeceras</span><span class="p">)</span>
</code></pre><pre class="highlight csharp tab-csharp"><code><span class="k">using</span> <span class="nn">RestSharp</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">System</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">System.Collections.Generic</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">System.Linq</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">System.Text</span><span class="p">;</span>

<span class="k">namespace</span> <span class="nn">DatilClient</span> <span class="p">{</span>
  <span class="k">class</span> <span class="nc">InvoicingServiceClient</span> <span class="p">{</span>
    <span class="k">static</span> <span class="k">void</span> <span class="nf">Main</span><span class="p">(</span><span class="kt">string</span><span class="p">[]</span> <span class="n">args</span><span class="p">)</span> <span class="p">{</span>

      <span class="kt">var</span> <span class="n">client</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">RestClient</span><span class="p">(</span><span class="s">"https://link.datil.co/"</span><span class="p">);</span>
      <span class="kt">var</span> <span class="n">idNotaCredito</span> <span class="p">=</span> <span class="s">"&lt;id-notacredito&gt;"</span><span class="p">;</span>
      <span class="kt">var</span> <span class="n">request</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">RestRequest</span><span class="p">(</span><span class="s">"invoices/"</span> <span class="p">+</span> <span class="n">idNotaCredito</span><span class="p">,</span> <span class="n">Method</span><span class="p">.</span><span class="n">GET</span><span class="p">);</span>
      <span class="n">request</span><span class="p">.</span><span class="nf">AddHeader</span><span class="p">(</span><span class="s">"X-Key"</span><span class="p">,</span> <span class="s">"&lt;clave-del-api&gt;"</span><span class="p">);</span>

      <span class="n">IRestResponse</span> <span class="n">response</span> <span class="p">=</span> <span class="n">client</span><span class="p">.</span><span class="nf">Execute</span><span class="p">(</span><span class="n">request</span><span class="p">);</span>

      <span class="n">Console</span><span class="p">.</span><span class="nf">WriteLine</span><span class="p">(</span><span class="n">response</span><span class="p">.</span><span class="n">Content</span><span class="p">);</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">}</span>
</code></pre>
<p>Reemplaza en la ruta <code>&lt;invoice-ID&gt;</code> por el <code>id</code> de la nota de crédito que necesitas consultar.</p>
<h3 id='respuesta-2'>Respuesta</h3>
<blockquote>
<h4 id='respuesta-de-ejemplo-3'>Respuesta de ejemplo</h4></blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"abcf12343faad06785"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"secuencial"</span><span class="p">:</span><span class="w"> </span><span class="s2">"16"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"fecha_emision"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2015-05-15"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"version"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1.0.0"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"clave_acceso"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1505201501099271255400110011000000000162092727615"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"emisor"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"ruc"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0992712554001"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"razon_social"</span><span class="p">:</span><span class="w"> </span><span class="s2">"DATILMEDIA S.A."</span><span class="p">,</span><span class="w">
        </span><span class="s2">"nombre_comercial"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Dátil"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"direccion"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
        </span><span class="s2">"obligado_contabilidad"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
        </span><span class="s2">"contribuyente_especial"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w">
        </span><span class="s2">"establecimiento"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="s2">"codigo"</span><span class="p">:</span><span class="w"> </span><span class="s2">"001"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"direccion"</span><span class="p">:</span><span class="w"> </span><span class="s2">"V.E. 112 Y CIRCUNVALACION NORTE"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"punto_emision"</span><span class="p">:</span><span class="w"> </span><span class="s2">"100"</span><span class="w">
        </span><span class="p">}</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="s2">"documento_sustento"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="s2">"fecha_documento"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2015-05-10"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"numero_documento"</span><span class="p">:</span><span class="w"> </span><span class="s2">"001-002-000073854"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"tipo_documento"</span><span class="p">:</span><span class="w"> </span><span class="s2">"01"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="s2">"estado"</span><span class="p">:</span><span class="w"> </span><span class="s2">"AUTORIZADO"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"correos_enviados"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="p">{</span><span class="w">
            </span><span class="s2">"fecha_envio"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2015-05-15T16:36:48.274604"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"destinatarios"</span><span class="p">:</span><span class="w"> </span><span class="s2">"juanantonioplaza@datilmedia.com"</span><span class="w">
        </span><span class="p">}</span><span class="w">
    </span><span class="p">],</span><span class="w">
    </span><span class="s2">"guia_remision"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w">
    </span><span class="s2">"moneda"</span><span class="p">:</span><span class="w"> </span><span class="s2">"USD"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"informacion_adicional"</span><span class="p">:</span><span class="w"> </span><span class="p">[],</span><span class="w">
    </span><span class="s2">"ambiente"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"totales"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"total_sin_impuestos"</span><span class="p">:</span><span class="w"> </span><span class="s2">"150.00"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"impuestos"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
            </span><span class="p">{</span><span class="w">
                </span><span class="s2">"codigo"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2"</span><span class="p">,</span><span class="w">
                </span><span class="s2">"codigo_porcentaje"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2"</span><span class="p">,</span><span class="w">
                </span><span class="s2">"base_imponible"</span><span class="p">:</span><span class="w"> </span><span class="s2">"150.00"</span><span class="p">,</span><span class="w">
                </span><span class="s2">"valor"</span><span class="p">:</span><span class="w"> </span><span class="s2">"18.00"</span><span class="w">
            </span><span class="p">}</span><span class="w">
        </span><span class="p">],</span><span class="w">
        </span><span class="s2">"importe_total"</span><span class="p">:</span><span class="w"> </span><span class="s2">"168.00"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="s2">"comprador"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"razon_social"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Carlos L. Plaza"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"identificacion"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0900102222"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"tipo_identificacion"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
        </span><span class="s2">"email"</span><span class="p">:</span><span class="w"> </span><span class="s2">"cplaza@gye593.com"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"direccion"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Calle Uno y Calle Dos"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"telefono"</span><span class="p">:</span><span class="w"> </span><span class="s2">"043334445"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="s2">"envio_sri"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"mensajes"</span><span class="p">:</span><span class="w"> </span><span class="p">[],</span><span class="w">
        </span><span class="s2">"estado"</span><span class="p">:</span><span class="w"> </span><span class="s2">"RECIBIDA"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"fecha"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="s2">"tipo_emision"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"items"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="p">{</span><span class="w">
            </span><span class="s2">"detalles_adicionales"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                </span><span class="s2">"Estadía"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2 noches"</span><span class="p">,</span><span class="w">
                </span><span class="s2">"Habitación"</span><span class="p">:</span><span class="w"> </span><span class="s2">"203"</span><span class="w">
            </span><span class="p">},</span><span class="w">
            </span><span class="s2">"cantidad"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1.000000"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"codigo_principal"</span><span class="p">:</span><span class="w"> </span><span class="s2">"HAB"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"codigo_auxiliar"</span><span class="p">:</span><span class="w"> </span><span class="s2">"DOB"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"descripcion"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Habitación doble"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"precio_unitario"</span><span class="p">:</span><span class="w"> </span><span class="s2">"150.000000"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"descuento"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0.00"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"precio_total_sin_impuestos"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w">
            </span><span class="s2">"impuestos"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
                </span><span class="p">{</span><span class="w">
                    </span><span class="s2">"tarifa"</span><span class="p">:</span><span class="w"> </span><span class="s2">"12.00"</span><span class="p">,</span><span class="w">
                    </span><span class="s2">"codigo"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2"</span><span class="p">,</span><span class="w">
                    </span><span class="s2">"codigo_porcentaje"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2"</span><span class="p">,</span><span class="w">
                    </span><span class="s2">"base_imponible"</span><span class="p">:</span><span class="w"> </span><span class="s2">"150.00"</span><span class="p">,</span><span class="w">
                    </span><span class="s2">"valor"</span><span class="p">:</span><span class="w"> </span><span class="s2">"18.00"</span><span class="w">
                </span><span class="p">}</span><span class="w">
            </span><span class="p">]</span><span class="w">
        </span><span class="p">}</span><span class="w">
    </span><span class="p">],</span><span class="w">
    </span><span class="s2">"autorizacion"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"estado"</span><span class="p">:</span><span class="w"> </span><span class="s2">"AUTORIZADO"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"mensajes"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
            </span><span class="p">{</span><span class="w">
                </span><span class="s2">"identificador"</span><span class="p">:</span><span class="w"> </span><span class="s2">"60"</span><span class="p">,</span><span class="w">
                </span><span class="s2">"mensaje"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ESTE PROCESO FUE REALIZADO EN EL AMBIENTE DE PRUEBAS"</span><span class="p">,</span><span class="w">
                </span><span class="s2">"tipo"</span><span class="p">:</span><span class="w"> </span><span class="s2">"INFORMATIVO"</span><span class="p">,</span><span class="w">
                </span><span class="s2">"informacion_adicional"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="w">
            </span><span class="p">}</span><span class="w">
        </span><span class="p">],</span><span class="w">
        </span><span class="s2">"numero"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1505201516323509927125540010266935227"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"fecha"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2015-05-15T16:32:35.000380"</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<table><thead>
<tr>
<th>Parámetro</th>
<th>Tipo</th>
<th>Descripción</th>
</tr>
</thead><tbody>
<tr>
<td>secuencial</td>
<td>string</td>
<td>Número de secuencia de la nota de crédito.</td>
</tr>
<tr>
<td>estado</td>
<td>string</td>
<td>Posibles valores: <code>AUTORIZADO</code>, <code>NO AUTORIZADO</code>, <code>ENVIADO</code>, <code>DEVUELTO</code>, <code>RECIBIDO</code>, <code>ERROR</code></td>
</tr>
<tr>
<td>fecha_emision</td>
<td>string</td>
<td>Fecha de emisión en formato AAAA-MM-DDHoraZonaHoraria, definido en el estándar <a href="http://tools.ietf">ISO8601</a>.</td>
</tr>
<tr>
<td>clave_acceso</td>
<td>string</td>
<td>La clave de acceso representa un identificador único del comprobante. Si esta información no es provista, Dátil la generará.<br>¿Cómo <a href="#clave-de-acceso">generar</a> la clave de acceso?</td>
</tr>
<tr>
<td>envio_sri</td>
<td>objeto tipo <a href="#envío-sri">envio sri</a></td>
<td>Información luego de enviar el comprobante.</td>
</tr>
<tr>
<td>autorizacion</td>
<td>objeto tipo <a href="#autorización-sri">autorizacion sri</a></td>
<td>Información de la autorización.org/html/rfc3339#section-5.6).</td>
</tr>
<tr>
<td>emisor</td>
<td>objeto tipo <a href="#emisor">emisor</a></td>
<td>Información completa del emisor.</td>
</tr>
<tr>
<td>documento_sustento</td>
<td>objeto tipo <a href="#documento-sustento">documento sustento</a></td>
<td>Información del documento de sustento asociado a la nota de crédito.</td>
</tr>
<tr>
<td>moneda</td>
<td>string</td>
<td>Código <a href="https://en.wikipedia.org/wiki/ISO_4217">ISO</a> de la moneda.</td>
</tr>
<tr>
<td>ambiente</td>
<td>integer</td>
<td>Pruebas: <code>1</code>.<br>Producción <code>2</code>.<br></td>
</tr>
<tr>
<td>totales</td>
<td>objeto tipo <a href="#totales-nota-de-crédito">totales</a></td>
<td>Listado de totales.</td>
</tr>
<tr>
<td>comprador</td>
<td>objeto tipo <a href="#persona">persona</a></td>
<td>Información del comprador.</td>
</tr>
<tr>
<td>tipo_emision</td>
<td>integer</td>
<td>Emisión normal: <code>1</code>.<br>Emisión por indisponibilidad: <code>2</code><br></td>
</tr>
<tr>
<td>items</td>
<td>listado de objetos tipo <a href="#item-de-factura">item</a></td>
<td>Items incluídos en la nota de crédito.</td>
</tr>
<tr>
<td>version</td>
<td>string</td>
<td>Versión de la especificación, opciones válidas: <code>1.0.0</code>, <code>1.1.0</code></td>
</tr>
</tbody></table>
<h2 id='re-emision-de-una-nota-de-credito'>Re-emisión de una nota de crédito</h2><h3 id='operacion-3'>Operación</h3>
<p><code>POST /credit-notes/:id/reissue</code></p>
<h3 id='requerimiento-2'>Requerimiento</h3><pre class="highlight shell tab-shell"><code>curl -v https://link.datil.co/credit-notes/&lt;id-notacredito&gt;/reissue <span class="se">\</span>
-H <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
-H <span class="s2">"X-Key: &lt;API-key&gt;"</span> <span class="se">\</span>
-H <span class="s2">"X-Password: &lt;clave-certificado-firma&gt;"</span> <span class="se">\</span>
-d <span class="s1">'{
  "ambiente":1,
  "tipo_emision":1,
  "secuencial":148,
  "fecha_emision":"2015-02-28T11:28:56.782Z",
  "emisor":{
    "ruc":"0910000000001",
    "obligado_contabilidad":true,
    "contribuyente_especial":"12345",
    "nombre_comercial":"XYZ Corp",
    "razon_social":"XYZ Corporación S.A.",
    "direccion":"Av. Primera 234 y calle 5ta",
    "establecimiento":{
      "punto_emision":"002",
      "codigo":"001",
      "direccion":"Av. Primera 234 y calle 5ta"
    }
  },
  "moneda":"USD",
  "informacion_adicional":{
    "Tiempo de entrega":"5 días"
  },
  "totales":{
    "total_sin_impuestos":4359.54,
    "impuestos":[
      {
        "base_imponible":0.0,
        "valor":0.0,
        "codigo":"2",
        "codigo_porcentaje":"0"
      },
      {
        "base_imponible":4359.54,
        "valor":523.14,
        "codigo":"2",
        "codigo_porcentaje":"2"
      }
    ],
    "importe_total":4882.68
  },
  "fecha_emision_documento_modificado": "2015-02-27T11:28:56.782Z",
  "numero_documento_modificado": "001-002-000058473",
  "tipo_documento_modificado": "01",
  "motivo": "Devolución de produtos",
  "comprador":{
    "email":"juan.perez@xyz.com",
    "identificacion":"0987654321",
    "tipo_identificacion":"05",
    "razon_social":"Juan Pérez",
    "direccion":"Calle única Numero 987",
    "telefono":"046029400"
  },
  "items":[
    {
      "cantidad":622.0,
      "codigo_principal": "ZNC",
      "codigo_auxiliar": "050",
      "precio_unitario": 7.008907,
      "descripcion": "Zanahoria granel  50 Kg.",
      "precio_total_sin_impuestos": 4359.54,
      "impuestos": [
        {
          "base_imponible":4359.54,
          "valor":523.14,
          "tarifa":12.0,
          "codigo":"2",
          "codigo_porcentaje":"2"
        }
      ],
      "detalles_adicionales": {
        "Peso":"5000.0000"
      },
      "descuento": 0.0
    }
  ]
}'</span>
</code></pre><pre class="highlight python tab-python"><code><span class="kn">import</span> <span class="nn">requests</span><span class="p">,</span> <span class="n">json</span>

<span class="n">nota_credito</span> <span class="o">=</span> <span class="p">{</span>
  <span class="s">"ambiente"</span><span class="p">:</span><span class="mi">1</span><span class="p">,</span>
  <span class="s">"tipo_emision"</span><span class="p">:</span><span class="mi">1</span><span class="p">,</span>
  <span class="s">"secuencial"</span><span class="p">:</span><span class="mi">148</span><span class="p">,</span>
  <span class="s">"fecha_emision"</span><span class="p">:</span><span class="s">"2015-02-28T11:28:56.782Z"</span><span class="p">,</span>
  <span class="s">"emisor"</span><span class="p">:{</span>
    <span class="s">"ruc"</span><span class="p">:</span><span class="s">"0910000000001"</span><span class="p">,</span>
    <span class="s">"obligado_contabilidad"</span><span class="p">:</span><span class="n">true</span><span class="p">,</span>
    <span class="s">"contribuyente_especial"</span><span class="p">:</span><span class="s">"12345"</span><span class="p">,</span>
    <span class="s">"nombre_comercial"</span><span class="p">:</span><span class="s">"XYZ Corp"</span><span class="p">,</span>
    <span class="s">"razon_social"</span><span class="p">:</span><span class="s">"XYZ Corporación S.A."</span><span class="p">,</span>
    <span class="s">"direccion"</span><span class="p">:</span><span class="s">"Av. Primera 234 y calle 5ta"</span><span class="p">,</span>
    <span class="s">"establecimiento"</span><span class="p">:{</span>
      <span class="s">"punto_emision"</span><span class="p">:</span><span class="s">"002"</span><span class="p">,</span>
      <span class="s">"codigo"</span><span class="p">:</span><span class="s">"001"</span><span class="p">,</span>
      <span class="s">"direccion"</span><span class="p">:</span><span class="s">"Av. Primera 234 y calle 5ta"</span>
    <span class="p">}</span>
  <span class="p">},</span>
  <span class="s">"moneda"</span><span class="p">:</span><span class="s">"USD"</span><span class="p">,</span>
  <span class="s">"informacion_adicional"</span><span class="p">:{</span>
    <span class="s">"Tiempo de entrega"</span><span class="p">:</span><span class="s">"5 días"</span>
  <span class="p">},</span>
  <span class="s">"totales"</span><span class="p">:{</span>
    <span class="s">"total_sin_impuestos"</span><span class="p">:</span><span class="mf">4359.54</span><span class="p">,</span>
    <span class="s">"impuestos"</span><span class="p">:[</span>
      <span class="p">{</span>
        <span class="s">"base_imponible"</span><span class="p">:</span><span class="mf">0.0</span><span class="p">,</span>
        <span class="s">"valor"</span><span class="p">:</span><span class="mf">0.0</span><span class="p">,</span>
        <span class="s">"codigo"</span><span class="p">:</span><span class="s">"2"</span><span class="p">,</span>
        <span class="s">"codigo_porcentaje"</span><span class="p">:</span><span class="s">"0"</span>
      <span class="p">},</span>
      <span class="p">{</span>
        <span class="s">"base_imponible"</span><span class="p">:</span><span class="mf">4359.54</span><span class="p">,</span>
        <span class="s">"valor"</span><span class="p">:</span><span class="mf">523.14</span><span class="p">,</span>
        <span class="s">"codigo"</span><span class="p">:</span><span class="s">"2"</span><span class="p">,</span>
        <span class="s">"codigo_porcentaje"</span><span class="p">:</span><span class="s">"2"</span>
      <span class="p">}</span>
    <span class="p">],</span>
    <span class="s">"importe_total"</span><span class="p">:</span><span class="mf">4882.68</span>
  <span class="p">},</span>
  <span class="s">"fecha_emision_documento_modificado"</span><span class="p">:</span> <span class="s">"2015-02-27T11:28:56.782Z"</span><span class="p">,</span>
  <span class="s">"numero_documento_modificado"</span><span class="p">:</span> <span class="s">"001-002-000058473"</span><span class="p">,</span>
  <span class="s">"tipo_documento_modificado"</span><span class="p">:</span> <span class="s">"01"</span><span class="p">,</span>
  <span class="s">"motivo"</span><span class="p">:</span> <span class="s">"Devolución de produtos"</span><span class="p">,</span>
  <span class="s">"comprador"</span><span class="p">:{</span>
    <span class="s">"email"</span><span class="p">:</span><span class="s">"juan.perez@xyz.com"</span><span class="p">,</span>
    <span class="s">"identificacion"</span><span class="p">:</span><span class="s">"0987654321"</span><span class="p">,</span>
    <span class="s">"tipo_identificacion"</span><span class="p">:</span><span class="s">"05"</span><span class="p">,</span>
    <span class="s">"razon_social"</span><span class="p">:</span><span class="s">"Juan Pérez"</span><span class="p">,</span>
    <span class="s">"direccion"</span><span class="p">:</span><span class="s">"Calle única Numero 987"</span><span class="p">,</span>
    <span class="s">"telefono"</span><span class="p">:</span><span class="s">"046029400"</span>
  <span class="p">},</span>
  <span class="s">"items"</span><span class="p">:[</span>
    <span class="p">{</span>
      <span class="s">"cantidad"</span><span class="p">:</span><span class="mf">622.0</span><span class="p">,</span>
      <span class="s">"codigo_principal"</span><span class="p">:</span><span class="s">"ZNC"</span><span class="p">,</span>
      <span class="s">"codigo_auxiliar"</span><span class="p">:</span> <span class="s">"050"</span><span class="p">,</span>
      <span class="s">"precio_unitario"</span><span class="p">:</span> <span class="mf">7.008907</span><span class="p">,</span>
      <span class="s">"descripcion"</span><span class="p">:</span> <span class="s">"Zanahoria granel  50 Kg."</span><span class="p">,</span>
      <span class="s">"precio_total_sin_impuestos"</span><span class="p">:</span> <span class="mf">4359.54</span><span class="p">,</span>
      <span class="s">"impuestos"</span><span class="p">:</span> <span class="p">[</span>
        <span class="p">{</span>
          <span class="s">"base_imponible"</span><span class="p">:</span><span class="mf">4359.54</span><span class="p">,</span>
          <span class="s">"valor"</span><span class="p">:</span><span class="mf">523.14</span><span class="p">,</span>
          <span class="s">"tarifa"</span><span class="p">:</span><span class="mf">12.0</span><span class="p">,</span>
          <span class="s">"codigo"</span><span class="p">:</span><span class="s">"2"</span><span class="p">,</span>
          <span class="s">"codigo_porcentaje"</span><span class="p">:</span><span class="s">"2"</span>
        <span class="p">}</span>
      <span class="p">],</span>
      <span class="s">"detalles_adicionales"</span><span class="p">:</span> <span class="p">{</span>
        <span class="s">"Peso"</span><span class="p">:</span><span class="s">"5000.0000"</span>
      <span class="p">},</span>
      <span class="s">"descuento"</span><span class="p">:</span> <span class="mf">0.0</span>
    <span class="p">}</span>
  <span class="p">]</span>
<span class="p">}</span>
<span class="n">cabeceras</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s">'x-key'</span><span class="p">:</span> <span class="s">'&lt;clave-del-api&gt;'</span><span class="p">,</span>
    <span class="s">'x-password'</span><span class="p">:</span> <span class="s">'&lt;clave-certificado-firma&gt;'</span><span class="p">,</span>
    <span class="s">'content-type'</span><span class="p">:</span> <span class="s">'application/json'</span><span class="p">}</span>
<span class="n">respuesta</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">post</span><span class="p">(</span>
    <span class="s">"https://link.datil.co/credit-notes/&lt;id-notacredito&gt;/reissue"</span><span class="p">,</span>
    <span class="n">headers</span> <span class="o">=</span> <span class="n">cabeceras</span><span class="p">,</span>
    <span class="n">data</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">nota_credito</span><span class="p">))</span>
</code></pre><pre class="highlight csharp tab-csharp"><code><span class="k">using</span> <span class="nn">RestSharp</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">System</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">System.Collections.Generic</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">System.Linq</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">System.Text</span><span class="p">;</span>

<span class="k">namespace</span> <span class="nn">DatilClient</span> <span class="p">{</span>
  <span class="k">class</span> <span class="nc">InvoicingServiceClient</span> <span class="p">{</span>
    <span class="k">static</span> <span class="k">void</span> <span class="nf">Main</span><span class="p">(</span><span class="kt">string</span><span class="p">[]</span> <span class="n">args</span><span class="p">)</span> <span class="p">{</span>

      <span class="c1">// Este ejemplo utiliza RestSharp</span>
      <span class="c1">// Para instalar anda al menú: tools &gt; Library Package Manager &gt; Package Manager Console</span>
      <span class="c1">// copia y pega y presiona enter: Install-Package RestSharp</span>

      <span class="kt">var</span> <span class="n">client</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">RestClient</span><span class="p">(</span><span class="s">"https://link.datil.co/"</span><span class="p">);</span>
      <span class="kt">var</span> <span class="n">idNotaCredito</span> <span class="p">=</span> <span class="s">"&lt;id-notacredito&gt;"</span><span class="p">;</span>
      <span class="kt">var</span> <span class="n">request</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">RestRequest</span><span class="p">(</span><span class="s">"credit-notes/"</span> <span class="p">+</span> <span class="n">idNotaCredito</span> <span class="p">+</span> <span class="s">"/reissue"</span><span class="p">,</span> <span class="n">Method</span><span class="p">.</span><span class="n">POST</span><span class="p">);</span>
      <span class="n">request</span><span class="p">.</span><span class="nf">AddHeader</span><span class="p">(</span><span class="s">"X-Key"</span><span class="p">,</span> <span class="s">"&lt;clave-del-api&gt;"</span><span class="p">);</span>
      <span class="n">request</span><span class="p">.</span><span class="nf">AddHeader</span><span class="p">(</span><span class="s">"X-Password"</span><span class="p">,</span> <span class="s">"&lt;clave-certificado-firma&gt;"</span><span class="p">);</span>

      <span class="n">request</span><span class="p">.</span><span class="nf">AddBody</span><span class="p">(</span><span class="err">@</span><span class="s">"{
</span>        <span class="s">""</span><span class="n">ambiente</span><span class="s">""</span><span class="p">:</span><span class="m">1</span><span class="p">,</span>
        <span class="s">""</span><span class="n">tipo_emision</span><span class="s">""</span><span class="p">:</span><span class="m">1</span><span class="p">,</span>
        <span class="s">""</span><span class="n">secuencial</span><span class="s">""</span><span class="p">:</span><span class="m">148</span><span class="p">,</span>
        <span class="s">""</span><span class="n">fecha_emision</span><span class="s">""</span><span class="p">:</span><span class="s">""</span><span class="m">2015</span><span class="p">-</span><span class="m">02</span><span class="p">-</span><span class="m">28</span><span class="n">T11</span><span class="p">:</span><span class="m">28</span><span class="p">:</span><span class="m">56.782</span><span class="n">Z</span><span class="s">""</span><span class="p">,</span>
        <span class="s">""</span><span class="n">emisor</span><span class="s">""</span><span class="p">:{</span>
          <span class="s">""</span><span class="n">ruc</span><span class="s">""</span><span class="p">:</span><span class="s">""</span><span class="m">0910000000001</span><span class="s">""</span><span class="p">,</span>
          <span class="s">""</span><span class="n">obligado_contabilidad</span><span class="s">""</span><span class="p">:</span><span class="k">true</span><span class="p">,</span>
          <span class="s">""</span><span class="n">contribuyente_especial</span><span class="s">""</span><span class="p">:</span><span class="s">""</span><span class="m">12345</span><span class="s">""</span><span class="p">,</span>
          <span class="s">""</span><span class="n">nombre_comercial</span><span class="s">""</span><span class="p">:</span><span class="s">""</span><span class="n">XYZ</span> <span class="n">Corp</span><span class="s">""</span><span class="p">,</span>
          <span class="s">""</span><span class="n">razon_social</span><span class="s">""</span><span class="p">:</span><span class="s">""</span><span class="n">XYZ</span> <span class="n">Corporaci</span><span class="err">ó</span><span class="n">n</span> <span class="n">S</span><span class="p">.</span><span class="n">A</span><span class="p">.</span><span class="s">""</span><span class="p">,</span>
          <span class="s">""</span><span class="n">direccion</span><span class="s">""</span><span class="p">:</span><span class="s">""</span><span class="n">Av</span><span class="p">.</span> <span class="n">Primera</span> <span class="m">234</span> <span class="n">y</span> <span class="n">calle</span> <span class="m">5</span><span class="n">ta</span><span class="s">""</span><span class="p">,</span>
          <span class="s">""</span><span class="n">establecimiento</span><span class="s">""</span><span class="p">:{</span>
            <span class="s">""</span><span class="n">punto_emision</span><span class="s">""</span><span class="p">:</span><span class="s">""</span><span class="m">002</span><span class="s">""</span><span class="p">,</span>
            <span class="s">""</span><span class="n">codigo</span><span class="s">""</span><span class="p">:</span><span class="s">""</span><span class="m">001</span><span class="s">""</span><span class="p">,</span>
            <span class="s">""</span><span class="n">direccion</span><span class="s">""</span><span class="p">:</span><span class="s">""</span><span class="n">Av</span><span class="p">.</span> <span class="n">Primera</span> <span class="m">234</span> <span class="n">y</span> <span class="n">calle</span> <span class="m">5</span><span class="n">ta</span><span class="s">""</span>
          <span class="p">}</span>
        <span class="p">},</span>
        <span class="s">""</span><span class="n">moneda</span><span class="s">""</span><span class="p">:</span><span class="s">""</span><span class="n">USD</span><span class="s">""</span><span class="p">,</span>
        <span class="s">""</span><span class="n">informacion_adicional</span><span class="s">""</span><span class="p">:{</span>
          <span class="s">""</span><span class="n">Tiempo</span> <span class="n">de</span> <span class="n">entrega</span><span class="s">""</span><span class="p">:</span><span class="s">""</span><span class="m">5</span> <span class="n">d</span><span class="err">í</span><span class="k">as</span><span class="s">""</span>
        <span class="p">},</span>
        <span class="s">""</span><span class="n">totales</span><span class="s">""</span><span class="p">:{</span>
          <span class="s">""</span><span class="n">total_sin_impuestos</span><span class="s">""</span><span class="p">:</span><span class="m">4359.54</span><span class="p">,</span>
          <span class="s">""</span><span class="n">impuestos</span><span class="s">""</span><span class="p">:[</span>
            <span class="p">{</span>
              <span class="s">""</span><span class="n">base_imponible</span><span class="s">""</span><span class="p">:</span><span class="m">0.0</span><span class="p">,</span>
              <span class="s">""</span><span class="n">valor</span><span class="s">""</span><span class="p">:</span><span class="m">0.0</span><span class="p">,</span>
              <span class="s">""</span><span class="n">codigo</span><span class="s">""</span><span class="p">:</span><span class="s">""</span><span class="m">2</span><span class="s">""</span><span class="p">,</span>
              <span class="s">""</span><span class="n">codigo_porcentaje</span><span class="s">""</span><span class="p">:</span><span class="s">""</span><span class="m">0</span><span class="s">""</span>
            <span class="p">},</span>
            <span class="p">{</span>
              <span class="s">""</span><span class="n">base_imponible</span><span class="s">""</span><span class="p">:</span><span class="m">4359.54</span><span class="p">,</span>
              <span class="s">""</span><span class="n">valor</span><span class="s">""</span><span class="p">:</span><span class="m">523.14</span><span class="p">,</span>
              <span class="s">""</span><span class="n">codigo</span><span class="s">""</span><span class="p">:</span><span class="s">""</span><span class="m">2</span><span class="s">""</span><span class="p">,</span>
              <span class="s">""</span><span class="n">codigo_porcentaje</span><span class="s">""</span><span class="p">:</span><span class="s">""</span><span class="m">2</span><span class="s">""</span>
            <span class="p">}</span>
          <span class="p">],</span>
          <span class="s">""</span><span class="n">importe_total</span><span class="s">""</span><span class="p">:</span><span class="m">4882.68</span>
        <span class="p">},</span>
        <span class="s">""</span><span class="n">comprador</span><span class="s">""</span><span class="p">:{</span>
          <span class="s">""</span><span class="n">email</span><span class="s">""</span><span class="p">:</span><span class="s">""</span><span class="n">juan</span><span class="p">.</span><span class="n">perez@xyz</span><span class="p">.</span><span class="n">com</span><span class="s">""</span><span class="p">,</span>
          <span class="s">""</span><span class="n">identificacion</span><span class="s">""</span><span class="p">:</span><span class="s">""</span><span class="m">0987654321</span><span class="s">""</span><span class="p">,</span>
          <span class="s">""</span><span class="n">tipo_identificacion</span><span class="s">""</span><span class="p">:</span><span class="s">""</span><span class="m">05</span><span class="s">""</span><span class="p">,</span>
          <span class="s">""</span><span class="n">razon_social</span><span class="s">""</span><span class="p">:</span><span class="s">""</span><span class="n">Juan</span> <span class="n">P</span><span class="err">é</span><span class="n">rez</span><span class="s">""</span><span class="p">,</span>
          <span class="s">""</span><span class="n">direccion</span><span class="s">""</span><span class="p">:</span><span class="s">""</span><span class="n">Calle</span> <span class="err">ú</span><span class="n">nica</span> <span class="n">Numero</span> <span class="m">987</span><span class="s">""</span><span class="p">,</span>
          <span class="s">""</span><span class="n">telefono</span><span class="s">""</span><span class="p">:</span><span class="s">""</span><span class="m">046029400</span><span class="s">""</span>
        <span class="p">},</span>
        <span class="s">""</span><span class="n">items</span><span class="s">""</span><span class="p">:[</span>
          <span class="p">{</span>
            <span class="s">""</span><span class="n">cantidad</span><span class="s">""</span><span class="p">:</span><span class="m">622.0</span><span class="p">,</span>
            <span class="s">""</span><span class="n">codigo_principal</span><span class="s">""</span><span class="p">:</span><span class="s">""</span><span class="n">ZNC</span><span class="s">""</span>
            <span class="s">""</span><span class="n">codigo_auxiliar</span><span class="s">""</span><span class="p">:</span> <span class="s">""</span><span class="m">050</span><span class="s">""</span><span class="p">,</span>
            <span class="s">""</span><span class="n">precio_unitario</span><span class="s">""</span><span class="p">:</span> <span class="m">7.008907</span><span class="p">,</span>
            <span class="s">""</span><span class="n">descripcion</span><span class="s">""</span><span class="p">:</span> <span class="s">""</span><span class="n">Zanahoria</span> <span class="n">granel</span>  <span class="m">50</span> <span class="n">Kg</span><span class="p">.</span><span class="s">""</span><span class="p">,</span>
            <span class="s">""</span><span class="n">precio_total_sin_impuestos</span><span class="s">""</span><span class="p">:</span> <span class="m">4359.54</span><span class="p">,</span>
            <span class="s">""</span><span class="n">impuestos</span><span class="s">""</span><span class="p">:</span> <span class="p">[</span>
              <span class="p">{</span>
                <span class="s">""</span><span class="n">base_imponible</span><span class="s">""</span><span class="p">:</span><span class="m">4359.54</span><span class="p">,</span>
                <span class="s">""</span><span class="n">valor</span><span class="s">""</span><span class="p">:</span><span class="m">523.14</span><span class="p">,</span>
                <span class="s">""</span><span class="n">tarifa</span><span class="s">""</span><span class="p">:</span><span class="m">12.0</span><span class="p">,</span>
                <span class="s">""</span><span class="n">codigo</span><span class="s">""</span><span class="p">:</span><span class="s">""</span><span class="m">2</span><span class="s">""</span><span class="p">,</span>
                <span class="s">""</span><span class="n">codigo_porcentaje</span><span class="s">""</span><span class="p">:</span><span class="s">""</span><span class="m">2</span><span class="s">""</span>
              <span class="p">}</span>
            <span class="p">],</span>
            <span class="s">""</span><span class="n">detalles_adicionales</span><span class="s">""</span><span class="p">:</span> <span class="p">{</span>
              <span class="s">""</span><span class="n">Peso</span><span class="s">""</span><span class="p">:</span><span class="s">""</span><span class="m">5000.0000</span><span class="s">""</span>
            <span class="p">},</span>
            <span class="s">""</span><span class="n">descuento</span><span class="s">""</span><span class="p">:</span> <span class="m">0.0</span>
          <span class="p">}</span>
        <span class="p">]</span>
      <span class="p">}</span><span class="s">");
</span>
      <span class="n">IRestResponse</span> <span class="n">response</span> <span class="p">=</span> <span class="n">client</span><span class="p">.</span><span class="nf">Execute</span><span class="p">(</span><span class="n">request</span><span class="p">);</span>

      <span class="n">Console</span><span class="p">.</span><span class="nf">WriteLine</span><span class="p">(</span><span class="n">response</span><span class="p">.</span><span class="n">Content</span><span class="p">);</span>
      <span class="n">Console</span><span class="p">.</span><span class="nf">ReadLine</span><span class="p">();</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">}</span>
</code></pre>
<p>Esta operación debe ser utilizada para corregir comprobantes NO AUTORIZADOS o DEVUELTOS por el Servicio de Rentas Internas.</p>

<p>En la URL de esta opción se debe incluir el id de la nota de crédito recibida al momento de emitirla.</p>

<p>El cuerpo del requerimiento es un objeto nota de crédito con los datos corregidos para que pueda ser procesado y autorizado.</p>
<h3 id='respuesta-3'>Respuesta</h3>
<blockquote>
<h4 id='respuesta-de-ejemplo-4'>Respuesta de ejemplo</h4></blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"abcdef09876123cea56784f01"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"ambiente"</span><span class="p">:</span><span class="mi">1</span><span class="p">,</span><span class="w">
  </span><span class="s2">"tipo_emision"</span><span class="p">:</span><span class="mi">1</span><span class="p">,</span><span class="w">
  </span><span class="s2">"secuencial"</span><span class="p">:</span><span class="mi">148</span><span class="p">,</span><span class="w">
  </span><span class="s2">"fecha_emision"</span><span class="p">:</span><span class="s2">"2015-02-28T11:28:56.782Z"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"clave_acceso"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2802201501091000000000120010010000100451993736618"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"emisor"</span><span class="p">:{</span><span class="w">
    </span><span class="s2">"ruc"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0910000000001"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"obligado_contabilidad"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
    </span><span class="s2">"contribuyente_especial"</span><span class="p">:</span><span class="w"> </span><span class="s2">"12345"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"nombre_comercial"</span><span class="p">:</span><span class="w"> </span><span class="s2">"XYZ Corp"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"razon_social"</span><span class="p">:</span><span class="w"> </span><span class="s2">"XYZ Corporación S.A."</span><span class="p">,</span><span class="w">
    </span><span class="s2">"direccion"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Av. Primera 234 y calle 5ta"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"establecimiento"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="s2">"punto_emision"</span><span class="p">:</span><span class="w"> </span><span class="s2">"002"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"codigo"</span><span class="p">:</span><span class="w"> </span><span class="s2">"001"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"direccion"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Av. Primera 234 y calle 5ta"</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="s2">"moneda"</span><span class="p">:</span><span class="w"> </span><span class="s2">"USD"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"informacion_adicional"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"Tiempo de entrega"</span><span class="p">:</span><span class="w"> </span><span class="s2">"5 días"</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="s2">"totales"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"total_sin_impuestos"</span><span class="p">:</span><span class="w"> </span><span class="mf">4359.54</span><span class="p">,</span><span class="w">
    </span><span class="s2">"impuestos"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
      </span><span class="p">{</span><span class="w">
        </span><span class="s2">"base_imponible"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.0</span><span class="p">,</span><span class="w">
        </span><span class="s2">"valor"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.0</span><span class="p">,</span><span class="w">
        </span><span class="s2">"codigo"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"codigo_porcentaje"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0"</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="p">{</span><span class="w">
        </span><span class="s2">"base_imponible"</span><span class="p">:</span><span class="w"> </span><span class="mf">4359.54</span><span class="p">,</span><span class="w">
        </span><span class="s2">"valor"</span><span class="p">:</span><span class="w"> </span><span class="mf">523.14</span><span class="p">,</span><span class="w">
        </span><span class="s2">"codigo"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"codigo_porcentaje"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2"</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">],</span><span class="w">
    </span><span class="s2">"importe_total"</span><span class="p">:</span><span class="w"> </span><span class="mf">4882.68</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="s2">"comprador"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"email"</span><span class="p">:</span><span class="w"> </span><span class="s2">"juan.perez@xyz.com"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"identificacion"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0987654321"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"tipo_identificacion"</span><span class="p">:</span><span class="w"> </span><span class="s2">"05"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"razon_social"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Juan Pérez"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"direccion"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Calle única Numero 987"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"telefono"</span><span class="p">:</span><span class="w"> </span><span class="s2">"046029400"</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="s2">"items"</span><span class="p">:[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="s2">"cantidad"</span><span class="p">:</span><span class="w"> </span><span class="mf">622.0</span><span class="p">,</span><span class="w">
      </span><span class="s2">"codigo_principal"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ZNC"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"codigo_auxiliar"</span><span class="p">:</span><span class="w"> </span><span class="s2">"050"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"precio_unitario"</span><span class="p">:</span><span class="w"> </span><span class="mf">7.008907</span><span class="p">,</span><span class="w">
      </span><span class="s2">"descripcion"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Zanahoria granel  50 Kg."</span><span class="p">,</span><span class="w">
      </span><span class="s2">"precio_total_sin_impuestos"</span><span class="p">:</span><span class="w"> </span><span class="mf">4359.54</span><span class="p">,</span><span class="w">
      </span><span class="s2">"impuestos"</span><span class="p">:[</span><span class="w">
        </span><span class="p">{</span><span class="w">
          </span><span class="s2">"base_imponible"</span><span class="p">:</span><span class="w"> </span><span class="mf">4359.54</span><span class="p">,</span><span class="w">
          </span><span class="s2">"valor"</span><span class="p">:</span><span class="w"> </span><span class="mf">523.14</span><span class="p">,</span><span class="w">
          </span><span class="s2">"tarifa"</span><span class="p">:</span><span class="w"> </span><span class="mf">12.0</span><span class="p">,</span><span class="w">
          </span><span class="s2">"codigo"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"codigo_porcentaje"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2"</span><span class="w">
        </span><span class="p">}</span><span class="w">
      </span><span class="p">],</span><span class="w">
      </span><span class="s2">"detalles_adicionales"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"Peso"</span><span class="p">:</span><span class="w"> </span><span class="s2">"5000.0000"</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="s2">"descuento"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.0</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>Retorna un objeto tipo <strong><a href="#requerimiento-nota-credito">nota de crédito</a></strong> que incluye un nuevo parámetro <code>id</code>,
el cual identifica de manera única a la nota de crédito. El campo <code>clave_acceso</code>
generado también se incluirá como parte de la respuesta. Sí la nota de crédito ya está autorizada se retornará un error.</p>
