<h1 id='comprobantes-de-retencion'>Comprobantes de Retención</h1><h2 id='emision-de-una-retencion'>Emisión de una retención</h2><h3 id='operacion'>Operación</h3>
<p><code>POST /retentions/issue</code></p>

<h3 id="requerimiento-retencion">Requerimiento</h3>

<blockquote>
<h4 id='requerimiento-de-ejemplo'>Requerimiento de ejemplo</h4></blockquote>
<pre class="highlight shell tab-shell"><code>curl -v https://link.datil.co/retentions/issue <span class="se">\</span>
-H <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
-H <span class="s2">"X-Key: &lt;API-key&gt;"</span> <span class="se">\</span>
-H <span class="s2">"X-Password: &lt;clave-certificado-firma&gt;"</span> <span class="se">\</span>
-d <span class="s1">'{
  "ambiente":1,
  "tipo_emision":1,
  "secuencial":14,
  "fecha_emision":"2015-12-25T11:28:56.782Z",
  "periodo_fiscal":"12/2015",
  "emisor":{
    "ruc":"0910000000001",
    "obligado_contabilidad":true,
    "contribuyente_especial":"12345",
    "nombre_comercial":"XYZ Corp",
    "razon_social":"XYZ Corporación S.A.",
    "direccion":"Av. Primera 234 y calle 5ta",
    "establecimiento":{
      "punto_emision":"002",
      "codigo":"001",
      "direccion":"Av. Primera 234 y calle 5ta"
    }
  },
  "informacion_adicional":{
    "Envíada al correo electónico":"contabilidad@xyz.com"
  },
  "items":[
    {
      "base_imponible": 4226.4,
      "codigo": 1,
      "codigo_porcentaje": "312",
      "fecha_emision_documento_sustento": "2015-12-04T00:00:00-05:19",
      "numero_documento_sustento": "011-007-000000251",
      "porcentaje": 1.0,
      "tipo_documento_sustento": "01",
      "valor_retenido": 42.26
    }
  ]
  "sujeto":{
    "email":"contabilidad@email.com",
    "identificacion":"0987654321",
    "tipo_identificacion":"05",
    "razon_social":"Juan Pérez",
    "direccion":"Calle única Numero 987",
    "telefono":"046029400"
  }
}'</span>
</code></pre><pre class="highlight python tab-python"><code><span class="kn">import</span> <span class="nn">requests</span><span class="p">,</span> <span class="n">json</span>

<span class="n">retencion</span> <span class="o">=</span> <span class="p">{</span>
  <span class="s">"ambiente"</span><span class="p">:</span><span class="mi">1</span><span class="p">,</span>
  <span class="s">"tipo_emision"</span><span class="p">:</span><span class="mi">1</span><span class="p">,</span>
  <span class="s">"secuencial"</span><span class="p">:</span><span class="mi">14</span><span class="p">,</span>
  <span class="s">"fecha_emision"</span><span class="p">:</span><span class="s">"2015-12-25T11:28:56.782Z"</span><span class="p">,</span>
  <span class="s">"periodo_fiscal"</span><span class="p">:</span><span class="s">"12/2015"</span><span class="p">,</span>
  <span class="s">"emisor"</span><span class="p">:{</span>
    <span class="s">"ruc"</span><span class="p">:</span><span class="s">"0910000000001"</span><span class="p">,</span>
    <span class="s">"obligado_contabilidad"</span><span class="p">:</span><span class="n">true</span><span class="p">,</span>
    <span class="s">"contribuyente_especial"</span><span class="p">:</span><span class="s">"12345"</span><span class="p">,</span>
    <span class="s">"nombre_comercial"</span><span class="p">:</span><span class="s">"XYZ Corp"</span><span class="p">,</span>
    <span class="s">"razon_social"</span><span class="p">:</span><span class="s">"XYZ Corporación S.A."</span><span class="p">,</span>
    <span class="s">"direccion"</span><span class="p">:</span><span class="s">"Av. Primera 234 y calle 5ta"</span><span class="p">,</span>
    <span class="s">"establecimiento"</span><span class="p">:{</span>
      <span class="s">"punto_emision"</span><span class="p">:</span><span class="s">"002"</span><span class="p">,</span>
      <span class="s">"codigo"</span><span class="p">:</span><span class="s">"001"</span><span class="p">,</span>
      <span class="s">"direccion"</span><span class="p">:</span><span class="s">"Av. Primera 234 y calle 5ta"</span>
    <span class="p">}</span>
  <span class="p">},</span>
  <span class="s">"informacion_adicional"</span><span class="p">:{</span>
    <span class="s">"Envíada al correo electónico"</span><span class="p">:</span><span class="s">"contabilidad@xyz.com"</span>
  <span class="p">},</span>
  <span class="s">"items"</span><span class="p">:[</span>
    <span class="p">{</span>
      <span class="s">"base_imponible"</span><span class="p">:</span> <span class="mf">4226.4</span><span class="p">,</span>
      <span class="s">"codigo"</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
      <span class="s">"codigo_porcentaje"</span><span class="p">:</span> <span class="s">"312"</span><span class="p">,</span>
      <span class="s">"fecha_emision_documento_sustento"</span><span class="p">:</span> <span class="s">"2015-12-04T00:00:00-05:19"</span><span class="p">,</span>
      <span class="s">"numero_documento_sustento"</span><span class="p">:</span> <span class="s">"011-007-000000251"</span><span class="p">,</span>
      <span class="s">"porcentaje"</span><span class="p">:</span> <span class="mf">1.0</span><span class="p">,</span>
      <span class="s">"tipo_documento_sustento"</span><span class="p">:</span> <span class="s">"01"</span><span class="p">,</span>
      <span class="s">"valor_retenido"</span><span class="p">:</span> <span class="mf">42.26</span>
    <span class="p">}</span>
  <span class="p">],</span>
  <span class="s">"sujeto"</span><span class="p">:{</span>
    <span class="s">"email"</span><span class="p">:</span><span class="s">"contabilidad@email.com"</span><span class="p">,</span>
    <span class="s">"identificacion"</span><span class="p">:</span><span class="s">"0987654321"</span><span class="p">,</span>
    <span class="s">"tipo_identificacion"</span><span class="p">:</span><span class="s">"05"</span><span class="p">,</span>
    <span class="s">"razon_social"</span><span class="p">:</span><span class="s">"Juan Pérez"</span><span class="p">,</span>
    <span class="s">"direccion"</span><span class="p">:</span><span class="s">"Calle única Numero 987"</span><span class="p">,</span>
    <span class="s">"telefono"</span><span class="p">:</span><span class="s">"046029400"</span>
  <span class="p">}</span>
<span class="p">}</span>
<span class="n">cabeceras</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s">'x-key'</span><span class="p">:</span> <span class="s">'&lt;clave-del-api&gt;'</span><span class="p">,</span>
    <span class="s">'x-password'</span><span class="p">:</span> <span class="s">'&lt;clave-certificado-firma&gt;'</span><span class="p">,</span>
    <span class="s">'content-type'</span><span class="p">:</span> <span class="s">'application/json'</span><span class="p">}</span>
<span class="n">respuesta</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">post</span><span class="p">(</span>
    <span class="s">"https://link.datil.co/retentions/issue"</span><span class="p">,</span>
    <span class="n">headers</span> <span class="o">=</span> <span class="n">cabeceras</span><span class="p">,</span>
    <span class="n">data</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">retencion</span><span class="p">))</span>
</code></pre><pre class="highlight csharp tab-csharp"><code><span class="k">using</span> <span class="nn">RestSharp</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">System</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">System.Collections.Generic</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">System.Linq</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">System.Text</span><span class="p">;</span>

<span class="k">namespace</span> <span class="nn">DatilClient</span> <span class="p">{</span>
  <span class="k">class</span> <span class="nc">InvoicingServiceClient</span> <span class="p">{</span>
    <span class="k">static</span> <span class="k">void</span> <span class="nf">Main</span><span class="p">(</span><span class="kt">string</span><span class="p">[]</span> <span class="n">args</span><span class="p">)</span> <span class="p">{</span>

      <span class="c1">// Este ejemplo utiliza RestSharp</span>
      <span class="c1">// Para instalar anda al menú: tools &gt; Library Package Manager &gt; Package Manager Console</span>
      <span class="c1">// copia y pega y presiona enter: Install-Package RestSharp</span>

      <span class="kt">var</span> <span class="n">client</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">RestClient</span><span class="p">(</span><span class="s">"https://link.datil.co/"</span><span class="p">);</span>
      <span class="kt">var</span> <span class="n">request</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">RestRequest</span><span class="p">(</span><span class="s">"invoices/issue"</span><span class="p">,</span> <span class="n">Method</span><span class="p">.</span><span class="n">POST</span><span class="p">);</span>
      <span class="n">request</span><span class="p">.</span><span class="nf">AddHeader</span><span class="p">(</span><span class="s">"X-Key"</span><span class="p">,</span> <span class="s">"&lt;clave-del-api&gt;"</span><span class="p">);</span>
      <span class="n">request</span><span class="p">.</span><span class="nf">AddHeader</span><span class="p">(</span><span class="s">"X-Password"</span><span class="p">,</span> <span class="s">"&lt;clave-certificado-firma&gt;"</span><span class="p">);</span>

      <span class="n">request</span><span class="p">.</span><span class="nf">AddBody</span><span class="p">(</span><span class="err">@</span><span class="s">"{
</span>        <span class="s">""</span><span class="n">ambiente</span><span class="s">""</span><span class="p">:</span><span class="m">1</span><span class="p">,</span>
        <span class="s">""</span><span class="n">tipo_emision</span><span class="s">""</span><span class="p">:</span><span class="m">1</span><span class="p">,</span>
        <span class="s">""</span><span class="n">secuencial</span><span class="s">""</span><span class="p">:</span><span class="m">14</span><span class="p">,</span>
        <span class="s">""</span><span class="n">fecha_emision</span><span class="s">""</span><span class="p">:</span><span class="s">""</span><span class="m">2015</span><span class="p">-</span><span class="m">12</span><span class="p">-</span><span class="m">25</span><span class="n">T11</span><span class="p">:</span><span class="m">28</span><span class="p">:</span><span class="m">56.782</span><span class="n">Z</span><span class="s">""</span><span class="p">,</span>
        <span class="s">""</span><span class="n">periodo_fiscal</span><span class="s">""</span><span class="p">:</span><span class="s">""</span><span class="m">12</span><span class="p">/</span><span class="m">2015</span><span class="s">""</span><span class="p">,</span>
        <span class="s">""</span><span class="n">emisor</span><span class="s">""</span><span class="p">:{</span>
          <span class="s">""</span><span class="n">ruc</span><span class="s">""</span><span class="p">:</span><span class="s">""</span><span class="m">0910000000001</span><span class="s">""</span><span class="p">,</span>
          <span class="s">""</span><span class="n">obligado_contabilidad</span><span class="s">""</span><span class="p">:</span><span class="k">true</span><span class="p">,</span>
          <span class="s">""</span><span class="n">contribuyente_especial</span><span class="s">""</span><span class="p">:</span><span class="s">""</span><span class="m">12345</span><span class="s">""</span><span class="p">,</span>
          <span class="s">""</span><span class="n">nombre_comercial</span><span class="s">""</span><span class="p">:</span><span class="s">""</span><span class="n">XYZ</span> <span class="n">Corp</span><span class="s">""</span><span class="p">,</span>
          <span class="s">""</span><span class="n">razon_social</span><span class="s">""</span><span class="p">:</span><span class="s">""</span><span class="n">XYZ</span> <span class="n">Corporaci</span><span class="err">ó</span><span class="n">n</span> <span class="n">S</span><span class="p">.</span><span class="n">A</span><span class="p">.</span><span class="s">""</span><span class="p">,</span>
          <span class="s">""</span><span class="n">direccion</span><span class="s">""</span><span class="p">:</span><span class="s">""</span><span class="n">Av</span><span class="p">.</span> <span class="n">Primera</span> <span class="m">234</span> <span class="n">y</span> <span class="n">calle</span> <span class="m">5</span><span class="n">ta</span><span class="s">""</span><span class="p">,</span>
          <span class="s">""</span><span class="n">establecimiento</span><span class="s">""</span><span class="p">:{</span>
            <span class="s">""</span><span class="n">punto_emision</span><span class="s">""</span><span class="p">:</span><span class="s">""</span><span class="m">002</span><span class="s">""</span><span class="p">,</span>
            <span class="s">""</span><span class="n">codigo</span><span class="s">""</span><span class="p">:</span><span class="s">""</span><span class="m">001</span><span class="s">""</span><span class="p">,</span>
            <span class="s">""</span><span class="n">direccion</span><span class="s">""</span><span class="p">:</span><span class="s">""</span><span class="n">Av</span><span class="p">.</span> <span class="n">Primera</span> <span class="m">234</span> <span class="n">y</span> <span class="n">calle</span> <span class="m">5</span><span class="n">ta</span><span class="s">""</span>
          <span class="p">}</span>
        <span class="p">},</span>
        <span class="s">""</span><span class="n">informacion_adicional</span><span class="s">""</span><span class="p">:{</span>
          <span class="s">""</span><span class="n">Env</span><span class="err">í</span><span class="n">ada</span> <span class="n">al</span> <span class="n">correo</span> <span class="n">elect</span><span class="err">ó</span><span class="n">nico</span><span class="s">""</span><span class="p">:</span><span class="s">""</span><span class="n">contabilidad@xyz</span><span class="p">.</span><span class="n">com</span><span class="s">""</span>
        <span class="p">},</span>
        <span class="s">""</span><span class="n">items</span><span class="s">""</span><span class="p">:[</span>
          <span class="p">{</span>
            <span class="s">""</span><span class="n">base_imponible</span><span class="s">""</span><span class="p">:</span> <span class="m">4226.4</span><span class="p">,</span>
            <span class="s">""</span><span class="n">codigo</span><span class="s">""</span><span class="p">:</span> <span class="m">1</span><span class="p">,</span>
            <span class="s">""</span><span class="n">codigo_porcentaje</span><span class="s">""</span><span class="p">:</span> <span class="s">""</span><span class="m">312</span><span class="s">""</span><span class="p">,</span>
            <span class="s">""</span><span class="n">fecha_emision_documento_sustento</span><span class="s">""</span><span class="p">:</span> <span class="s">""</span><span class="m">2015</span><span class="p">-</span><span class="m">12</span><span class="p">-</span><span class="m">04</span><span class="n">T00</span><span class="p">:</span><span class="m">00</span><span class="p">:</span><span class="m">00</span><span class="p">-</span><span class="m">05</span><span class="p">:</span><span class="m">19</span><span class="s">""</span><span class="p">,</span>
            <span class="s">""</span><span class="n">numero_documento_sustento</span><span class="s">""</span><span class="p">:</span> <span class="s">""</span><span class="m">011007000000251</span><span class="s">""</span><span class="p">,</span>
            <span class="s">""</span><span class="n">porcentaje</span><span class="s">""</span><span class="p">:</span> <span class="m">1.0</span><span class="p">,</span>
            <span class="s">""</span><span class="n">tipo_documento_sustento</span><span class="s">""</span><span class="p">:</span> <span class="s">""</span><span class="m">01</span><span class="s">""</span><span class="p">,</span>
            <span class="s">""</span><span class="n">valor_retenido</span><span class="s">""</span><span class="p">:</span> <span class="m">42.26</span>
          <span class="p">}</span>
        <span class="p">],</span>
        <span class="s">""</span><span class="n">sujeto</span><span class="s">""</span><span class="p">:{</span>
          <span class="s">""</span><span class="n">email</span><span class="s">""</span><span class="p">:</span><span class="s">""</span><span class="n">contabilidad@email</span><span class="p">.</span><span class="n">com</span><span class="s">""</span><span class="p">,</span>
          <span class="s">""</span><span class="n">identificacion</span><span class="s">""</span><span class="p">:</span><span class="s">""</span><span class="m">0987654321</span><span class="s">""</span><span class="p">,</span>
          <span class="s">""</span><span class="n">tipo_identificacion</span><span class="s">""</span><span class="p">:</span><span class="s">""</span><span class="m">05</span><span class="s">""</span><span class="p">,</span>
          <span class="s">""</span><span class="n">razon_social</span><span class="s">""</span><span class="p">:</span><span class="s">""</span><span class="n">Juan</span> <span class="n">P</span><span class="err">é</span><span class="n">rez</span><span class="s">""</span><span class="p">,</span>
          <span class="s">""</span><span class="n">direccion</span><span class="s">""</span><span class="p">:</span><span class="s">""</span><span class="n">Calle</span> <span class="err">ú</span><span class="n">nica</span> <span class="n">Numero</span> <span class="m">987</span><span class="s">""</span><span class="p">,</span>
          <span class="s">""</span><span class="n">telefono</span><span class="s">""</span><span class="p">:</span><span class="s">""</span><span class="m">046029400</span><span class="s">""</span>
        <span class="p">}</span>
      <span class="p">}</span><span class="s">");
</span>
      <span class="n">IRestResponse</span> <span class="n">response</span> <span class="p">=</span> <span class="n">client</span><span class="p">.</span><span class="nf">Execute</span><span class="p">(</span><span class="n">request</span><span class="p">);</span>

      <span class="n">Console</span><span class="p">.</span><span class="nf">WriteLine</span><span class="p">(</span><span class="n">response</span><span class="p">.</span><span class="n">Content</span><span class="p">);</span>
      <span class="n">Console</span><span class="p">.</span><span class="nf">ReadLine</span><span class="p">();</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">}</span>
</code></pre>
<p>Para la emisión de una retención se debe enviar la información completa del
comprobante en el cuerpo del requerimiento en formato JSON.</p>

<table><thead>
<tr>
<th>Parámetro</th>
<th>Tipo</th>
<th>Descripción</th>
</tr>
</thead><tbody>
<tr>
<td>secuencial</td>
<td>integer (min. 1 - max. 999999999 )</td>
<td>Número de secuencia de la retención. <strong>Requerido</strong></td>
</tr>
<tr>
<td>emisor</td>
<td><a href="#emisor">emisor</a></td>
<td>Información completa del emisor. <strong>Requerido</strong></td>
</tr>
<tr>
<td>fecha_emision</td>
<td>string</td>
<td>Fecha de emisión en formato AAAA-MM-DDHoraZonaHoraria, definido en el estándar <a href="http://tools.ietf.org/html/rfc3339#section-5.6">ISO8601</a>.</td>
</tr>
<tr>
<td>sujeto</td>
<td>objeto tipo <a href="#persona">persona</a></td>
<td>Información de la persona a quién va dirigida la retención. <strong>Requerido</strong></td>
</tr>
<tr>
<td>periodo_fiscal</td>
<td>string</td>
<td>Mes y año en el siguiente formato MM/AAAA. Ejm: 12/2015 <strong>Requerido</strong></td>
</tr>
<tr>
<td>ambiente</td>
<td>integer</td>
<td>Pruebas: <code>1</code>.<br>Producción <code>2</code>.<br><strong>Requerido</strong></td>
</tr>
<tr>
<td>items</td>
<td>vector de objetos tipo <a href="#impuesto-retenido">impuesto</a></td>
<td>Listado de impuestos retenidos. <strong>Requerido</strong></td>
</tr>
<tr>
<td>tipo_emision</td>
<td>integer</td>
<td>Emisión normal: <code>1</code>.<br>Emisión por indisponibilidad: <code>2</code><br><strong>Requerido</strong></td>
</tr>
<tr>
<td>version</td>
<td>string</td>
<td>Versión del formato de comprobantes electrónicos de SRI. Si no se especifica, se utilizará la última revisión del formato implementada,</td>
</tr>
<tr>
<td>clave_acceso</td>
<td>string</td>
<td>La clave de acceso representa un identificador único del comprobante. Si esta información no es provista, Dátil la generará.<br>¿Cómo <a href="#clave-de-acceso">generar</a> la clave de acceso?</td>
</tr>
<tr>
<td>informacion_adicional</td>
<td>objeto</td>
<td>Información adicional adjunta al comprobante en forma de diccionario. Ejemplo:<br><code>{&quot;Email&quot;: &quot;contabilidad@empresa.com&quot;}</code></td>
</tr>
</tbody></table>
<h4 id='impuesto-retenido'>Impuesto Retenido</h4>
<table><thead>
<tr>
<th>Parámetro</th>
<th>Tipo</th>
<th>Descripción</th>
</tr>
</thead><tbody>
<tr>
<td>base_imponible</td>
<td>float</td>
<td>Base imponible, máximo 2 cifras decimales. <strong>Requerido</strong></td>
</tr>
<tr>
<td>codigo</td>
<td>string</td>
<td>Código de <a href="#tipos-de-impuesto-para-la-retencion">tipo de impuesto</a>. <strong>Requerido</strong></td>
</tr>
<tr>
<td>codigo_porcentaje</td>
<td>string</td>
<td><a href="#retencion-de-iva">Código del porcentaje</a> a aplicar dentro del tipo de impuesto <strong>Requerido</strong></td>
</tr>
<tr>
<td>porcentaje</td>
<td>float</td>
<td>Porcentaje establecido para el impuesto</td>
</tr>
<tr>
<td>valor_retenido</td>
<td>float</td>
<td>Valor retenido, multiplicación de la base imponible por el porcentaje de retención, máximo 2 cifras decimales. <strong>Requerido</strong></td>
</tr>
<tr>
<td>fecha_emision_documento_sustento</td>
<td>string</td>
<td>Fecha de emisión en formato AAAA-MM-DDHoraZonaHoraria, definido en el estándar <a href="http://tools.ietf.org/html/rfc3339#section-5.6">ISO8601</a>. <strong>Requerido</strong></td>
</tr>
<tr>
<td>numero_documento_sustento</td>
<td>string</td>
<td>Número completo del documento sobre el que se aplica la retención. Ejm: 001-002-592738007</td>
</tr>
<tr>
<td>tipo_documento_sustento</td>
<td>string</td>
<td>Códigos de <a href="#tipos-de-documentos">tipos de documentos</a>. <strong>Requerido</strong></td>
</tr>
</tbody></table>

<!--aside class="success">
Remember — a happy kitten is an authenticated kitten!
</aside-->
<h3 id='respuesta'>Respuesta</h3>
<blockquote>
<h4 id='respuesta-de-ejemplo'>Respuesta de ejemplo</h4></blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"abcdef09876123cea56784f01"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"clave_acceso"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2802201501091000000000120010010000100451993736618"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"ambiente"</span><span class="p">:</span><span class="mi">1</span><span class="p">,</span><span class="w">
  </span><span class="s2">"tipo_emision"</span><span class="p">:</span><span class="mi">1</span><span class="p">,</span><span class="w">
  </span><span class="s2">"secuencial"</span><span class="p">:</span><span class="mi">14</span><span class="p">,</span><span class="w">
  </span><span class="s2">"fecha_emision"</span><span class="p">:</span><span class="s2">"2015-12-25T11:28:56.782Z"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"periodo_fiscal"</span><span class="p">:</span><span class="s2">"12/2015"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"emisor"</span><span class="p">:{</span><span class="w">
    </span><span class="s2">"ruc"</span><span class="p">:</span><span class="s2">"0910000000001"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"obligado_contabilidad"</span><span class="p">:</span><span class="kc">true</span><span class="p">,</span><span class="w">
    </span><span class="s2">"contribuyente_especial"</span><span class="p">:</span><span class="s2">"12345"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"nombre_comercial"</span><span class="p">:</span><span class="s2">"XYZ Corp"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"razon_social"</span><span class="p">:</span><span class="s2">"XYZ Corporación S.A."</span><span class="p">,</span><span class="w">
    </span><span class="s2">"direccion"</span><span class="p">:</span><span class="s2">"Av. Primera 234 y calle 5ta"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"establecimiento"</span><span class="p">:{</span><span class="w">
      </span><span class="s2">"punto_emision"</span><span class="p">:</span><span class="s2">"002"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"codigo"</span><span class="p">:</span><span class="s2">"001"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"direccion"</span><span class="p">:</span><span class="s2">"Av. Primera 234 y calle 5ta"</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="s2">"informacion_adicional"</span><span class="p">:{</span><span class="w">
    </span><span class="s2">"Envíada al correo electónico"</span><span class="p">:</span><span class="s2">"contabilidad@xyz.com"</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="s2">"items"</span><span class="p">:[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="s2">"base_imponible"</span><span class="p">:</span><span class="w"> </span><span class="mf">4226.4</span><span class="p">,</span><span class="w">
      </span><span class="s2">"codigo"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
      </span><span class="s2">"codigo_porcentaje"</span><span class="p">:</span><span class="w"> </span><span class="s2">"312"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"fecha_emision_documento_sustento"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2015-12-04T00:00:00-05:19"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"numero_documento_sustento"</span><span class="p">:</span><span class="w"> </span><span class="s2">"011-007-000000251"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"porcentaje"</span><span class="p">:</span><span class="w"> </span><span class="mf">1.0</span><span class="p">,</span><span class="w">
      </span><span class="s2">"tipo_documento_sustento"</span><span class="p">:</span><span class="w"> </span><span class="s2">"01"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"valor_retenido"</span><span class="p">:</span><span class="w"> </span><span class="mf">42.26</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">],</span><span class="w">
  </span><span class="s2">"sujeto"</span><span class="p">:{</span><span class="w">
    </span><span class="s2">"email"</span><span class="p">:</span><span class="s2">"contabilidad@email.com"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"identificacion"</span><span class="p">:</span><span class="s2">"0987654321"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"tipo_identificacion"</span><span class="p">:</span><span class="s2">"05"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"razon_social"</span><span class="p">:</span><span class="s2">"Juan Pérez"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"direccion"</span><span class="p">:</span><span class="s2">"Calle única Numero 987"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"telefono"</span><span class="p">:</span><span class="s2">"046029400"</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>Retorna un objeto tipo <strong><a href="#requerimiento-retencion">retención</a></strong> que incluye un nuevo parámetro <code>id</code>,
el cual identifica de manera única a la retención. El campo <code>clave_acceso</code>
generado también se incluirá como parte de la respuesta.</p>
<h2 id='emision-de-retenciones-a-partir-de-xml'>Emisión de retenciones a partir de XML</h2>
<p><code>POST /retentions/issue/xml</code></p>
<h3 id='requerimiento-a-partir-de-xml'>Requerimiento a partir de XML</h3>
<p>Para la emisión de un comprobante de retención a partir de un XML se debe enviar contenido del archivo XML como parámetro en el cuerpo del requerimiento en formato JSON. Este XML debe cumplir con la especificación del SRI.</p>

<table><thead>
<tr>
<th>Parámetro</th>
<th>Tipo</th>
<th>Descripción</th>
</tr>
</thead><tbody>
<tr>
<td>xml</td>
<td>string</td>
<td>Contenido del archivo xml. <strong>Requerido</strong></td>
</tr>
</tbody></table>

<blockquote>
<h4 id='requerimiento-de-ejemplo-2'>Requerimiento de ejemplo</h4></blockquote>
<pre class="highlight shell tab-shell"><code>curl -v https://link.datil.co/retentions/issue/xml <span class="se">\</span>
-H <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
-H <span class="s2">"X-Key: &lt;API-key&gt;"</span> <span class="se">\</span>
-H <span class="s2">"X-Password: &lt;clave-certificado-firma&gt;"</span> <span class="se">\</span>
-d <span class="s1">'{"xml": "&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;
&lt;comprobanteRetencion id=\"comprobante\" version=\"1.0.0\"&gt;
  &lt;infoTributaria&gt;
    &lt;ambiente&gt;1&lt;/ambiente&gt;
    &lt;tipoEmision&gt;1&lt;/tipoEmision&gt;
    &lt;razonSocial&gt;DATILMEDIA S.A.&lt;/razonSocial&gt;
    &lt;nombreComercial&gt;Datil&lt;/nombreComercial&gt;
    &lt;ruc&gt;1234567890001&lt;/ruc&gt;
    &lt;claveAcceso&gt;0405202007123456789000110010010000000012235571911&lt;/claveAcceso&gt;
    &lt;codDoc&gt;07&lt;/codDoc&gt;
    &lt;estab&gt;001&lt;/estab&gt;
    &lt;ptoEmi&gt;001&lt;/ptoEmi&gt;
    &lt;secuencial&gt;000000001&lt;/secuencial&gt;
    &lt;dirMatriz&gt;Innvernadero Coworking, Bálsamos 813 entre Guayacanes e Higueras&lt;/dirMatriz&gt;
  &lt;/infoTributaria&gt;
  &lt;infoCompRetencion&gt;
    &lt;fechaEmision&gt;04/05/2020&lt;/fechaEmision&gt;
    &lt;dirEstablecimiento&gt;Innvernadero Coworking, Bálsamos 813 entre Guayacanes e Higueras&lt;/dirEstablecimiento&gt;
    &lt;obligadoContabilidad&gt;NO&lt;/obligadoContabilidad&gt;
    &lt;tipoIdentificacionSujetoRetenido&gt;04&lt;/tipoIdentificacionSujetoRetenido&gt;
    &lt;razonSocialSujetoRetenido&gt;Juan Perez&lt;/razonSocialSujetoRetenido&gt;
    &lt;identificacionSujetoRetenido&gt;0953239092001&lt;/identificacionSujetoRetenido&gt;
    &lt;periodoFiscal&gt;05/2020&lt;/periodoFiscal&gt;
  &lt;/infoCompRetencion&gt;
  &lt;impuestos&gt;
    &lt;impuesto&gt;
      &lt;codigo&gt;1&lt;/codigo&gt;
      &lt;codigoRetencion&gt;401CD&lt;/codigoRetencion&gt;
      &lt;baseImponible&gt;10.00&lt;/baseImponible&gt;
      &lt;porcentajeRetener&gt;0.00&lt;/porcentajeRetener&gt;
      &lt;valorRetenido&gt;0.00&lt;/valorRetenido&gt;
      &lt;codDocSustento&gt;01&lt;/codDocSustento&gt;
      &lt;numDocSustento&gt;001001000000001&lt;/numDocSustento&gt;
      &lt;fechaEmisionDocSustento&gt;03/05/2020&lt;/fechaEmisionDocSustento&gt;
    &lt;/impuesto&gt;
  &lt;/impuestos&gt;
  &lt;infoAdicional&gt;
    &lt;campoAdicional nombre="Campo adicional"&gt;Información adicional&lt;/campoAdicional&gt;
  &lt;/infoAdicional&gt;
&lt;/comprobanteRetencion&gt;"}'</span>
</code></pre><pre class="highlight python tab-python"><code><span class="kn">import</span> <span class="nn">requests</span><span class="p">,</span> <span class="n">json</span>

<span class="n">retencion</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s">"xml"</span><span class="p">:</span> <span class="s">'''&lt;?xml version=</span><span class="se">\"</span><span class="s">1.0</span><span class="se">\"</span><span class="s"> encoding=</span><span class="se">\"</span><span class="s">UTF-8</span><span class="se">\"</span><span class="s">?&gt;
    &lt;comprobanteRetencion id=</span><span class="se">\"</span><span class="s">comprobante</span><span class="se">\"</span><span class="s"> version=</span><span class="se">\"</span><span class="s">1.0.0</span><span class="se">\"</span><span class="s">&gt;
      &lt;infoTributaria&gt;
        &lt;ambiente&gt;1&lt;/ambiente&gt;
        &lt;tipoEmision&gt;1&lt;/tipoEmision&gt;
        &lt;razonSocial&gt;DATILMEDIA S.A.&lt;/razonSocial&gt;
        &lt;nombreComercial&gt;Datil&lt;/nombreComercial&gt;
        &lt;ruc&gt;1234567890001&lt;/ruc&gt;
        &lt;claveAcceso&gt;0405202007123456789000110010010000000012235571911&lt;/claveAcceso&gt;
        &lt;codDoc&gt;07&lt;/codDoc&gt;
        &lt;estab&gt;001&lt;/estab&gt;
        &lt;ptoEmi&gt;001&lt;/ptoEmi&gt;
        &lt;secuencial&gt;000000001&lt;/secuencial&gt;
        &lt;dirMatriz&gt;Innvernadero Coworking, Bálsamos 813 entre Guayacanes e Higueras&lt;/dirMatriz&gt;
      &lt;/infoTributaria&gt;
      &lt;infoCompRetencion&gt;
        &lt;fechaEmision&gt;04/05/2020&lt;/fechaEmision&gt;
        &lt;dirEstablecimiento&gt;Innvernadero Coworking, Bálsamos 813 entre Guayacanes e Higueras&lt;/dirEstablecimiento&gt;
        &lt;obligadoContabilidad&gt;NO&lt;/obligadoContabilidad&gt;
        &lt;tipoIdentificacionSujetoRetenido&gt;04&lt;/tipoIdentificacionSujetoRetenido&gt;
        &lt;razonSocialSujetoRetenido&gt;Juan Perez&lt;/razonSocialSujetoRetenido&gt;
        &lt;identificacionSujetoRetenido&gt;0953239092001&lt;/identificacionSujetoRetenido&gt;
        &lt;periodoFiscal&gt;05/2020&lt;/periodoFiscal&gt;
      &lt;/infoCompRetencion&gt;
      &lt;impuestos&gt;
        &lt;impuesto&gt;
          &lt;codigo&gt;1&lt;/codigo&gt;
          &lt;codigoRetencion&gt;401CD&lt;/codigoRetencion&gt;
          &lt;baseImponible&gt;10.00&lt;/baseImponible&gt;
          &lt;porcentajeRetener&gt;0.00&lt;/porcentajeRetener&gt;
          &lt;valorRetenido&gt;0.00&lt;/valorRetenido&gt;
          &lt;codDocSustento&gt;01&lt;/codDocSustento&gt;
          &lt;numDocSustento&gt;001001000000001&lt;/numDocSustento&gt;
          &lt;fechaEmisionDocSustento&gt;03/05/2020&lt;/fechaEmisionDocSustento&gt;
        &lt;/impuesto&gt;
      &lt;/impuestos&gt;
      &lt;infoAdicional&gt;
        &lt;campoAdicional nombre="Campo adicional"&gt;Información adicional&lt;/campoAdicional&gt;
      &lt;/infoAdicional&gt;
    &lt;/comprobanteRetencion&gt;'''</span>
<span class="p">}</span>

<span class="n">cabeceras</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s">'x-key'</span><span class="p">:</span> <span class="s">'&lt;clave-del-api&gt;'</span><span class="p">,</span>
    <span class="s">'x-password'</span><span class="p">:</span> <span class="s">'&lt;clave-certificado-firma&gt;'</span><span class="p">,</span>
    <span class="s">'content-type'</span><span class="p">:</span> <span class="s">'application/json'</span><span class="p">}</span>
<span class="n">respuesta</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">post</span><span class="p">(</span>
    <span class="s">"https://link.datil.co/retentions/issue/xml"</span><span class="p">,</span>
    <span class="n">headers</span> <span class="o">=</span> <span class="n">cabeceras</span><span class="p">,</span>
    <span class="n">data</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">retencion</span><span class="p">))</span>
</code></pre>
<blockquote>
<h4 id='respuesta-de-ejemplo-2'> Respuesta de ejemplo</h4></blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="s2">"secuencial"</span><span class="p">:</span><span class="w"> </span><span class="s2">"000000001"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"fecha_emision"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2020-05-04T00:00:00-05:19"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"emisor"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"ruc"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1234567890001"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"razon_social"</span><span class="p">:</span><span class="w"> </span><span class="s2">"DATILMEDIA S.A."</span><span class="p">,</span><span class="w">
        </span><span class="s2">"nombre_comercial"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Datil"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"contribuyente_especial"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w">
        </span><span class="s2">"direccion"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Innvernadero Coworking, Bálsamos 813 entre Guayacanes e Higueras"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"obligado_contabilidad"</span><span class="p">:</span><span class="w"> </span><span class="s2">"NO"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"establecimiento"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="s2">"punto_emision"</span><span class="p">:</span><span class="w"> </span><span class="s2">"001"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"codigo"</span><span class="p">:</span><span class="w"> </span><span class="s2">"001"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"direccion"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Innvernadero Coworking, Bálsamos 813 entre Guayacanes e Higueras"</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="s2">"email"</span><span class="p">:</span><span class="w"> </span><span class="s2">"devops@datilmedia.com"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="s2">"sujeto"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"identificacion"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0953239092001"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"razon_social"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Juan Perez"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"tipo_identificacion"</span><span class="p">:</span><span class="w"> </span><span class="s2">"04"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="s2">"es_valida"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
    </span><span class="s2">"periodo_fiscal"</span><span class="p">:</span><span class="w"> </span><span class="s2">"05/2020"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"41f5188e0256420cbe9e447db99c9753"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"informacion_adicional"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"Campo adicional"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Información adicional"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="s2">"ambiente"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"tipo_emision"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
    </span><span class="s2">"items"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="p">{</span><span class="w">
            </span><span class="s2">"porcentaje"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.0</span><span class="p">,</span><span class="w">
            </span><span class="s2">"codigo_porcentaje"</span><span class="p">:</span><span class="w"> </span><span class="s2">"401CD"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"fecha_emision_documento_sustento"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2020-05-03T00:00:00-05:19"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"numero_documento_sustento"</span><span class="p">:</span><span class="w"> </span><span class="s2">"001-001-000000001"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"codigo"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"tipo_documento_sustento"</span><span class="p">:</span><span class="w"> </span><span class="s2">"01"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"base_imponible"</span><span class="p">:</span><span class="w"> </span><span class="mf">10.0</span><span class="p">,</span><span class="w">
            </span><span class="s2">"valor_retenido"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.0</span><span class="w">
        </span><span class="p">}</span><span class="w">
    </span><span class="p">],</span><span class="w">
    </span><span class="s2">"clave_acceso"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0405202007123456789000110010010000000012235571911"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre><h2 id='consulta-de-un-comprobante-de-retencion'>Consulta de un Comprobante de Retención</h2>
<p>Consulta una retención para obtener toda la información del comprobante, incluyendo
el estado del mismo.
El parámetro <code>estado</code> de la respuesta obtenida al invocar esta operación, indica
el estado actual del comprobante.</p>

<p>Si es necesario conocer en detalle, en que estado del <a href="#proceso-de-emisión">proceso de emisión</a>,
se debe examinar los parámetros <code>envio_sri</code> y <code>autorizacion_sri</code> de la respuesta.</p>
<h3 id='operacion-2'>Operación</h3>
<p><code>GET /retentions/&lt;receipt-id&gt;</code></p>
<h3 id='requerimiento'>Requerimiento</h3>
<blockquote>
<h4 id='requerimiento-de-ejemplo-3'>Requerimiento de ejemplo</h4></blockquote>
<pre class="highlight shell tab-shell"><code>curl -v https://link.datil.co/retentions/&lt;id-retencion&gt; <span class="se">\</span>
-H <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
-H <span class="s2">"X-Key: &lt;clave-del-api&gt;"</span> <span class="se">\</span>
-H <span class="s2">"X-Password: &lt;clave-certificado-firma&gt;"</span> <span class="se">\</span>
</code></pre><pre class="highlight python tab-python"><code><span class="kn">import</span> <span class="nn">requests</span>
<span class="n">cabeceras</span> <span class="o">=</span> <span class="p">{</span><span class="s">'x-key'</span><span class="p">:</span> <span class="s">'&lt;clave-del-api&gt;'</span><span class="p">}</span>
<span class="n">respuesta</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span>
    <span class="s">'https://link.datil.co/retentions/&lt;id-retencion&gt;'</span><span class="p">,</span>
    <span class="n">headers</span> <span class="o">=</span> <span class="n">cabeceras</span><span class="p">)</span>
</code></pre><pre class="highlight csharp tab-csharp"><code><span class="k">using</span> <span class="nn">RestSharp</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">System</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">System.Collections.Generic</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">System.Linq</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">System.Text</span><span class="p">;</span>

<span class="k">namespace</span> <span class="nn">DatilClient</span> <span class="p">{</span>
  <span class="k">class</span> <span class="nc">InvoicingServiceClient</span> <span class="p">{</span>
    <span class="k">static</span> <span class="k">void</span> <span class="nf">Main</span><span class="p">(</span><span class="kt">string</span><span class="p">[]</span> <span class="n">args</span><span class="p">)</span> <span class="p">{</span>

      <span class="kt">var</span> <span class="n">client</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">RestClient</span><span class="p">(</span><span class="s">"https://link.datil.co/"</span><span class="p">);</span>
      <span class="kt">var</span> <span class="n">idNotaCredito</span> <span class="p">=</span> <span class="s">"&lt;id-retencion&gt;"</span><span class="p">;</span>
      <span class="kt">var</span> <span class="n">request</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">RestRequest</span><span class="p">(</span><span class="s">"invoices/"</span> <span class="p">+</span> <span class="n">idNotaCredito</span><span class="p">,</span> <span class="n">Method</span><span class="p">.</span><span class="n">GET</span><span class="p">);</span>
      <span class="n">request</span><span class="p">.</span><span class="nf">AddHeader</span><span class="p">(</span><span class="s">"X-Key"</span><span class="p">,</span> <span class="s">"&lt;clave-del-api&gt;"</span><span class="p">);</span>

      <span class="n">IRestResponse</span> <span class="n">response</span> <span class="p">=</span> <span class="n">client</span><span class="p">.</span><span class="nf">Execute</span><span class="p">(</span><span class="n">request</span><span class="p">);</span>

      <span class="n">Console</span><span class="p">.</span><span class="nf">WriteLine</span><span class="p">(</span><span class="n">response</span><span class="p">.</span><span class="n">Content</span><span class="p">);</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">}</span>
</code></pre>
<p>Reemplaza en la ruta <code>&lt;receipt-id&gt;</code> por el <code>id</code> de la retención que necesitas consultar.</p>
<h3 id='respuesta-2'>Respuesta</h3>
<blockquote>
<h4 id='respuesta-de-ejemplo-3'>Respuesta de ejemplo</h4></blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"abcf12343faad06785abcf12343faad0"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"secuencial"</span><span class="p">:</span><span class="w"> </span><span class="s2">"16"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"fecha_emision"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2015-05-15"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"version"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1.0.0"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"clave_acceso"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1505201501099271255400110011000000000162092727615"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"emisor"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"ruc"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0992712554001"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"razon_social"</span><span class="p">:</span><span class="w"> </span><span class="s2">"DATILMEDIA S.A."</span><span class="p">,</span><span class="w">
        </span><span class="s2">"nombre_comercial"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Dátil"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"direccion"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
        </span><span class="s2">"obligado_contabilidad"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
        </span><span class="s2">"contribuyente_especial"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w">
        </span><span class="s2">"establecimiento"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="s2">"codigo"</span><span class="p">:</span><span class="w"> </span><span class="s2">"001"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"direccion"</span><span class="p">:</span><span class="w"> </span><span class="s2">"V.E. 112 Y CIRCUNVALACION NORTE"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"punto_emision"</span><span class="p">:</span><span class="w"> </span><span class="s2">"100"</span><span class="w">
        </span><span class="p">}</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="s2">"estado"</span><span class="p">:</span><span class="w"> </span><span class="s2">"AUTORIZADO"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"items"</span><span class="p">:[</span><span class="w">
      </span><span class="p">{</span><span class="w">
        </span><span class="s2">"base_imponible"</span><span class="p">:</span><span class="w"> </span><span class="mf">4226.4</span><span class="p">,</span><span class="w">
        </span><span class="s2">"codigo"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
        </span><span class="s2">"codigo_porcentaje"</span><span class="p">:</span><span class="w"> </span><span class="s2">"312"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"fecha_emision_documento_sustento"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2015-12-04T00:00:00-05:19"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"numero_documento_sustento"</span><span class="p">:</span><span class="w"> </span><span class="s2">"011007000000251"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"porcentaje"</span><span class="p">:</span><span class="w"> </span><span class="mf">1.0</span><span class="p">,</span><span class="w">
        </span><span class="s2">"tipo_documento_sustento"</span><span class="p">:</span><span class="w"> </span><span class="s2">"01"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"valor_retenido"</span><span class="p">:</span><span class="w"> </span><span class="mf">42.26</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">],</span><span class="w">
    </span><span class="s2">"correos_enviados"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="p">{</span><span class="w">
            </span><span class="s2">"fecha_envio"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2015-05-15T16:36:48.274604"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"destinatarios"</span><span class="p">:</span><span class="w"> </span><span class="s2">"juanantonioplaza@datilmedia.com"</span><span class="w">
        </span><span class="p">}</span><span class="w">
    </span><span class="p">],</span><span class="w">
    </span><span class="s2">"informacion_adicional"</span><span class="p">:</span><span class="w"> </span><span class="p">{},</span><span class="w">
    </span><span class="s2">"ambiente"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"sujeto"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"razon_social"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Carlos L. Plaza"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"identificacion"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0900102222"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"tipo_identificacion"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
        </span><span class="s2">"email"</span><span class="p">:</span><span class="w"> </span><span class="s2">"cplaza@gye593.com"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"direccion"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Calle Uno y Calle Dos"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"telefono"</span><span class="p">:</span><span class="w"> </span><span class="s2">"043334445"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="s2">"envio_sri"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"mensajes"</span><span class="p">:</span><span class="w"> </span><span class="p">[],</span><span class="w">
        </span><span class="s2">"estado"</span><span class="p">:</span><span class="w"> </span><span class="s2">"RECIBIDA"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"fecha"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="s2">"tipo_emision"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"autorizacion"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"estado"</span><span class="p">:</span><span class="w"> </span><span class="s2">"AUTORIZADO"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"mensajes"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
            </span><span class="p">{</span><span class="w">
                </span><span class="s2">"identificador"</span><span class="p">:</span><span class="w"> </span><span class="s2">"60"</span><span class="p">,</span><span class="w">
                </span><span class="s2">"mensaje"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ESTE PROCESO FUE REALIZADO EN EL AMBIENTE DE PRUEBAS"</span><span class="p">,</span><span class="w">
                </span><span class="s2">"tipo"</span><span class="p">:</span><span class="w"> </span><span class="s2">"INFORMATIVO"</span><span class="p">,</span><span class="w">
                </span><span class="s2">"informacion_adicional"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="w">
            </span><span class="p">}</span><span class="w">
        </span><span class="p">],</span><span class="w">
        </span><span class="s2">"numero"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1505201516323509927125540010266935227"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"fecha"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2015-05-15T16:32:35.000380"</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<table><thead>
<tr>
<th>Parámetro</th>
<th>Tipo</th>
<th>Descripción</th>
</tr>
</thead><tbody>
<tr>
<td>secuencial</td>
<td>string</td>
<td>Número de secuencia de la retención.</td>
</tr>
<tr>
<td>estado</td>
<td>string</td>
<td>Posibles valores: <code>AUTORIZADO</code>, <code>NO AUTORIZADO</code>, <code>ENVIADO</code>, <code>DEVUELTO</code>, <code>RECIBIDO</code>, <code>ERROR</code></td>
</tr>
<tr>
<td>fecha_emision</td>
<td>string</td>
<td>Fecha de emisión en formato AAAA-MM-DDHoraZonaHoraria, definido en el estándar [ISO8601](http://tools.ietf.</td>
</tr>
<tr>
<td>clave_acceso</td>
<td>string</td>
<td>La clave de acceso representa un identificador único del comprobante. Si esta información no es provista, Dátil la generará.<br>¿Cómo <a href="#clave-de-acceso">generar</a> la clave de acceso?</td>
</tr>
<tr>
<td>envio_sri</td>
<td>objeto tipo <a href="#envío-sri">envio sri</a></td>
<td>Información luego de enviar el comprobante.</td>
</tr>
<tr>
<td>autorizacion</td>
<td>objeto tipo <a href="#autorización-sri">autorizacion sri</a></td>
<td>Información de la autorización.org/html/rfc3339#section-5.6).</td>
</tr>
<tr>
<td>emisor</td>
<td>objeto tipo <a href="#emisor">emisor</a></td>
<td>Información completa del emisor.</td>
</tr>
<tr>
<td>ambiente</td>
<td>integer</td>
<td>Pruebas: <code>1</code>.<br>Producción <code>2</code>.<br></td>
</tr>
<tr>
<td>items</td>
<td>vector de objetos tipo <a href="#impuesto-retenido">impuesto</a></td>
<td>Listado de impuestos retenidos. <strong>Requerido</strong></td>
</tr>
<tr>
<td>sujeto</td>
<td>objeto <a href="#persona">persona</a></td>
<td>Información del sujeto al que se le retiene.</td>
</tr>
<tr>
<td>tipo_emision</td>
<td>integer</td>
<td>Emisión normal: <code>1</code>.<br>Emisión por indisponibilidad: <code>2</code><br></td>
</tr>
<tr>
<td>version</td>
<td>string</td>
<td>Versión de la especificación, opciones válidas: <code>1.0.0</code>, <code>1.1.0</code></td>
</tr>
</tbody></table>
<h2 id='re-emision-de-una-retencion'>Re-emisión de una retención</h2><h3 id='operacion-3'>Operación</h3>
<p><code>POST /retentions/:id/reissue</code></p>
<h3 id='requerimiento-2'>Requerimiento</h3>
<blockquote>
<h4 id='requerimiento-de-ejemplo-4'>Requerimiento de ejemplo</h4></blockquote>
<pre class="highlight shell tab-shell"><code>curl -v https://link.datil.co/retentions/&lt;id-retencion&gt;/reissue <span class="se">\</span>
-H <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
-H <span class="s2">"X-Key: &lt;API-key&gt;"</span> <span class="se">\</span>
-H <span class="s2">"X-Password: &lt;clave-certificado-firma&gt;"</span> <span class="se">\</span>
-d <span class="s1">'{
  "ambiente":1,
  "tipo_emision":1,
  "secuencial":14,
  "fecha_emision":"2015-12-25T11:28:56.782Z",
  "periodo_fiscal":"12/2015",
  "emisor":{
    "ruc":"0910000000001",
    "obligado_contabilidad":true,
    "contribuyente_especial":"12345",
    "nombre_comercial":"XYZ Corp",
    "razon_social":"XYZ Corporación S.A.",
    "direccion":"Av. Primera 234 y calle 5ta",
    "establecimiento":{
      "punto_emision":"002",
      "codigo":"001",
      "direccion":"Av. Primera 234 y calle 5ta"
    }
  },
  "informacion_adicional":{
    "Envíada al correo electónico":"contabilidad@xyz.com"
  },
  "items":[
    {
      "base_imponible": 4226.4,
      "codigo": 1,
      "codigo_porcentaje": "312",
      "fecha_emision_documento_sustento": "2015-12-04T00:00:00-05:19",
      "numero_documento_sustento": "011-007-000000251",
      "porcentaje": 1.0,
      "tipo_documento_sustento": "01",
      "valor_retenido": 42.26
    }
  ]
  "sujeto":{
    "email":"contabilidad@email.com",
    "identificacion":"0987654321",
    "tipo_identificacion":"05",
    "razon_social":"Juan Pérez",
    "direccion":"Calle única Numero 987",
    "telefono":"046029400"
  }
}'</span>
</code></pre><pre class="highlight python tab-python"><code><span class="kn">import</span> <span class="nn">requests</span><span class="p">,</span> <span class="n">json</span>

<span class="n">retencion</span> <span class="o">=</span> <span class="p">{</span>
  <span class="s">"ambiente"</span><span class="p">:</span><span class="mi">1</span><span class="p">,</span>
  <span class="s">"tipo_emision"</span><span class="p">:</span><span class="mi">1</span><span class="p">,</span>
  <span class="s">"secuencial"</span><span class="p">:</span><span class="mi">14</span><span class="p">,</span>
  <span class="s">"fecha_emision"</span><span class="p">:</span><span class="s">"2015-12-25T11:28:56.782Z"</span><span class="p">,</span>
  <span class="s">"periodo_fiscal"</span><span class="p">:</span><span class="s">"12/2015"</span><span class="p">,</span>
  <span class="s">"emisor"</span><span class="p">:{</span>
    <span class="s">"ruc"</span><span class="p">:</span><span class="s">"0910000000001"</span><span class="p">,</span>
    <span class="s">"obligado_contabilidad"</span><span class="p">:</span><span class="n">true</span><span class="p">,</span>
    <span class="s">"contribuyente_especial"</span><span class="p">:</span><span class="s">"12345"</span><span class="p">,</span>
    <span class="s">"nombre_comercial"</span><span class="p">:</span><span class="s">"XYZ Corp"</span><span class="p">,</span>
    <span class="s">"razon_social"</span><span class="p">:</span><span class="s">"XYZ Corporación S.A."</span><span class="p">,</span>
    <span class="s">"direccion"</span><span class="p">:</span><span class="s">"Av. Primera 234 y calle 5ta"</span><span class="p">,</span>
    <span class="s">"establecimiento"</span><span class="p">:{</span>
      <span class="s">"punto_emision"</span><span class="p">:</span><span class="s">"002"</span><span class="p">,</span>
      <span class="s">"codigo"</span><span class="p">:</span><span class="s">"001"</span><span class="p">,</span>
      <span class="s">"direccion"</span><span class="p">:</span><span class="s">"Av. Primera 234 y calle 5ta"</span>
    <span class="p">}</span>
  <span class="p">},</span>
  <span class="s">"informacion_adicional"</span><span class="p">:{</span>
    <span class="s">"Envíada al correo electónico"</span><span class="p">:</span><span class="s">"contabilidad@xyz.com"</span>
  <span class="p">},</span>
  <span class="s">"items"</span><span class="p">:[</span>
    <span class="p">{</span>
      <span class="s">"base_imponible"</span><span class="p">:</span> <span class="mf">4226.4</span><span class="p">,</span>
      <span class="s">"codigo"</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
      <span class="s">"codigo_porcentaje"</span><span class="p">:</span> <span class="s">"312"</span><span class="p">,</span>
      <span class="s">"fecha_emision_documento_sustento"</span><span class="p">:</span> <span class="s">"2015-12-04T00:00:00-05:19"</span><span class="p">,</span>
      <span class="s">"numero_documento_sustento"</span><span class="p">:</span> <span class="s">"011-007-000000251"</span><span class="p">,</span>
      <span class="s">"porcentaje"</span><span class="p">:</span> <span class="mf">1.0</span><span class="p">,</span>
      <span class="s">"tipo_documento_sustento"</span><span class="p">:</span> <span class="s">"01"</span><span class="p">,</span>
      <span class="s">"valor_retenido"</span><span class="p">:</span> <span class="mf">42.26</span>
    <span class="p">}</span>
  <span class="p">],</span>
  <span class="s">"sujeto"</span><span class="p">:{</span>
    <span class="s">"email"</span><span class="p">:</span><span class="s">"contabilidad@email.com"</span><span class="p">,</span>
    <span class="s">"identificacion"</span><span class="p">:</span><span class="s">"0987654321"</span><span class="p">,</span>
    <span class="s">"tipo_identificacion"</span><span class="p">:</span><span class="s">"05"</span><span class="p">,</span>
    <span class="s">"razon_social"</span><span class="p">:</span><span class="s">"Juan Pérez"</span><span class="p">,</span>
    <span class="s">"direccion"</span><span class="p">:</span><span class="s">"Calle única Numero 987"</span><span class="p">,</span>
    <span class="s">"telefono"</span><span class="p">:</span><span class="s">"046029400"</span>
  <span class="p">}</span>
<span class="p">}</span>
<span class="n">cabeceras</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s">'x-key'</span><span class="p">:</span> <span class="s">'&lt;clave-del-api&gt;'</span><span class="p">,</span>
    <span class="s">'x-password'</span><span class="p">:</span> <span class="s">'&lt;clave-certificado-firma&gt;'</span><span class="p">,</span>
    <span class="s">'content-type'</span><span class="p">:</span> <span class="s">'application/json'</span><span class="p">}</span>
<span class="n">respuesta</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">post</span><span class="p">(</span>
    <span class="s">"https://link.datil.co/retentions/&lt;id-retencion&gt;/reissue"</span><span class="p">,</span>
    <span class="n">headers</span> <span class="o">=</span> <span class="n">cabeceras</span><span class="p">,</span>
    <span class="n">data</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">retencion</span><span class="p">))</span>
</code></pre><pre class="highlight csharp tab-csharp"><code><span class="k">using</span> <span class="nn">RestSharp</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">System</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">System.Collections.Generic</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">System.Linq</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">System.Text</span><span class="p">;</span>

<span class="k">namespace</span> <span class="nn">DatilClient</span> <span class="p">{</span>
  <span class="k">class</span> <span class="nc">InvoicingServiceClient</span> <span class="p">{</span>
    <span class="k">static</span> <span class="k">void</span> <span class="nf">Main</span><span class="p">(</span><span class="kt">string</span><span class="p">[]</span> <span class="n">args</span><span class="p">)</span> <span class="p">{</span>

      <span class="c1">// Este ejemplo utiliza RestSharp</span>
      <span class="c1">// Para instalar anda al menú: tools &gt; Library Package Manager &gt; Package Manager Console</span>
      <span class="c1">// copia y pega y presiona enter: Install-Package RestSharp</span>

      <span class="kt">var</span> <span class="n">client</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">RestClient</span><span class="p">(</span><span class="s">"https://link.datil.co/"</span><span class="p">);</span>
      <span class="kt">var</span> <span class="n">idRetention</span> <span class="p">=</span> <span class="s">"&lt;id-retencion&gt;"</span>
      <span class="kt">var</span> <span class="n">request</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">RestRequest</span><span class="p">(</span><span class="s">"retentions/"</span> <span class="p">+</span> <span class="n">idRetention</span> <span class="p">+</span> <span class="s">"/reissue"</span><span class="p">,</span> <span class="n">Method</span><span class="p">.</span><span class="n">POST</span><span class="p">);</span>
      <span class="n">request</span><span class="p">.</span><span class="nf">AddHeader</span><span class="p">(</span><span class="s">"X-Key"</span><span class="p">,</span> <span class="s">"&lt;clave-del-api&gt;"</span><span class="p">);</span>
      <span class="n">request</span><span class="p">.</span><span class="nf">AddHeader</span><span class="p">(</span><span class="s">"X-Password"</span><span class="p">,</span> <span class="s">"&lt;clave-certificado-firma&gt;"</span><span class="p">);</span>

      <span class="n">request</span><span class="p">.</span><span class="nf">AddBody</span><span class="p">(</span><span class="err">@</span><span class="s">"{
</span>        <span class="s">""</span><span class="n">ambiente</span><span class="s">""</span><span class="p">:</span><span class="m">1</span><span class="p">,</span>
        <span class="s">""</span><span class="n">tipo_emision</span><span class="s">""</span><span class="p">:</span><span class="m">1</span><span class="p">,</span>
        <span class="s">""</span><span class="n">secuencial</span><span class="s">""</span><span class="p">:</span><span class="m">14</span><span class="p">,</span>
        <span class="s">""</span><span class="n">fecha_emision</span><span class="s">""</span><span class="p">:</span><span class="s">""</span><span class="m">2015</span><span class="p">-</span><span class="m">12</span><span class="p">-</span><span class="m">25</span><span class="n">T11</span><span class="p">:</span><span class="m">28</span><span class="p">:</span><span class="m">56.782</span><span class="n">Z</span><span class="s">""</span><span class="p">,</span>
        <span class="s">""</span><span class="n">periodo_fiscal</span><span class="s">""</span><span class="p">:</span><span class="s">""</span><span class="m">12</span><span class="p">/</span><span class="m">2015</span><span class="s">""</span><span class="p">,</span>
        <span class="s">""</span><span class="n">emisor</span><span class="s">""</span><span class="p">:{</span>
          <span class="s">""</span><span class="n">ruc</span><span class="s">""</span><span class="p">:</span><span class="s">""</span><span class="m">0910000000001</span><span class="s">""</span><span class="p">,</span>
          <span class="s">""</span><span class="n">obligado_contabilidad</span><span class="s">""</span><span class="p">:</span><span class="k">true</span><span class="p">,</span>
          <span class="s">""</span><span class="n">contribuyente_especial</span><span class="s">""</span><span class="p">:</span><span class="s">""</span><span class="m">12345</span><span class="s">""</span><span class="p">,</span>
          <span class="s">""</span><span class="n">nombre_comercial</span><span class="s">""</span><span class="p">:</span><span class="s">""</span><span class="n">XYZ</span> <span class="n">Corp</span><span class="s">""</span><span class="p">,</span>
          <span class="s">""</span><span class="n">razon_social</span><span class="s">""</span><span class="p">:</span><span class="s">""</span><span class="n">XYZ</span> <span class="n">Corporaci</span><span class="err">ó</span><span class="n">n</span> <span class="n">S</span><span class="p">.</span><span class="n">A</span><span class="p">.</span><span class="s">""</span><span class="p">,</span>
          <span class="s">""</span><span class="n">direccion</span><span class="s">""</span><span class="p">:</span><span class="s">""</span><span class="n">Av</span><span class="p">.</span> <span class="n">Primera</span> <span class="m">234</span> <span class="n">y</span> <span class="n">calle</span> <span class="m">5</span><span class="n">ta</span><span class="s">""</span><span class="p">,</span>
          <span class="s">""</span><span class="n">establecimiento</span><span class="s">""</span><span class="p">:{</span>
            <span class="s">""</span><span class="n">punto_emision</span><span class="s">""</span><span class="p">:</span><span class="s">""</span><span class="m">002</span><span class="s">""</span><span class="p">,</span>
            <span class="s">""</span><span class="n">codigo</span><span class="s">""</span><span class="p">:</span><span class="s">""</span><span class="m">001</span><span class="s">""</span><span class="p">,</span>
            <span class="s">""</span><span class="n">direccion</span><span class="s">""</span><span class="p">:</span><span class="s">""</span><span class="n">Av</span><span class="p">.</span> <span class="n">Primera</span> <span class="m">234</span> <span class="n">y</span> <span class="n">calle</span> <span class="m">5</span><span class="n">ta</span><span class="s">""</span>
          <span class="p">}</span>
        <span class="p">},</span>
        <span class="s">""</span><span class="n">informacion_adicional</span><span class="s">""</span><span class="p">:{</span>
          <span class="s">""</span><span class="n">Env</span><span class="err">í</span><span class="n">ada</span> <span class="n">al</span> <span class="n">correo</span> <span class="n">elect</span><span class="err">ó</span><span class="n">nico</span><span class="s">""</span><span class="p">:</span><span class="s">""</span><span class="n">contabilidad@xyz</span><span class="p">.</span><span class="n">com</span><span class="s">""</span>
        <span class="p">},</span>
        <span class="s">""</span><span class="n">items</span><span class="s">""</span><span class="p">:[</span>
          <span class="p">{</span>
            <span class="s">""</span><span class="n">base_imponible</span><span class="s">""</span><span class="p">:</span> <span class="m">4226.4</span><span class="p">,</span>
            <span class="s">""</span><span class="n">codigo</span><span class="s">""</span><span class="p">:</span> <span class="m">1</span><span class="p">,</span>
            <span class="s">""</span><span class="n">codigo_porcentaje</span><span class="s">""</span><span class="p">:</span> <span class="s">""</span><span class="m">312</span><span class="s">""</span><span class="p">,</span>
            <span class="s">""</span><span class="n">fecha_emision_documento_sustento</span><span class="s">""</span><span class="p">:</span> <span class="s">""</span><span class="m">2015</span><span class="p">-</span><span class="m">12</span><span class="p">-</span><span class="m">04</span><span class="n">T00</span><span class="p">:</span><span class="m">00</span><span class="p">:</span><span class="m">00</span><span class="p">-</span><span class="m">05</span><span class="p">:</span><span class="m">19</span><span class="s">""</span><span class="p">,</span>
            <span class="s">""</span><span class="n">numero_documento_sustento</span><span class="s">""</span><span class="p">:</span> <span class="s">""</span><span class="m">011007000000251</span><span class="s">""</span><span class="p">,</span>
            <span class="s">""</span><span class="n">porcentaje</span><span class="s">""</span><span class="p">:</span> <span class="m">1.0</span><span class="p">,</span>
            <span class="s">""</span><span class="n">tipo_documento_sustento</span><span class="s">""</span><span class="p">:</span> <span class="s">""</span><span class="m">01</span><span class="s">""</span><span class="p">,</span>
            <span class="s">""</span><span class="n">valor_retenido</span><span class="s">""</span><span class="p">:</span> <span class="m">42.26</span>
          <span class="p">}</span>
        <span class="p">],</span>
        <span class="s">""</span><span class="n">sujeto</span><span class="s">""</span><span class="p">:{</span>
          <span class="s">""</span><span class="n">email</span><span class="s">""</span><span class="p">:</span><span class="s">""</span><span class="n">contabilidad@email</span><span class="p">.</span><span class="n">com</span><span class="s">""</span><span class="p">,</span>
          <span class="s">""</span><span class="n">identificacion</span><span class="s">""</span><span class="p">:</span><span class="s">""</span><span class="m">0987654321</span><span class="s">""</span><span class="p">,</span>
          <span class="s">""</span><span class="n">tipo_identificacion</span><span class="s">""</span><span class="p">:</span><span class="s">""</span><span class="m">05</span><span class="s">""</span><span class="p">,</span>
          <span class="s">""</span><span class="n">razon_social</span><span class="s">""</span><span class="p">:</span><span class="s">""</span><span class="n">Juan</span> <span class="n">P</span><span class="err">é</span><span class="n">rez</span><span class="s">""</span><span class="p">,</span>
          <span class="s">""</span><span class="n">direccion</span><span class="s">""</span><span class="p">:</span><span class="s">""</span><span class="n">Calle</span> <span class="err">ú</span><span class="n">nica</span> <span class="n">Numero</span> <span class="m">987</span><span class="s">""</span><span class="p">,</span>
          <span class="s">""</span><span class="n">telefono</span><span class="s">""</span><span class="p">:</span><span class="s">""</span><span class="m">046029400</span><span class="s">""</span>
        <span class="p">}</span>
      <span class="p">}</span><span class="s">");
</span>
      <span class="n">IRestResponse</span> <span class="n">response</span> <span class="p">=</span> <span class="n">client</span><span class="p">.</span><span class="nf">Execute</span><span class="p">(</span><span class="n">request</span><span class="p">);</span>

      <span class="n">Console</span><span class="p">.</span><span class="nf">WriteLine</span><span class="p">(</span><span class="n">response</span><span class="p">.</span><span class="n">Content</span><span class="p">);</span>
      <span class="n">Console</span><span class="p">.</span><span class="nf">ReadLine</span><span class="p">();</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">}</span>
</code></pre>
<p>Esta operación debe ser utilizada para corregir comprobantes NO AUTORIZADOS o DEVUELTOS por el Servicio de Rentas Internas.</p>

<p>En la URL de esta opción se debe incluir el id de la retención recibida al momento de emitirla.</p>

<p>El cuerpo del requerimiento es un objeto retención con los datos corregidos para que pueda ser procesado y autorizado.</p>
<h3 id='respuesta-3'>Respuesta</h3>
<blockquote>
<h4 id='respuesta-de-ejemplo-4'>Respuesta de ejemplo</h4></blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"abcdef09876123cea56784f01"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"ambiente"</span><span class="p">:</span><span class="mi">1</span><span class="p">,</span><span class="w">
  </span><span class="s2">"tipo_emision"</span><span class="p">:</span><span class="mi">1</span><span class="p">,</span><span class="w">
  </span><span class="s2">"secuencial"</span><span class="p">:</span><span class="mi">148</span><span class="p">,</span><span class="w">
  </span><span class="s2">"fecha_emision"</span><span class="p">:</span><span class="s2">"2015-02-28T11:28:56.782Z"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"clave_acceso"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2802201501091000000000120010010000100451993736618"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"emisor"</span><span class="p">:{</span><span class="w">
    </span><span class="s2">"ruc"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0910000000001"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"obligado_contabilidad"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
    </span><span class="s2">"contribuyente_especial"</span><span class="p">:</span><span class="w"> </span><span class="s2">"12345"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"nombre_comercial"</span><span class="p">:</span><span class="w"> </span><span class="s2">"XYZ Corp"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"razon_social"</span><span class="p">:</span><span class="w"> </span><span class="s2">"XYZ Corporación S.A."</span><span class="p">,</span><span class="w">
    </span><span class="s2">"direccion"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Av. Primera 234 y calle 5ta"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"establecimiento"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="s2">"punto_emision"</span><span class="p">:</span><span class="w"> </span><span class="s2">"002"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"codigo"</span><span class="p">:</span><span class="w"> </span><span class="s2">"001"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"direccion"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Av. Primera 234 y calle 5ta"</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="s2">"moneda"</span><span class="p">:</span><span class="w"> </span><span class="s2">"USD"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"informacion_adicional"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"Tiempo de entrega"</span><span class="p">:</span><span class="w"> </span><span class="s2">"5 días"</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="s2">"totales"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"total_sin_impuestos"</span><span class="p">:</span><span class="w"> </span><span class="mf">120.89</span><span class="p">,</span><span class="w">
    </span><span class="s2">"impuestos"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
      </span><span class="p">{</span><span class="w">
        </span><span class="s2">"base_imponible"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.0</span><span class="p">,</span><span class="w">
        </span><span class="s2">"valor"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.0</span><span class="p">,</span><span class="w">
        </span><span class="s2">"codigo"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"codigo_porcentaje"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"tarifa"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.0</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="p">{</span><span class="w">
        </span><span class="s2">"base_imponible"</span><span class="p">:</span><span class="w"> </span><span class="mf">120.89</span><span class="p">,</span><span class="w">
        </span><span class="s2">"valor"</span><span class="p">:</span><span class="w"> </span><span class="mf">14.51</span><span class="p">,</span><span class="w">
        </span><span class="s2">"codigo"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"codigo_porcentaje"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"tarifa"</span><span class="p">:</span><span class="w"> </span><span class="mf">12.0</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">],</span><span class="w">
    </span><span class="s2">"importe_total"</span><span class="p">:</span><span class="w"> </span><span class="mf">135.4</span><span class="p">,</span><span class="w">
    </span><span class="s2">"propina"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.0</span><span class="p">,</span><span class="w">
    </span><span class="s2">"descuento"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.0</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="s2">"comprador"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"email"</span><span class="p">:</span><span class="w"> </span><span class="s2">"juan.perez@xyz.com"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"identificacion"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0987654321"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"tipo_identificacion"</span><span class="p">:</span><span class="w"> </span><span class="s2">"05"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"razon_social"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Juan Pérez"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"direccion"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Calle única Numero 987"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"telefono"</span><span class="p">:</span><span class="w"> </span><span class="s2">"046029400"</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="s2">"items"</span><span class="p">:[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="s2">"cantidad"</span><span class="p">:</span><span class="w"> </span><span class="mf">622.0</span><span class="p">,</span><span class="w">
      </span><span class="s2">"codigo_principal"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ZNC"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"codigo_auxiliar"</span><span class="p">:</span><span class="w"> </span><span class="s2">"050"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"precio_unitario"</span><span class="p">:</span><span class="w"> </span><span class="mf">7.01</span><span class="p">,</span><span class="w">
      </span><span class="s2">"descripcion"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Zanahoria granel  50 Kg."</span><span class="p">,</span><span class="w">
      </span><span class="s2">"precio_total_sin_impuestos"</span><span class="p">:</span><span class="w"> </span><span class="mf">4360.22</span><span class="p">,</span><span class="w">
      </span><span class="s2">"impuestos"</span><span class="p">:[</span><span class="w">
        </span><span class="p">{</span><span class="w">
          </span><span class="s2">"base_imponible"</span><span class="p">:</span><span class="w"> </span><span class="mf">120.89</span><span class="p">,</span><span class="w">
          </span><span class="s2">"valor"</span><span class="p">:</span><span class="w"> </span><span class="mf">14.51</span><span class="p">,</span><span class="w">
          </span><span class="s2">"tarifa"</span><span class="p">:</span><span class="w"> </span><span class="mf">12.0</span><span class="p">,</span><span class="w">
          </span><span class="s2">"codigo"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"codigo_porcentaje"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2"</span><span class="w">
        </span><span class="p">}</span><span class="w">
      </span><span class="p">],</span><span class="w">
      </span><span class="s2">"detalles_adicionales"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"Peso"</span><span class="p">:</span><span class="w"> </span><span class="s2">"5000.0000"</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="s2">"descuento"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.0</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>Retorna un objeto tipo <strong><a href="#requerimiento-retencion">retención</a></strong> que incluye un nuevo parámetro <code>id</code>,
el cual identifica de manera única a la retención. El campo <code>clave_acceso</code>
generado también se incluirá como parte de la respuesta. Sí el comprobante de retención ya está autorizada se retornará un error.</p>
